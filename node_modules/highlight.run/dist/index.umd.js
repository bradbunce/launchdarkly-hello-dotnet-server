(function(k,B){typeof exports=="object"&&typeof module!="undefined"?B(exports):typeof define=="function"&&define.amd?define(["exports"],B):(k=typeof globalThis!="undefined"?globalThis:k||self,B(k.LD={}))})(this,function(k){"use strict";var mk=Object.defineProperty,gk=Object.defineProperties;var yk=Object.getOwnPropertyDescriptors;var Uo=Object.getOwnPropertySymbols;var rv=Object.prototype.hasOwnProperty,nv=Object.prototype.propertyIsEnumerable;var Ku=(k,B)=>(B=Symbol[k])?B:Symbol.for("Symbol."+k),bk=k=>{throw TypeError(k)};var zu=(k,B,fe)=>B in k?mk(k,B,{enumerable:!0,configurable:!0,writable:!0,value:fe}):k[B]=fe,S=(k,B)=>{for(var fe in B||(B={}))rv.call(B,fe)&&zu(k,fe,B[fe]);if(Uo)for(var fe of Uo(B))nv.call(B,fe)&&zu(k,fe,B[fe]);return k},W=(k,B)=>gk(k,yk(B));var We=(k,B)=>{var fe={};for(var Ee in k)rv.call(k,Ee)&&B.indexOf(Ee)<0&&(fe[Ee]=k[Ee]);if(k!=null&&Uo)for(var Ee of Uo(k))B.indexOf(Ee)<0&&nv.call(k,Ee)&&(fe[Ee]=k[Ee]);return fe};var v=(k,B,fe)=>zu(k,typeof B!="symbol"?B+"":B,fe);var D=(k,B,fe)=>new Promise((Ee,$e)=>{var Ae=qe=>{try{sr(fe.next(qe))}catch(or){$e(or)}},Lt=qe=>{try{sr(fe.throw(qe))}catch(or){$e(or)}},sr=qe=>qe.done?Ee(qe.value):Promise.resolve(qe.value).then(Ae,Lt);sr((fe=fe.apply(k,B)).next())}),vk=function(k,B){this[0]=k,this[1]=B};var ju=k=>{var B=k[Ku("asyncIterator")],fe=!1,Ee,$e={};return B==null?(B=k[Ku("iterator")](),Ee=Ae=>$e[Ae]=Lt=>B[Ae](Lt)):(B=B.call(k),Ee=Ae=>$e[Ae]=Lt=>{if(fe){if(fe=!1,Ae==="throw")throw Lt;return Lt}return fe=!0,{done:!1,value:new vk(new Promise(sr=>{var qe=B[Ae](Lt);qe instanceof Object||bk("Object expected"),sr(qe)}),1)}}),$e[Ku("iterator")]=()=>$e,Ee("next"),"throw"in B?Ee("throw"):$e.throw=Ae=>{throw Ae},"return"in B&&Ee("return"),$e};function B(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}const fe={key:"_sid"},Ee="rrweb/sequential-id@1",$e=r=>{const e=fe;let t=0;return{name:Ee,eventProcessor(n){return Object.assign(n,{[e.key]:++t}),n},options:e}};function Ae(r,e){if(!!!r)throw new Error(e)}function Lt(r){return typeof r=="object"&&r!==null}function sr(r,e){if(!!!r)throw new Error("Unexpected invariant triggered.")}const qe=/\r\n|[\n\r]/g;function or(r,e){let t=0,n=1;for(const i of r.body.matchAll(qe)){if(typeof i.index=="number"||sr(!1),i.index>=e)break;t=i.index+i[0].length,n+=1}return{line:n,column:e+1-t}}function uv(r){return Qu(r.source,or(r.source,r.start))}function Qu(r,e){const t=r.locationOffset.column-1,n="".padStart(t)+r.body,i=e.line-1,s=r.locationOffset.line-1,o=e.line+s,a=e.line===1?t:0,l=e.column+a,c=`${r.name}:${o}:${l}
`,u=n.split(/\r\n|[\n\r]/g),d=u[i];if(d.length>120){const h=Math.floor(l/80),f=l%80,m=[];for(let p=0;p<d.length;p+=80)m.push(d.slice(p,p+80));return c+$u([[`${o} |`,m[0]],...m.slice(1,h+1).map(p=>["|",p]),["|","^".padStart(f)],["|",m[h+1]]])}return c+$u([[`${o-1} |`,u[i-1]],[`${o} |`,d],["|","^".padStart(l)],[`${o+1} |`,u[i+1]]])}function $u(r){const e=r.filter(([n,i])=>i!==void 0),t=Math.max(...e.map(([n])=>n.length));return e.map(([n,i])=>n.padStart(t)+(i?" "+i:"")).join(`
`)}function dv(r){const e=r[0];return e==null||"kind"in e||"length"in e?{nodes:e,source:r[1],positions:r[2],path:r[3],originalError:r[4],extensions:r[5]}:e}class Fo extends Error{constructor(e,...t){var n,i,s;const{nodes:o,source:a,positions:l,path:c,originalError:u,extensions:d}=dv(t);super(e),this.name="GraphQLError",this.path=c!=null?c:void 0,this.originalError=u!=null?u:void 0,this.nodes=qu(Array.isArray(o)?o:o?[o]:void 0);const h=qu((n=this.nodes)===null||n===void 0?void 0:n.map(m=>m.loc).filter(m=>m!=null));this.source=a!=null?a:h==null||(i=h[0])===null||i===void 0?void 0:i.source,this.positions=l!=null?l:h==null?void 0:h.map(m=>m.start),this.locations=l&&a?l.map(m=>or(a,m)):h==null?void 0:h.map(m=>or(m.source,m.start));const f=Lt(u==null?void 0:u.extensions)?u==null?void 0:u.extensions:void 0;this.extensions=(s=d!=null?d:f)!==null&&s!==void 0?s:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),u!=null&&u.stack?Object.defineProperty(this,"stack",{value:u.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,Fo):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let e=this.message;if(this.nodes)for(const t of this.nodes)t.loc&&(e+=`

`+uv(t.loc));else if(this.source&&this.locations)for(const t of this.locations)e+=`

`+Qu(this.source,t);return e}toJSON(){const e={message:this.message};return this.locations!=null&&(e.locations=this.locations),this.path!=null&&(e.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(e.extensions=this.extensions),e}}function qu(r){return r===void 0||r.length===0?void 0:r}function Re(r,e,t){return new Fo(`Syntax Error: ${t}`,{source:r,positions:[e]})}class hv{constructor(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class ed{constructor(e,t,n,i,s,o){this.kind=e,this.start=t,this.end=n,this.line=i,this.column=s,this.value=o,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const td={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},fv=new Set(Object.keys(td));function rd(r){const e=r==null?void 0:r.kind;return typeof e=="string"&&fv.has(e)}var Nr;(function(r){r.QUERY="query",r.MUTATION="mutation",r.SUBSCRIPTION="subscription"})(Nr||(Nr={}));var Do;(function(r){r.QUERY="QUERY",r.MUTATION="MUTATION",r.SUBSCRIPTION="SUBSCRIPTION",r.FIELD="FIELD",r.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",r.FRAGMENT_SPREAD="FRAGMENT_SPREAD",r.INLINE_FRAGMENT="INLINE_FRAGMENT",r.VARIABLE_DEFINITION="VARIABLE_DEFINITION",r.SCHEMA="SCHEMA",r.SCALAR="SCALAR",r.OBJECT="OBJECT",r.FIELD_DEFINITION="FIELD_DEFINITION",r.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",r.INTERFACE="INTERFACE",r.UNION="UNION",r.ENUM="ENUM",r.ENUM_VALUE="ENUM_VALUE",r.INPUT_OBJECT="INPUT_OBJECT",r.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"})(Do||(Do={}));var U;(function(r){r.NAME="Name",r.DOCUMENT="Document",r.OPERATION_DEFINITION="OperationDefinition",r.VARIABLE_DEFINITION="VariableDefinition",r.SELECTION_SET="SelectionSet",r.FIELD="Field",r.ARGUMENT="Argument",r.FRAGMENT_SPREAD="FragmentSpread",r.INLINE_FRAGMENT="InlineFragment",r.FRAGMENT_DEFINITION="FragmentDefinition",r.VARIABLE="Variable",r.INT="IntValue",r.FLOAT="FloatValue",r.STRING="StringValue",r.BOOLEAN="BooleanValue",r.NULL="NullValue",r.ENUM="EnumValue",r.LIST="ListValue",r.OBJECT="ObjectValue",r.OBJECT_FIELD="ObjectField",r.DIRECTIVE="Directive",r.NAMED_TYPE="NamedType",r.LIST_TYPE="ListType",r.NON_NULL_TYPE="NonNullType",r.SCHEMA_DEFINITION="SchemaDefinition",r.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",r.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",r.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",r.FIELD_DEFINITION="FieldDefinition",r.INPUT_VALUE_DEFINITION="InputValueDefinition",r.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",r.UNION_TYPE_DEFINITION="UnionTypeDefinition",r.ENUM_TYPE_DEFINITION="EnumTypeDefinition",r.ENUM_VALUE_DEFINITION="EnumValueDefinition",r.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",r.DIRECTIVE_DEFINITION="DirectiveDefinition",r.SCHEMA_EXTENSION="SchemaExtension",r.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",r.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",r.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",r.UNION_TYPE_EXTENSION="UnionTypeExtension",r.ENUM_TYPE_EXTENSION="EnumTypeExtension",r.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(U||(U={}));function Jo(r){return r===9||r===32}function pn(r){return r>=48&&r<=57}function nd(r){return r>=97&&r<=122||r>=65&&r<=90}function id(r){return nd(r)||r===95}function pv(r){return nd(r)||pn(r)||r===95}function mv(r){var e;let t=Number.MAX_SAFE_INTEGER,n=null,i=-1;for(let o=0;o<r.length;++o){var s;const a=r[o],l=gv(a);l!==a.length&&(n=(s=n)!==null&&s!==void 0?s:o,i=o,o!==0&&l<t&&(t=l))}return r.map((o,a)=>a===0?o:o.slice(t)).slice((e=n)!==null&&e!==void 0?e:0,i+1)}function gv(r){let e=0;for(;e<r.length&&Jo(r.charCodeAt(e));)++e;return e}function yv(r,e){const t=r.replace(/"""/g,'\\"""'),n=t.split(/\r\n|[\n\r]/g),i=n.length===1,s=n.length>1&&n.slice(1).every(f=>f.length===0||Jo(f.charCodeAt(0))),o=t.endsWith('\\"""'),a=r.endsWith('"')&&!o,l=r.endsWith("\\"),c=a||l,u=!i||r.length>70||c||s||o;let d="";const h=i&&Jo(r.charCodeAt(0));return(u&&!h||s)&&(d+=`
`),d+=t,(u||c)&&(d+=`
`),'"""'+d+'"""'}var C;(function(r){r.SOF="<SOF>",r.EOF="<EOF>",r.BANG="!",r.DOLLAR="$",r.AMP="&",r.PAREN_L="(",r.PAREN_R=")",r.SPREAD="...",r.COLON=":",r.EQUALS="=",r.AT="@",r.BRACKET_L="[",r.BRACKET_R="]",r.BRACE_L="{",r.PIPE="|",r.BRACE_R="}",r.NAME="Name",r.INT="Int",r.FLOAT="Float",r.STRING="String",r.BLOCK_STRING="BlockString",r.COMMENT="Comment"})(C||(C={}));class bv{constructor(e){const t=new ed(C.SOF,0,0,0,0);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let e=this.token;if(e.kind!==C.EOF)do if(e.next)e=e.next;else{const t=Sv(this,e.end);e.next=t,t.prev=e,e=t}while(e.kind===C.COMMENT);return e}}function vv(r){return r===C.BANG||r===C.DOLLAR||r===C.AMP||r===C.PAREN_L||r===C.PAREN_R||r===C.SPREAD||r===C.COLON||r===C.EQUALS||r===C.AT||r===C.BRACKET_L||r===C.BRACKET_R||r===C.BRACE_L||r===C.PIPE||r===C.BRACE_R}function Gr(r){return r>=0&&r<=55295||r>=57344&&r<=1114111}function Li(r,e){return sd(r.charCodeAt(e))&&od(r.charCodeAt(e+1))}function sd(r){return r>=55296&&r<=56319}function od(r){return r>=56320&&r<=57343}function ar(r,e){const t=r.source.body.codePointAt(e);if(t===void 0)return C.EOF;if(t>=32&&t<=126){const n=String.fromCodePoint(t);return n==='"'?`'"'`:`"${n}"`}return"U+"+t.toString(16).toUpperCase().padStart(4,"0")}function Te(r,e,t,n,i){const s=r.line,o=1+t-r.lineStart;return new ed(e,t,n,s,o,i)}function Sv(r,e){const t=r.source.body,n=t.length;let i=e;for(;i<n;){const s=t.charCodeAt(i);switch(s){case 65279:case 9:case 32:case 44:++i;continue;case 10:++i,++r.line,r.lineStart=i;continue;case 13:t.charCodeAt(i+1)===10?i+=2:++i,++r.line,r.lineStart=i;continue;case 35:return _v(r,i);case 33:return Te(r,C.BANG,i,i+1);case 36:return Te(r,C.DOLLAR,i,i+1);case 38:return Te(r,C.AMP,i,i+1);case 40:return Te(r,C.PAREN_L,i,i+1);case 41:return Te(r,C.PAREN_R,i,i+1);case 46:if(t.charCodeAt(i+1)===46&&t.charCodeAt(i+2)===46)return Te(r,C.SPREAD,i,i+3);break;case 58:return Te(r,C.COLON,i,i+1);case 61:return Te(r,C.EQUALS,i,i+1);case 64:return Te(r,C.AT,i,i+1);case 91:return Te(r,C.BRACKET_L,i,i+1);case 93:return Te(r,C.BRACKET_R,i,i+1);case 123:return Te(r,C.BRACE_L,i,i+1);case 124:return Te(r,C.PIPE,i,i+1);case 125:return Te(r,C.BRACE_R,i,i+1);case 34:return t.charCodeAt(i+1)===34&&t.charCodeAt(i+2)===34?Cv(r,i):Ev(r,i)}if(pn(s)||s===45)return Tv(r,i,s);if(id(s))return Lv(r,i);throw Re(r.source,i,s===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:Gr(s)||Li(t,i)?`Unexpected character: ${ar(r,i)}.`:`Invalid character: ${ar(r,i)}.`)}return Te(r,C.EOF,n,n)}function _v(r,e){const t=r.source.body,n=t.length;let i=e+1;for(;i<n;){const s=t.charCodeAt(i);if(s===10||s===13)break;if(Gr(s))++i;else if(Li(t,i))i+=2;else break}return Te(r,C.COMMENT,e,i,t.slice(e+1,i))}function Tv(r,e,t){const n=r.source.body;let i=e,s=t,o=!1;if(s===45&&(s=n.charCodeAt(++i)),s===48){if(s=n.charCodeAt(++i),pn(s))throw Re(r.source,i,`Invalid number, unexpected digit after 0: ${ar(r,i)}.`)}else i=Yo(r,i,s),s=n.charCodeAt(i);if(s===46&&(o=!0,s=n.charCodeAt(++i),i=Yo(r,i,s),s=n.charCodeAt(i)),(s===69||s===101)&&(o=!0,s=n.charCodeAt(++i),(s===43||s===45)&&(s=n.charCodeAt(++i)),i=Yo(r,i,s),s=n.charCodeAt(i)),s===46||id(s))throw Re(r.source,i,`Invalid number, expected digit but got: ${ar(r,i)}.`);return Te(r,o?C.FLOAT:C.INT,e,i,n.slice(e,i))}function Yo(r,e,t){if(!pn(t))throw Re(r.source,e,`Invalid number, expected digit but got: ${ar(r,e)}.`);const n=r.source.body;let i=e+1;for(;pn(n.charCodeAt(i));)++i;return i}function Ev(r,e){const t=r.source.body,n=t.length;let i=e+1,s=i,o="";for(;i<n;){const a=t.charCodeAt(i);if(a===34)return o+=t.slice(s,i),Te(r,C.STRING,e,i+1,o);if(a===92){o+=t.slice(s,i);const l=t.charCodeAt(i+1)===117?t.charCodeAt(i+2)===123?wv(r,i):Rv(r,i):Iv(r,i);o+=l.value,i+=l.size,s=i;continue}if(a===10||a===13)break;if(Gr(a))++i;else if(Li(t,i))i+=2;else throw Re(r.source,i,`Invalid character within String: ${ar(r,i)}.`)}throw Re(r.source,i,"Unterminated string.")}function wv(r,e){const t=r.source.body;let n=0,i=3;for(;i<12;){const s=t.charCodeAt(e+i++);if(s===125){if(i<5||!Gr(n))break;return{value:String.fromCodePoint(n),size:i}}if(n=n<<4|mn(s),n<0)break}throw Re(r.source,e,`Invalid Unicode escape sequence: "${t.slice(e,e+i)}".`)}function Rv(r,e){const t=r.source.body,n=ad(t,e+2);if(Gr(n))return{value:String.fromCodePoint(n),size:6};if(sd(n)&&t.charCodeAt(e+6)===92&&t.charCodeAt(e+7)===117){const i=ad(t,e+8);if(od(i))return{value:String.fromCodePoint(n,i),size:12}}throw Re(r.source,e,`Invalid Unicode escape sequence: "${t.slice(e,e+6)}".`)}function ad(r,e){return mn(r.charCodeAt(e))<<12|mn(r.charCodeAt(e+1))<<8|mn(r.charCodeAt(e+2))<<4|mn(r.charCodeAt(e+3))}function mn(r){return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:-1}function Iv(r,e){const t=r.source.body;switch(t.charCodeAt(e+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw Re(r.source,e,`Invalid character escape sequence: "${t.slice(e,e+2)}".`)}function Cv(r,e){const t=r.source.body,n=t.length;let i=r.lineStart,s=e+3,o=s,a="";const l=[];for(;s<n;){const c=t.charCodeAt(s);if(c===34&&t.charCodeAt(s+1)===34&&t.charCodeAt(s+2)===34){a+=t.slice(o,s),l.push(a);const u=Te(r,C.BLOCK_STRING,e,s+3,mv(l).join(`
`));return r.line+=l.length-1,r.lineStart=i,u}if(c===92&&t.charCodeAt(s+1)===34&&t.charCodeAt(s+2)===34&&t.charCodeAt(s+3)===34){a+=t.slice(o,s),o=s+1,s+=4;continue}if(c===10||c===13){a+=t.slice(o,s),l.push(a),c===13&&t.charCodeAt(s+1)===10?s+=2:++s,a="",o=s,i=s;continue}if(Gr(c))++s;else if(Li(t,s))s+=2;else throw Re(r.source,s,`Invalid character within String: ${ar(r,s)}.`)}throw Re(r.source,s,"Unterminated string.")}function Lv(r,e){const t=r.source.body,n=t.length;let i=e+1;for(;i<n;){const s=t.charCodeAt(i);if(pv(s))++i;else break}return Te(r,C.NAME,e,i,t.slice(e,i))}const Ov=10,ld=2;function Ho(r){return Oi(r,[])}function Oi(r,e){switch(typeof r){case"string":return JSON.stringify(r);case"function":return r.name?`[function ${r.name}]`:"[function]";case"object":return Zv(r,e);default:return String(r)}}function Zv(r,e){if(r===null)return"null";if(e.includes(r))return"[Circular]";const t=[...e,r];if(Nv(r)){const n=r.toJSON();if(n!==r)return typeof n=="string"?n:Oi(n,t)}else if(Array.isArray(r))return Vv(r,t);return Gv(r,t)}function Nv(r){return typeof r.toJSON=="function"}function Gv(r,e){const t=Object.entries(r);return t.length===0?"{}":e.length>ld?"["+xv(r)+"]":"{ "+t.map(([i,s])=>i+": "+Oi(s,e)).join(", ")+" }"}function Vv(r,e){if(r.length===0)return"[]";if(e.length>ld)return"[Array]";const t=Math.min(Ov,r.length),n=r.length-t,i=[];for(let s=0;s<t;++s)i.push(Oi(r[s],e));return n===1?i.push("... 1 more item"):n>1&&i.push(`... ${n} more items`),"["+i.join(", ")+"]"}function xv(r){const e=Object.prototype.toString.call(r).replace(/^\[object /,"").replace(/]$/,"");if(e==="Object"&&typeof r.constructor=="function"){const t=r.constructor.name;if(typeof t=="string"&&t!=="")return t}return e}const Xv=globalThis.process&&process.env.NODE_ENV==="production"?function(e,t){return e instanceof t}:function(e,t){if(e instanceof t)return!0;if(typeof e=="object"&&e!==null){var n;const i=t.prototype[Symbol.toStringTag],s=Symbol.toStringTag in e?e[Symbol.toStringTag]:(n=e.constructor)===null||n===void 0?void 0:n.name;if(i===s){const o=Ho(e);throw new Error(`Cannot use ${i} "${o}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`)}}return!1};class cd{constructor(e,t="GraphQL request",n={line:1,column:1}){typeof e=="string"||Ae(!1,`Body must be a string. Received: ${Ho(e)}.`),this.body=e,this.name=t,this.locationOffset=n,this.locationOffset.line>0||Ae(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||Ae(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function kv(r){return Xv(r,cd)}function ud(r,e){const t=new Wv(r,e),n=t.parseDocument();return Object.defineProperty(n,"tokenCount",{enumerable:!1,value:t.tokenCount}),n}class Wv{constructor(e,t={}){const n=kv(e)?e:new cd(e);this._lexer=new bv(n),this._options=t,this._tokenCounter=0}get tokenCount(){return this._tokenCounter}parseName(){const e=this.expectToken(C.NAME);return this.node(e,{kind:U.NAME,value:e.value})}parseDocument(){return this.node(this._lexer.token,{kind:U.DOCUMENT,definitions:this.many(C.SOF,this.parseDefinition,C.EOF)})}parseDefinition(){if(this.peek(C.BRACE_L))return this.parseOperationDefinition();const e=this.peekDescription(),t=e?this._lexer.lookahead():this._lexer.token;if(t.kind===C.NAME){switch(t.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(e)throw Re(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(t.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(t)}parseOperationDefinition(){const e=this._lexer.token;if(this.peek(C.BRACE_L))return this.node(e,{kind:U.OPERATION_DEFINITION,operation:Nr.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const t=this.parseOperationType();let n;return this.peek(C.NAME)&&(n=this.parseName()),this.node(e,{kind:U.OPERATION_DEFINITION,operation:t,name:n,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const e=this.expectToken(C.NAME);switch(e.value){case"query":return Nr.QUERY;case"mutation":return Nr.MUTATION;case"subscription":return Nr.SUBSCRIPTION}throw this.unexpected(e)}parseVariableDefinitions(){return this.optionalMany(C.PAREN_L,this.parseVariableDefinition,C.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:U.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(C.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(C.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const e=this._lexer.token;return this.expectToken(C.DOLLAR),this.node(e,{kind:U.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:U.SELECTION_SET,selections:this.many(C.BRACE_L,this.parseSelection,C.BRACE_R)})}parseSelection(){return this.peek(C.SPREAD)?this.parseFragment():this.parseField()}parseField(){const e=this._lexer.token,t=this.parseName();let n,i;return this.expectOptionalToken(C.COLON)?(n=t,i=this.parseName()):i=t,this.node(e,{kind:U.FIELD,alias:n,name:i,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(C.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(e){const t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(C.PAREN_L,t,C.PAREN_R)}parseArgument(e=!1){const t=this._lexer.token,n=this.parseName();return this.expectToken(C.COLON),this.node(t,{kind:U.ARGUMENT,name:n,value:this.parseValueLiteral(e)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const e=this._lexer.token;this.expectToken(C.SPREAD);const t=this.expectOptionalKeyword("on");return!t&&this.peek(C.NAME)?this.node(e,{kind:U.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(e,{kind:U.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const e=this._lexer.token;return this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0?this.node(e,{kind:U.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(e,{kind:U.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(e){const t=this._lexer.token;switch(t.kind){case C.BRACKET_L:return this.parseList(e);case C.BRACE_L:return this.parseObject(e);case C.INT:return this.advanceLexer(),this.node(t,{kind:U.INT,value:t.value});case C.FLOAT:return this.advanceLexer(),this.node(t,{kind:U.FLOAT,value:t.value});case C.STRING:case C.BLOCK_STRING:return this.parseStringLiteral();case C.NAME:switch(this.advanceLexer(),t.value){case"true":return this.node(t,{kind:U.BOOLEAN,value:!0});case"false":return this.node(t,{kind:U.BOOLEAN,value:!1});case"null":return this.node(t,{kind:U.NULL});default:return this.node(t,{kind:U.ENUM,value:t.value})}case C.DOLLAR:if(e)if(this.expectToken(C.DOLLAR),this._lexer.token.kind===C.NAME){const n=this._lexer.token.value;throw Re(this._lexer.source,t.start,`Unexpected variable "$${n}" in constant value.`)}else throw this.unexpected(t);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const e=this._lexer.token;return this.advanceLexer(),this.node(e,{kind:U.STRING,value:e.value,block:e.kind===C.BLOCK_STRING})}parseList(e){const t=()=>this.parseValueLiteral(e);return this.node(this._lexer.token,{kind:U.LIST,values:this.any(C.BRACKET_L,t,C.BRACKET_R)})}parseObject(e){const t=()=>this.parseObjectField(e);return this.node(this._lexer.token,{kind:U.OBJECT,fields:this.any(C.BRACE_L,t,C.BRACE_R)})}parseObjectField(e){const t=this._lexer.token,n=this.parseName();return this.expectToken(C.COLON),this.node(t,{kind:U.OBJECT_FIELD,name:n,value:this.parseValueLiteral(e)})}parseDirectives(e){const t=[];for(;this.peek(C.AT);)t.push(this.parseDirective(e));return t}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(e){const t=this._lexer.token;return this.expectToken(C.AT),this.node(t,{kind:U.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e)})}parseTypeReference(){const e=this._lexer.token;let t;if(this.expectOptionalToken(C.BRACKET_L)){const n=this.parseTypeReference();this.expectToken(C.BRACKET_R),t=this.node(e,{kind:U.LIST_TYPE,type:n})}else t=this.parseNamedType();return this.expectOptionalToken(C.BANG)?this.node(e,{kind:U.NON_NULL_TYPE,type:t}):t}parseNamedType(){return this.node(this._lexer.token,{kind:U.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(C.STRING)||this.peek(C.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");const n=this.parseConstDirectives(),i=this.many(C.BRACE_L,this.parseOperationTypeDefinition,C.BRACE_R);return this.node(e,{kind:U.SCHEMA_DEFINITION,description:t,directives:n,operationTypes:i})}parseOperationTypeDefinition(){const e=this._lexer.token,t=this.parseOperationType();this.expectToken(C.COLON);const n=this.parseNamedType();return this.node(e,{kind:U.OPERATION_TYPE_DEFINITION,operation:t,type:n})}parseScalarTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");const n=this.parseName(),i=this.parseConstDirectives();return this.node(e,{kind:U.SCALAR_TYPE_DEFINITION,description:t,name:n,directives:i})}parseObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");const n=this.parseName(),i=this.parseImplementsInterfaces(),s=this.parseConstDirectives(),o=this.parseFieldsDefinition();return this.node(e,{kind:U.OBJECT_TYPE_DEFINITION,description:t,name:n,interfaces:i,directives:s,fields:o})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(C.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(C.BRACE_L,this.parseFieldDefinition,C.BRACE_R)}parseFieldDefinition(){const e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),i=this.parseArgumentDefs();this.expectToken(C.COLON);const s=this.parseTypeReference(),o=this.parseConstDirectives();return this.node(e,{kind:U.FIELD_DEFINITION,description:t,name:n,arguments:i,type:s,directives:o})}parseArgumentDefs(){return this.optionalMany(C.PAREN_L,this.parseInputValueDef,C.PAREN_R)}parseInputValueDef(){const e=this._lexer.token,t=this.parseDescription(),n=this.parseName();this.expectToken(C.COLON);const i=this.parseTypeReference();let s;this.expectOptionalToken(C.EQUALS)&&(s=this.parseConstValueLiteral());const o=this.parseConstDirectives();return this.node(e,{kind:U.INPUT_VALUE_DEFINITION,description:t,name:n,type:i,defaultValue:s,directives:o})}parseInterfaceTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");const n=this.parseName(),i=this.parseImplementsInterfaces(),s=this.parseConstDirectives(),o=this.parseFieldsDefinition();return this.node(e,{kind:U.INTERFACE_TYPE_DEFINITION,description:t,name:n,interfaces:i,directives:s,fields:o})}parseUnionTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");const n=this.parseName(),i=this.parseConstDirectives(),s=this.parseUnionMemberTypes();return this.node(e,{kind:U.UNION_TYPE_DEFINITION,description:t,name:n,directives:i,types:s})}parseUnionMemberTypes(){return this.expectOptionalToken(C.EQUALS)?this.delimitedMany(C.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");const n=this.parseName(),i=this.parseConstDirectives(),s=this.parseEnumValuesDefinition();return this.node(e,{kind:U.ENUM_TYPE_DEFINITION,description:t,name:n,directives:i,values:s})}parseEnumValuesDefinition(){return this.optionalMany(C.BRACE_L,this.parseEnumValueDefinition,C.BRACE_R)}parseEnumValueDefinition(){const e=this._lexer.token,t=this.parseDescription(),n=this.parseEnumValueName(),i=this.parseConstDirectives();return this.node(e,{kind:U.ENUM_VALUE_DEFINITION,description:t,name:n,directives:i})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw Re(this._lexer.source,this._lexer.token.start,`${Zi(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");const n=this.parseName(),i=this.parseConstDirectives(),s=this.parseInputFieldsDefinition();return this.node(e,{kind:U.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:n,directives:i,fields:s})}parseInputFieldsDefinition(){return this.optionalMany(C.BRACE_L,this.parseInputValueDef,C.BRACE_R)}parseTypeSystemExtension(){const e=this._lexer.lookahead();if(e.kind===C.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)}parseSchemaExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const t=this.parseConstDirectives(),n=this.optionalMany(C.BRACE_L,this.parseOperationTypeDefinition,C.BRACE_R);if(t.length===0&&n.length===0)throw this.unexpected();return this.node(e,{kind:U.SCHEMA_EXTENSION,directives:t,operationTypes:n})}parseScalarTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const t=this.parseName(),n=this.parseConstDirectives();if(n.length===0)throw this.unexpected();return this.node(e,{kind:U.SCALAR_TYPE_EXTENSION,name:t,directives:n})}parseObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const t=this.parseName(),n=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),s=this.parseFieldsDefinition();if(n.length===0&&i.length===0&&s.length===0)throw this.unexpected();return this.node(e,{kind:U.OBJECT_TYPE_EXTENSION,name:t,interfaces:n,directives:i,fields:s})}parseInterfaceTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const t=this.parseName(),n=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),s=this.parseFieldsDefinition();if(n.length===0&&i.length===0&&s.length===0)throw this.unexpected();return this.node(e,{kind:U.INTERFACE_TYPE_EXTENSION,name:t,interfaces:n,directives:i,fields:s})}parseUnionTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const t=this.parseName(),n=this.parseConstDirectives(),i=this.parseUnionMemberTypes();if(n.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:U.UNION_TYPE_EXTENSION,name:t,directives:n,types:i})}parseEnumTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const t=this.parseName(),n=this.parseConstDirectives(),i=this.parseEnumValuesDefinition();if(n.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:U.ENUM_TYPE_EXTENSION,name:t,directives:n,values:i})}parseInputObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const t=this.parseName(),n=this.parseConstDirectives(),i=this.parseInputFieldsDefinition();if(n.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:U.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:n,fields:i})}parseDirectiveDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(C.AT);const n=this.parseName(),i=this.parseArgumentDefs(),s=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const o=this.parseDirectiveLocations();return this.node(e,{kind:U.DIRECTIVE_DEFINITION,description:t,name:n,arguments:i,repeatable:s,locations:o})}parseDirectiveLocations(){return this.delimitedMany(C.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const e=this._lexer.token,t=this.parseName();if(Object.prototype.hasOwnProperty.call(Do,t.value))return t;throw this.unexpected(e)}node(e,t){return this._options.noLocation!==!0&&(t.loc=new hv(e,this._lexer.lastToken,this._lexer.source)),t}peek(e){return this._lexer.token.kind===e}expectToken(e){const t=this._lexer.token;if(t.kind===e)return this.advanceLexer(),t;throw Re(this._lexer.source,t.start,`Expected ${dd(e)}, found ${Zi(t)}.`)}expectOptionalToken(e){return this._lexer.token.kind===e?(this.advanceLexer(),!0):!1}expectKeyword(e){const t=this._lexer.token;if(t.kind===C.NAME&&t.value===e)this.advanceLexer();else throw Re(this._lexer.source,t.start,`Expected "${e}", found ${Zi(t)}.`)}expectOptionalKeyword(e){const t=this._lexer.token;return t.kind===C.NAME&&t.value===e?(this.advanceLexer(),!0):!1}unexpected(e){const t=e!=null?e:this._lexer.token;return Re(this._lexer.source,t.start,`Unexpected ${Zi(t)}.`)}any(e,t,n){this.expectToken(e);const i=[];for(;!this.expectOptionalToken(n);)i.push(t.call(this));return i}optionalMany(e,t,n){if(this.expectOptionalToken(e)){const i=[];do i.push(t.call(this));while(!this.expectOptionalToken(n));return i}return[]}many(e,t,n){this.expectToken(e);const i=[];do i.push(t.call(this));while(!this.expectOptionalToken(n));return i}delimitedMany(e,t){this.expectOptionalToken(e);const n=[];do n.push(t.call(this));while(this.expectOptionalToken(e));return n}advanceLexer(){const{maxTokens:e}=this._options,t=this._lexer.advance();if(t.kind!==C.EOF&&(++this._tokenCounter,e!==void 0&&this._tokenCounter>e))throw Re(this._lexer.source,t.start,`Document contains more that ${e} tokens. Parsing aborted.`)}}function Zi(r){const e=r.value;return dd(r.kind)+(e!=null?` "${e}"`:"")}function dd(r){return vv(r)?`"${r}"`:r}function Av(r){return`"${r.replace(Pv,Mv)}"`}const Pv=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function Mv(r){return Uv[r.charCodeAt(0)]}const Uv=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],Fv=Object.freeze({});function Dv(r,e,t=td){const n=new Map;for(const y of Object.values(U))n.set(y,Jv(e,y));let i,s=Array.isArray(r),o=[r],a=-1,l=[],c=r,u,d;const h=[],f=[];do{a++;const y=a===o.length,E=y&&l.length!==0;if(y){if(u=f.length===0?void 0:h[h.length-1],c=d,d=f.pop(),E)if(s){c=c.slice();let I=0;for(const[R,N]of l){const V=R-I;N===null?(c.splice(V,1),I++):c[V]=N}}else{c=S({},c);for(const[I,R]of l)c[I]=R}a=i.index,o=i.keys,l=i.edits,s=i.inArray,i=i.prev}else if(d){if(u=s?a:o[a],c=d[u],c==null)continue;h.push(u)}let T;if(!Array.isArray(c)){var m,p;rd(c)||Ae(!1,`Invalid AST Node: ${Ho(c)}.`);const I=y?(m=n.get(c.kind))===null||m===void 0?void 0:m.leave:(p=n.get(c.kind))===null||p===void 0?void 0:p.enter;if(T=I==null?void 0:I.call(e,c,u,d,h,f),T===Fv)break;if(T===!1){if(!y){h.pop();continue}}else if(T!==void 0&&(l.push([u,T]),!y))if(rd(T))c=T;else{h.pop();continue}}if(T===void 0&&E&&l.push([u,c]),y)h.pop();else{var g;i={inArray:s,index:a,keys:o,edits:l,prev:i},s=Array.isArray(c),o=s?c:(g=t[c.kind])!==null&&g!==void 0?g:[],a=-1,l=[],d&&f.push(d),d=c}}while(i!==void 0);return l.length!==0?l[l.length-1][1]:r}function Jv(r,e){const t=r[e];return typeof t=="object"?t:typeof t=="function"?{enter:t,leave:void 0}:{enter:r.enter,leave:r.leave}}function Bo(r){return Dv(r,Hv)}const Yv=80,Hv={Name:{leave:r=>r.value},Variable:{leave:r=>"$"+r.name},Document:{leave:r=>X(r.definitions,`

`)},OperationDefinition:{leave(r){const e=$("(",X(r.variableDefinitions,", "),")"),t=X([r.operation,X([r.name,e]),X(r.directives," ")]," ");return(t==="query"?"":t+" ")+r.selectionSet}},VariableDefinition:{leave:({variable:r,type:e,defaultValue:t,directives:n})=>r+": "+e+$(" = ",t)+$(" ",X(n," "))},SelectionSet:{leave:({selections:r})=>ut(r)},Field:{leave({alias:r,name:e,arguments:t,directives:n,selectionSet:i}){const s=$("",r,": ")+e;let o=s+$("(",X(t,", "),")");return o.length>Yv&&(o=s+$(`(
`,Ni(X(t,`
`)),`
)`)),X([o,X(n," "),i]," ")}},Argument:{leave:({name:r,value:e})=>r+": "+e},FragmentSpread:{leave:({name:r,directives:e})=>"..."+r+$(" ",X(e," "))},InlineFragment:{leave:({typeCondition:r,directives:e,selectionSet:t})=>X(["...",$("on ",r),X(e," "),t]," ")},FragmentDefinition:{leave:({name:r,typeCondition:e,variableDefinitions:t,directives:n,selectionSet:i})=>`fragment ${r}${$("(",X(t,", "),")")} on ${e} ${$("",X(n," ")," ")}`+i},IntValue:{leave:({value:r})=>r},FloatValue:{leave:({value:r})=>r},StringValue:{leave:({value:r,block:e})=>e?yv(r):Av(r)},BooleanValue:{leave:({value:r})=>r?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:r})=>r},ListValue:{leave:({values:r})=>"["+X(r,", ")+"]"},ObjectValue:{leave:({fields:r})=>"{"+X(r,", ")+"}"},ObjectField:{leave:({name:r,value:e})=>r+": "+e},Directive:{leave:({name:r,arguments:e})=>"@"+r+$("(",X(e,", "),")")},NamedType:{leave:({name:r})=>r},ListType:{leave:({type:r})=>"["+r+"]"},NonNullType:{leave:({type:r})=>r+"!"},SchemaDefinition:{leave:({description:r,directives:e,operationTypes:t})=>$("",r,`
`)+X(["schema",X(e," "),ut(t)]," ")},OperationTypeDefinition:{leave:({operation:r,type:e})=>r+": "+e},ScalarTypeDefinition:{leave:({description:r,name:e,directives:t})=>$("",r,`
`)+X(["scalar",e,X(t," ")]," ")},ObjectTypeDefinition:{leave:({description:r,name:e,interfaces:t,directives:n,fields:i})=>$("",r,`
`)+X(["type",e,$("implements ",X(t," & ")),X(n," "),ut(i)]," ")},FieldDefinition:{leave:({description:r,name:e,arguments:t,type:n,directives:i})=>$("",r,`
`)+e+(hd(t)?$(`(
`,Ni(X(t,`
`)),`
)`):$("(",X(t,", "),")"))+": "+n+$(" ",X(i," "))},InputValueDefinition:{leave:({description:r,name:e,type:t,defaultValue:n,directives:i})=>$("",r,`
`)+X([e+": "+t,$("= ",n),X(i," ")]," ")},InterfaceTypeDefinition:{leave:({description:r,name:e,interfaces:t,directives:n,fields:i})=>$("",r,`
`)+X(["interface",e,$("implements ",X(t," & ")),X(n," "),ut(i)]," ")},UnionTypeDefinition:{leave:({description:r,name:e,directives:t,types:n})=>$("",r,`
`)+X(["union",e,X(t," "),$("= ",X(n," | "))]," ")},EnumTypeDefinition:{leave:({description:r,name:e,directives:t,values:n})=>$("",r,`
`)+X(["enum",e,X(t," "),ut(n)]," ")},EnumValueDefinition:{leave:({description:r,name:e,directives:t})=>$("",r,`
`)+X([e,X(t," ")]," ")},InputObjectTypeDefinition:{leave:({description:r,name:e,directives:t,fields:n})=>$("",r,`
`)+X(["input",e,X(t," "),ut(n)]," ")},DirectiveDefinition:{leave:({description:r,name:e,arguments:t,repeatable:n,locations:i})=>$("",r,`
`)+"directive @"+e+(hd(t)?$(`(
`,Ni(X(t,`
`)),`
)`):$("(",X(t,", "),")"))+(n?" repeatable":"")+" on "+X(i," | ")},SchemaExtension:{leave:({directives:r,operationTypes:e})=>X(["extend schema",X(r," "),ut(e)]," ")},ScalarTypeExtension:{leave:({name:r,directives:e})=>X(["extend scalar",r,X(e," ")]," ")},ObjectTypeExtension:{leave:({name:r,interfaces:e,directives:t,fields:n})=>X(["extend type",r,$("implements ",X(e," & ")),X(t," "),ut(n)]," ")},InterfaceTypeExtension:{leave:({name:r,interfaces:e,directives:t,fields:n})=>X(["extend interface",r,$("implements ",X(e," & ")),X(t," "),ut(n)]," ")},UnionTypeExtension:{leave:({name:r,directives:e,types:t})=>X(["extend union",r,X(e," "),$("= ",X(t," | "))]," ")},EnumTypeExtension:{leave:({name:r,directives:e,values:t})=>X(["extend enum",r,X(e," "),ut(t)]," ")},InputObjectTypeExtension:{leave:({name:r,directives:e,fields:t})=>X(["extend input",r,X(e," "),ut(t)]," ")}};function X(r,e=""){var t;return(t=r==null?void 0:r.filter(n=>n).join(e))!==null&&t!==void 0?t:""}function ut(r){return $(`{
`,Ni(X(r,`
`)),`
}`)}function $(r,e,t=""){return e!=null&&e!==""?r+e+t:""}function Ni(r){return $("  ",r.replace(/\n/g,`
  `))}function hd(r){var e;return(e=r==null?void 0:r.some(t=>t.includes(`
`)))!==null&&e!==void 0?e:!1}const Ko=JSON,Bv=r=>r.toUpperCase(),Kv=r=>{const e={};return r.forEach((t,n)=>{e[n]=t}),e},zv=(r,e,t)=>r.document?r:{document:r,variables:e,requestHeaders:t,signal:void 0},jv=(r,e,t)=>r.query?r:{query:r,variables:e,requestHeaders:t,signal:void 0},Qv=(r,e)=>r.documents?r:{documents:r,requestHeaders:e,signal:void 0},fd=r=>{var n,i;let e;const t=r.definitions.filter(s=>s.kind==="OperationDefinition");return t.length===1&&(e=(i=(n=t[0])==null?void 0:n.name)==null?void 0:i.value),e},zo=r=>{if(typeof r=="string"){let t;try{const n=ud(r);t=fd(n)}catch(n){}return{query:r,operationName:t}}const e=fd(r);return{query:Bo(r),operationName:e}};class Vr extends Error{constructor(e,t){const n=`${Vr.extractMessage(e)}: ${JSON.stringify({response:e,request:t})}`;super(n),Object.setPrototypeOf(this,Vr.prototype),this.response=e,this.request=t,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Vr)}static extractMessage(e){var t,n,i;return(i=(n=(t=e.errors)==null?void 0:t[0])==null?void 0:n.message)!=null?i:`GraphQL Error (Code: ${e.status})`}}var jo=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Gi(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Qo={exports:{}};(function(r,e){var t=typeof self!="undefined"?self:jo,n=function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s}();(function(s){(function(o){var a={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch(b){return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function l(b){return b&&DataView.prototype.isPrototypeOf(b)}if(a.arrayBuffer)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(b){return b&&c.indexOf(Object.prototype.toString.call(b))>-1};function d(b){if(typeof b!="string"&&(b=String(b)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(b))throw new TypeError("Invalid character in header field name");return b.toLowerCase()}function h(b){return typeof b!="string"&&(b=String(b)),b}function f(b){var _={next:function(){var x=b.shift();return{done:x===void 0,value:x}}};return a.iterable&&(_[Symbol.iterator]=function(){return _}),_}function m(b){this.map={},b instanceof m?b.forEach(function(_,x){this.append(x,_)},this):Array.isArray(b)?b.forEach(function(_){this.append(_[0],_[1])},this):b&&Object.getOwnPropertyNames(b).forEach(function(_){this.append(_,b[_])},this)}m.prototype.append=function(b,_){b=d(b),_=h(_);var x=this.map[b];this.map[b]=x?x+", "+_:_},m.prototype.delete=function(b){delete this.map[d(b)]},m.prototype.get=function(b){return b=d(b),this.has(b)?this.map[b]:null},m.prototype.has=function(b){return this.map.hasOwnProperty(d(b))},m.prototype.set=function(b,_){this.map[d(b)]=h(_)},m.prototype.forEach=function(b,_){for(var x in this.map)this.map.hasOwnProperty(x)&&b.call(_,this.map[x],x,this)},m.prototype.keys=function(){var b=[];return this.forEach(function(_,x){b.push(x)}),f(b)},m.prototype.values=function(){var b=[];return this.forEach(function(_){b.push(_)}),f(b)},m.prototype.entries=function(){var b=[];return this.forEach(function(_,x){b.push([x,_])}),f(b)},a.iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);function p(b){if(b.bodyUsed)return Promise.reject(new TypeError("Already read"));b.bodyUsed=!0}function g(b){return new Promise(function(_,x){b.onload=function(){_(b.result)},b.onerror=function(){x(b.error)}})}function y(b){var _=new FileReader,x=g(_);return _.readAsArrayBuffer(b),x}function E(b){var _=new FileReader,x=g(_);return _.readAsText(b),x}function T(b){for(var _=new Uint8Array(b),x=new Array(_.length),F=0;F<_.length;F++)x[F]=String.fromCharCode(_[F]);return x.join("")}function I(b){if(b.slice)return b.slice(0);var _=new Uint8Array(b.byteLength);return _.set(new Uint8Array(b)),_.buffer}function R(){return this.bodyUsed=!1,this._initBody=function(b){this._bodyInit=b,b?typeof b=="string"?this._bodyText=b:a.blob&&Blob.prototype.isPrototypeOf(b)?this._bodyBlob=b:a.formData&&FormData.prototype.isPrototypeOf(b)?this._bodyFormData=b:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(b)?this._bodyText=b.toString():a.arrayBuffer&&a.blob&&l(b)?(this._bodyArrayBuffer=I(b.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(b)||u(b))?this._bodyArrayBuffer=I(b):this._bodyText=b=Object.prototype.toString.call(b):this._bodyText="",this.headers.get("content-type")||(typeof b=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(b)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var b=p(this);if(b)return b;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(y)}),this.text=function(){var b=p(this);if(b)return b;if(this._bodyBlob)return E(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(T(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}var N=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function V(b){var _=b.toUpperCase();return N.indexOf(_)>-1?_:b}function Z(b,_){_=_||{};var x=_.body;if(b instanceof Z){if(b.bodyUsed)throw new TypeError("Already read");this.url=b.url,this.credentials=b.credentials,_.headers||(this.headers=new m(b.headers)),this.method=b.method,this.mode=b.mode,this.signal=b.signal,!x&&b._bodyInit!=null&&(x=b._bodyInit,b.bodyUsed=!0)}else this.url=String(b);if(this.credentials=_.credentials||this.credentials||"same-origin",(_.headers||!this.headers)&&(this.headers=new m(_.headers)),this.method=V(_.method||this.method||"GET"),this.mode=_.mode||this.mode||null,this.signal=_.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&x)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(x)}Z.prototype.clone=function(){return new Z(this,{body:this._bodyInit})};function w(b){var _=new FormData;return b.trim().split("&").forEach(function(x){if(x){var F=x.split("="),J=F.shift().replace(/\+/g," "),M=F.join("=").replace(/\+/g," ");_.append(decodeURIComponent(J),decodeURIComponent(M))}}),_}function L(b){var _=new m,x=b.replace(/\r?\n[\t ]+/g," ");return x.split(/\r?\n/).forEach(function(F){var J=F.split(":"),M=J.shift().trim();if(M){var se=J.join(":").trim();_.append(M,se)}}),_}R.call(Z.prototype);function A(b,_){_||(_={}),this.type="default",this.status=_.status===void 0?200:_.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in _?_.statusText:"OK",this.headers=new m(_.headers),this.url=_.url||"",this._initBody(b)}R.call(A.prototype),A.prototype.clone=function(){return new A(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},A.error=function(){var b=new A(null,{status:0,statusText:""});return b.type="error",b};var P=[301,302,303,307,308];A.redirect=function(b,_){if(P.indexOf(_)===-1)throw new RangeError("Invalid status code");return new A(null,{status:_,headers:{location:b}})},o.DOMException=s.DOMException;try{new o.DOMException}catch(b){o.DOMException=function(_,x){this.message=_,this.name=x;var F=Error(_);this.stack=F.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function Q(b,_){return new Promise(function(x,F){var J=new Z(b,_);if(J.signal&&J.signal.aborted)return F(new o.DOMException("Aborted","AbortError"));var M=new XMLHttpRequest;function se(){M.abort()}M.onload=function(){var re={status:M.status,statusText:M.statusText,headers:L(M.getAllResponseHeaders()||"")};re.url="responseURL"in M?M.responseURL:re.headers.get("X-Request-URL");var le="response"in M?M.response:M.responseText;x(new A(le,re))},M.onerror=function(){F(new TypeError("Network request failed"))},M.ontimeout=function(){F(new TypeError("Network request failed"))},M.onabort=function(){F(new o.DOMException("Aborted","AbortError"))},M.open(J.method,J.url,!0),J.credentials==="include"?M.withCredentials=!0:J.credentials==="omit"&&(M.withCredentials=!1),"responseType"in M&&a.blob&&(M.responseType="blob"),J.headers.forEach(function(re,le){M.setRequestHeader(le,re)}),J.signal&&(J.signal.addEventListener("abort",se),M.onreadystatechange=function(){M.readyState===4&&J.signal.removeEventListener("abort",se)}),M.send(typeof J._bodyInit=="undefined"?null:J._bodyInit)})}return Q.polyfill=!0,s.fetch||(s.fetch=Q,s.Headers=m,s.Request=Z,s.Response=A),o.Headers=m,o.Request=Z,o.Response=A,o.fetch=Q,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,r.exports=e})(Qo,Qo.exports);var Vi=Qo.exports;const xi=Gi(Vi),$v=B({__proto__:null,default:xi},[Vi]),xr=r=>{let e={};return r&&(typeof Headers!="undefined"&&r instanceof Headers||$v&&Vi.Headers&&r instanceof Vi.Headers?e=Kv(r):Array.isArray(r)?r.forEach(([t,n])=>{t&&n!==void 0&&(e[t]=n)}):e=r),e},pd=r=>r.replace(/([\s,]|#[^\n\r]+)+/g," ").trim(),qv=r=>{if(!Array.isArray(r.query)){const n=r,i=[`query=${encodeURIComponent(pd(n.query))}`];return r.variables&&i.push(`variables=${encodeURIComponent(n.jsonSerializer.stringify(n.variables))}`),n.operationName&&i.push(`operationName=${encodeURIComponent(n.operationName)}`),i.join("&")}if(typeof r.variables!="undefined"&&!Array.isArray(r.variables))throw new Error("Cannot create query with given variable type, array expected");const e=r,t=r.query.reduce((n,i,s)=>(n.push({query:pd(i),variables:e.variables?e.jsonSerializer.stringify(e.variables[s]):void 0}),n),[]);return`query=${encodeURIComponent(e.jsonSerializer.stringify(t))}`},e0=r=>e=>D(this,null,function*(){var p;const{url:t,query:n,variables:i,operationName:s,fetch:o,fetchOptions:a,middleware:l}=e,c=S({},e.headers);let u="",d;r==="POST"?(d=t0(n,i,s,a.jsonSerializer),typeof d=="string"&&(c["Content-Type"]="application/json")):u=qv({query:n,variables:i,operationName:s,jsonSerializer:(p=a.jsonSerializer)!=null?p:Ko});const h=S({method:r,headers:c,body:d},a);let f=t,m=h;if(l){const g=yield Promise.resolve(l(W(S({},h),{url:t,operationName:s,variables:i}))),{url:E}=g,T=We(g,["url"]);f=E,m=T}return u&&(f=`${f}?${u}`),yield o(f,m)});class $o{constructor(e,t={}){this.url=e,this.requestConfig=t,this.rawRequest=(...n)=>D(this,null,function*(){const[i,s,o]=n,a=jv(i,s,o),g=this.requestConfig,{headers:l,fetch:c=xi,method:u="POST",requestMiddleware:d,responseMiddleware:h}=g,f=We(g,["headers","fetch","method","requestMiddleware","responseMiddleware"]),{url:m}=this;a.signal!==void 0&&(f.signal=a.signal);const{operationName:p}=zo(a.query);return qo({url:m,query:a.query,variables:a.variables,headers:S(S({},xr(ea(l))),xr(a.requestHeaders)),operationName:p,fetch:c,method:u,fetchOptions:f,middleware:d}).then(y=>(h&&h(y),y)).catch(y=>{throw h&&h(y),y})})}request(e,...t){return D(this,null,function*(){const[n,i]=t,s=zv(e,n,i),p=this.requestConfig,{headers:o,fetch:a=xi,method:l="POST",requestMiddleware:c,responseMiddleware:u}=p,d=We(p,["headers","fetch","method","requestMiddleware","responseMiddleware"]),{url:h}=this;s.signal!==void 0&&(d.signal=s.signal);const{query:f,operationName:m}=zo(s.document);return qo({url:h,query:f,variables:s.variables,headers:S(S({},xr(ea(o))),xr(s.requestHeaders)),operationName:m,fetch:a,method:l,fetchOptions:d,middleware:c}).then(g=>(u&&u(g),g.data)).catch(g=>{throw u&&u(g),g})})}batchRequests(e,t){var c;const n=Qv(e,t),l=this.requestConfig,{headers:i}=l,s=We(l,["headers"]);n.signal!==void 0&&(s.signal=n.signal);const o=n.documents.map(({document:u})=>zo(u).query),a=n.documents.map(({variables:u})=>u);return qo({url:this.url,query:o,variables:a,headers:S(S({},xr(ea(i))),xr(n.requestHeaders)),operationName:void 0,fetch:(c=this.requestConfig.fetch)!=null?c:xi,method:this.requestConfig.method||"POST",fetchOptions:s,middleware:this.requestConfig.requestMiddleware}).then(u=>(this.requestConfig.responseMiddleware&&this.requestConfig.responseMiddleware(u),u.data)).catch(u=>{throw this.requestConfig.responseMiddleware&&this.requestConfig.responseMiddleware(u),u})}setHeaders(e){return this.requestConfig.headers=e,this}setHeader(e,t){const{headers:n}=this.requestConfig;return n?n[e]=t:this.requestConfig.headers={[e]:t},this}setEndpoint(e){return this.url=e,this}}const qo=r=>D(this,null,function*(){var u,d;const{query:e,variables:t,fetchOptions:n}=r,i=e0(Bv((u=r.method)!=null?u:"post")),s=Array.isArray(r.query),o=yield i(r),a=yield r0(o,(d=n.jsonSerializer)!=null?d:Ko),l=Array.isArray(a)?!a.some(({data:f})=>!f):!!a.data,c=Array.isArray(a)||!a.errors||Array.isArray(a.errors)&&!a.errors.length||n.errorPolicy==="all"||n.errorPolicy==="ignore";if(o.ok&&c&&l){const h=(Array.isArray(a),a),{errors:f}=h,m=We(h,["errors"]),p=n.errorPolicy==="ignore"?m:a;return W(S({},s?{data:p}:p),{headers:o.headers,status:o.status})}else{const f=typeof a=="string"?{error:a}:a;throw new Vr(W(S({},f),{status:o.status,headers:o.headers}),{query:e,variables:t})}}),t0=(r,e,t,n)=>{const i=n!=null?n:Ko;if(!Array.isArray(r))return i.stringify({query:r,variables:e,operationName:t});if(typeof e!="undefined"&&!Array.isArray(e))throw new Error("Cannot create request body with given variable type, array expected");const s=r.reduce((o,a,l)=>(o.push({query:a,variables:e?e[l]:void 0}),o),[]);return i.stringify(s)},r0=(r,e)=>D(this,null,function*(){let t;return r.headers.forEach((n,i)=>{i.toLowerCase()==="content-type"&&(t=n)}),t&&(t.toLowerCase().startsWith("application/json")||t.toLowerCase().startsWith("application/graphql+json")||t.toLowerCase().startsWith("application/graphql-response+json"))?e.parse(yield r.text()):r.text()}),ea=r=>typeof r=="function"?r():r;var ta={exports:{}};(function(r,e){e=r.exports=t,e.getSerialize=n;function t(i,s,o,a){return JSON.stringify(i,n(s,a),o)}function n(i,s){var o=[],a=[];return s==null&&(s=function(l,c){return o[0]===c?"[Circular ~]":"[Circular ~."+a.slice(0,o.indexOf(c)).join(".")+"]"}),function(l,c){if(o.length>0){var u=o.indexOf(this);~u?o.splice(u+1):o.push(this),~u?a.splice(u,1/0,l):a.push(l),~o.indexOf(c)&&(c=s.call(this,l,c))}else o.push(c);return i==null?c:i.call(this,l,c)}}})(ta,ta.exports);var n0=ta.exports;const dt=Gi(n0);var i0=Object.defineProperty,s0=(r,e,t)=>e in r?i0(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,O=(r,e,t)=>s0(r,typeof e!="symbol"?e+"":e,t),md,o0=Object.defineProperty,a0=(r,e,t)=>e in r?o0(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,gd=(r,e,t)=>a0(r,typeof e!="symbol"?e+"":e,t),we=(r=>(r[r.Document=0]="Document",r[r.DocumentType=1]="DocumentType",r[r.Element=2]="Element",r[r.Text=3]="Text",r[r.CDATA=4]="CDATA",r[r.Comment=5]="Comment",r))(we||{});const yd={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},bd={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},Xi={},l0=()=>!!globalThis.Zone;function ra(r){if(Xi[r])return Xi[r];const e=globalThis[r],t=e.prototype,n=r in yd?yd[r]:void 0,i=!!(n&&n.every(a=>{var l,c;return!!((c=(l=Object.getOwnPropertyDescriptor(t,a))==null?void 0:l.get)!=null&&c.toString().includes("[native code]"))})),s=r in bd?bd[r]:void 0,o=!!(s&&s.every(a=>{var l;return typeof t[a]=="function"&&((l=t[a])==null?void 0:l.toString().includes("[native code]"))}));if(i&&o&&!l0())return Xi[r]=e.prototype,e.prototype;try{const a=document.createElement("iframe");document.body.appendChild(a);const l=a.contentWindow;if(!l)return e.prototype;const c=l[r].prototype;return document.body.removeChild(a),c?Xi[r]=c:t}catch(a){return t}}const na={};function Ft(r,e,t){var n;const i=`${r}.${String(t)}`;if(na[i])return na[i].call(e);const s=ra(r),o=(n=Object.getOwnPropertyDescriptor(s,t))==null?void 0:n.get;return o?(na[i]=o,o.call(e)):e[t]}const ia={};function vd(r,e,t){const n=`${r}.${String(t)}`;if(ia[n])return ia[n].bind(e);const s=ra(r)[t];return typeof s!="function"?e[t]:(ia[n]=s,s.bind(e))}function c0(r){return Ft("Node",r,"childNodes")}function u0(r){return Ft("Node",r,"parentNode")}function d0(r){return Ft("Node",r,"parentElement")}function h0(r){return Ft("Node",r,"textContent")}function f0(r,e){return vd("Node",r,"contains")(e)}function p0(r){return vd("Node",r,"getRootNode")()}function m0(r){return!r||!("host"in r)?null:Ft("ShadowRoot",r,"host")}function g0(r){return r.styleSheets}function y0(r){return!r||!("shadowRoot"in r)?null:Ft("Element",r,"shadowRoot")}function b0(r,e){return Ft("Element",r,"querySelector")(e)}function v0(r,e){return Ft("Element",r,"querySelectorAll")(e)}function S0(){return ra("MutationObserver").constructor}function _0(r,e,t){try{if(!(e in r))return()=>{};const n=r[e],i=t(n);return typeof i=="function"&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:n}})),r[e]=i,()=>{r[e]=n}}catch(n){return()=>{}}}const Ze={childNodes:c0,parentNode:u0,parentElement:d0,textContent:h0,contains:f0,getRootNode:p0,host:m0,styleSheets:g0,shadowRoot:y0,querySelector:b0,querySelectorAll:v0,mutationObserver:S0,patch:_0};function Sd(r){return r.nodeType===r.ELEMENT_NODE}function gn(r){const e=r&&"host"in r&&"mode"in r&&Ze.host(r)||null;return!!(e&&"shadowRoot"in e&&Ze.shadowRoot(e)===r)}function yn(r){return Object.prototype.toString.call(r)==="[object ShadowRoot]"}function T0(r){return r.includes(" background-clip: text;")&&!r.includes(" -webkit-background-clip: text;")&&(r=r.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),r}function E0(r){const{cssText:e}=r;if(e.split('"').length<3)return e;const t=["@import",`url(${JSON.stringify(r.href)})`];return r.layerName===""?t.push("layer"):r.layerName&&t.push(`layer(${r.layerName})`),r.supportsText&&t.push(`supports(${r.supportsText})`),r.media.length&&t.push(r.media.mediaText),t.join(" ")+";"}function sa(r){try{const e=r.rules||r.cssRules;if(!e)return null;let t=r.href;!t&&r.ownerNode&&r.ownerNode.ownerDocument&&(t=r.ownerNode.ownerDocument.location.href);const n=Array.from(e,i=>_d(i,t)).join("");return T0(n)}catch(e){return null}}function _d(r,e){if(R0(r)){let t;try{t=sa(r.styleSheet)||E0(r)}catch(n){t=r.cssText}return r.styleSheet.href?Ai(t,r.styleSheet.href):t}else{let t=r.cssText;return I0(r)&&r.selectorText.includes(":")&&(t=w0(t)),e?Ai(t,e):t}}function w0(r){const e=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return r.replace(e,"$1\\$2")}function R0(r){return"styleSheet"in r}function I0(r){return"selectorText"in r}class Td{constructor(){gd(this,"idNodeMap",new Map),gd(this,"nodeMetaMap",new WeakMap)}getId(e){var t;if(!e)return-1;const n=(t=this.getMeta(e))==null?void 0:t.id;return n!=null?n:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(n=>this.removeNodeFromMap(n))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const i=this.nodeMetaMap.get(n);i&&this.nodeMetaMap.set(t,i)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function C0(){return new Td}function ki({element:r,maskInputOptions:e,tagName:t,type:n,value:i,overwriteRecord:s,maskInputFn:o}){let a=i||"";return Id({maskInputOptions:e,tagName:t,type:n,overwriteRecord:s})&&(o?a=o(a,r):a="*".repeat(a.length)),a}function Xr(r){return r.toLowerCase()}const Ed="__rrweb_original__";function L0(r){const e=r.getContext("2d");if(!e)return!0;const t=50;for(let n=0;n<r.width;n+=t)for(let i=0;i<r.height;i+=t){const s=e.getImageData,o=Ed in s?s[Ed]:s;if(new Uint32Array(o.call(e,n,i,Math.min(t,r.width-n),Math.min(t,r.height-i)).data.buffer).some(l=>l!==0))return!1}return!0}function Wi(r){const e=r.type;return r.hasAttribute("data-rr-is-password")?"password":e?Xr(e):null}function wd(r,e){var s;let t;try{t=new URL(r,window.location.href)}catch(o){return null}const n=/\.([0-9a-z]+)(?:$)/i,i=t.pathname.match(n);return(s=i==null?void 0:i[1])!=null?s:null}function O0(r){let e="";return r.indexOf("//")>-1?e=r.split("/").slice(0,3).join("/"):e=r.split("/")[0],e=e.split("?")[0],e}const Z0=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,N0=/^(?:[a-z+]+:)?\/\//i,G0=/^www\..*/i,V0=/^(data:)([^,]*),(.*)/i;function Ai(r,e){return(r||"").replace(Z0,(t,n,i,s,o,a)=>{const l=i||o||a,c=n||s||"";if(!l)return t;if(N0.test(l)||G0.test(l))return`url(${c}${l}${c})`;if(V0.test(l))return`url(${c}${l}${c})`;if(l[0]==="/")return`url(${c}${O0(e)+l}${c})`;const u=e.split("/"),d=l.split("/");u.pop();for(const h of d)h!=="."&&(h===".."?u.pop():u.push(h));return`url(${c}${u.join("/")}${c})`})}function Pi(r,e=!1){return e?r.replace(/(\/\*[^*]*\*\/)|[\s;]/g,""):r.replace(/(\/\*[^*]*\*\/)|[\s;]/g,"").replace(/0px/g,"0")}function x0(r,e,t=!1){const n=Array.from(e.childNodes),i=[];let s=0;if(n.length>1&&r&&typeof r=="string"){let o=Pi(r,t);const a=o.length/r.length;for(let l=1;l<n.length;l++)if(n[l].textContent&&typeof n[l].textContent=="string"){const c=Pi(n[l].textContent,t),u=100;let d=3;for(;d<c.length&&(c[d].match(/[a-zA-Z0-9]/)||c.indexOf(c.substring(0,d),1)!==-1);d++);for(;d<c.length;d++){let h=c.substring(0,d),f=o.split(h),m=-1;if(f.length===2)m=f[0].length;else if(f.length>2&&f[0]===""&&n[l-1].textContent!=="")m=o.indexOf(h,1);else if(f.length===1){if(h=h.substring(0,h.length-1),f=o.split(h),f.length<=1)return i.push(r),i;d=u+1}else d===c.length-1&&(m=o.indexOf(h));if(f.length>=2&&d>u){const p=n[l-1].textContent;if(p&&typeof p=="string"){const g=Pi(p).length;m=o.indexOf(h,g)}m===-1&&(m=f[0].length)}if(m!==-1){let p=Math.floor(m/a);for(;p>0&&p<r.length;){if(s+=1,s>50*n.length)return i.push(r),i;const g=Pi(r.substring(0,p),t);if(g.length===m){i.push(r.substring(0,p)),r=r.substring(p),o=o.substring(m);break}else g.length<m?p+=Math.max(1,Math.floor((m-g.length)/a)):p-=Math.max(1,Math.floor((g.length-m)*a))}break}}}}return i.push(r),i}function X0(r,e){return x0(r,e).join("/* rr_split */")}function oa(r){return r=r.replace(/[^ -~]+/g,""),r=(r==null?void 0:r.split(" ").map(e=>Math.random().toString(20).substring(2,e.length)).join(" "))||"",r}function aa(r){return r==="img"||r==="video"||r==="audio"||r==="source"}const k0=new RegExp(/[a-zA-Z0-9.!#$%&'*+=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:.[a-zA-Z0-9-]+)*/),W0=new RegExp(/[0-9]{9,16}/),A0=new RegExp(/[0-9]{3}-?[0-9]{2}-?[0-9]{4}/),P0=new RegExp(/[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}/),M0=new RegExp(/[0-9]{4}-?[0-9]{4}-?[0-9]{4}-?[0-9]{4}/),U0=new RegExp(/[0-9]{1,5}.?[0-9]{0,3}\s[a-zA-Z]{2,30}\s[a-zA-Z]{2,15}/),F0=new RegExp(/(?:[0-9]{1,3}.){3}[0-9]{1,3}/),D0=[k0,W0,A0,P0,M0,U0,F0];function Rd(r){return r?D0.some(e=>e.test(r)):!1}const Id=({maskInputOptions:r,tagName:e,type:t,overwriteRecord:n})=>{const i=t&&t.toLowerCase();return n!=="true"&&(!!r[e.toLowerCase()]||!!(i&&r[i]))};let J0=1;const Y0=new RegExp("[^a-z0-9-_:]"),bn=-2;function Cd(){return J0++}function H0(r){if(r instanceof HTMLFormElement)return"form";const e=Xr(r.tagName);return Y0.test(e)?"div":e}let kr,Ld;const B0=/^[^ \t\n\r\u000c]+/,K0=/^[, \t\n\r\u000c]+/;function z0(r,e){if(e.trim()==="")return e;let t=0;function n(s){let o;const a=s.exec(e.substring(t));return a?(o=a[0],t+=o.length,o):""}const i=[];for(;n(K0),!(t>=e.length);){let s=n(B0);if(s.slice(-1)===",")s=Wr(r,s.substring(0,s.length-1)),i.push(s);else{let o="";s=Wr(r,s);let a=!1;for(;;){const l=e.charAt(t);if(l===""){i.push((s+o).trim());break}else if(a)l===")"&&(a=!1);else if(l===","){t+=1,i.push((s+o).trim());break}else l==="("&&(a=!0);o+=l,t+=1}}}return i.join(", ")}const Od=new WeakMap;function Wr(r,e){return!e||e.trim()===""?e:la(r,e)}function j0(r){return!!(r.tagName==="svg"||r.ownerSVGElement)}function la(r,e){let t=Od.get(r);if(t||(t=r.createElement("a"),Od.set(r,t)),!e)e="";else if(e.startsWith("blob:")||e.startsWith("data:"))return e;return t.setAttribute("href",e),t.href}function Zd(r,e,t,n){return n&&(t==="src"||t==="href"&&!(e==="use"&&n[0]==="#")||t==="xlink:href"&&n[0]!=="#"||t==="background"&&(e==="table"||e==="td"||e==="th")?Wr(r,n):t==="srcset"?z0(r,n):t==="style"?Ai(n,la(r)):e==="object"&&t==="data"?Wr(r,n):n)}function Nd(r,e,t){return(r==="video"||r==="audio")&&e==="autoplay"}function Gd(r,e,t){try{if(typeof e=="string"){if(r.classList.contains(e))return!0}else for(let n=r.classList.length;n--;){const i=r.classList[n];if(e.test(i))return!0}if(t)return r.matches(t)}catch(n){}return!1}function Mi(r,e,t){if(!r)return!1;if(r.nodeType!==r.ELEMENT_NODE)return t?Mi(Ze.parentNode(r),e,t):!1;for(let n=r.classList.length;n--;){const i=r.classList[n];if(e.test(i))return!0}return t?Mi(Ze.parentNode(r),e,t):!1}function Vd(r,e,t,n){let i;if(Sd(r)){if(i=r,!Ze.childNodes(i).length)return!1}else{if(Ze.parentElement(r)===null)return!1;i=Ze.parentElement(r)}try{if(typeof e=="string"){if(n){if(i.closest(`.${e}`))return!0}else if(i.classList.contains(e))return!0}else if(Mi(i,e,n))return!0;if(t){if(n){if(i.closest(t))return!0}else if(i.matches(t))return!0}}catch(s){}return!1}function Q0(r,e,t){const n=r.contentWindow;if(!n)return;let i=!1,s;try{s=n.document.readyState}catch(a){return}if(s!=="complete"){const a=setTimeout(()=>{i||(e(),i=!0)},t);r.addEventListener("load",()=>{clearTimeout(a),i=!0,e()});return}const o="about:blank";if(n.location.href!==o||r.src===o||r.src==="")return setTimeout(e,0),r.addEventListener("load",e);r.addEventListener("load",e)}function $0(r,e,t){let n=!1,i;try{i=r.sheet}catch(o){return}if(i)return;const s=setTimeout(()=>{n||(e(),n=!0)},t);r.addEventListener("load",()=>{clearTimeout(s),n=!0,e()})}function q0(r,e){const{doc:t,mirror:n,blockClass:i,blockSelector:s,needsMask:o,inlineStylesheet:a,maskInputOptions:l={},maskTextClass:c,maskTextFn:u,maskInputFn:d,dataURLOptions:h={},inlineImages:f,inlineVideos:m,recordCanvas:p,keepIframeSrcFn:g,newlyAddedElement:y=!1,cssCaptured:E=!1,privacySetting:T}=e,I=eS(t,n);switch(r.nodeType){case r.DOCUMENT_NODE:return r.compatMode!=="CSS1Compat"?{type:we.Document,childNodes:[],compatMode:r.compatMode}:{type:we.Document,childNodes:[]};case r.DOCUMENT_TYPE_NODE:return{type:we.DocumentType,name:r.name,publicId:r.publicId,systemId:r.systemId,rootId:I};case r.ELEMENT_NODE:return rS(r,{doc:t,blockClass:i,blockSelector:s,inlineStylesheet:a,maskInputOptions:l,maskInputFn:d,maskTextClass:c,dataURLOptions:h,inlineImages:f,inlineVideos:m,recordCanvas:p,keepIframeSrcFn:g,newlyAddedElement:y,privacySetting:T,rootId:I});case r.TEXT_NODE:return tS(r,{doc:t,needsMask:o,maskTextFn:u,privacySetting:T,rootId:I,cssCaptured:E});case r.CDATA_SECTION_NODE:return{type:we.CDATA,textContent:"",rootId:I};case r.COMMENT_NODE:return{type:we.Comment,textContent:Ze.textContent(r)||"",rootId:I};default:return!1}}function eS(r,e){if(!e.hasNode(r))return;const t=e.getId(r);return t===1?void 0:t}function tS(r,e){var t;const{needsMask:n,maskTextFn:i,privacySetting:s,rootId:o,cssCaptured:a}=e,l=Ze.parentNode(r),c=l&&l.tagName;let u="";const d=c==="STYLE"?!0:void 0,h=c==="SCRIPT"?!0:void 0;h?u="SCRIPT_PLACEHOLDER":a||(u=Ze.textContent(r),d&&u&&(u=Ai(u,la(e.doc)))),!d&&!h&&u&&n&&(u=i?i(u,Ze.parentElement(r)):u.replace(/[\S]/g,"*"));const f=s==="strict",m=(t=r.parentElement)==null?void 0:t.getAttribute("data-hl-record"),p=s==="default"&&Rd(u);return(f||p)&&!m&&c&&!new Set(["HEAD","TITLE","STYLE","SCRIPT","HTML","BODY","NOSCRIPT"]).has(c)&&u&&(u=oa(u)),{type:we.Text,textContent:u||"",rootId:o}}function rS(r,e){const{doc:t,blockClass:n,blockSelector:i,inlineStylesheet:s,maskInputOptions:o={},maskInputFn:a,maskTextClass:l,dataURLOptions:c={},inlineImages:u,inlineVideos:d,recordCanvas:h,keepIframeSrcFn:f,newlyAddedElement:m=!1,privacySetting:p,rootId:g}=e;let y=Gd(r,n,i);const E=Gd(r,l,null),T=p==="strict";let I=H0(r),R={};const N=r.attributes.length;for(let w=0;w<N;w++){const L=r.attributes[w];Nd(I,L.name)||(R[L.name]=Zd(t,I,Xr(L.name),L.value))}if(I==="link"&&s){const w=Array.from(t.styleSheets).find(A=>A.href===r.href);let L=null;w&&(L=sa(w)),L&&(delete R.rel,delete R.href,R._cssText=L)}if(I==="style"&&r.sheet){let w=sa(r.sheet);w&&(r.childNodes.length>1&&(w=X0(w,r)),R._cssText=w)}if(I==="input"||I==="textarea"||I==="select"){const w=r.value,L=r.checked;R.type!=="radio"&&R.type!=="checkbox"&&R.type!=="submit"&&R.type!=="button"&&w?R.value=ki({element:r,type:Wi(r),tagName:I,value:w,overwriteRecord:r.getAttribute("data-hl-record"),maskInputOptions:o,maskInputFn:a}):L&&(R.checked=L)}if(I==="option"&&(r.selected&&!o.select?R.selected=!0:delete R.selected),I==="dialog"&&r.open&&(R.rr_open_mode=r.matches("dialog:modal")?"modal":"non-modal"),I==="canvas"&&h){if(r.__context==="2d")L0(r);else if(!("__context"in r)){const w=r.toDataURL(c.type,c.quality),L=t.createElement("canvas");L.width=r.width,L.height=r.height;const A=L.toDataURL(c.type,c.quality);w!==A&&(R.rr_dataURL=w)}}if(I==="img"&&u&&!y&&!E&&!T){kr||(kr=t.createElement("canvas"),Ld=kr.getContext("2d"));const w=r,L=w.currentSrc||w.getAttribute("src")||"<unknown-src>",A=w.crossOrigin,P=()=>{w.removeEventListener("load",P);try{kr.width=w.naturalWidth,kr.height=w.naturalHeight,Ld.drawImage(w,0,0),R.rr_dataURL=kr.toDataURL(c.type,c.quality)}catch(Q){if(w.crossOrigin!=="anonymous"){w.crossOrigin="anonymous",w.complete&&w.naturalWidth!==0?P():w.addEventListener("load",P);return}else console.warn(`Cannot inline img src=${L}! Error: ${Q}`)}w.crossOrigin==="anonymous"&&(A?R.crossOrigin=A:w.removeAttribute("crossorigin"))};w.complete&&w.naturalWidth!==0?P():w.addEventListener("load",P)}if(I==="audio"||I==="video"){const w=R;w.rr_mediaState=r.paused?"paused":"played",w.rr_mediaCurrentTime=r.currentTime,w.rr_mediaPlaybackRate=r.playbackRate,w.rr_mediaMuted=r.muted,w.rr_mediaLoop=r.loop,w.rr_mediaVolume=r.volume}if(m||(r.scrollLeft&&(R.rr_scrollLeft=r.scrollLeft),r.scrollTop&&(R.rr_scrollTop=r.scrollTop)),y||E||T&&aa(I)){const{width:w,height:L}=r.getBoundingClientRect();R={class:R.class,rr_width:`${w}px`,rr_height:`${L}px`}}T&&aa(I)&&(y=!0),I==="iframe"&&!f(R.src)&&(r.contentDocument||(R.rr_src=R.src),delete R.src);let V;try{customElements.get(I)&&(V=!0)}catch(w){}const Z=w=>{const{width:L,height:A}=w.getBoundingClientRect();R={width:L,height:A,rr_width:`${L}px`,rr_height:`${A}px`,rr_inlined_video:!0,class:R.class,style:R.style},I="canvas";const P=t.createElement("canvas");P.width=r.width,P.height=r.height,R.rr_dataURL=P.toDataURL(c.type,c.quality)};if(I==="video"){const w=r;u&&(w.src===""||w.src.indexOf("blob:")!==-1)&&Z(w),d&&w.src!==""&&w.src.indexOf("blob:")===-1&&Z(w)}return{type:we.Element,tagName:I,attributes:R,childNodes:[],isSVG:j0(r)||void 0,needBlock:y,needMask:E,rootId:g,isCustom:V}}function me(r){return r==null?"":r.toLowerCase()}function nS(r,e){if(e.comment&&r.type===we.Comment)return!0;if(r.type===we.Element){if(e.script&&(r.tagName==="script"||r.tagName==="link"&&(r.attributes.rel==="preload"&&r.attributes.as==="script"||r.attributes.rel==="modulepreload")||r.tagName==="link"&&r.attributes.rel==="prefetch"&&typeof r.attributes.href=="string"&&wd(r.attributes.href)==="js"))return!0;if(e.headFavicon&&(r.tagName==="link"&&r.attributes.rel==="shortcut icon"||r.tagName==="meta"&&(me(r.attributes.name).match(/^msapplication-tile(image|color)$/)||me(r.attributes.name)==="application-name"||me(r.attributes.rel)==="icon"||me(r.attributes.rel)==="apple-touch-icon"||me(r.attributes.rel)==="shortcut icon")))return!0;if(r.tagName==="meta"){if(e.headMetaDescKeywords&&me(r.attributes.name).match(/^description|keywords$/))return!0;if(e.headMetaSocial&&(me(r.attributes.property).match(/^(og|twitter|fb):/)||me(r.attributes.name).match(/^(og|twitter):/)||me(r.attributes.name)==="pinterest"))return!0;if(e.headMetaRobots&&(me(r.attributes.name)==="robots"||me(r.attributes.name)==="googlebot"||me(r.attributes.name)==="bingbot"))return!0;if(e.headMetaHttpEquiv&&r.attributes["http-equiv"]!==void 0)return!0;if(e.headMetaAuthorship&&(me(r.attributes.name)==="author"||me(r.attributes.name)==="generator"||me(r.attributes.name)==="framework"||me(r.attributes.name)==="publisher"||me(r.attributes.name)==="progid"||me(r.attributes.property).match(/^article:/)||me(r.attributes.property).match(/^product:/)))return!0;if(e.headMetaVerification&&(me(r.attributes.name)==="google-site-verification"||me(r.attributes.name)==="yandex-verification"||me(r.attributes.name)==="csrf-token"||me(r.attributes.name)==="p:domain_verify"||me(r.attributes.name)==="verify-v1"||me(r.attributes.name)==="verification"||me(r.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function Ar(r,e){const{doc:t,mirror:n,blockClass:i,blockSelector:s,maskTextClass:o,maskTextSelector:a,skipChild:l=!1,inlineStylesheet:c=!0,maskInputOptions:u={},maskTextFn:d,maskInputFn:h,slimDOMOptions:f,dataURLOptions:m={},inlineImages:p=!1,inlineVideos:g=!1,recordCanvas:y=!1,onSerialize:E,onIframeLoad:T,iframeLoadTimeout:I=5e3,onStylesheetLoad:R,stylesheetLoadTimeout:N=5e3,keepIframeSrcFn:V=()=>!1,newlyAddedElement:Z=!1,cssCaptured:w=!1,privacySetting:L}=e;let{needsMask:A}=e,{preserveWhiteSpace:P=!0}=e;A||(A=Vd(r,o,a,A===void 0));const Q=q0(r,{doc:t,mirror:n,blockClass:i,blockSelector:s,needsMask:A,inlineStylesheet:c,maskInputOptions:u,maskTextClass:o,maskTextFn:d,maskInputFn:h,dataURLOptions:m,inlineImages:p,inlineVideos:g,recordCanvas:y,keepIframeSrcFn:V,newlyAddedElement:Z,cssCaptured:w,privacySetting:L});if(!Q)return console.warn(r,"not serialized"),null;let b;n.hasNode(r)?b=n.getId(r):nS(Q,f)||!P&&Q.type===we.Text&&!Q.textContent.replace(/^\s+|\s+$/gm,"").length?b=bn:b=Cd();const _=Object.assign(Q,{id:b});if(n.add(r,_),b===bn)return null;E&&E(r);let x=!l,F=L,J=L==="strict";if(_.type===we.Element){if(x=x&&!_.needBlock,J||(J=!!_.needBlock||!!_.needMask),F=J?"strict":F,J&&aa(_.tagName)){const re=r.cloneNode();re.src="",n.add(re,_)}delete _.needBlock,delete _.needMask;const se=Ze.shadowRoot(r);se&&yn(se)&&(_.isShadowHost=!0)}if((_.type===we.Document||_.type===we.Element)&&x){f.headWhitespace&&_.type===we.Element&&_.tagName==="head"&&(P=!1);const se={doc:t,mirror:n,blockClass:i,blockSelector:s,needsMask:A,maskTextClass:o,maskTextSelector:a,skipChild:l,inlineStylesheet:c,maskInputOptions:u,maskTextFn:d,maskInputFn:h,slimDOMOptions:f,dataURLOptions:m,inlineImages:p,inlineVideos:g,recordCanvas:y,preserveWhiteSpace:P,onSerialize:E,onIframeLoad:T,iframeLoadTimeout:I,onStylesheetLoad:R,stylesheetLoadTimeout:N,keepIframeSrcFn:V,cssCaptured:!1,privacySetting:F};if(!(_.type===we.Element&&_.tagName==="textarea"&&_.attributes.value!==void 0)){_.type===we.Element&&_.attributes._cssText!==void 0&&typeof _.attributes._cssText=="string"&&(se.cssCaptured=!0);for(const le of Array.from(Ze.childNodes(r))){const Oe=Ar(le,se);Oe&&_.childNodes.push(Oe)}}let re=null;if(Sd(r)&&(re=Ze.shadowRoot(r)))for(const le of Array.from(Ze.childNodes(re))){const Oe=Ar(le,se);Oe&&(yn(re)&&(Oe.isShadow=!0),_.childNodes.push(Oe))}}const M=Ze.parentNode(r);return M&&gn(M)&&yn(M)&&(_.isShadow=!0),_.type===we.Element&&_.tagName==="iframe"&&Q0(r,()=>{const se=r.contentDocument;if(se&&T){const re=Ar(se,{doc:se,mirror:n,blockClass:i,blockSelector:s,needsMask:A,maskTextClass:o,maskTextSelector:a,skipChild:!1,inlineStylesheet:c,maskInputOptions:u,maskTextFn:d,maskInputFn:h,slimDOMOptions:f,dataURLOptions:m,inlineImages:p,inlineVideos:g,recordCanvas:y,preserveWhiteSpace:P,onSerialize:E,onIframeLoad:T,iframeLoadTimeout:I,onStylesheetLoad:R,stylesheetLoadTimeout:N,keepIframeSrcFn:V,privacySetting:L});re&&T(r,re)}},I),_.type===we.Element&&_.tagName==="link"&&typeof _.attributes.rel=="string"&&(_.attributes.rel==="stylesheet"||_.attributes.rel==="preload"&&typeof _.attributes.href=="string"&&wd(_.attributes.href)==="css")&&$0(r,()=>{if(R){const se=Ar(r,{doc:t,mirror:n,blockClass:i,blockSelector:s,needsMask:A,maskTextClass:o,maskTextSelector:a,skipChild:!1,inlineStylesheet:c,maskInputOptions:u,maskTextFn:d,maskInputFn:h,slimDOMOptions:f,dataURLOptions:m,inlineImages:p,inlineVideos:g,recordCanvas:y,preserveWhiteSpace:P,onSerialize:E,onIframeLoad:T,iframeLoadTimeout:I,onStylesheetLoad:R,stylesheetLoadTimeout:N,keepIframeSrcFn:V,privacySetting:L});se&&R(r,se)}},N),_}function iS(r,e){const{mirror:t=new Td,blockClass:n="highlight-block",blockSelector:i=null,maskTextClass:s="highlight-mask",maskTextSelector:o=null,inlineStylesheet:a=!0,inlineImages:l=!1,inlineVideos:c=!1,recordCanvas:u=!1,maskAllInputs:d=!1,maskTextFn:h,maskInputFn:f,slimDOM:m=!1,dataURLOptions:p,preserveWhiteSpace:g,onSerialize:y,onIframeLoad:E,iframeLoadTimeout:T,onStylesheetLoad:I,stylesheetLoadTimeout:R,keepIframeSrcFn:N=()=>!1,privacySetting:V="default"}=e||{};return Ar(r,{doc:r,mirror:t,blockClass:n,blockSelector:i,maskTextClass:s,maskTextSelector:o,skipChild:!1,inlineStylesheet:a,maskInputOptions:d===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:d===!1?{password:!0}:d,maskTextFn:h,maskInputFn:f,slimDOMOptions:m||m==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:m==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:m||{},dataURLOptions:p,inlineImages:l,inlineVideos:c,recordCanvas:u,preserveWhiteSpace:g,onSerialize:y,onIframeLoad:E,iframeLoadTimeout:T,onStylesheetLoad:I,stylesheetLoadTimeout:R,keepIframeSrcFn:N,newlyAddedElement:!1,privacySetting:V})}function sS(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var ca={exports:{}},K=String,xd=function(){return{isColorSupported:!1,reset:K,bold:K,dim:K,italic:K,underline:K,inverse:K,hidden:K,strikethrough:K,black:K,red:K,green:K,yellow:K,blue:K,magenta:K,cyan:K,white:K,gray:K,bgBlack:K,bgRed:K,bgGreen:K,bgYellow:K,bgBlue:K,bgMagenta:K,bgCyan:K,bgWhite:K,blackBright:K,redBright:K,greenBright:K,yellowBright:K,blueBright:K,magentaBright:K,cyanBright:K,whiteBright:K,bgBlackBright:K,bgRedBright:K,bgGreenBright:K,bgYellowBright:K,bgBlueBright:K,bgMagentaBright:K,bgCyanBright:K,bgWhiteBright:K}};ca.exports=xd(),ca.exports.createColors=xd;var oS=ca.exports;const ht=sS(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));let Xd=oS,kd=ht,ua=class iv extends Error{constructor(e,t,n,i,s,o){super(e),this.name="CssSyntaxError",this.reason=e,s&&(this.file=s),i&&(this.source=i),o&&(this.plugin=o),typeof t!="undefined"&&typeof n!="undefined"&&(typeof t=="number"?(this.line=t,this.column=n):(this.line=t.line,this.column=t.column,this.endLine=n.line,this.endColumn=n.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,iv)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line!="undefined"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;e==null&&(e=Xd.isColorSupported);let n=u=>u,i=u=>u,s=u=>u;if(e){let{bold:u,gray:d,red:h}=Xd.createColors(!0);i=f=>u(h(f)),n=f=>d(f),kd&&(s=f=>kd(f))}let o=t.split(/\r?\n/),a=Math.max(this.line-3,0),l=Math.min(this.line+2,o.length),c=String(l).length;return o.slice(a,l).map((u,d)=>{let h=a+1+d,f=" "+(" "+h).slice(-c)+" | ";if(h===this.line){if(u.length>160){let p=20,g=Math.max(0,this.column-p),y=Math.max(this.column+p,this.endColumn+p),E=u.slice(g,y),T=n(f.replace(/\d/g," "))+u.slice(0,Math.min(this.column-1,p-1)).replace(/[^\t]/g," ");return i(">")+n(f)+s(E)+`
 `+T+i("^")}let m=n(f.replace(/\d/g," "))+u.slice(0,this.column-1).replace(/[^\t]/g," ");return i(">")+n(f)+s(u)+`
 `+m+i("^")}return" "+n(f)+s(u)}).join(`
`)}toString(){let e=this.showSourceCode();return e&&(e=`

`+e+`
`),this.name+": "+this.message+e}};var da=ua;ua.default=ua;const Wd={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function aS(r){return r[0].toUpperCase()+r.slice(1)}let ha=class{constructor(e){this.builder=e}atrule(e,t){let n="@"+e.name,i=e.params?this.rawValue(e,"params"):"";if(typeof e.raws.afterName!="undefined"?n+=e.raws.afterName:i&&(n+=" "),e.nodes)this.block(e,n+i);else{let s=(e.raws.between||"")+(t?";":"");this.builder(n+i+s,e)}}beforeAfter(e,t){let n;e.type==="decl"?n=this.raw(e,null,"beforeDecl"):e.type==="comment"?n=this.raw(e,null,"beforeComment"):t==="before"?n=this.raw(e,null,"beforeRule"):n=this.raw(e,null,"beforeClose");let i=e.parent,s=0;for(;i&&i.type!=="root";)s+=1,i=i.parent;if(n.includes(`
`)){let o=this.raw(e,null,"indent");if(o.length)for(let a=0;a<s;a++)n+=o}return n}block(e,t){let n=this.raw(e,"between","beforeOpen");this.builder(t+n+"{",e,"start");let i;e.nodes&&e.nodes.length?(this.body(e),i=this.raw(e,"after")):i=this.raw(e,"after","emptyBody"),i&&this.builder(i),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&e.nodes[t].type==="comment";)t-=1;let n=this.raw(e,"semicolon");for(let i=0;i<e.nodes.length;i++){let s=e.nodes[i],o=this.raw(s,"before");o&&this.builder(o),this.stringify(s,t!==i||n)}}comment(e){let t=this.raw(e,"left","commentLeft"),n=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+n+"*/",e)}decl(e,t){let n=this.raw(e,"between","colon"),i=e.prop+n+this.rawValue(e,"value");e.important&&(i+=e.raws.important||" !important"),t&&(i+=";"),this.builder(i,e)}document(e){this.body(e)}raw(e,t,n){let i;if(n||(n=t),t&&(i=e.raws[t],typeof i!="undefined"))return i;let s=e.parent;if(n==="before"&&(!s||s.type==="root"&&s.first===e||s&&s.type==="document"))return"";if(!s)return Wd[n];let o=e.root();if(o.rawCache||(o.rawCache={}),typeof o.rawCache[n]!="undefined")return o.rawCache[n];if(n==="before"||n==="after")return this.beforeAfter(e,n);{let a="raw"+aS(n);this[a]?i=this[a](o,e):o.walk(l=>{if(i=l.raws[t],typeof i!="undefined")return!1})}return typeof i=="undefined"&&(i=Wd[n]),o.rawCache[n]=i,i}rawBeforeClose(e){let t;return e.walk(n=>{if(n.nodes&&n.nodes.length>0&&typeof n.raws.after!="undefined")return t=n.raws.after,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let n;return e.walkComments(i=>{if(typeof i.raws.before!="undefined")return n=i.raws.before,n.includes(`
`)&&(n=n.replace(/[^\n]+$/,"")),!1}),typeof n=="undefined"?n=this.raw(t,null,"beforeDecl"):n&&(n=n.replace(/\S/g,"")),n}rawBeforeDecl(e,t){let n;return e.walkDecls(i=>{if(typeof i.raws.before!="undefined")return n=i.raws.before,n.includes(`
`)&&(n=n.replace(/[^\n]+$/,"")),!1}),typeof n=="undefined"?n=this.raw(t,null,"beforeRule"):n&&(n=n.replace(/\S/g,"")),n}rawBeforeOpen(e){let t;return e.walk(n=>{if(n.type!=="decl"&&(t=n.raws.between,typeof t!="undefined"))return!1}),t}rawBeforeRule(e){let t;return e.walk(n=>{if(n.nodes&&(n.parent!==e||e.first!==n)&&typeof n.raws.before!="undefined")return t=n.raws.before,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls(n=>{if(typeof n.raws.between!="undefined")return t=n.raws.between.replace(/[^\s:]/g,""),!1}),t}rawEmptyBody(e){let t;return e.walk(n=>{if(n.nodes&&n.nodes.length===0&&(t=n.raws.after,typeof t!="undefined"))return!1}),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk(n=>{let i=n.parent;if(i&&i!==e&&i.parent&&i.parent===e&&typeof n.raws.before!="undefined"){let s=n.raws.before.split(`
`);return t=s[s.length-1],t=t.replace(/\S/g,""),!1}}),t}rawSemicolon(e){let t;return e.walk(n=>{if(n.nodes&&n.nodes.length&&n.last.type==="decl"&&(t=n.raws.semicolon,typeof t!="undefined"))return!1}),t}rawValue(e,t){let n=e[t],i=e.raws[t];return i&&i.value===n?i.raw:n}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}};var Ad=ha;ha.default=ha;let lS=Ad;function fa(r,e){new lS(e).stringify(r)}var Ui=fa;fa.default=fa;var vn={};vn.isClean=Symbol("isClean"),vn.my=Symbol("my");let cS=da,uS=Ad,dS=Ui,{isClean:Sn,my:hS}=vn;function pa(r,e){let t=new r.constructor;for(let n in r){if(!Object.prototype.hasOwnProperty.call(r,n)||n==="proxyCache")continue;let i=r[n],s=typeof i;n==="parent"&&s==="object"?e&&(t[n]=e):n==="source"?t[n]=i:Array.isArray(i)?t[n]=i.map(o=>pa(o,t)):(s==="object"&&i!==null&&(i=pa(i)),t[n]=i)}return t}function Ot(r,e){if(e&&typeof e.offset!="undefined")return e.offset;let t=1,n=1,i=0;for(let s=0;s<r.length;s++){if(n===e.line&&t===e.column){i=s;break}r[s]===`
`?(t=1,n+=1):t+=1}return i}let ma=class{get proxyOf(){return this}constructor(e={}){this.raws={},this[Sn]=!1,this[hS]=!0;for(let t in e)if(t==="nodes"){this.nodes=[];for(let n of e[t])typeof n.clone=="function"?this.append(n.clone()):this.append(n)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=pa(this);for(let n in e)t[n]=e[n];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:n,start:i}=this.rangeBy(t);return this.source.input.error(e,{column:i.column,line:i.line},{column:n.column,line:n.line},t)}return new cS(e)}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:t==="root"?()=>e.root().toProxy():e[t]},set(e,t,n){return e[t]===n||(e[t]=n,(t==="prop"||t==="value"||t==="name"||t==="params"||t==="important"||t==="text")&&e.markDirty()),!0}}}markClean(){this[Sn]=!0}markDirty(){if(this[Sn]){this[Sn]=!1;let e=this;for(;e=e.parent;)e[Sn]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e={}){let t=this.source.start;if(e.index)t=this.positionInside(e.index);else if(e.word){let n="document"in this.source.input?this.source.input.document:this.source.input.css,s=n.slice(Ot(n,this.source.start),Ot(n,this.source.end)).indexOf(e.word);s!==-1&&(t=this.positionInside(s))}return t}positionInside(e){let t=this.source.start.column,n=this.source.start.line,i="document"in this.source.input?this.source.input.document:this.source.input.css,s=Ot(i,this.source.start),o=s+e;for(let a=s;a<o;a++)i[a]===`
`?(t=1,n+=1):t+=1;return{column:t,line:n,offset:o}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e={}){let t="document"in this.source.input?this.source.input.document:this.source.input.css,n={column:this.source.start.column,line:this.source.start.line,offset:Ot(t,this.source.start)},i=this.source.end?{column:this.source.end.column+1,line:this.source.end.line,offset:typeof this.source.end.offset=="number"?this.source.end.offset:Ot(t,this.source.end)+1}:{column:n.column+1,line:n.line,offset:n.offset+1};if(e.word){let o=t.slice(Ot(t,this.source.start),Ot(t,this.source.end)).indexOf(e.word);o!==-1&&(n=this.positionInside(o),i=this.positionInside(o+e.word.length))}else e.start?n={column:e.start.column,line:e.start.line,offset:Ot(t,e.start)}:e.index&&(n=this.positionInside(e.index)),e.end?i={column:e.end.column,line:e.end.line,offset:Ot(t,e.end)}:typeof e.endIndex=="number"?i=this.positionInside(e.endIndex):e.index&&(i=this.positionInside(e.index+1));return(i.line<n.line||i.line===n.line&&i.column<=n.column)&&(i={column:n.column+1,line:n.line,offset:n.offset+1}),{end:i,start:n}}raw(e,t){return new uS().raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,n=!1;for(let i of e)i===this?n=!0:n?(this.parent.insertAfter(t,i),t=i):this.parent.insertBefore(t,i);n||this.remove()}return this}root(){let e=this;for(;e.parent&&e.parent.type!=="document";)e=e.parent;return e}toJSON(e,t){let n={},i=t==null;t=t||new Map;let s=0;for(let o in this){if(!Object.prototype.hasOwnProperty.call(this,o)||o==="parent"||o==="proxyCache")continue;let a=this[o];if(Array.isArray(a))n[o]=a.map(l=>typeof l=="object"&&l.toJSON?l.toJSON(null,t):l);else if(typeof a=="object"&&a.toJSON)n[o]=a.toJSON(null,t);else if(o==="source"){if(a==null)continue;let l=t.get(a.input);l==null&&(l=s,t.set(a.input,s),s++),n[o]={end:a.end,inputId:l,start:a.start}}else n[o]=a}return i&&(n.inputs=[...t.keys()].map(o=>o.toJSON())),n}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=dS){e.stringify&&(e=e.stringify);let t="";return e(this,n=>{t+=n}),t}warn(e,t,n={}){let i={node:this};for(let s in n)i[s]=n[s];return e.warn(t,i)}};var Fi=ma;ma.default=ma;let fS=Fi,ga=class extends fS{constructor(e){super(e),this.type="comment"}};var Di=ga;ga.default=ga;let pS=Fi,ya=class extends pS{get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}constructor(e){e&&typeof e.value!="undefined"&&typeof e.value!="string"&&(e=W(S({},e),{value:String(e.value)})),super(e),this.type="decl"}};var Ji=ya;ya.default=ya;let Pd=Di,Md=Ji,mS=Fi,{isClean:Ud,my:Fd}=vn,ba,Dd,Jd,va;function Yd(r){return r.map(e=>(e.nodes&&(e.nodes=Yd(e.nodes)),delete e.source,e))}function Hd(r){if(r[Ud]=!1,r.proxyOf.nodes)for(let e of r.proxyOf.nodes)Hd(e)}let Zt=class sv extends mS{get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}append(...e){for(let t of e){let n=this.normalize(t,this.last);for(let i of n)this.proxyOf.nodes.push(i)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t=this.getIterator(),n,i;for(;this.indexes[t]<this.proxyOf.nodes.length&&(n=this.indexes[t],i=e(this.proxyOf.nodes[n],n),i!==!1);)this.indexes[t]+=1;return delete this.indexes[t],i}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:e[t]?t==="each"||typeof t=="string"&&t.startsWith("walk")?(...n)=>e[t](...n.map(i=>typeof i=="function"?(s,o)=>i(s.toProxy(),o):i)):t==="every"||t==="some"?n=>e[t]((i,...s)=>n(i.toProxy(),...s)):t==="root"?()=>e.root().toProxy():t==="nodes"?e.nodes.map(n=>n.toProxy()):t==="first"||t==="last"?e[t].toProxy():e[t]:e[t]},set(e,t,n){return e[t]===n||(e[t]=n,(t==="name"||t==="params"||t==="selector")&&e.markDirty()),!0}}}index(e){return typeof e=="number"?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let n=this.index(e),i=this.normalize(t,this.proxyOf.nodes[n]).reverse();n=this.index(e);for(let o of i)this.proxyOf.nodes.splice(n+1,0,o);let s;for(let o in this.indexes)s=this.indexes[o],n<s&&(this.indexes[o]=s+i.length);return this.markDirty(),this}insertBefore(e,t){let n=this.index(e),i=n===0?"prepend":!1,s=this.normalize(t,this.proxyOf.nodes[n],i).reverse();n=this.index(e);for(let a of s)this.proxyOf.nodes.splice(n,0,a);let o;for(let a in this.indexes)o=this.indexes[a],n<=o&&(this.indexes[a]=o+s.length);return this.markDirty(),this}normalize(e,t){if(typeof e=="string")e=Yd(Dd(e).nodes);else if(typeof e=="undefined")e=[];else if(Array.isArray(e)){e=e.slice(0);for(let i of e)i.parent&&i.parent.removeChild(i,"ignore")}else if(e.type==="root"&&this.type!=="document"){e=e.nodes.slice(0);for(let i of e)i.parent&&i.parent.removeChild(i,"ignore")}else if(e.type)e=[e];else if(e.prop){if(typeof e.value=="undefined")throw new Error("Value field is missed in node creation");typeof e.value!="string"&&(e.value=String(e.value)),e=[new Md(e)]}else if(e.selector||e.selectors)e=[new va(e)];else if(e.name)e=[new ba(e)];else if(e.text)e=[new Pd(e)];else throw new Error("Unknown node type in node creation");return e.map(i=>(i[Fd]||sv.rebuild(i),i=i.proxyOf,i.parent&&i.parent.removeChild(i),i[Ud]&&Hd(i),i.raws||(i.raws={}),typeof i.raws.before=="undefined"&&t&&typeof t.raws.before!="undefined"&&(i.raws.before=t.raws.before.replace(/\S/g,"")),i.parent=this.proxyOf,i))}prepend(...e){e=e.reverse();for(let t of e){let n=this.normalize(t,this.first,"prepend").reverse();for(let i of n)this.proxyOf.nodes.unshift(i);for(let i in this.indexes)this.indexes[i]=this.indexes[i]+n.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);let t;for(let n in this.indexes)t=this.indexes[n],t>=e&&(this.indexes[n]=t-1);return this.markDirty(),this}replaceValues(e,t,n){return n||(n=t,t={}),this.walkDecls(i=>{t.props&&!t.props.includes(i.prop)||t.fast&&!i.value.includes(t.fast)||(i.value=i.value.replace(e,n))}),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each((t,n)=>{let i;try{i=e(t,n)}catch(s){throw t.addToError(s)}return i!==!1&&t.walk&&(i=t.walk(e)),i})}walkAtRules(e,t){return t?e instanceof RegExp?this.walk((n,i)=>{if(n.type==="atrule"&&e.test(n.name))return t(n,i)}):this.walk((n,i)=>{if(n.type==="atrule"&&n.name===e)return t(n,i)}):(t=e,this.walk((n,i)=>{if(n.type==="atrule")return t(n,i)}))}walkComments(e){return this.walk((t,n)=>{if(t.type==="comment")return e(t,n)})}walkDecls(e,t){return t?e instanceof RegExp?this.walk((n,i)=>{if(n.type==="decl"&&e.test(n.prop))return t(n,i)}):this.walk((n,i)=>{if(n.type==="decl"&&n.prop===e)return t(n,i)}):(t=e,this.walk((n,i)=>{if(n.type==="decl")return t(n,i)}))}walkRules(e,t){return t?e instanceof RegExp?this.walk((n,i)=>{if(n.type==="rule"&&e.test(n.selector))return t(n,i)}):this.walk((n,i)=>{if(n.type==="rule"&&n.selector===e)return t(n,i)}):(t=e,this.walk((n,i)=>{if(n.type==="rule")return t(n,i)}))}};Zt.registerParse=r=>{Dd=r},Zt.registerRule=r=>{va=r},Zt.registerAtRule=r=>{ba=r},Zt.registerRoot=r=>{Jd=r};var lr=Zt;Zt.default=Zt,Zt.rebuild=r=>{r.type==="atrule"?Object.setPrototypeOf(r,ba.prototype):r.type==="rule"?Object.setPrototypeOf(r,va.prototype):r.type==="decl"?Object.setPrototypeOf(r,Md.prototype):r.type==="comment"?Object.setPrototypeOf(r,Pd.prototype):r.type==="root"&&Object.setPrototypeOf(r,Jd.prototype),r[Fd]=!0,r.nodes&&r.nodes.forEach(e=>{Zt.rebuild(e)})};let Bd=lr,Yi=class extends Bd{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}};var Sa=Yi;Yi.default=Yi,Bd.registerAtRule(Yi);let gS=lr,Kd,zd,_n=class extends gS{constructor(e){super(S({type:"document"},e)),this.nodes||(this.nodes=[])}toResult(e={}){return new Kd(new zd,this,e).stringify()}};_n.registerLazyResult=r=>{Kd=r},_n.registerProcessor=r=>{zd=r};var _a=_n;_n.default=_n;let yS="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var bS={nanoid:(r=21)=>{let e="",t=r|0;for(;t--;)e+=yS[Math.random()*64|0];return e}};let{existsSync:vS,readFileSync:SS}=ht,{dirname:Ta,join:_S}=ht,{SourceMapConsumer:jd,SourceMapGenerator:Qd}=ht;function TS(r){return Buffer?Buffer.from(r,"base64").toString():window.atob(r)}let Ea=class{constructor(e,t){if(t.map===!1)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let n=t.map?t.map.prev:void 0,i=this.loadMap(t.from,n);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=Ta(this.mapFile)),i&&(this.text=i)}consumer(){return this.consumerCache||(this.consumerCache=new jd(this.text)),this.consumerCache}decodeInline(e){let t=/^data:application\/json;charset=utf-?8;base64,/,n=/^data:application\/json;base64,/,i=/^data:application\/json;charset=utf-?8,/,s=/^data:application\/json,/,o=e.match(i)||e.match(s);if(o)return decodeURIComponent(e.substr(o[0].length));let a=e.match(t)||e.match(n);if(a)return TS(e.substr(a[0].length));let l=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+l)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return typeof e!="object"?!1:typeof e.mappings=="string"||typeof e._mappings=="string"||Array.isArray(e.sections)}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/g);if(!t)return;let n=e.lastIndexOf(t.pop()),i=e.indexOf("*/",n);n>-1&&i>-1&&(this.annotation=this.getAnnotationURL(e.substring(n,i)))}loadFile(e){if(this.root=Ta(e),vS(e))return this.mapFile=e,SS(e,"utf-8").toString().trim()}loadMap(e,t){if(t===!1)return!1;if(t){if(typeof t=="string")return t;if(typeof t=="function"){let n=t(e);if(n){let i=this.loadFile(n);if(!i)throw new Error("Unable to load previous source map: "+n.toString());return i}}else{if(t instanceof jd)return Qd.fromSourceMap(t).toString();if(t instanceof Qd)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let n=this.annotation;return e&&(n=_S(Ta(e),n)),this.loadFile(n)}}}startWith(e,t){return e?e.substr(0,t.length)===t:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};var $d=Ea;Ea.default=Ea;let{nanoid:ES}=bS,{isAbsolute:wa,resolve:Ra}=ht,{SourceMapConsumer:wS,SourceMapGenerator:RS}=ht,{fileURLToPath:qd,pathToFileURL:Hi}=ht,eh=da,IS=$d,Ia=ht,Ca=Symbol("lineToIndexCache"),CS=!!(wS&&RS),th=!!(Ra&&wa);function rh(r){if(r[Ca])return r[Ca];let e=r.css.split(`
`),t=new Array(e.length),n=0;for(let i=0,s=e.length;i<s;i++)t[i]=n,n+=e[i].length+1;return r[Ca]=t,t}let Bi=class{get from(){return this.file||this.id}constructor(e,t={}){if(e===null||typeof e=="undefined"||typeof e=="object"&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),this.css[0]==="\uFEFF"||this.css[0]===""?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,this.document=this.css,t.document&&(this.document=t.document.toString()),t.from&&(!th||/^\w+:\/\//.test(t.from)||wa(t.from)?this.file=t.from:this.file=Ra(t.from)),th&&CS){let n=new IS(this.css,t);if(n.text){this.map=n;let i=n.consumer().file;!this.file&&i&&(this.file=this.mapResolve(i))}}this.file||(this.id="<input css "+ES(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,n,i={}){let s,o,a,l,c;if(t&&typeof t=="object"){let d=t,h=n;if(typeof d.offset=="number"){l=d.offset;let f=this.fromOffset(l);t=f.line,n=f.col}else t=d.line,n=d.column,l=this.fromLineAndColumn(t,n);if(typeof h.offset=="number"){a=h.offset;let f=this.fromOffset(a);o=f.line,s=f.col}else o=h.line,s=h.column,a=this.fromLineAndColumn(h.line,h.column)}else if(n)l=this.fromLineAndColumn(t,n);else{l=t;let d=this.fromOffset(l);t=d.line,n=d.col}let u=this.origin(t,n,o,s);return u?c=new eh(e,u.endLine===void 0?u.line:{column:u.column,line:u.line},u.endLine===void 0?u.column:{column:u.endColumn,line:u.endLine},u.source,u.file,i.plugin):c=new eh(e,o===void 0?t:{column:n,line:t},o===void 0?n:{column:s,line:o},this.css,this.file,i.plugin),c.input={column:n,endColumn:s,endLine:o,endOffset:a,line:t,offset:l,source:this.css},this.file&&(Hi&&(c.input.url=Hi(this.file).toString()),c.input.file=this.file),c}fromLineAndColumn(e,t){return rh(this)[e-1]+t-1}fromOffset(e){let t=rh(this),n=t[t.length-1],i=0;if(e>=n)i=t.length-1;else{let s=t.length-2,o;for(;i<s;)if(o=i+(s-i>>1),e<t[o])s=o-1;else if(e>=t[o+1])i=o+1;else{i=o;break}}return{col:e-t[i]+1,line:i+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:Ra(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,n,i){if(!this.map)return!1;let s=this.map.consumer(),o=s.originalPositionFor({column:t,line:e});if(!o.source)return!1;let a;typeof n=="number"&&(a=s.originalPositionFor({column:i,line:n}));let l;wa(o.source)?l=Hi(o.source):l=new URL(o.source,this.map.consumer().sourceRoot||Hi(this.map.mapFile));let c={column:o.column,endColumn:a&&a.column,endLine:a&&a.line,line:o.line,url:l.toString()};if(l.protocol==="file:")if(qd)c.file=qd(l);else throw new Error("file: protocol is not available in this PostCSS build");let u=s.sourceContentFor(o.source);return u&&(c.source=u),c}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])this[t]!=null&&(e[t]=this[t]);return this.map&&(e.map=S({},this.map),e.map.consumerCache&&(e.map.consumerCache=void 0)),e}};var Ki=Bi;Bi.default=Bi,Ia&&Ia.registerInput&&Ia.registerInput(Bi);let nh=lr,ih,sh,Pr=class extends nh{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,n){let i=super.normalize(e);if(t){if(n==="prepend")this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let s of i)s.raws.before=t.raws.before}return i}removeChild(e,t){let n=this.index(e);return!t&&n===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[n].raws.before),super.removeChild(e)}toResult(e={}){return new ih(new sh,this,e).stringify()}};Pr.registerLazyResult=r=>{ih=r},Pr.registerProcessor=r=>{sh=r};var Tn=Pr;Pr.default=Pr,nh.registerRoot(Pr);let En={comma(r){return En.split(r,[","],!0)},space(r){let e=[" ",`
`,"	"];return En.split(r,e)},split(r,e,t){let n=[],i="",s=!1,o=0,a=!1,l="",c=!1;for(let u of r)c?c=!1:u==="\\"?c=!0:a?u===l&&(a=!1):u==='"'||u==="'"?(a=!0,l=u):u==="("?o+=1:u===")"?o>0&&(o-=1):o===0&&e.includes(u)&&(s=!0),s?(i!==""&&n.push(i.trim()),i="",s=!1):i+=u;return(t||i!=="")&&n.push(i.trim()),n}};var oh=En;En.default=En;let ah=lr,LS=oh,zi=class extends ah{get selectors(){return LS.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,n=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(n)}constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}};var La=zi;zi.default=zi,ah.registerRule(zi);let OS=Sa,ZS=Di,NS=Ji,GS=Ki,VS=$d,xS=Tn,XS=La;function wn(r,e){if(Array.isArray(r))return r.map(o=>wn(o));let i=r,{inputs:t}=i,n=We(i,["inputs"]);if(t){e=[];for(let o of t){let a=W(S({},o),{__proto__:GS.prototype});a.map&&(a.map=W(S({},a.map),{__proto__:VS.prototype})),e.push(a)}}if(n.nodes&&(n.nodes=r.nodes.map(o=>wn(o,e))),n.source){let s=n.source,{inputId:o}=s,a=We(s,["inputId"]);n.source=a,o!=null&&(n.source.input=e[o])}if(n.type==="root")return new xS(n);if(n.type==="decl")return new NS(n);if(n.type==="rule")return new XS(n);if(n.type==="comment")return new ZS(n);if(n.type==="atrule")return new OS(n);throw new Error("Unknown node type: "+r.type)}var kS=wn;wn.default=wn;let{dirname:ji,relative:lh,resolve:ch,sep:uh}=ht,{SourceMapConsumer:dh,SourceMapGenerator:Qi}=ht,{pathToFileURL:hh}=ht,WS=Ki,AS=!!(dh&&Qi),PS=!!(ji&&ch&&lh&&uh);var fh=class{constructor(e,t,n,i){this.stringify=e,this.mapOpts=n.map||{},this.root=t,this.opts=n,this.css=i,this.originalCSS=i,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;this.isInline()?e="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?e=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?e=this.mapOpts.annotation(this.opts.to,this.root):e=this.outputFile()+".map";let t=`
`;this.css.includes(`\r
`)&&(t=`\r
`),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t=this.toUrl(this.path(e.file)),n=e.root||ji(e.file),i;this.mapOpts.sourcesContent===!1?(i=new dh(e.text),i.sourcesContent&&(i.sourcesContent=null)):i=e.consumer(),this.map.applySourceMap(i,t,this.toUrl(this.path(n)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],e.type==="comment"&&e.text.startsWith("# sourceMappingURL=")&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/\n*\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),PS&&AS&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,t=>{e+=t}),[e]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=Qi.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new Qi({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new Qi({file:this.outputFile(),ignoreInvalidMapping:!0});let e=1,t=1,n="<no source>",i={generated:{column:0,line:0},original:{column:0,line:0},source:""},s,o;this.stringify(this.root,(a,l,c)=>{if(this.css+=a,l&&c!=="end"&&(i.generated.line=e,i.generated.column=t-1,l.source&&l.source.start?(i.source=this.sourcePath(l),i.original.line=l.source.start.line,i.original.column=l.source.start.column-1,this.map.addMapping(i)):(i.source=n,i.original.line=1,i.original.column=0,this.map.addMapping(i))),o=a.match(/\n/g),o?(e+=o.length,s=a.lastIndexOf(`
`),t=a.length-s):t+=a.length,l&&c!=="start"){let u=l.parent||{raws:{}};(!(l.type==="decl"||l.type==="atrule"&&!l.nodes)||l!==u.last||u.raws.semicolon)&&(l.source&&l.source.end?(i.source=this.sourcePath(l),i.original.line=l.source.end.line,i.original.column=l.source.end.column-1,i.generated.line=e,i.generated.column=t-2,this.map.addMapping(i)):(i.source=n,i.original.line=1,i.original.column=0,i.generated.line=e,i.generated.column=t-1,this.map.addMapping(i)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation!="undefined"?this.mapOpts.annotation:this.previous().length?this.previous().some(e=>e.annotation):!0}isInline(){if(typeof this.mapOpts.inline!="undefined")return this.mapOpts.inline;let e=this.mapOpts.annotation;return typeof e!="undefined"&&e!==!0?!1:this.previous().length?this.previous().some(t=>t.inline):!0}isMap(){return typeof this.opts.map!="undefined"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent!="undefined"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(e=>e.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute||e.charCodeAt(0)===60||/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let n=this.opts.to?ji(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(n=ji(ch(n,this.mapOpts.annotation)));let i=lh(n,e);return this.memoizedPaths.set(e,i),i}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}});else{let e=new WS(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk(t=>{if(t.source){let n=t.source.input.from;if(n&&!e[n]){e[n]=!0;let i=this.usesFileUrls?this.toFileUrl(n):this.toUrl(this.path(n));this.map.setSourceContent(i,t.source.input.css)}}});else if(this.css){let t=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(t,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(hh){let n=hh(e).toString();return this.memoizedFileURLs.set(e,n),n}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;uh==="\\"&&(e=e.replace(/\\/g,"/"));let n=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,n),n}};const Oa=39,ph=34,$i=92,mh=47,qi=10,Rn=32,es=12,ts=9,rs=13,MS=91,US=93,FS=40,DS=41,JS=123,YS=125,HS=59,BS=42,KS=58,zS=64,ns=/[\t\n\f\r "#'()/;[\\\]{}]/g,is=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,jS=/.[\r\n"'(/\\]/,gh=/[\da-f]/i;var QS=function(e,t={}){let n=e.css.valueOf(),i=t.ignoreErrors,s,o,a,l,c,u,d,h,f,m,p=n.length,g=0,y=[],E=[];function T(){return g}function I(Z){throw e.error("Unclosed "+Z,g)}function R(){return E.length===0&&g>=p}function N(Z){if(E.length)return E.pop();if(g>=p)return;let w=Z?Z.ignoreUnclosed:!1;switch(s=n.charCodeAt(g),s){case qi:case Rn:case ts:case rs:case es:{l=g;do l+=1,s=n.charCodeAt(l);while(s===Rn||s===qi||s===ts||s===rs||s===es);u=["space",n.slice(g,l)],g=l-1;break}case MS:case US:case JS:case YS:case KS:case HS:case DS:{let L=String.fromCharCode(s);u=[L,L,g];break}case FS:{if(m=y.length?y.pop()[1]:"",f=n.charCodeAt(g+1),m==="url"&&f!==Oa&&f!==ph&&f!==Rn&&f!==qi&&f!==ts&&f!==es&&f!==rs){l=g;do{if(d=!1,l=n.indexOf(")",l+1),l===-1)if(i||w){l=g;break}else I("bracket");for(h=l;n.charCodeAt(h-1)===$i;)h-=1,d=!d}while(d);u=["brackets",n.slice(g,l+1),g,l],g=l}else l=n.indexOf(")",g+1),o=n.slice(g,l+1),l===-1||jS.test(o)?u=["(","(",g]:(u=["brackets",o,g,l],g=l);break}case Oa:case ph:{c=s===Oa?"'":'"',l=g;do{if(d=!1,l=n.indexOf(c,l+1),l===-1)if(i||w){l=g+1;break}else I("string");for(h=l;n.charCodeAt(h-1)===$i;)h-=1,d=!d}while(d);u=["string",n.slice(g,l+1),g,l],g=l;break}case zS:{ns.lastIndex=g+1,ns.test(n),ns.lastIndex===0?l=n.length-1:l=ns.lastIndex-2,u=["at-word",n.slice(g,l+1),g,l],g=l;break}case $i:{for(l=g,a=!0;n.charCodeAt(l+1)===$i;)l+=1,a=!a;if(s=n.charCodeAt(l+1),a&&s!==mh&&s!==Rn&&s!==qi&&s!==ts&&s!==rs&&s!==es&&(l+=1,gh.test(n.charAt(l)))){for(;gh.test(n.charAt(l+1));)l+=1;n.charCodeAt(l+1)===Rn&&(l+=1)}u=["word",n.slice(g,l+1),g,l],g=l;break}default:{s===mh&&n.charCodeAt(g+1)===BS?(l=n.indexOf("*/",g+2)+1,l===0&&(i||w?l=n.length:I("comment")),u=["comment",n.slice(g,l+1),g,l],g=l):(is.lastIndex=g+1,is.test(n),is.lastIndex===0?l=n.length-1:l=is.lastIndex-2,u=["word",n.slice(g,l+1),g,l],y.push(u),g=l);break}}return g++,u}function V(Z){E.push(Z)}return{back:V,endOfFile:R,nextToken:N,position:T}};let $S=Sa,qS=Di,e_=Ji,t_=Tn,yh=La,r_=QS;const bh={empty:!0,space:!0};function n_(r){for(let e=r.length-1;e>=0;e--){let t=r[e],n=t[3]||t[2];if(n)return n}}var i_=class{constructor(e){this.input=e,this.root=new t_,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t=new $S;t.name=e[1].slice(1),t.name===""&&this.unnamedAtrule(t,e),this.init(t,e[2]);let n,i,s,o=!1,a=!1,l=[],c=[];for(;!this.tokenizer.endOfFile();){if(e=this.tokenizer.nextToken(),n=e[0],n==="("||n==="["?c.push(n==="("?")":"]"):n==="{"&&c.length>0?c.push("}"):n===c[c.length-1]&&c.pop(),c.length===0)if(n===";"){t.source.end=this.getPosition(e[2]),t.source.end.offset++,this.semicolon=!0;break}else if(n==="{"){a=!0;break}else if(n==="}"){if(l.length>0){for(s=l.length-1,i=l[s];i&&i[0]==="space";)i=l[--s];i&&(t.source.end=this.getPosition(i[3]||i[2]),t.source.end.offset++)}this.end(e);break}else l.push(e);else l.push(e);if(this.tokenizer.endOfFile()){o=!0;break}}t.raws.between=this.spacesAndCommentsFromEnd(l),l.length?(t.raws.afterName=this.spacesAndCommentsFromStart(l),this.raw(t,"params",l),o&&(e=l[l.length-1],t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++,this.spaces=t.raws.between,t.raws.between="")):(t.raws.afterName="",t.params=""),a&&(t.nodes=[],this.current=t)}checkMissedSemicolon(e){let t=this.colon(e);if(t===!1)return;let n=0,i;for(let s=t-1;s>=0&&(i=e[s],!(i[0]!=="space"&&(n+=1,n===2)));s--);throw this.input.error("Missed semicolon",i[0]==="word"?i[3]+1:i[2])}colon(e){let t=0,n,i,s;for(let[o,a]of e.entries()){if(i=a,s=i[0],s==="("&&(t+=1),s===")"&&(t-=1),t===0&&s===":")if(!n)this.doubleColon(i);else{if(n[0]==="word"&&n[1]==="progid")continue;return o}n=i}return!1}comment(e){let t=new qS;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let n=e[1].slice(2,-2);if(/^\s*$/.test(n))t.text="",t.raws.left=n,t.raws.right="";else{let i=n.match(/^(\s*)([^]*\S)(\s*)$/);t.text=i[2],t.raws.left=i[1],t.raws.right=i[3]}}createTokenizer(){this.tokenizer=r_(this.input)}decl(e,t){let n=new e_;this.init(n,e[0][2]);let i=e[e.length-1];for(i[0]===";"&&(this.semicolon=!0,e.pop()),n.source.end=this.getPosition(i[3]||i[2]||n_(e)),n.source.end.offset++;e[0][0]!=="word";)e.length===1&&this.unknownWord(e),n.raws.before+=e.shift()[1];for(n.source.start=this.getPosition(e[0][2]),n.prop="";e.length;){let c=e[0][0];if(c===":"||c==="space"||c==="comment")break;n.prop+=e.shift()[1]}n.raws.between="";let s;for(;e.length;)if(s=e.shift(),s[0]===":"){n.raws.between+=s[1];break}else s[0]==="word"&&/\w/.test(s[1])&&this.unknownWord([s]),n.raws.between+=s[1];(n.prop[0]==="_"||n.prop[0]==="*")&&(n.raws.before+=n.prop[0],n.prop=n.prop.slice(1));let o=[],a;for(;e.length&&(a=e[0][0],!(a!=="space"&&a!=="comment"));)o.push(e.shift());this.precheckMissedSemicolon(e);for(let c=e.length-1;c>=0;c--){if(s=e[c],s[1].toLowerCase()==="!important"){n.important=!0;let u=this.stringFrom(e,c);u=this.spacesFromEnd(e)+u,u!==" !important"&&(n.raws.important=u);break}else if(s[1].toLowerCase()==="important"){let u=e.slice(0),d="";for(let h=c;h>0;h--){let f=u[h][0];if(d.trim().startsWith("!")&&f!=="space")break;d=u.pop()[1]+d}d.trim().startsWith("!")&&(n.important=!0,n.raws.important=d,e=u)}if(s[0]!=="space"&&s[0]!=="comment")break}e.some(c=>c[0]!=="space"&&c[0]!=="comment")&&(n.raws.between+=o.map(c=>c[1]).join(""),o=[]),this.raw(n,"value",o.concat(e),t),n.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new yh;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let t=this.current.nodes[this.current.nodes.length-1];t&&t.type==="rule"&&!t.raws.ownSemicolon&&(t.raws.ownSemicolon=this.spaces,this.spaces="",t.source.end=this.getPosition(e[2]),t.source.end.offset+=t.raws.ownSemicolon.length)}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="",e.type!=="comment"&&(this.semicolon=!1)}other(e){let t=!1,n=null,i=!1,s=null,o=[],a=e[1].startsWith("--"),l=[],c=e;for(;c;){if(n=c[0],l.push(c),n==="("||n==="[")s||(s=c),o.push(n==="("?")":"]");else if(a&&i&&n==="{")s||(s=c),o.push("}");else if(o.length===0)if(n===";")if(i){this.decl(l,a);return}else break;else if(n==="{"){this.rule(l);return}else if(n==="}"){this.tokenizer.back(l.pop()),t=!0;break}else n===":"&&(i=!0);else n===o[o.length-1]&&(o.pop(),o.length===0&&(s=null));c=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),o.length>0&&this.unclosedBracket(s),t&&i){if(!a)for(;l.length&&(c=l[l.length-1][0],!(c!=="space"&&c!=="comment"));)this.tokenizer.back(l.pop());this.decl(l,a)}else this.unknownWord(l)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e);break}this.endFile()}precheckMissedSemicolon(){}raw(e,t,n,i){let s,o,a=n.length,l="",c=!0,u,d;for(let h=0;h<a;h+=1)s=n[h],o=s[0],o==="space"&&h===a-1&&!i?c=!1:o==="comment"?(d=n[h-1]?n[h-1][0]:"empty",u=n[h+1]?n[h+1][0]:"empty",!bh[d]&&!bh[u]?l.slice(-1)===","?c=!1:l+=s[1]:c=!1):l+=s[1];if(!c){let h=n.reduce((f,m)=>f+m[1],"");e.raws[t]={raw:h,value:l}}e[t]=l}rule(e){e.pop();let t=new yh;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,n="";for(;e.length&&(t=e[e.length-1][0],!(t!=="space"&&t!=="comment"));)n=e.pop()[1]+n;return n}spacesAndCommentsFromStart(e){let t,n="";for(;e.length&&(t=e[0][0],!(t!=="space"&&t!=="comment"));)n+=e.shift()[1];return n}spacesFromEnd(e){let t,n="";for(;e.length&&(t=e[e.length-1][0],t==="space");)n=e.pop()[1]+n;return n}stringFrom(e,t){let n="";for(let i=t;i<e.length;i++)n+=e[i][1];return e.splice(t,e.length-t),n}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word "+e[0][1],{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}};let s_=lr,o_=Ki,a_=i_;function ss(r,e){let t=new o_(r,e),n=new a_(t);try{n.parse()}catch(i){throw process.env.NODE_ENV!=="production"&&i.name==="CssSyntaxError"&&e&&e.from&&(/\.scss$/i.test(e.from)?i.message+=`
You tried to parse SCSS with the standard CSS parser; try again with the postcss-scss parser`:/\.sass/i.test(e.from)?i.message+=`
You tried to parse Sass with the standard CSS parser; try again with the postcss-sass parser`:/\.less$/i.test(e.from)&&(i.message+=`
You tried to parse Less with the standard CSS parser; try again with the postcss-less parser`)),i}return n.root}var Za=ss;ss.default=ss,s_.registerParse(ss);let Na=class{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let n=t.node.rangeBy(t);this.line=n.start.line,this.column=n.start.column,this.endLine=n.end.line,this.endColumn=n.end.column}for(let n in t)this[n]=t[n]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};var vh=Na;Na.default=Na;let l_=vh,Ga=class{get content(){return this.css}constructor(e,t,n){this.processor=e,this.messages=[],this.root=t,this.opts=n,this.css="",this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let n=new l_(e,t);return this.messages.push(n),n}warnings(){return this.messages.filter(e=>e.type==="warning")}};var Va=Ga;Ga.default=Ga;let Sh={};var _h=function(e){Sh[e]||(Sh[e]=!0,typeof console!="undefined"&&console.warn&&console.warn(e))};let c_=lr,u_=_a,d_=fh,h_=Za,Th=Va,f_=Tn,p_=Ui,{isClean:bt,my:m_}=vn,g_=_h;const y_={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},b_={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},v_={Once:!0,postcssPlugin:!0,prepare:!0},Mr=0;function In(r){return typeof r=="object"&&typeof r.then=="function"}function Eh(r){let e=!1,t=y_[r.type];return r.type==="decl"?e=r.prop.toLowerCase():r.type==="atrule"&&(e=r.name.toLowerCase()),e&&r.append?[t,t+"-"+e,Mr,t+"Exit",t+"Exit-"+e]:e?[t,t+"-"+e,t+"Exit",t+"Exit-"+e]:r.append?[t,Mr,t+"Exit"]:[t,t+"Exit"]}function wh(r){let e;return r.type==="document"?e=["Document",Mr,"DocumentExit"]:r.type==="root"?e=["Root",Mr,"RootExit"]:e=Eh(r),{eventIndex:0,events:e,iterator:0,node:r,visitorIndex:0,visitors:[]}}function xa(r){return r[bt]=!1,r.nodes&&r.nodes.forEach(e=>xa(e)),r}let Xa={},Ur=class ov{get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}constructor(e,t,n){this.stringified=!1,this.processed=!1;let i;if(typeof t=="object"&&t!==null&&(t.type==="root"||t.type==="document"))i=xa(t);else if(t instanceof ov||t instanceof Th)i=xa(t.root),t.map&&(typeof n.map=="undefined"&&(n.map={}),n.map.inline||(n.map.inline=!1),n.map.prev=t.map);else{let s=h_;n.syntax&&(s=n.syntax.parse),n.parser&&(s=n.parser),s.parse&&(s=s.parse);try{i=s(t,n)}catch(o){this.processed=!0,this.error=o}i&&!i[m_]&&c_.rebuild(i)}this.result=new Th(e,i,n),this.helpers=W(S({},Xa),{postcss:Xa,result:this.result}),this.plugins=this.processor.plugins.map(s=>typeof s=="object"&&s.prepare?S(S({},s),s.prepare(this.result)):s)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let n=this.result.lastPlugin;try{if(t&&t.addToError(e),this.error=e,e.name==="CssSyntaxError"&&!e.plugin)e.plugin=n.postcssPlugin,e.setMessage();else if(n.postcssVersion&&process.env.NODE_ENV!=="production"){let i=n.postcssPlugin,s=n.postcssVersion,o=this.result.processor.version,a=s.split("."),l=o.split(".");(a[0]!==l[0]||parseInt(a[1])>parseInt(l[1]))&&console.error("Unknown error from PostCSS plugin. Your current PostCSS version is "+o+", but "+i+" uses "+s+". Perhaps this is the source of the error below.")}}catch(i){console&&console.error&&console.error(i)}return e}prepareVisitors(){this.listeners={};let e=(t,n,i)=>{this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push([t,i])};for(let t of this.plugins)if(typeof t=="object")for(let n in t){if(!b_[n]&&/^[A-Z]/.test(n))throw new Error(`Unknown event ${n} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!v_[n])if(typeof t[n]=="object")for(let i in t[n])i==="*"?e(t,n,t[n][i]):e(t,n+"-"+i.toLowerCase(),t[n][i]);else typeof t[n]=="function"&&e(t,n,t[n])}this.hasListener=Object.keys(this.listeners).length>0}runAsync(){return D(this,null,function*(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],n=this.runOnRoot(t);if(In(n))try{yield n}catch(i){throw this.handleError(i)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[bt];){e[bt]=!0;let t=[wh(e)];for(;t.length>0;){let n=this.visitTick(t);if(In(n))try{yield n}catch(i){let s=t[t.length-1].node;throw this.handleError(i,s)}}}if(this.listeners.OnceExit)for(let[t,n]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if(e.type==="document"){let i=e.nodes.map(s=>n(s,this.helpers));yield Promise.all(i)}else yield n(e,this.helpers)}catch(i){throw this.handleError(i)}}}return this.processed=!0,this.stringify()})}runOnRoot(e){this.result.lastPlugin=e;try{if(typeof e=="object"&&e.Once){if(this.result.root.type==="document"){let t=this.result.root.nodes.map(n=>e.Once(n,this.helpers));return In(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}else if(typeof e=="function")return e(this.result.root,this.result)}catch(t){throw this.handleError(t)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=p_;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let i=new d_(t,this.result.root,this.result.opts).generate();return this.result.css=i[0],this.result.map=i[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){let t=this.runOnRoot(e);if(In(t))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[bt];)e[bt]=!0,this.walkSync(e);if(this.listeners.OnceExit)if(e.type==="document")for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return process.env.NODE_ENV!=="production"&&("from"in this.opts||g_("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.")),this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[n,i]of e){this.result.lastPlugin=n;let s;try{s=i(t,this.helpers)}catch(o){throw this.handleError(o,t.proxyOf)}if(t.type!=="root"&&t.type!=="document"&&!t.parent)return!0;if(In(s))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:n,visitors:i}=t;if(n.type!=="root"&&n.type!=="document"&&!n.parent){e.pop();return}if(i.length>0&&t.visitorIndex<i.length){let[o,a]=i[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===i.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=o;try{return a(n.toProxy(),this.helpers)}catch(l){throw this.handleError(l,n)}}if(t.iterator!==0){let o=t.iterator,a;for(;a=n.nodes[n.indexes[o]];)if(n.indexes[o]+=1,!a[bt]){a[bt]=!0,e.push(wh(a));return}t.iterator=0,delete n.indexes[o]}let s=t.events;for(;t.eventIndex<s.length;){let o=s[t.eventIndex];if(t.eventIndex+=1,o===Mr){n.nodes&&n.nodes.length&&(n[bt]=!0,t.iterator=n.getIterator());return}else if(this.listeners[o]){t.visitors=this.listeners[o];return}}e.pop()}walkSync(e){e[bt]=!0;let t=Eh(e);for(let n of t)if(n===Mr)e.nodes&&e.each(i=>{i[bt]||this.walkSync(i)});else{let i=this.listeners[n];if(i&&this.visitSync(i,e.toProxy()))return}}warnings(){return this.sync().warnings()}};Ur.registerPostcss=r=>{Xa=r};var Rh=Ur;Ur.default=Ur,f_.registerLazyResult(Ur),u_.registerLazyResult(Ur);let S_=fh,__=Za;const T_=Va;let E_=Ui,w_=_h,ka=class{get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=__;try{e=t(this._css,this._opts)}catch(n){this.error=n}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}constructor(e,t,n){t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=n,this._map=void 0;let i,s=E_;this.result=new T_(this._processor,i,this._opts),this.result.css=t;let o=this;Object.defineProperty(this.result,"root",{get(){return o.root}});let a=new S_(s,i,this._opts,t);if(a.isMap()){let[l,c]=a.generate();l&&(this.result.css=l),c&&(this.result.map=c)}else a.clearAnnotation(),this.result.css=a.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return process.env.NODE_ENV!=="production"&&("from"in this._opts||w_("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.")),this.async().then(e,t)}toString(){return this._css}warnings(){return[]}};var R_=ka;ka.default=ka;let I_=_a,C_=Rh,L_=R_,O_=Tn,Cn=class{constructor(e=[]){this.version="8.5.6",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let n of e)if(n.postcss===!0?n=n():n.postcss&&(n=n.postcss),typeof n=="object"&&Array.isArray(n.plugins))t=t.concat(n.plugins);else if(typeof n=="object"&&n.postcssPlugin)t.push(n);else if(typeof n=="function")t.push(n);else if(typeof n=="object"&&(n.parse||n.stringify)){if(process.env.NODE_ENV!=="production")throw new Error("PostCSS syntaxes cannot be used as plugins. Instead, please use one of the syntax/parser/stringifier options as outlined in your PostCSS runner documentation.")}else throw new Error(n+" is not a PostCSS plugin");return t}process(e,t={}){return!this.plugins.length&&!t.parser&&!t.stringifier&&!t.syntax?new L_(this,e,t):new C_(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}};var Z_=Cn;Cn.default=Cn,O_.registerProcessor(Cn),I_.registerProcessor(Cn);let Ih=Sa,Ch=Di,N_=lr,G_=da,Lh=Ji,Oh=_a,V_=kS,x_=Ki,X_=Rh,k_=oh,W_=Fi,A_=Za,Wa=Z_,P_=Va,Zh=Tn,Nh=La,M_=Ui,U_=vh;function de(...r){return r.length===1&&Array.isArray(r[0])&&(r=r[0]),new Wa(r)}de.plugin=function(e,t){let n=!1;function i(...o){console&&console.warn&&!n&&(n=!0,console.warn(e+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+`:  postcss.plugin . :
https://www.w3ctech.com/topic/2226`));let a=t(...o);return a.postcssPlugin=e,a.postcssVersion=new Wa().version,a}let s;return Object.defineProperty(i,"postcss",{get(){return s||(s=i()),s}}),i.process=function(o,a,l){return de([i(l)]).process(o,a)},i},de.stringify=M_,de.parse=A_,de.fromJSON=V_,de.list=k_,de.comment=r=>new Ch(r),de.atRule=r=>new Ih(r),de.decl=r=>new Lh(r),de.rule=r=>new Nh(r),de.root=r=>new Zh(r),de.document=r=>new Oh(r),de.CssSyntaxError=G_,de.Declaration=Lh,de.Container=N_,de.Processor=Wa,de.Document=Oh,de.Comment=Ch,de.Warning=U_,de.AtRule=Ih,de.Result=P_,de.Input=x_,de.Rule=Nh,de.Root=Zh,de.Node=W_,X_.registerPostcss(de),de.default=de;var F_=Object.defineProperty,D_=(r,e,t)=>e in r?F_(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,et=(r,e,t)=>D_(r,typeof e!="symbol"?e+"":e,t);function J_(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var Aa={exports:{}},z=String,Gh=function(){return{isColorSupported:!1,reset:z,bold:z,dim:z,italic:z,underline:z,inverse:z,hidden:z,strikethrough:z,black:z,red:z,green:z,yellow:z,blue:z,magenta:z,cyan:z,white:z,gray:z,bgBlack:z,bgRed:z,bgGreen:z,bgYellow:z,bgBlue:z,bgMagenta:z,bgCyan:z,bgWhite:z,blackBright:z,redBright:z,greenBright:z,yellowBright:z,blueBright:z,magentaBright:z,cyanBright:z,whiteBright:z,bgBlackBright:z,bgRedBright:z,bgGreenBright:z,bgYellowBright:z,bgBlueBright:z,bgMagentaBright:z,bgCyanBright:z,bgWhiteBright:z}};Aa.exports=Gh(),Aa.exports.createColors=Gh;var Y_=Aa.exports;const ft=J_(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));let Vh=Y_,xh=ft,Pa=class av extends Error{constructor(e,t,n,i,s,o){super(e),this.name="CssSyntaxError",this.reason=e,s&&(this.file=s),i&&(this.source=i),o&&(this.plugin=o),typeof t!="undefined"&&typeof n!="undefined"&&(typeof t=="number"?(this.line=t,this.column=n):(this.line=t.line,this.column=t.column,this.endLine=n.line,this.endColumn=n.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,av)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line!="undefined"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;e==null&&(e=Vh.isColorSupported);let n=u=>u,i=u=>u,s=u=>u;if(e){let{bold:u,gray:d,red:h}=Vh.createColors(!0);i=f=>u(h(f)),n=f=>d(f),xh&&(s=f=>xh(f))}let o=t.split(/\r?\n/),a=Math.max(this.line-3,0),l=Math.min(this.line+2,o.length),c=String(l).length;return o.slice(a,l).map((u,d)=>{let h=a+1+d,f=" "+(" "+h).slice(-c)+" | ";if(h===this.line){if(u.length>160){let p=20,g=Math.max(0,this.column-p),y=Math.max(this.column+p,this.endColumn+p),E=u.slice(g,y),T=n(f.replace(/\d/g," "))+u.slice(0,Math.min(this.column-1,p-1)).replace(/[^\t]/g," ");return i(">")+n(f)+s(E)+`
 `+T+i("^")}let m=n(f.replace(/\d/g," "))+u.slice(0,this.column-1).replace(/[^\t]/g," ");return i(">")+n(f)+s(u)+`
 `+m+i("^")}return" "+n(f)+s(u)}).join(`
`)}toString(){let e=this.showSourceCode();return e&&(e=`

`+e+`
`),this.name+": "+this.message+e}};var Ma=Pa;Pa.default=Pa;const Xh={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function H_(r){return r[0].toUpperCase()+r.slice(1)}let Ua=class{constructor(e){this.builder=e}atrule(e,t){let n="@"+e.name,i=e.params?this.rawValue(e,"params"):"";if(typeof e.raws.afterName!="undefined"?n+=e.raws.afterName:i&&(n+=" "),e.nodes)this.block(e,n+i);else{let s=(e.raws.between||"")+(t?";":"");this.builder(n+i+s,e)}}beforeAfter(e,t){let n;e.type==="decl"?n=this.raw(e,null,"beforeDecl"):e.type==="comment"?n=this.raw(e,null,"beforeComment"):t==="before"?n=this.raw(e,null,"beforeRule"):n=this.raw(e,null,"beforeClose");let i=e.parent,s=0;for(;i&&i.type!=="root";)s+=1,i=i.parent;if(n.includes(`
`)){let o=this.raw(e,null,"indent");if(o.length)for(let a=0;a<s;a++)n+=o}return n}block(e,t){let n=this.raw(e,"between","beforeOpen");this.builder(t+n+"{",e,"start");let i;e.nodes&&e.nodes.length?(this.body(e),i=this.raw(e,"after")):i=this.raw(e,"after","emptyBody"),i&&this.builder(i),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&e.nodes[t].type==="comment";)t-=1;let n=this.raw(e,"semicolon");for(let i=0;i<e.nodes.length;i++){let s=e.nodes[i],o=this.raw(s,"before");o&&this.builder(o),this.stringify(s,t!==i||n)}}comment(e){let t=this.raw(e,"left","commentLeft"),n=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+n+"*/",e)}decl(e,t){let n=this.raw(e,"between","colon"),i=e.prop+n+this.rawValue(e,"value");e.important&&(i+=e.raws.important||" !important"),t&&(i+=";"),this.builder(i,e)}document(e){this.body(e)}raw(e,t,n){let i;if(n||(n=t),t&&(i=e.raws[t],typeof i!="undefined"))return i;let s=e.parent;if(n==="before"&&(!s||s.type==="root"&&s.first===e||s&&s.type==="document"))return"";if(!s)return Xh[n];let o=e.root();if(o.rawCache||(o.rawCache={}),typeof o.rawCache[n]!="undefined")return o.rawCache[n];if(n==="before"||n==="after")return this.beforeAfter(e,n);{let a="raw"+H_(n);this[a]?i=this[a](o,e):o.walk(l=>{if(i=l.raws[t],typeof i!="undefined")return!1})}return typeof i=="undefined"&&(i=Xh[n]),o.rawCache[n]=i,i}rawBeforeClose(e){let t;return e.walk(n=>{if(n.nodes&&n.nodes.length>0&&typeof n.raws.after!="undefined")return t=n.raws.after,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let n;return e.walkComments(i=>{if(typeof i.raws.before!="undefined")return n=i.raws.before,n.includes(`
`)&&(n=n.replace(/[^\n]+$/,"")),!1}),typeof n=="undefined"?n=this.raw(t,null,"beforeDecl"):n&&(n=n.replace(/\S/g,"")),n}rawBeforeDecl(e,t){let n;return e.walkDecls(i=>{if(typeof i.raws.before!="undefined")return n=i.raws.before,n.includes(`
`)&&(n=n.replace(/[^\n]+$/,"")),!1}),typeof n=="undefined"?n=this.raw(t,null,"beforeRule"):n&&(n=n.replace(/\S/g,"")),n}rawBeforeOpen(e){let t;return e.walk(n=>{if(n.type!=="decl"&&(t=n.raws.between,typeof t!="undefined"))return!1}),t}rawBeforeRule(e){let t;return e.walk(n=>{if(n.nodes&&(n.parent!==e||e.first!==n)&&typeof n.raws.before!="undefined")return t=n.raws.before,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls(n=>{if(typeof n.raws.between!="undefined")return t=n.raws.between.replace(/[^\s:]/g,""),!1}),t}rawEmptyBody(e){let t;return e.walk(n=>{if(n.nodes&&n.nodes.length===0&&(t=n.raws.after,typeof t!="undefined"))return!1}),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk(n=>{let i=n.parent;if(i&&i!==e&&i.parent&&i.parent===e&&typeof n.raws.before!="undefined"){let s=n.raws.before.split(`
`);return t=s[s.length-1],t=t.replace(/\S/g,""),!1}}),t}rawSemicolon(e){let t;return e.walk(n=>{if(n.nodes&&n.nodes.length&&n.last.type==="decl"&&(t=n.raws.semicolon,typeof t!="undefined"))return!1}),t}rawValue(e,t){let n=e[t],i=e.raws[t];return i&&i.value===n?i.raw:n}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}};var kh=Ua;Ua.default=Ua;let B_=kh;function Fa(r,e){new B_(e).stringify(r)}var os=Fa;Fa.default=Fa;var Ln={};Ln.isClean=Symbol("isClean"),Ln.my=Symbol("my");let K_=Ma,z_=kh,j_=os,{isClean:On,my:Q_}=Ln;function Da(r,e){let t=new r.constructor;for(let n in r){if(!Object.prototype.hasOwnProperty.call(r,n)||n==="proxyCache")continue;let i=r[n],s=typeof i;n==="parent"&&s==="object"?e&&(t[n]=e):n==="source"?t[n]=i:Array.isArray(i)?t[n]=i.map(o=>Da(o,t)):(s==="object"&&i!==null&&(i=Da(i)),t[n]=i)}return t}function Nt(r,e){if(e&&typeof e.offset!="undefined")return e.offset;let t=1,n=1,i=0;for(let s=0;s<r.length;s++){if(n===e.line&&t===e.column){i=s;break}r[s]===`
`?(t=1,n+=1):t+=1}return i}let Ja=class{get proxyOf(){return this}constructor(e={}){this.raws={},this[On]=!1,this[Q_]=!0;for(let t in e)if(t==="nodes"){this.nodes=[];for(let n of e[t])typeof n.clone=="function"?this.append(n.clone()):this.append(n)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=Da(this);for(let n in e)t[n]=e[n];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:n,start:i}=this.rangeBy(t);return this.source.input.error(e,{column:i.column,line:i.line},{column:n.column,line:n.line},t)}return new K_(e)}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:t==="root"?()=>e.root().toProxy():e[t]},set(e,t,n){return e[t]===n||(e[t]=n,(t==="prop"||t==="value"||t==="name"||t==="params"||t==="important"||t==="text")&&e.markDirty()),!0}}}markClean(){this[On]=!0}markDirty(){if(this[On]){this[On]=!1;let e=this;for(;e=e.parent;)e[On]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e={}){let t=this.source.start;if(e.index)t=this.positionInside(e.index);else if(e.word){let n="document"in this.source.input?this.source.input.document:this.source.input.css,s=n.slice(Nt(n,this.source.start),Nt(n,this.source.end)).indexOf(e.word);s!==-1&&(t=this.positionInside(s))}return t}positionInside(e){let t=this.source.start.column,n=this.source.start.line,i="document"in this.source.input?this.source.input.document:this.source.input.css,s=Nt(i,this.source.start),o=s+e;for(let a=s;a<o;a++)i[a]===`
`?(t=1,n+=1):t+=1;return{column:t,line:n,offset:o}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e={}){let t="document"in this.source.input?this.source.input.document:this.source.input.css,n={column:this.source.start.column,line:this.source.start.line,offset:Nt(t,this.source.start)},i=this.source.end?{column:this.source.end.column+1,line:this.source.end.line,offset:typeof this.source.end.offset=="number"?this.source.end.offset:Nt(t,this.source.end)+1}:{column:n.column+1,line:n.line,offset:n.offset+1};if(e.word){let o=t.slice(Nt(t,this.source.start),Nt(t,this.source.end)).indexOf(e.word);o!==-1&&(n=this.positionInside(o),i=this.positionInside(o+e.word.length))}else e.start?n={column:e.start.column,line:e.start.line,offset:Nt(t,e.start)}:e.index&&(n=this.positionInside(e.index)),e.end?i={column:e.end.column,line:e.end.line,offset:Nt(t,e.end)}:typeof e.endIndex=="number"?i=this.positionInside(e.endIndex):e.index&&(i=this.positionInside(e.index+1));return(i.line<n.line||i.line===n.line&&i.column<=n.column)&&(i={column:n.column+1,line:n.line,offset:n.offset+1}),{end:i,start:n}}raw(e,t){return new z_().raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,n=!1;for(let i of e)i===this?n=!0:n?(this.parent.insertAfter(t,i),t=i):this.parent.insertBefore(t,i);n||this.remove()}return this}root(){let e=this;for(;e.parent&&e.parent.type!=="document";)e=e.parent;return e}toJSON(e,t){let n={},i=t==null;t=t||new Map;let s=0;for(let o in this){if(!Object.prototype.hasOwnProperty.call(this,o)||o==="parent"||o==="proxyCache")continue;let a=this[o];if(Array.isArray(a))n[o]=a.map(l=>typeof l=="object"&&l.toJSON?l.toJSON(null,t):l);else if(typeof a=="object"&&a.toJSON)n[o]=a.toJSON(null,t);else if(o==="source"){if(a==null)continue;let l=t.get(a.input);l==null&&(l=s,t.set(a.input,s),s++),n[o]={end:a.end,inputId:l,start:a.start}}else n[o]=a}return i&&(n.inputs=[...t.keys()].map(o=>o.toJSON())),n}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=j_){e.stringify&&(e=e.stringify);let t="";return e(this,n=>{t+=n}),t}warn(e,t,n={}){let i={node:this};for(let s in n)i[s]=n[s];return e.warn(t,i)}};var as=Ja;Ja.default=Ja;let $_=as,Ya=class extends $_{constructor(e){super(e),this.type="comment"}};var ls=Ya;Ya.default=Ya;let q_=as,Ha=class extends q_{get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}constructor(e){e&&typeof e.value!="undefined"&&typeof e.value!="string"&&(e=W(S({},e),{value:String(e.value)})),super(e),this.type="decl"}};var cs=Ha;Ha.default=Ha;let Wh=ls,Ah=cs,eT=as,{isClean:Ph,my:Mh}=Ln,Ba,Uh,Fh,Ka;function Dh(r){return r.map(e=>(e.nodes&&(e.nodes=Dh(e.nodes)),delete e.source,e))}function Jh(r){if(r[Ph]=!1,r.proxyOf.nodes)for(let e of r.proxyOf.nodes)Jh(e)}let Gt=class lv extends eT{get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}append(...e){for(let t of e){let n=this.normalize(t,this.last);for(let i of n)this.proxyOf.nodes.push(i)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t=this.getIterator(),n,i;for(;this.indexes[t]<this.proxyOf.nodes.length&&(n=this.indexes[t],i=e(this.proxyOf.nodes[n],n),i!==!1);)this.indexes[t]+=1;return delete this.indexes[t],i}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:e[t]?t==="each"||typeof t=="string"&&t.startsWith("walk")?(...n)=>e[t](...n.map(i=>typeof i=="function"?(s,o)=>i(s.toProxy(),o):i)):t==="every"||t==="some"?n=>e[t]((i,...s)=>n(i.toProxy(),...s)):t==="root"?()=>e.root().toProxy():t==="nodes"?e.nodes.map(n=>n.toProxy()):t==="first"||t==="last"?e[t].toProxy():e[t]:e[t]},set(e,t,n){return e[t]===n||(e[t]=n,(t==="name"||t==="params"||t==="selector")&&e.markDirty()),!0}}}index(e){return typeof e=="number"?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let n=this.index(e),i=this.normalize(t,this.proxyOf.nodes[n]).reverse();n=this.index(e);for(let o of i)this.proxyOf.nodes.splice(n+1,0,o);let s;for(let o in this.indexes)s=this.indexes[o],n<s&&(this.indexes[o]=s+i.length);return this.markDirty(),this}insertBefore(e,t){let n=this.index(e),i=n===0?"prepend":!1,s=this.normalize(t,this.proxyOf.nodes[n],i).reverse();n=this.index(e);for(let a of s)this.proxyOf.nodes.splice(n,0,a);let o;for(let a in this.indexes)o=this.indexes[a],n<=o&&(this.indexes[a]=o+s.length);return this.markDirty(),this}normalize(e,t){if(typeof e=="string")e=Dh(Uh(e).nodes);else if(typeof e=="undefined")e=[];else if(Array.isArray(e)){e=e.slice(0);for(let i of e)i.parent&&i.parent.removeChild(i,"ignore")}else if(e.type==="root"&&this.type!=="document"){e=e.nodes.slice(0);for(let i of e)i.parent&&i.parent.removeChild(i,"ignore")}else if(e.type)e=[e];else if(e.prop){if(typeof e.value=="undefined")throw new Error("Value field is missed in node creation");typeof e.value!="string"&&(e.value=String(e.value)),e=[new Ah(e)]}else if(e.selector||e.selectors)e=[new Ka(e)];else if(e.name)e=[new Ba(e)];else if(e.text)e=[new Wh(e)];else throw new Error("Unknown node type in node creation");return e.map(i=>(i[Mh]||lv.rebuild(i),i=i.proxyOf,i.parent&&i.parent.removeChild(i),i[Ph]&&Jh(i),i.raws||(i.raws={}),typeof i.raws.before=="undefined"&&t&&typeof t.raws.before!="undefined"&&(i.raws.before=t.raws.before.replace(/\S/g,"")),i.parent=this.proxyOf,i))}prepend(...e){e=e.reverse();for(let t of e){let n=this.normalize(t,this.first,"prepend").reverse();for(let i of n)this.proxyOf.nodes.unshift(i);for(let i in this.indexes)this.indexes[i]=this.indexes[i]+n.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);let t;for(let n in this.indexes)t=this.indexes[n],t>=e&&(this.indexes[n]=t-1);return this.markDirty(),this}replaceValues(e,t,n){return n||(n=t,t={}),this.walkDecls(i=>{t.props&&!t.props.includes(i.prop)||t.fast&&!i.value.includes(t.fast)||(i.value=i.value.replace(e,n))}),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each((t,n)=>{let i;try{i=e(t,n)}catch(s){throw t.addToError(s)}return i!==!1&&t.walk&&(i=t.walk(e)),i})}walkAtRules(e,t){return t?e instanceof RegExp?this.walk((n,i)=>{if(n.type==="atrule"&&e.test(n.name))return t(n,i)}):this.walk((n,i)=>{if(n.type==="atrule"&&n.name===e)return t(n,i)}):(t=e,this.walk((n,i)=>{if(n.type==="atrule")return t(n,i)}))}walkComments(e){return this.walk((t,n)=>{if(t.type==="comment")return e(t,n)})}walkDecls(e,t){return t?e instanceof RegExp?this.walk((n,i)=>{if(n.type==="decl"&&e.test(n.prop))return t(n,i)}):this.walk((n,i)=>{if(n.type==="decl"&&n.prop===e)return t(n,i)}):(t=e,this.walk((n,i)=>{if(n.type==="decl")return t(n,i)}))}walkRules(e,t){return t?e instanceof RegExp?this.walk((n,i)=>{if(n.type==="rule"&&e.test(n.selector))return t(n,i)}):this.walk((n,i)=>{if(n.type==="rule"&&n.selector===e)return t(n,i)}):(t=e,this.walk((n,i)=>{if(n.type==="rule")return t(n,i)}))}};Gt.registerParse=r=>{Uh=r},Gt.registerRule=r=>{Ka=r},Gt.registerAtRule=r=>{Ba=r},Gt.registerRoot=r=>{Fh=r};var cr=Gt;Gt.default=Gt,Gt.rebuild=r=>{r.type==="atrule"?Object.setPrototypeOf(r,Ba.prototype):r.type==="rule"?Object.setPrototypeOf(r,Ka.prototype):r.type==="decl"?Object.setPrototypeOf(r,Ah.prototype):r.type==="comment"?Object.setPrototypeOf(r,Wh.prototype):r.type==="root"&&Object.setPrototypeOf(r,Fh.prototype),r[Mh]=!0,r.nodes&&r.nodes.forEach(e=>{Gt.rebuild(e)})};let Yh=cr,us=class extends Yh{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}};var za=us;us.default=us,Yh.registerAtRule(us);let tT=cr,Hh,Bh,Zn=class extends tT{constructor(e){super(S({type:"document"},e)),this.nodes||(this.nodes=[])}toResult(e={}){return new Hh(new Bh,this,e).stringify()}};Zn.registerLazyResult=r=>{Hh=r},Zn.registerProcessor=r=>{Bh=r};var ja=Zn;Zn.default=Zn;let rT="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var nT={nanoid:(r=21)=>{let e="",t=r|0;for(;t--;)e+=rT[Math.random()*64|0];return e}};let{existsSync:iT,readFileSync:sT}=ft,{dirname:Qa,join:oT}=ft,{SourceMapConsumer:Kh,SourceMapGenerator:zh}=ft;function aT(r){return Buffer?Buffer.from(r,"base64").toString():window.atob(r)}let $a=class{constructor(e,t){if(t.map===!1)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let n=t.map?t.map.prev:void 0,i=this.loadMap(t.from,n);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=Qa(this.mapFile)),i&&(this.text=i)}consumer(){return this.consumerCache||(this.consumerCache=new Kh(this.text)),this.consumerCache}decodeInline(e){let t=/^data:application\/json;charset=utf-?8;base64,/,n=/^data:application\/json;base64,/,i=/^data:application\/json;charset=utf-?8,/,s=/^data:application\/json,/,o=e.match(i)||e.match(s);if(o)return decodeURIComponent(e.substr(o[0].length));let a=e.match(t)||e.match(n);if(a)return aT(e.substr(a[0].length));let l=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+l)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return typeof e!="object"?!1:typeof e.mappings=="string"||typeof e._mappings=="string"||Array.isArray(e.sections)}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/g);if(!t)return;let n=e.lastIndexOf(t.pop()),i=e.indexOf("*/",n);n>-1&&i>-1&&(this.annotation=this.getAnnotationURL(e.substring(n,i)))}loadFile(e){if(this.root=Qa(e),iT(e))return this.mapFile=e,sT(e,"utf-8").toString().trim()}loadMap(e,t){if(t===!1)return!1;if(t){if(typeof t=="string")return t;if(typeof t=="function"){let n=t(e);if(n){let i=this.loadFile(n);if(!i)throw new Error("Unable to load previous source map: "+n.toString());return i}}else{if(t instanceof Kh)return zh.fromSourceMap(t).toString();if(t instanceof zh)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let n=this.annotation;return e&&(n=oT(Qa(e),n)),this.loadFile(n)}}}startWith(e,t){return e?e.substr(0,t.length)===t:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};var jh=$a;$a.default=$a;let{nanoid:lT}=nT,{isAbsolute:qa,resolve:el}=ft,{SourceMapConsumer:cT,SourceMapGenerator:uT}=ft,{fileURLToPath:Qh,pathToFileURL:ds}=ft,$h=Ma,dT=jh,tl=ft,rl=Symbol("lineToIndexCache"),hT=!!(cT&&uT),qh=!!(el&&qa);function ef(r){if(r[rl])return r[rl];let e=r.css.split(`
`),t=new Array(e.length),n=0;for(let i=0,s=e.length;i<s;i++)t[i]=n,n+=e[i].length+1;return r[rl]=t,t}let hs=class{get from(){return this.file||this.id}constructor(e,t={}){if(e===null||typeof e=="undefined"||typeof e=="object"&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),this.css[0]==="\uFEFF"||this.css[0]===""?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,this.document=this.css,t.document&&(this.document=t.document.toString()),t.from&&(!qh||/^\w+:\/\//.test(t.from)||qa(t.from)?this.file=t.from:this.file=el(t.from)),qh&&hT){let n=new dT(this.css,t);if(n.text){this.map=n;let i=n.consumer().file;!this.file&&i&&(this.file=this.mapResolve(i))}}this.file||(this.id="<input css "+lT(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,n,i={}){let s,o,a,l,c;if(t&&typeof t=="object"){let d=t,h=n;if(typeof d.offset=="number"){l=d.offset;let f=this.fromOffset(l);t=f.line,n=f.col}else t=d.line,n=d.column,l=this.fromLineAndColumn(t,n);if(typeof h.offset=="number"){a=h.offset;let f=this.fromOffset(a);o=f.line,s=f.col}else o=h.line,s=h.column,a=this.fromLineAndColumn(h.line,h.column)}else if(n)l=this.fromLineAndColumn(t,n);else{l=t;let d=this.fromOffset(l);t=d.line,n=d.col}let u=this.origin(t,n,o,s);return u?c=new $h(e,u.endLine===void 0?u.line:{column:u.column,line:u.line},u.endLine===void 0?u.column:{column:u.endColumn,line:u.endLine},u.source,u.file,i.plugin):c=new $h(e,o===void 0?t:{column:n,line:t},o===void 0?n:{column:s,line:o},this.css,this.file,i.plugin),c.input={column:n,endColumn:s,endLine:o,endOffset:a,line:t,offset:l,source:this.css},this.file&&(ds&&(c.input.url=ds(this.file).toString()),c.input.file=this.file),c}fromLineAndColumn(e,t){return ef(this)[e-1]+t-1}fromOffset(e){let t=ef(this),n=t[t.length-1],i=0;if(e>=n)i=t.length-1;else{let s=t.length-2,o;for(;i<s;)if(o=i+(s-i>>1),e<t[o])s=o-1;else if(e>=t[o+1])i=o+1;else{i=o;break}}return{col:e-t[i]+1,line:i+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:el(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,n,i){if(!this.map)return!1;let s=this.map.consumer(),o=s.originalPositionFor({column:t,line:e});if(!o.source)return!1;let a;typeof n=="number"&&(a=s.originalPositionFor({column:i,line:n}));let l;qa(o.source)?l=ds(o.source):l=new URL(o.source,this.map.consumer().sourceRoot||ds(this.map.mapFile));let c={column:o.column,endColumn:a&&a.column,endLine:a&&a.line,line:o.line,url:l.toString()};if(l.protocol==="file:")if(Qh)c.file=Qh(l);else throw new Error("file: protocol is not available in this PostCSS build");let u=s.sourceContentFor(o.source);return u&&(c.source=u),c}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])this[t]!=null&&(e[t]=this[t]);return this.map&&(e.map=S({},this.map),e.map.consumerCache&&(e.map.consumerCache=void 0)),e}};var fs=hs;hs.default=hs,tl&&tl.registerInput&&tl.registerInput(hs);let tf=cr,rf,nf,Fr=class extends tf{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,n){let i=super.normalize(e);if(t){if(n==="prepend")this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let s of i)s.raws.before=t.raws.before}return i}removeChild(e,t){let n=this.index(e);return!t&&n===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[n].raws.before),super.removeChild(e)}toResult(e={}){return new rf(new nf,this,e).stringify()}};Fr.registerLazyResult=r=>{rf=r},Fr.registerProcessor=r=>{nf=r};var Nn=Fr;Fr.default=Fr,tf.registerRoot(Fr);let Gn={comma(r){return Gn.split(r,[","],!0)},space(r){let e=[" ",`
`,"	"];return Gn.split(r,e)},split(r,e,t){let n=[],i="",s=!1,o=0,a=!1,l="",c=!1;for(let u of r)c?c=!1:u==="\\"?c=!0:a?u===l&&(a=!1):u==='"'||u==="'"?(a=!0,l=u):u==="("?o+=1:u===")"?o>0&&(o-=1):o===0&&e.includes(u)&&(s=!0),s?(i!==""&&n.push(i.trim()),i="",s=!1):i+=u;return(t||i!=="")&&n.push(i.trim()),n}};var sf=Gn;Gn.default=Gn;let of=cr,fT=sf,ps=class extends of{get selectors(){return fT.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,n=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(n)}constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}};var nl=ps;ps.default=ps,of.registerRule(ps);let pT=za,mT=ls,gT=cs,yT=fs,bT=jh,vT=Nn,ST=nl;function Vn(r,e){if(Array.isArray(r))return r.map(o=>Vn(o));let i=r,{inputs:t}=i,n=We(i,["inputs"]);if(t){e=[];for(let o of t){let a=W(S({},o),{__proto__:yT.prototype});a.map&&(a.map=W(S({},a.map),{__proto__:bT.prototype})),e.push(a)}}if(n.nodes&&(n.nodes=r.nodes.map(o=>Vn(o,e))),n.source){let s=n.source,{inputId:o}=s,a=We(s,["inputId"]);n.source=a,o!=null&&(n.source.input=e[o])}if(n.type==="root")return new vT(n);if(n.type==="decl")return new gT(n);if(n.type==="rule")return new ST(n);if(n.type==="comment")return new mT(n);if(n.type==="atrule")return new pT(n);throw new Error("Unknown node type: "+r.type)}var _T=Vn;Vn.default=Vn;let{dirname:ms,relative:af,resolve:lf,sep:cf}=ft,{SourceMapConsumer:uf,SourceMapGenerator:gs}=ft,{pathToFileURL:df}=ft,TT=fs,ET=!!(uf&&gs),wT=!!(ms&&lf&&af&&cf);var hf=class{constructor(e,t,n,i){this.stringify=e,this.mapOpts=n.map||{},this.root=t,this.opts=n,this.css=i,this.originalCSS=i,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;this.isInline()?e="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?e=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?e=this.mapOpts.annotation(this.opts.to,this.root):e=this.outputFile()+".map";let t=`
`;this.css.includes(`\r
`)&&(t=`\r
`),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t=this.toUrl(this.path(e.file)),n=e.root||ms(e.file),i;this.mapOpts.sourcesContent===!1?(i=new uf(e.text),i.sourcesContent&&(i.sourcesContent=null)):i=e.consumer(),this.map.applySourceMap(i,t,this.toUrl(this.path(n)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],e.type==="comment"&&e.text.startsWith("# sourceMappingURL=")&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/\n*\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),wT&&ET&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,t=>{e+=t}),[e]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=gs.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new gs({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new gs({file:this.outputFile(),ignoreInvalidMapping:!0});let e=1,t=1,n="<no source>",i={generated:{column:0,line:0},original:{column:0,line:0},source:""},s,o;this.stringify(this.root,(a,l,c)=>{if(this.css+=a,l&&c!=="end"&&(i.generated.line=e,i.generated.column=t-1,l.source&&l.source.start?(i.source=this.sourcePath(l),i.original.line=l.source.start.line,i.original.column=l.source.start.column-1,this.map.addMapping(i)):(i.source=n,i.original.line=1,i.original.column=0,this.map.addMapping(i))),o=a.match(/\n/g),o?(e+=o.length,s=a.lastIndexOf(`
`),t=a.length-s):t+=a.length,l&&c!=="start"){let u=l.parent||{raws:{}};(!(l.type==="decl"||l.type==="atrule"&&!l.nodes)||l!==u.last||u.raws.semicolon)&&(l.source&&l.source.end?(i.source=this.sourcePath(l),i.original.line=l.source.end.line,i.original.column=l.source.end.column-1,i.generated.line=e,i.generated.column=t-2,this.map.addMapping(i)):(i.source=n,i.original.line=1,i.original.column=0,i.generated.line=e,i.generated.column=t-1,this.map.addMapping(i)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation!="undefined"?this.mapOpts.annotation:this.previous().length?this.previous().some(e=>e.annotation):!0}isInline(){if(typeof this.mapOpts.inline!="undefined")return this.mapOpts.inline;let e=this.mapOpts.annotation;return typeof e!="undefined"&&e!==!0?!1:this.previous().length?this.previous().some(t=>t.inline):!0}isMap(){return typeof this.opts.map!="undefined"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent!="undefined"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(e=>e.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute||e.charCodeAt(0)===60||/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let n=this.opts.to?ms(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(n=ms(lf(n,this.mapOpts.annotation)));let i=af(n,e);return this.memoizedPaths.set(e,i),i}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}});else{let e=new TT(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk(t=>{if(t.source){let n=t.source.input.from;if(n&&!e[n]){e[n]=!0;let i=this.usesFileUrls?this.toFileUrl(n):this.toUrl(this.path(n));this.map.setSourceContent(i,t.source.input.css)}}});else if(this.css){let t=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(t,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(df){let n=df(e).toString();return this.memoizedFileURLs.set(e,n),n}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;cf==="\\"&&(e=e.replace(/\\/g,"/"));let n=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,n),n}};const il=39,ff=34,ys=92,pf=47,bs=10,xn=32,vs=12,Ss=9,_s=13,RT=91,IT=93,CT=40,LT=41,OT=123,ZT=125,NT=59,GT=42,VT=58,xT=64,Ts=/[\t\n\f\r "#'()/;[\\\]{}]/g,Es=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,XT=/.[\r\n"'(/\\]/,mf=/[\da-f]/i;var kT=function(e,t={}){let n=e.css.valueOf(),i=t.ignoreErrors,s,o,a,l,c,u,d,h,f,m,p=n.length,g=0,y=[],E=[];function T(){return g}function I(Z){throw e.error("Unclosed "+Z,g)}function R(){return E.length===0&&g>=p}function N(Z){if(E.length)return E.pop();if(g>=p)return;let w=Z?Z.ignoreUnclosed:!1;switch(s=n.charCodeAt(g),s){case bs:case xn:case Ss:case _s:case vs:{l=g;do l+=1,s=n.charCodeAt(l);while(s===xn||s===bs||s===Ss||s===_s||s===vs);u=["space",n.slice(g,l)],g=l-1;break}case RT:case IT:case OT:case ZT:case VT:case NT:case LT:{let L=String.fromCharCode(s);u=[L,L,g];break}case CT:{if(m=y.length?y.pop()[1]:"",f=n.charCodeAt(g+1),m==="url"&&f!==il&&f!==ff&&f!==xn&&f!==bs&&f!==Ss&&f!==vs&&f!==_s){l=g;do{if(d=!1,l=n.indexOf(")",l+1),l===-1)if(i||w){l=g;break}else I("bracket");for(h=l;n.charCodeAt(h-1)===ys;)h-=1,d=!d}while(d);u=["brackets",n.slice(g,l+1),g,l],g=l}else l=n.indexOf(")",g+1),o=n.slice(g,l+1),l===-1||XT.test(o)?u=["(","(",g]:(u=["brackets",o,g,l],g=l);break}case il:case ff:{c=s===il?"'":'"',l=g;do{if(d=!1,l=n.indexOf(c,l+1),l===-1)if(i||w){l=g+1;break}else I("string");for(h=l;n.charCodeAt(h-1)===ys;)h-=1,d=!d}while(d);u=["string",n.slice(g,l+1),g,l],g=l;break}case xT:{Ts.lastIndex=g+1,Ts.test(n),Ts.lastIndex===0?l=n.length-1:l=Ts.lastIndex-2,u=["at-word",n.slice(g,l+1),g,l],g=l;break}case ys:{for(l=g,a=!0;n.charCodeAt(l+1)===ys;)l+=1,a=!a;if(s=n.charCodeAt(l+1),a&&s!==pf&&s!==xn&&s!==bs&&s!==Ss&&s!==_s&&s!==vs&&(l+=1,mf.test(n.charAt(l)))){for(;mf.test(n.charAt(l+1));)l+=1;n.charCodeAt(l+1)===xn&&(l+=1)}u=["word",n.slice(g,l+1),g,l],g=l;break}default:{s===pf&&n.charCodeAt(g+1)===GT?(l=n.indexOf("*/",g+2)+1,l===0&&(i||w?l=n.length:I("comment")),u=["comment",n.slice(g,l+1),g,l],g=l):(Es.lastIndex=g+1,Es.test(n),Es.lastIndex===0?l=n.length-1:l=Es.lastIndex-2,u=["word",n.slice(g,l+1),g,l],y.push(u),g=l);break}}return g++,u}function V(Z){E.push(Z)}return{back:V,endOfFile:R,nextToken:N,position:T}};let WT=za,AT=ls,PT=cs,MT=Nn,gf=nl,UT=kT;const yf={empty:!0,space:!0};function FT(r){for(let e=r.length-1;e>=0;e--){let t=r[e],n=t[3]||t[2];if(n)return n}}var DT=class{constructor(e){this.input=e,this.root=new MT,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t=new WT;t.name=e[1].slice(1),t.name===""&&this.unnamedAtrule(t,e),this.init(t,e[2]);let n,i,s,o=!1,a=!1,l=[],c=[];for(;!this.tokenizer.endOfFile();){if(e=this.tokenizer.nextToken(),n=e[0],n==="("||n==="["?c.push(n==="("?")":"]"):n==="{"&&c.length>0?c.push("}"):n===c[c.length-1]&&c.pop(),c.length===0)if(n===";"){t.source.end=this.getPosition(e[2]),t.source.end.offset++,this.semicolon=!0;break}else if(n==="{"){a=!0;break}else if(n==="}"){if(l.length>0){for(s=l.length-1,i=l[s];i&&i[0]==="space";)i=l[--s];i&&(t.source.end=this.getPosition(i[3]||i[2]),t.source.end.offset++)}this.end(e);break}else l.push(e);else l.push(e);if(this.tokenizer.endOfFile()){o=!0;break}}t.raws.between=this.spacesAndCommentsFromEnd(l),l.length?(t.raws.afterName=this.spacesAndCommentsFromStart(l),this.raw(t,"params",l),o&&(e=l[l.length-1],t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++,this.spaces=t.raws.between,t.raws.between="")):(t.raws.afterName="",t.params=""),a&&(t.nodes=[],this.current=t)}checkMissedSemicolon(e){let t=this.colon(e);if(t===!1)return;let n=0,i;for(let s=t-1;s>=0&&(i=e[s],!(i[0]!=="space"&&(n+=1,n===2)));s--);throw this.input.error("Missed semicolon",i[0]==="word"?i[3]+1:i[2])}colon(e){let t=0,n,i,s;for(let[o,a]of e.entries()){if(i=a,s=i[0],s==="("&&(t+=1),s===")"&&(t-=1),t===0&&s===":")if(!n)this.doubleColon(i);else{if(n[0]==="word"&&n[1]==="progid")continue;return o}n=i}return!1}comment(e){let t=new AT;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let n=e[1].slice(2,-2);if(/^\s*$/.test(n))t.text="",t.raws.left=n,t.raws.right="";else{let i=n.match(/^(\s*)([^]*\S)(\s*)$/);t.text=i[2],t.raws.left=i[1],t.raws.right=i[3]}}createTokenizer(){this.tokenizer=UT(this.input)}decl(e,t){let n=new PT;this.init(n,e[0][2]);let i=e[e.length-1];for(i[0]===";"&&(this.semicolon=!0,e.pop()),n.source.end=this.getPosition(i[3]||i[2]||FT(e)),n.source.end.offset++;e[0][0]!=="word";)e.length===1&&this.unknownWord(e),n.raws.before+=e.shift()[1];for(n.source.start=this.getPosition(e[0][2]),n.prop="";e.length;){let c=e[0][0];if(c===":"||c==="space"||c==="comment")break;n.prop+=e.shift()[1]}n.raws.between="";let s;for(;e.length;)if(s=e.shift(),s[0]===":"){n.raws.between+=s[1];break}else s[0]==="word"&&/\w/.test(s[1])&&this.unknownWord([s]),n.raws.between+=s[1];(n.prop[0]==="_"||n.prop[0]==="*")&&(n.raws.before+=n.prop[0],n.prop=n.prop.slice(1));let o=[],a;for(;e.length&&(a=e[0][0],!(a!=="space"&&a!=="comment"));)o.push(e.shift());this.precheckMissedSemicolon(e);for(let c=e.length-1;c>=0;c--){if(s=e[c],s[1].toLowerCase()==="!important"){n.important=!0;let u=this.stringFrom(e,c);u=this.spacesFromEnd(e)+u,u!==" !important"&&(n.raws.important=u);break}else if(s[1].toLowerCase()==="important"){let u=e.slice(0),d="";for(let h=c;h>0;h--){let f=u[h][0];if(d.trim().startsWith("!")&&f!=="space")break;d=u.pop()[1]+d}d.trim().startsWith("!")&&(n.important=!0,n.raws.important=d,e=u)}if(s[0]!=="space"&&s[0]!=="comment")break}e.some(c=>c[0]!=="space"&&c[0]!=="comment")&&(n.raws.between+=o.map(c=>c[1]).join(""),o=[]),this.raw(n,"value",o.concat(e),t),n.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new gf;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let t=this.current.nodes[this.current.nodes.length-1];t&&t.type==="rule"&&!t.raws.ownSemicolon&&(t.raws.ownSemicolon=this.spaces,this.spaces="",t.source.end=this.getPosition(e[2]),t.source.end.offset+=t.raws.ownSemicolon.length)}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="",e.type!=="comment"&&(this.semicolon=!1)}other(e){let t=!1,n=null,i=!1,s=null,o=[],a=e[1].startsWith("--"),l=[],c=e;for(;c;){if(n=c[0],l.push(c),n==="("||n==="[")s||(s=c),o.push(n==="("?")":"]");else if(a&&i&&n==="{")s||(s=c),o.push("}");else if(o.length===0)if(n===";")if(i){this.decl(l,a);return}else break;else if(n==="{"){this.rule(l);return}else if(n==="}"){this.tokenizer.back(l.pop()),t=!0;break}else n===":"&&(i=!0);else n===o[o.length-1]&&(o.pop(),o.length===0&&(s=null));c=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),o.length>0&&this.unclosedBracket(s),t&&i){if(!a)for(;l.length&&(c=l[l.length-1][0],!(c!=="space"&&c!=="comment"));)this.tokenizer.back(l.pop());this.decl(l,a)}else this.unknownWord(l)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e);break}this.endFile()}precheckMissedSemicolon(){}raw(e,t,n,i){let s,o,a=n.length,l="",c=!0,u,d;for(let h=0;h<a;h+=1)s=n[h],o=s[0],o==="space"&&h===a-1&&!i?c=!1:o==="comment"?(d=n[h-1]?n[h-1][0]:"empty",u=n[h+1]?n[h+1][0]:"empty",!yf[d]&&!yf[u]?l.slice(-1)===","?c=!1:l+=s[1]:c=!1):l+=s[1];if(!c){let h=n.reduce((f,m)=>f+m[1],"");e.raws[t]={raw:h,value:l}}e[t]=l}rule(e){e.pop();let t=new gf;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,n="";for(;e.length&&(t=e[e.length-1][0],!(t!=="space"&&t!=="comment"));)n=e.pop()[1]+n;return n}spacesAndCommentsFromStart(e){let t,n="";for(;e.length&&(t=e[0][0],!(t!=="space"&&t!=="comment"));)n+=e.shift()[1];return n}spacesFromEnd(e){let t,n="";for(;e.length&&(t=e[e.length-1][0],t==="space");)n=e.pop()[1]+n;return n}stringFrom(e,t){let n="";for(let i=t;i<e.length;i++)n+=e[i][1];return e.splice(t,e.length-t),n}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word "+e[0][1],{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}};let JT=cr,YT=fs,HT=DT;function ws(r,e){let t=new YT(r,e),n=new HT(t);try{n.parse()}catch(i){throw process.env.NODE_ENV!=="production"&&i.name==="CssSyntaxError"&&e&&e.from&&(/\.scss$/i.test(e.from)?i.message+=`
You tried to parse SCSS with the standard CSS parser; try again with the postcss-scss parser`:/\.sass/i.test(e.from)?i.message+=`
You tried to parse Sass with the standard CSS parser; try again with the postcss-sass parser`:/\.less$/i.test(e.from)&&(i.message+=`
You tried to parse Less with the standard CSS parser; try again with the postcss-less parser`)),i}return n.root}var sl=ws;ws.default=ws,JT.registerParse(ws);let ol=class{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let n=t.node.rangeBy(t);this.line=n.start.line,this.column=n.start.column,this.endLine=n.end.line,this.endColumn=n.end.column}for(let n in t)this[n]=t[n]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};var bf=ol;ol.default=ol;let BT=bf,al=class{get content(){return this.css}constructor(e,t,n){this.processor=e,this.messages=[],this.root=t,this.opts=n,this.css="",this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let n=new BT(e,t);return this.messages.push(n),n}warnings(){return this.messages.filter(e=>e.type==="warning")}};var ll=al;al.default=al;let vf={};var Sf=function(e){vf[e]||(vf[e]=!0,typeof console!="undefined"&&console.warn&&console.warn(e))};let KT=cr,zT=ja,jT=hf,QT=sl,_f=ll,$T=Nn,qT=os,{isClean:vt,my:eE}=Ln,tE=Sf;const rE={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},nE={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},iE={Once:!0,postcssPlugin:!0,prepare:!0},Dr=0;function Xn(r){return typeof r=="object"&&typeof r.then=="function"}function Tf(r){let e=!1,t=rE[r.type];return r.type==="decl"?e=r.prop.toLowerCase():r.type==="atrule"&&(e=r.name.toLowerCase()),e&&r.append?[t,t+"-"+e,Dr,t+"Exit",t+"Exit-"+e]:e?[t,t+"-"+e,t+"Exit",t+"Exit-"+e]:r.append?[t,Dr,t+"Exit"]:[t,t+"Exit"]}function Ef(r){let e;return r.type==="document"?e=["Document",Dr,"DocumentExit"]:r.type==="root"?e=["Root",Dr,"RootExit"]:e=Tf(r),{eventIndex:0,events:e,iterator:0,node:r,visitorIndex:0,visitors:[]}}function cl(r){return r[vt]=!1,r.nodes&&r.nodes.forEach(e=>cl(e)),r}let ul={},Jr=class cv{get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}constructor(e,t,n){this.stringified=!1,this.processed=!1;let i;if(typeof t=="object"&&t!==null&&(t.type==="root"||t.type==="document"))i=cl(t);else if(t instanceof cv||t instanceof _f)i=cl(t.root),t.map&&(typeof n.map=="undefined"&&(n.map={}),n.map.inline||(n.map.inline=!1),n.map.prev=t.map);else{let s=QT;n.syntax&&(s=n.syntax.parse),n.parser&&(s=n.parser),s.parse&&(s=s.parse);try{i=s(t,n)}catch(o){this.processed=!0,this.error=o}i&&!i[eE]&&KT.rebuild(i)}this.result=new _f(e,i,n),this.helpers=W(S({},ul),{postcss:ul,result:this.result}),this.plugins=this.processor.plugins.map(s=>typeof s=="object"&&s.prepare?S(S({},s),s.prepare(this.result)):s)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let n=this.result.lastPlugin;try{if(t&&t.addToError(e),this.error=e,e.name==="CssSyntaxError"&&!e.plugin)e.plugin=n.postcssPlugin,e.setMessage();else if(n.postcssVersion&&process.env.NODE_ENV!=="production"){let i=n.postcssPlugin,s=n.postcssVersion,o=this.result.processor.version,a=s.split("."),l=o.split(".");(a[0]!==l[0]||parseInt(a[1])>parseInt(l[1]))&&console.error("Unknown error from PostCSS plugin. Your current PostCSS version is "+o+", but "+i+" uses "+s+". Perhaps this is the source of the error below.")}}catch(i){console&&console.error&&console.error(i)}return e}prepareVisitors(){this.listeners={};let e=(t,n,i)=>{this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push([t,i])};for(let t of this.plugins)if(typeof t=="object")for(let n in t){if(!nE[n]&&/^[A-Z]/.test(n))throw new Error(`Unknown event ${n} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!iE[n])if(typeof t[n]=="object")for(let i in t[n])i==="*"?e(t,n,t[n][i]):e(t,n+"-"+i.toLowerCase(),t[n][i]);else typeof t[n]=="function"&&e(t,n,t[n])}this.hasListener=Object.keys(this.listeners).length>0}runAsync(){return D(this,null,function*(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],n=this.runOnRoot(t);if(Xn(n))try{yield n}catch(i){throw this.handleError(i)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[vt];){e[vt]=!0;let t=[Ef(e)];for(;t.length>0;){let n=this.visitTick(t);if(Xn(n))try{yield n}catch(i){let s=t[t.length-1].node;throw this.handleError(i,s)}}}if(this.listeners.OnceExit)for(let[t,n]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if(e.type==="document"){let i=e.nodes.map(s=>n(s,this.helpers));yield Promise.all(i)}else yield n(e,this.helpers)}catch(i){throw this.handleError(i)}}}return this.processed=!0,this.stringify()})}runOnRoot(e){this.result.lastPlugin=e;try{if(typeof e=="object"&&e.Once){if(this.result.root.type==="document"){let t=this.result.root.nodes.map(n=>e.Once(n,this.helpers));return Xn(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}else if(typeof e=="function")return e(this.result.root,this.result)}catch(t){throw this.handleError(t)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=qT;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let i=new jT(t,this.result.root,this.result.opts).generate();return this.result.css=i[0],this.result.map=i[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){let t=this.runOnRoot(e);if(Xn(t))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[vt];)e[vt]=!0,this.walkSync(e);if(this.listeners.OnceExit)if(e.type==="document")for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return process.env.NODE_ENV!=="production"&&("from"in this.opts||tE("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.")),this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[n,i]of e){this.result.lastPlugin=n;let s;try{s=i(t,this.helpers)}catch(o){throw this.handleError(o,t.proxyOf)}if(t.type!=="root"&&t.type!=="document"&&!t.parent)return!0;if(Xn(s))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:n,visitors:i}=t;if(n.type!=="root"&&n.type!=="document"&&!n.parent){e.pop();return}if(i.length>0&&t.visitorIndex<i.length){let[o,a]=i[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===i.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=o;try{return a(n.toProxy(),this.helpers)}catch(l){throw this.handleError(l,n)}}if(t.iterator!==0){let o=t.iterator,a;for(;a=n.nodes[n.indexes[o]];)if(n.indexes[o]+=1,!a[vt]){a[vt]=!0,e.push(Ef(a));return}t.iterator=0,delete n.indexes[o]}let s=t.events;for(;t.eventIndex<s.length;){let o=s[t.eventIndex];if(t.eventIndex+=1,o===Dr){n.nodes&&n.nodes.length&&(n[vt]=!0,t.iterator=n.getIterator());return}else if(this.listeners[o]){t.visitors=this.listeners[o];return}}e.pop()}walkSync(e){e[vt]=!0;let t=Tf(e);for(let n of t)if(n===Dr)e.nodes&&e.each(i=>{i[vt]||this.walkSync(i)});else{let i=this.listeners[n];if(i&&this.visitSync(i,e.toProxy()))return}}warnings(){return this.sync().warnings()}};Jr.registerPostcss=r=>{ul=r};var wf=Jr;Jr.default=Jr,$T.registerLazyResult(Jr),zT.registerLazyResult(Jr);let sE=hf,oE=sl;const aE=ll;let lE=os,cE=Sf,dl=class{get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=oE;try{e=t(this._css,this._opts)}catch(n){this.error=n}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}constructor(e,t,n){t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=n,this._map=void 0;let i,s=lE;this.result=new aE(this._processor,i,this._opts),this.result.css=t;let o=this;Object.defineProperty(this.result,"root",{get(){return o.root}});let a=new sE(s,i,this._opts,t);if(a.isMap()){let[l,c]=a.generate();l&&(this.result.css=l),c&&(this.result.map=c)}else a.clearAnnotation(),this.result.css=a.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return process.env.NODE_ENV!=="production"&&("from"in this._opts||cE("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.")),this.async().then(e,t)}toString(){return this._css}warnings(){return[]}};var uE=dl;dl.default=dl;let dE=ja,hE=wf,fE=uE,pE=Nn,kn=class{constructor(e=[]){this.version="8.5.6",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let n of e)if(n.postcss===!0?n=n():n.postcss&&(n=n.postcss),typeof n=="object"&&Array.isArray(n.plugins))t=t.concat(n.plugins);else if(typeof n=="object"&&n.postcssPlugin)t.push(n);else if(typeof n=="function")t.push(n);else if(typeof n=="object"&&(n.parse||n.stringify)){if(process.env.NODE_ENV!=="production")throw new Error("PostCSS syntaxes cannot be used as plugins. Instead, please use one of the syntax/parser/stringifier options as outlined in your PostCSS runner documentation.")}else throw new Error(n+" is not a PostCSS plugin");return t}process(e,t={}){return!this.plugins.length&&!t.parser&&!t.stringifier&&!t.syntax?new fE(this,e,t):new hE(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}};var mE=kn;kn.default=kn,pE.registerProcessor(kn),dE.registerProcessor(kn);let Rf=za,If=ls,gE=cr,yE=Ma,Cf=cs,Lf=ja,bE=_T,vE=fs,SE=wf,_E=sf,TE=as,EE=sl,hl=mE,wE=ll,Of=Nn,Zf=nl,RE=os,IE=bf;function he(...r){return r.length===1&&Array.isArray(r[0])&&(r=r[0]),new hl(r)}he.plugin=function(e,t){let n=!1;function i(...o){console&&console.warn&&!n&&(n=!0,console.warn(e+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+`:  postcss.plugin . :
https://www.w3ctech.com/topic/2226`));let a=t(...o);return a.postcssPlugin=e,a.postcssVersion=new hl().version,a}let s;return Object.defineProperty(i,"postcss",{get(){return s||(s=i()),s}}),i.process=function(o,a,l){return he([i(l)]).process(o,a)},i},he.stringify=RE,he.parse=EE,he.fromJSON=bE,he.list=_E,he.comment=r=>new If(r),he.atRule=r=>new Rf(r),he.decl=r=>new Cf(r),he.rule=r=>new Zf(r),he.root=r=>new Of(r),he.document=r=>new Lf(r),he.CssSyntaxError=yE,he.Declaration=Cf,he.Container=gE,he.Processor=hl,he.Document=Lf,he.Comment=If,he.Warning=IE,he.AtRule=Rf,he.Result=wE,he.Input=vE,he.Rule=Zf,he.Root=Of,he.Node=TE,SE.registerPostcss(he),he.default=he;class fl{constructor(...e){et(this,"parentElement",null),et(this,"parentNode",null),et(this,"ownerDocument"),et(this,"firstChild",null),et(this,"lastChild",null),et(this,"previousSibling",null),et(this,"nextSibling",null),et(this,"ELEMENT_NODE",1),et(this,"TEXT_NODE",3),et(this,"nodeType"),et(this,"nodeName"),et(this,"RRNodeType")}get childNodes(){const e=[];let t=this.firstChild;for(;t;)e.push(t),t=t.nextSibling;return e}contains(e){if(e instanceof fl){if(e.ownerDocument!==this.ownerDocument)return!1;if(e===this)return!0}else return!1;for(;e.parentNode;){if(e.parentNode===this)return!0;e=e.parentNode}return!1}appendChild(e){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(e,t){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(e){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}const Nf={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},Gf={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},Rs={},CE=()=>!!globalThis.Zone;function pl(r){if(Rs[r])return Rs[r];const e=globalThis[r],t=e.prototype,n=r in Nf?Nf[r]:void 0,i=!!(n&&n.every(a=>{var l,c;return!!((c=(l=Object.getOwnPropertyDescriptor(t,a))==null?void 0:l.get)!=null&&c.toString().includes("[native code]"))})),s=r in Gf?Gf[r]:void 0,o=!!(s&&s.every(a=>{var l;return typeof t[a]=="function"&&((l=t[a])==null?void 0:l.toString().includes("[native code]"))}));if(i&&o&&!CE())return Rs[r]=e.prototype,e.prototype;try{const a=document.createElement("iframe");document.body.appendChild(a);const l=a.contentWindow;if(!l)return e.prototype;const c=l[r].prototype;return document.body.removeChild(a),c?Rs[r]=c:t}catch(a){return t}}const ml={};function Dt(r,e,t){var n;const i=`${r}.${String(t)}`;if(ml[i])return ml[i].call(e);const s=pl(r),o=(n=Object.getOwnPropertyDescriptor(s,t))==null?void 0:n.get;return o?(ml[i]=o,o.call(e)):e[t]}const gl={};function Vf(r,e,t){const n=`${r}.${String(t)}`;if(gl[n])return gl[n].bind(e);const s=pl(r)[t];return typeof s!="function"?e[t]:(gl[n]=s,s.bind(e))}function LE(r){return Dt("Node",r,"childNodes")}function OE(r){return Dt("Node",r,"parentNode")}function ZE(r){return Dt("Node",r,"parentElement")}function NE(r){return Dt("Node",r,"textContent")}function GE(r,e){return Vf("Node",r,"contains")(e)}function VE(r){return Vf("Node",r,"getRootNode")()}function xE(r){return!r||!("host"in r)?null:Dt("ShadowRoot",r,"host")}function XE(r){return r.styleSheets}function kE(r){return!r||!("shadowRoot"in r)?null:Dt("Element",r,"shadowRoot")}function WE(r,e){return Dt("Element",r,"querySelector")(e)}function AE(r,e){return Dt("Element",r,"querySelectorAll")(e)}function xf(){return pl("MutationObserver").constructor}function ur(r,e,t){try{if(!(e in r))return()=>{};const n=r[e],i=t(n);return typeof i=="function"&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:n}})),r[e]=i,()=>{r[e]=n}}catch(n){return()=>{}}}const q={childNodes:LE,parentNode:OE,parentElement:ZE,textContent:NE,contains:GE,getRootNode:VE,host:xE,styleSheets:XE,shadowRoot:kE,querySelector:WE,querySelectorAll:AE,mutationObserver:xf,patch:ur};function Pe(r,e,t=document){const n={capture:!0};return t.addEventListener(r,e,n),()=>t.removeEventListener(r,e,n)}const Yr=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let Xf={map:{},getId(){return console.error(Yr),-1},getNode(){return console.error(Yr),null},removeNodeFromMap(){console.error(Yr)},has(){return console.error(Yr),!1},reset(){console.error(Yr)}};typeof window!="undefined"&&window.Proxy&&window.Reflect&&(Xf=new Proxy(Xf,{get(r,e,t){return e==="map"&&console.error(Yr),Reflect.get(r,e,t)}}));function Wn(r,e,t={}){let n=null,i=0;return function(...s){const o=Date.now();!i&&t.leading===!1&&(i=o);const a=e-(o-i),l=this;a<=0||a>e?(n&&(clearTimeout(n),n=null),i=o,r.apply(l,s)):!n&&t.trailing!==!1&&(n=setTimeout(()=>{i=t.leading===!1?0:Date.now(),n=null,r.apply(l,s)},a))}}function Is(r,e,t,n,i=window){const s=i.Object.getOwnPropertyDescriptor(r,e);return i.Object.defineProperty(r,e,n?t:{set(o){setTimeout(()=>{t.set.call(this,o)},0),s&&s.set&&s.set.call(this,o)}}),()=>Is(r,e,s||{},!0)}let Cs=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(Cs=()=>new Date().getTime());function kf(r){var e,t,n,i;const s=r.document;return{left:s.scrollingElement?s.scrollingElement.scrollLeft:r.pageXOffset!==void 0?r.pageXOffset:s.documentElement.scrollLeft||(s==null?void 0:s.body)&&((e=q.parentElement(s.body))==null?void 0:e.scrollLeft)||((t=s==null?void 0:s.body)==null?void 0:t.scrollLeft)||0,top:s.scrollingElement?s.scrollingElement.scrollTop:r.pageYOffset!==void 0?r.pageYOffset:(s==null?void 0:s.documentElement.scrollTop)||(s==null?void 0:s.body)&&((n=q.parentElement(s.body))==null?void 0:n.scrollTop)||((i=s==null?void 0:s.body)==null?void 0:i.scrollTop)||0}}function Wf(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Af(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Pf(r){return r?r.nodeType===r.ELEMENT_NODE?r:q.parentElement(r):null}const PE=r=>{try{if(r instanceof HTMLElement)return r.tagName==="CANVAS"}catch(e){return!1}return!1};function Ne(r,e,t,n){if(!r)return!1;const i=Pf(r);if(!i)return!1;try{if(typeof e=="string"){if(i.classList.contains(e)||n&&i.closest("."+e)!==null)return!0}else if(Mi(i,e,n))return!0}catch(s){}return!!(t&&(i.matches(t)||n&&i.closest(t)!==null))}function ME(r,e){return e.getId(r)!==-1}function yl(r,e,t){return r.tagName==="TITLE"&&t.headTitleMutations?!0:e.getId(r)===bn}function Mf(r,e){if(gn(r))return!1;const t=e.getId(r);if(!e.has(t))return!0;const n=q.parentNode(r);return n&&n.nodeType===r.DOCUMENT_NODE?!1:n?Mf(n,e):!0}function bl(r){return!!r.changedTouches}function UE(r=window){"NodeList"in r&&!r.NodeList.prototype.forEach&&(r.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in r&&!r.DOMTokenList.prototype.forEach&&(r.DOMTokenList.prototype.forEach=Array.prototype.forEach)}function Uf(r,e){return!!(r.nodeName==="IFRAME"&&e.getMeta(r))}function Ff(r,e){return!!(r.nodeName==="LINK"&&r.nodeType===r.ELEMENT_NODE&&r.getAttribute&&r.getAttribute("rel")==="stylesheet"&&e.getMeta(r))}function vl(r){return r?r instanceof fl&&"shadowRoot"in r?!!r.shadowRoot:!!q.shadowRoot(r):!1}class FE{constructor(){O(this,"id",1),O(this,"styleIDMap",new WeakMap),O(this,"idStyleMap",new Map)}getId(e){var t;return(t=this.styleIDMap.get(e))!=null?t:-1}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return t===void 0?n=this.id++:n=t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function Df(r){var e;let t=null;return"getRootNode"in r&&((e=q.getRootNode(r))==null?void 0:e.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&q.host(q.getRootNode(r))&&(t=q.host(q.getRootNode(r))),t}function DE(r){let e=r,t;for(;t=Df(e);)e=t;return e}function JE(r){const e=r.ownerDocument;if(!e)return!1;const t=DE(r);return q.contains(e,t)}function Jf(r){const e=r.ownerDocument;return e?q.contains(e,r)||JE(r):!1}var ie=(r=>(r[r.DomContentLoaded=0]="DomContentLoaded",r[r.Load=1]="Load",r[r.FullSnapshot=2]="FullSnapshot",r[r.IncrementalSnapshot=3]="IncrementalSnapshot",r[r.Meta=4]="Meta",r[r.Custom=5]="Custom",r[r.Plugin=6]="Plugin",r))(ie||{}),ee=(r=>(r[r.Mutation=0]="Mutation",r[r.MouseMove=1]="MouseMove",r[r.MouseInteraction=2]="MouseInteraction",r[r.Scroll=3]="Scroll",r[r.ViewportResize=4]="ViewportResize",r[r.Input=5]="Input",r[r.TouchMove=6]="TouchMove",r[r.MediaInteraction=7]="MediaInteraction",r[r.StyleSheetRule=8]="StyleSheetRule",r[r.CanvasMutation=9]="CanvasMutation",r[r.Font=10]="Font",r[r.Log=11]="Log",r[r.Drag=12]="Drag",r[r.StyleDeclaration=13]="StyleDeclaration",r[r.Selection=14]="Selection",r[r.AdoptedStyleSheet=15]="AdoptedStyleSheet",r[r.CustomElement=16]="CustomElement",r))(ee||{}),Ke=(r=>(r[r.MouseUp=0]="MouseUp",r[r.MouseDown=1]="MouseDown",r[r.Click=2]="Click",r[r.ContextMenu=3]="ContextMenu",r[r.DblClick=4]="DblClick",r[r.Focus=5]="Focus",r[r.Blur=6]="Blur",r[r.TouchStart=7]="TouchStart",r[r.TouchMove_Departed=8]="TouchMove_Departed",r[r.TouchEnd=9]="TouchEnd",r[r.TouchCancel=10]="TouchCancel",r))(Ke||{}),Jt=(r=>(r[r.Mouse=0]="Mouse",r[r.Pen=1]="Pen",r[r.Touch=2]="Touch",r))(Jt||{}),Hr=(r=>(r[r["2D"]=0]="2D",r[r.WebGL=1]="WebGL",r[r.WebGL2=2]="WebGL2",r))(Hr||{}),Br=(r=>(r[r.Play=0]="Play",r[r.Pause=1]="Pause",r[r.Seeked=2]="Seeked",r[r.VolumeChange=3]="VolumeChange",r[r.RateChange=4]="RateChange",r))(Br||{}),Yf=(r=>(r[r.Document=0]="Document",r[r.DocumentType=1]="DocumentType",r[r.Element=2]="Element",r[r.Text=3]="Text",r[r.CDATA=4]="CDATA",r[r.Comment=5]="Comment",r))(Yf||{});function Hf(r){return"__ln"in r}class YE{constructor(){O(this,"length",0),O(this,"head",null),O(this,"tail",null)}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=(t==null?void 0:t.next)||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&Hf(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&Hf(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;t.next===null&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const Bf=(r,e)=>`${r}@${e}`;class HE{constructor(){O(this,"frozen",!1),O(this,"locked",!1),O(this,"texts",[]),O(this,"attributes",[]),O(this,"attributeMap",new WeakMap),O(this,"removes",[]),O(this,"mapRemoves",[]),O(this,"movedMap",{}),O(this,"addedSet",new Set),O(this,"movedSet",new Set),O(this,"droppedSet",new Set),O(this,"removesSubTreeCache",new Set),O(this,"mutationCb"),O(this,"blockClass"),O(this,"blockSelector"),O(this,"maskTextClass"),O(this,"maskTextSelector"),O(this,"inlineStylesheet"),O(this,"maskInputOptions"),O(this,"maskTextFn"),O(this,"maskInputFn"),O(this,"keepIframeSrcFn"),O(this,"recordCanvas"),O(this,"inlineImages"),O(this,"inlineVideos"),O(this,"privacySetting"),O(this,"slimDOMOptions"),O(this,"dataURLOptions"),O(this,"doc"),O(this,"mirror"),O(this,"iframeManager"),O(this,"stylesheetManager"),O(this,"shadowDomManager"),O(this,"canvasManager"),O(this,"processedNodeManager"),O(this,"unattachedDoc"),O(this,"processMutations",e=>{e.forEach(this.processMutation),this.emit()}),O(this,"emit",()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,n=new YE,i=l=>{let c=l,u=bn;for(;u===bn;)c=c&&c.nextSibling,u=c&&this.mirror.getId(c);return u},s=l=>{const c=q.parentNode(l);if(!c||!Jf(l))return;let u=!1;if(l.nodeType===Node.TEXT_NODE){const m=c.tagName;if(m==="TEXTAREA")return;m==="STYLE"&&this.addedSet.has(c)&&(u=!0)}const d=gn(c)?this.mirror.getId(Df(l)):this.mirror.getId(c),h=i(l);if(d===-1||h===-1)return n.addNode(l);const f=Ar(l,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,inlineVideos:this.inlineVideos,privacySetting:this.privacySetting,onSerialize:m=>{Uf(m,this.mirror)&&this.iframeManager.addIframe(m),Ff(m,this.mirror)&&this.stylesheetManager.trackLinkElement(m),vl(l)&&this.shadowDomManager.addShadowRoot(q.shadowRoot(l),this.doc)},onIframeLoad:(m,p)=>{this.iframeManager.attachIframe(m,p),this.shadowDomManager.observeAttachShadow(m)},onStylesheetLoad:(m,p)=>{this.stylesheetManager.attachLinkElement(m,p)},cssCaptured:u});f&&(e.push({parentId:d,nextId:h,node:f}),t.add(f.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const l of this.movedSet)Kf(this.removesSubTreeCache,l)&&!this.movedSet.has(q.parentNode(l))||s(l);for(const l of this.addedSet)!zf(this.droppedSet,l)&&!Kf(this.removesSubTreeCache,l)||zf(this.movedSet,l)?s(l):this.droppedSet.add(l);let o=null;for(;n.length;){let l=null;if(o){const c=this.mirror.getId(q.parentNode(o.value)),u=i(o.value);c!==-1&&u!==-1&&(l=o)}if(!l){let c=n.tail;for(;c;){const u=c;if(c=c.previous,u){const d=this.mirror.getId(q.parentNode(u.value));if(i(u.value)===-1)continue;if(d!==-1){l=u;break}else{const f=u.value,m=q.parentNode(f);if(m&&m.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const p=q.host(m);if(this.mirror.getId(p)!==-1){l=u;break}}}}}}if(!l){for(;n.head;)n.removeNode(n.head.value);break}o=l.previous,n.removeNode(l.value),s(l.value)}const a={texts:this.texts.map(l=>{var c,u;const d=l.node,h=q.parentNode(d);h&&h.tagName==="TEXTAREA"&&this.genTextAreaValueMutation(h);let f=l.value;const m=this.privacySetting==="strict",p=this.privacySetting==="default"&&Rd(f),g=(u=(c=l.node)==null?void 0:c.parentElement)==null?void 0:u.getAttribute("data-hl-record");return(m||p)&&!g&&f&&(f=oa(f)),{id:this.mirror.getId(d),value:f}}).filter(l=>!t.has(l.id)).filter(l=>this.mirror.has(l.id)),attributes:this.attributes.map(l=>{const{attributes:c}=l;if(typeof c.style=="string"){const u=JSON.stringify(l.styleDiff),d=JSON.stringify(l._unchangedStyles);u.length<c.style.length&&(u+d).split("var(").length===c.style.split("var(").length&&(c.style=l.styleDiff)}return{id:this.mirror.getId(l.node),attributes:c}}).filter(l=>!t.has(l.id)).filter(l=>this.mirror.has(l.id)),removes:this.removes,adds:e};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.removesSubTreeCache=new Set,this.movedMap={},this.mutationCb(a))}),O(this,"genTextAreaValueMutation",e=>{let t=this.attributeMap.get(e);t||(t={node:e,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(t),this.attributeMap.set(e,t));const n=Array.from(q.childNodes(e),i=>q.textContent(i)||"").join("");t.attributes.value=ki({overwriteRecord:null,element:e,maskInputOptions:this.maskInputOptions,tagName:e.tagName,type:Wi(e),value:n,maskInputFn:this.maskInputFn})}),O(this,"processMutation",e=>{if(!yl(e.target,this.mirror,this.slimDOMOptions))switch(e.type){case"characterData":{const t=q.textContent(e.target);!Ne(e.target,this.blockClass,this.blockSelector,!1)&&t!==e.oldValue&&this.texts.push({value:Vd(e.target,this.maskTextClass,this.maskTextSelector,!0)&&t?this.maskTextFn?this.maskTextFn(t,Pf(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const t=e.target;let n=e.attributeName,i=e.target.getAttribute(n);if(n==="value"){const o=Wi(t);i=ki({element:t,maskInputOptions:this.maskInputOptions,tagName:t.tagName,type:o,value:i,overwriteRecord:t.getAttribute("data-hl-record"),maskInputFn:this.maskInputFn})}if(Ne(e.target,this.blockClass,this.blockSelector,!1)||i===e.oldValue)return;let s=this.attributeMap.get(e.target);if(t.tagName==="IFRAME"&&n==="src"&&!this.keepIframeSrcFn(i))if(!t.contentDocument)n="rr_src";else return;if(s||(s={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(s),this.attributeMap.set(e.target,s)),n==="type"&&t.tagName==="INPUT"&&(e.oldValue||"").toLowerCase()==="password"&&t.setAttribute("data-rr-is-password","true"),!Nd(t.tagName,n)){if(e.target.tagName==="INPUT"){const a=e.target;if(a.type==="password"){s.attributes.value="*".repeat(a.value.length);break}}if(s.attributes[n]=Zd(this.doc,Xr(t.tagName),Xr(n),i),n==="style"){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(l){this.unattachedDoc=this.doc}const a=this.unattachedDoc.createElement("span");e.oldValue&&a.setAttribute("style",e.oldValue);for(const l of Array.from(t.style)){const c=t.style.getPropertyValue(l),u=t.style.getPropertyPriority(l);c!==a.style.getPropertyValue(l)||u!==a.style.getPropertyPriority(l)?u===""?s.styleDiff[l]=c:s.styleDiff[l]=[c,u]:s._unchangedStyles[l]=[c,u]}for(const l of Array.from(a.style))t.style.getPropertyValue(l)===""&&(s.styleDiff[l]=!1)}else n==="open"&&t.tagName==="DIALOG"&&(t.matches("dialog:modal")?s.attributes.rr_open_mode="modal":s.attributes.rr_open_mode="non-modal")}break}case"childList":{if(Ne(e.target,this.blockClass,this.blockSelector,!0))return;if(e.target.tagName==="TEXTAREA"){this.genTextAreaValueMutation(e.target);return}e.addedNodes.forEach(t=>this.genAdds(t,e.target)),e.removedNodes.forEach(t=>{const n=this.mirror.getId(t),i=gn(e.target)?this.mirror.getId(q.host(e.target)):this.mirror.getId(e.target);Ne(e.target,this.blockClass,this.blockSelector,!1)||yl(t,this.mirror,this.slimDOMOptions)||!ME(t,this.mirror)||(this.addedSet.has(t)?(Sl(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&n===-1||Mf(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[Bf(n,i)]?Sl(this.movedSet,t):(this.removes.push({parentId:i,id:n,isShadow:gn(e.target)&&yn(e.target)?!0:void 0}),BE(t,this.removesSubTreeCache))),this.mapRemoves.push(t))});break}}}),O(this,"genAdds",(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!(this.addedSet.has(e)||this.movedSet.has(e))){if(this.mirror.hasNode(e)){if(yl(e,this.mirror,this.slimDOMOptions))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&n!==-1&&(this.movedMap[Bf(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);Ne(e,this.blockClass,this.blockSelector,!1)||(q.childNodes(e).forEach(n=>this.genAdds(n)),vl(e)&&q.childNodes(q.shadowRoot(e)).forEach(n=>{this.processedNodeManager.add(n,this),this.genAdds(n,e)}))}})}init(e){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","inlineVideos","privacySetting","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(t=>{this[t]=e[t]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Sl(r,e){r.delete(e),q.childNodes(e).forEach(t=>Sl(r,t))}function BE(r,e){const t=[r];for(;t.length;){const n=t.pop();e.has(n)||(e.add(n),q.childNodes(n).forEach(i=>t.push(i)))}}function Kf(r,e,t){return r.size===0?!1:KE(r,e)}function KE(r,e,t){const n=q.parentNode(e);return n?r.has(n):!1}function zf(r,e){return r.size===0?!1:jf(r,e)}function jf(r,e){const t=q.parentNode(e);return t?r.has(t)?!0:jf(r,t):!1}let An;function zE(r){An=r}function jE(){An=void 0}const ne=r=>An?(...t)=>{try{return r(...t)}catch(n){if(An&&An(n)===!0)return;throw n}}:r,dr=[];function Pn(r){try{if("composedPath"in r){const e=r.composedPath();if(e.length)return e[0]}else if("path"in r&&r.path.length)return r.path[0]}catch(e){}return r&&r.target}function Qf(r,e){const t=new HE;dr.push(t),t.init(r);const n=new(xf())(ne(t.processMutations.bind(t)));return n.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),n}function QE({mousemoveCb:r,sampling:e,doc:t,mirror:n}){if(e.mousemove===!1)return()=>{};const i=typeof e.mousemove=="number"?e.mousemove:50,s=typeof e.mousemoveCallback=="number"?e.mousemoveCallback:500;let o=[],a;const l=Wn(ne(d=>{const h=Date.now()-a;r(o.map(f=>(f.timeOffset-=h,f)),d),o=[],a=null}),s),c=ne(Wn(ne(d=>{const h=Pn(d),{clientX:f,clientY:m}=bl(d)?d.changedTouches[0]:d;a||(a=Cs()),o.push({x:f,y:m,id:n.getId(h),timeOffset:Cs()-a}),l(typeof DragEvent!="undefined"&&d instanceof DragEvent?ee.Drag:d instanceof MouseEvent?ee.MouseMove:ee.TouchMove)}),i,{trailing:!1})),u=[Pe("mousemove",c,t),Pe("touchmove",c,t),Pe("drag",c,t)];return ne(()=>{u.forEach(d=>d())})}function $E({mouseInteractionCb:r,doc:e,mirror:t,blockClass:n,blockSelector:i,sampling:s}){if(s.mouseInteraction===!1)return()=>{};const o=s.mouseInteraction===!0||s.mouseInteraction===void 0?{}:s.mouseInteraction,a=[];let l=null;const c=u=>d=>{const h=Pn(d);if(Ne(h,n,i,!0)||PE(h))return;let f=null,m=u;if("pointerType"in d){switch(d.pointerType){case"mouse":f=Jt.Mouse;break;case"touch":f=Jt.Touch;break;case"pen":f=Jt.Pen;break}f===Jt.Touch&&(Ke[u]===Ke.MouseDown?m="TouchStart":Ke[u]===Ke.MouseUp&&(m="TouchEnd"))}else bl(d)&&(f=Jt.Touch);f!==null?(l=f,(m.startsWith("Touch")&&f===Jt.Touch||m.startsWith("Mouse")&&f===Jt.Mouse)&&(f=null)):Ke[u]===Ke.Click&&(f=l,l=null);const p=bl(d)?d.changedTouches[0]:d;if(!p)return;const g=t.getId(h),{clientX:y,clientY:E}=p;ne(r)(S({type:Ke[m],id:g,x:y,y:E},f!==null&&{pointerType:f}))};return Object.keys(Ke).filter(u=>Number.isNaN(Number(u))&&!u.endsWith("_Departed")&&o[u]!==!1).forEach(u=>{let d=Xr(u);const h=c(u);if(window.PointerEvent)switch(Ke[u]){case Ke.MouseDown:case Ke.MouseUp:d=d.replace("mouse","pointer");break;case Ke.TouchStart:case Ke.TouchEnd:return}a.push(Pe(d,h,e))}),ne(()=>{a.forEach(u=>u())})}function $f({scrollCb:r,doc:e,mirror:t,blockClass:n,blockSelector:i,sampling:s}){const o=ne(Wn(ne(a=>{const l=Pn(a);if(!l||Ne(l,n,i,!0))return;const c=t.getId(l);if(l===e&&e.defaultView){const u=kf(e.defaultView);r({id:c,x:u.left,y:u.top})}else r({id:c,x:l.scrollLeft,y:l.scrollTop})}),s.scroll||100));return Pe("scroll",o,e)}function qE({viewportResizeCb:r},{win:e}){let t=-1,n=-1;const i=ne(Wn(ne(()=>{const s=Wf(),o=Af();(t!==s||n!==o)&&(r({width:Number(o),height:Number(s)}),t=s,n=o)}),200));return Pe("resize",i,e)}const ew=["INPUT","TEXTAREA","SELECT"],qf=new WeakMap;function tw({inputCb:r,doc:e,mirror:t,blockClass:n,blockSelector:i,ignoreClass:s,ignoreSelector:o,maskInputOptions:a,maskInputFn:l,sampling:c,userTriggeredOnInput:u}){function d(E){let T=Pn(E);const I=E.isTrusted,R=T&&T.tagName;if(T&&R==="OPTION"&&(T=q.parentElement(T)),!T||!R||ew.indexOf(R)<0||Ne(T,n,i,!0)||T.classList.contains(s)||o&&T.matches(o))return;let N=T.value,V=!1;const Z=Wi(T)||"",w=T.getAttribute("data-hl-record");Z==="radio"||Z==="checkbox"?V=T.checked:Id({maskInputOptions:a,type:Z,tagName:R,overwriteRecord:w})&&(N=ki({element:T,maskInputOptions:a,tagName:R,type:Z,value:N,overwriteRecord:w,maskInputFn:l})),h(T,u?{text:N,isChecked:V,userTriggered:I}:{text:N,isChecked:V});const L=T.name;Z==="radio"&&L&&V&&e.querySelectorAll(`input[type="radio"][name="${L}"]`).forEach(A=>{if(A!==T){const P=A.value;h(A,u?{text:P,isChecked:!V,userTriggered:!1}:{text:P,isChecked:!V})}})}function h(E,T){const I=qf.get(E);if(!I||I.text!==T.text||I.isChecked!==T.isChecked){qf.set(E,T);const R=t.getId(E);ne(r)(W(S({},T),{id:R}))}}const m=(c.input==="last"?["change"]:["input","change"]).map(E=>Pe(E,ne(d),e)),p=e.defaultView;if(!p)return()=>{m.forEach(E=>E())};const g=p.Object.getOwnPropertyDescriptor(p.HTMLInputElement.prototype,"value"),y=[[p.HTMLInputElement.prototype,"value"],[p.HTMLInputElement.prototype,"checked"],[p.HTMLSelectElement.prototype,"value"],[p.HTMLTextAreaElement.prototype,"value"],[p.HTMLSelectElement.prototype,"selectedIndex"],[p.HTMLOptionElement.prototype,"selected"]];return g&&g.set&&m.push(...y.map(E=>Is(E[0],E[1],{set(){ne(d)({target:this,isTrusted:!1})}},!1,p))),ne(()=>{m.forEach(E=>E())})}function Ls(r){const e=[];function t(n,i){if(Os("CSSGroupingRule")&&n.parentRule instanceof CSSGroupingRule||Os("CSSMediaRule")&&n.parentRule instanceof CSSMediaRule||Os("CSSSupportsRule")&&n.parentRule instanceof CSSSupportsRule||Os("CSSConditionRule")&&n.parentRule instanceof CSSConditionRule){const o=Array.from(n.parentRule.cssRules).indexOf(n);i.unshift(o)}else if(n.parentStyleSheet){const o=Array.from(n.parentStyleSheet.cssRules).indexOf(n);i.unshift(o)}return i}return t(r,e)}function Yt(r,e,t){let n,i;return r?(r.ownerNode?n=e.getId(r.ownerNode):i=t.getId(r),{styleId:i,id:n}):{}}function rw({styleSheetRuleCb:r,mirror:e,stylesheetManager:t},{win:n}){if(!n.CSSStyleSheet||!n.CSSStyleSheet.prototype)return()=>{};const i=n.CSSStyleSheet.prototype.insertRule;n.CSSStyleSheet.prototype.insertRule=new Proxy(i,{apply:ne((u,d,h)=>{const[f,m]=h,{id:p,styleId:g}=Yt(d,e,t.styleMirror);return(p&&p!==-1||g&&g!==-1)&&r({id:p,styleId:g,adds:[{rule:f,index:m}]}),u.apply(d,h)})}),n.CSSStyleSheet.prototype.addRule=function(u,d,h=this.cssRules.length){const f=`${u} { ${d} }`;return n.CSSStyleSheet.prototype.insertRule.apply(this,[f,h])};const s=n.CSSStyleSheet.prototype.deleteRule;n.CSSStyleSheet.prototype.deleteRule=new Proxy(s,{apply:ne((u,d,h)=>{const[f]=h,{id:m,styleId:p}=Yt(d,e,t.styleMirror);return(m&&m!==-1||p&&p!==-1)&&r({id:m,styleId:p,removes:[{index:f}]}),u.apply(d,h)})}),n.CSSStyleSheet.prototype.removeRule=function(u){return n.CSSStyleSheet.prototype.deleteRule.apply(this,[u])};let o;n.CSSStyleSheet.prototype.replace&&(o=n.CSSStyleSheet.prototype.replace,n.CSSStyleSheet.prototype.replace=new Proxy(o,{apply:ne((u,d,h)=>{const[f]=h,{id:m,styleId:p}=Yt(d,e,t.styleMirror);return(m&&m!==-1||p&&p!==-1)&&r({id:m,styleId:p,replace:f}),u.apply(d,h)})}));let a;n.CSSStyleSheet.prototype.replaceSync&&(a=n.CSSStyleSheet.prototype.replaceSync,n.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:ne((u,d,h)=>{const[f]=h,{id:m,styleId:p}=Yt(d,e,t.styleMirror);return(m&&m!==-1||p&&p!==-1)&&r({id:m,styleId:p,replaceSync:f}),u.apply(d,h)})}));const l={};Zs("CSSGroupingRule")?l.CSSGroupingRule=n.CSSGroupingRule:(Zs("CSSMediaRule")&&(l.CSSMediaRule=n.CSSMediaRule),Zs("CSSConditionRule")&&(l.CSSConditionRule=n.CSSConditionRule),Zs("CSSSupportsRule")&&(l.CSSSupportsRule=n.CSSSupportsRule));const c={};return Object.entries(l).forEach(([u,d])=>{c[u]={insertRule:d.prototype.insertRule,deleteRule:d.prototype.deleteRule},d.prototype.insertRule=new Proxy(c[u].insertRule,{apply:ne((h,f,m)=>{const[p,g]=m,{id:y,styleId:E}=Yt(f.parentStyleSheet,e,t.styleMirror);return(y&&y!==-1||E&&E!==-1)&&r({id:y,styleId:E,adds:[{rule:p,index:[...Ls(f),g||0]}]}),h.apply(f,m)})}),d.prototype.deleteRule=new Proxy(c[u].deleteRule,{apply:ne((h,f,m)=>{const[p]=m,{id:g,styleId:y}=Yt(f.parentStyleSheet,e,t.styleMirror);return(g&&g!==-1||y&&y!==-1)&&r({id:g,styleId:y,removes:[{index:[...Ls(f),p]}]}),h.apply(f,m)})})}),ne(()=>{n.CSSStyleSheet.prototype.insertRule=i,n.CSSStyleSheet.prototype.deleteRule=s,o&&(n.CSSStyleSheet.prototype.replace=o),a&&(n.CSSStyleSheet.prototype.replaceSync=a),Object.entries(l).forEach(([u,d])=>{d.prototype.insertRule=c[u].insertRule,d.prototype.deleteRule=c[u].deleteRule})})}function ep({mirror:r,stylesheetManager:e},t){var n,i,s;let o=null;t.nodeName==="#document"?o=r.getId(t):o=r.getId(q.host(t));const a=t.nodeName==="#document"?(n=t.defaultView)==null?void 0:n.Document:(s=(i=t.ownerDocument)==null?void 0:i.defaultView)==null?void 0:s.ShadowRoot,l=a!=null&&a.prototype?Object.getOwnPropertyDescriptor(a==null?void 0:a.prototype,"adoptedStyleSheets"):void 0;return o===null||o===-1||!a||!l?()=>{}:(Object.defineProperty(t,"adoptedStyleSheets",{configurable:l.configurable,enumerable:l.enumerable,get(){var c;return(c=l.get)==null?void 0:c.call(this)},set(c){var u;const d=(u=l.set)==null?void 0:u.call(this,c);if(o!==null&&o!==-1)try{e.adoptStyleSheets(c,o)}catch(h){}return d}}),ne(()=>{Object.defineProperty(t,"adoptedStyleSheets",{configurable:l.configurable,enumerable:l.enumerable,get:l.get,set:l.set})}))}function nw({styleDeclarationCb:r,mirror:e,ignoreCSSAttributes:t,stylesheetManager:n},{win:i}){const s=i.CSSStyleDeclaration.prototype.setProperty;i.CSSStyleDeclaration.prototype.setProperty=new Proxy(s,{apply:ne((a,l,c)=>{var u;const[d,h,f]=c;if(t.has(d))return s.apply(l,[d,h,f]);const{id:m,styleId:p}=Yt((u=l.parentRule)==null?void 0:u.parentStyleSheet,e,n.styleMirror);return(m&&m!==-1||p&&p!==-1)&&r({id:m,styleId:p,set:{property:d,value:h,priority:f},index:Ls(l.parentRule)}),a.apply(l,c)})});const o=i.CSSStyleDeclaration.prototype.removeProperty;return i.CSSStyleDeclaration.prototype.removeProperty=new Proxy(o,{apply:ne((a,l,c)=>{var u;const[d]=c;if(t.has(d))return o.apply(l,[d]);const{id:h,styleId:f}=Yt((u=l.parentRule)==null?void 0:u.parentStyleSheet,e,n.styleMirror);return(h&&h!==-1||f&&f!==-1)&&r({id:h,styleId:f,remove:{property:d},index:Ls(l.parentRule)}),a.apply(l,c)})}),ne(()=>{i.CSSStyleDeclaration.prototype.setProperty=s,i.CSSStyleDeclaration.prototype.removeProperty=o})}function iw({mediaInteractionCb:r,blockClass:e,blockSelector:t,mirror:n,sampling:i,doc:s}){const o=ne(l=>Wn(ne(c=>{const u=Pn(c);if(!u||Ne(u,e,t,!0))return;const{currentTime:d,volume:h,muted:f,playbackRate:m,loop:p}=u;r({type:l,id:n.getId(u),currentTime:d,volume:h,muted:f,playbackRate:m,loop:p})}),i.media||500)),a=[Pe("play",o(Br.Play),s),Pe("pause",o(Br.Pause),s),Pe("seeked",o(Br.Seeked),s),Pe("volumechange",o(Br.VolumeChange),s),Pe("ratechange",o(Br.RateChange),s)];return ne(()=>{a.forEach(l=>l())})}function sw({fontCb:r,doc:e}){const t=e.defaultView;if(!t)return()=>{};const n=[],i=new WeakMap,s=t.FontFace;t.FontFace=function(l,c,u){const d=new s(l,c,u);return i.set(d,{family:l,buffer:typeof c!="string",descriptors:u,fontSource:typeof c=="string"?c:JSON.stringify(Array.from(new Uint8Array(c)))}),d};const o=ur(e.fonts,"add",function(a){return function(l){return setTimeout(ne(()=>{const c=i.get(l);c&&(r(c),i.delete(l))}),0),a.apply(this,[l])}});return n.push(()=>{t.FontFace=s}),n.push(o),ne(()=>{n.forEach(a=>a())})}function ow(r){const{doc:e,mirror:t,blockClass:n,blockSelector:i,selectionCb:s}=r;let o=!0;const a=ne(()=>{const l=e.getSelection();if(!l||o&&(l!=null&&l.isCollapsed))return;o=l.isCollapsed||!1;const c=[],u=l.rangeCount||0;for(let d=0;d<u;d++){const h=l.getRangeAt(d),{startContainer:f,startOffset:m,endContainer:p,endOffset:g}=h;Ne(f,n,i,!0)||Ne(p,n,i,!0)||c.push({start:t.getId(f),startOffset:m,end:t.getId(p),endOffset:g})}s({ranges:c})});return a(),Pe("selectionchange",a)}function aw({doc:r,customElementCb:e}){const t=r.defaultView;return!t||!t.customElements?()=>{}:ur(t.customElements,"define",function(i){return function(s,o,a){try{e({define:{name:s}})}catch(l){console.warn(`Custom element callback failed for ${s}`)}return i.apply(this,[s,o,a])}})}function lw(r,e){const{mutationCb:t,mousemoveCb:n,mouseInteractionCb:i,scrollCb:s,viewportResizeCb:o,inputCb:a,mediaInteractionCb:l,styleSheetRuleCb:c,styleDeclarationCb:u,canvasMutationCb:d,fontCb:h,selectionCb:f,customElementCb:m}=r;r.mutationCb=(...p)=>{e.mutation&&e.mutation(...p),t(...p)},r.mousemoveCb=(...p)=>{e.mousemove&&e.mousemove(...p),n(...p)},r.mouseInteractionCb=(...p)=>{e.mouseInteraction&&e.mouseInteraction(...p),i(...p)},r.scrollCb=(...p)=>{e.scroll&&e.scroll(...p),s(...p)},r.viewportResizeCb=(...p)=>{e.viewportResize&&e.viewportResize(...p),o(...p)},r.inputCb=(...p)=>{e.input&&e.input(...p),a(...p)},r.mediaInteractionCb=(...p)=>{e.mediaInteaction&&e.mediaInteaction(...p),l(...p)},r.styleSheetRuleCb=(...p)=>{e.styleSheetRule&&e.styleSheetRule(...p),c(...p)},r.styleDeclarationCb=(...p)=>{e.styleDeclaration&&e.styleDeclaration(...p),u(...p)},r.canvasMutationCb=(...p)=>{e.canvasMutation&&e.canvasMutation(...p),d(...p)},r.fontCb=(...p)=>{e.font&&e.font(...p),h(...p)},r.selectionCb=(...p)=>{e.selection&&e.selection(...p),f(...p)},r.customElementCb=(...p)=>{e.customElement&&e.customElement(...p),m(...p)}}function cw(r,e={}){const t=r.doc.defaultView;if(!t)return()=>{};lw(r,e);let n;r.recordDOM&&(n=Qf(r,r.doc));const i=QE(r),s=$E(r),o=$f(r),a=qE(r,{win:t}),l=tw(r),c=iw(r);let u=()=>{},d=()=>{},h=()=>{},f=()=>{};r.recordDOM&&(u=rw(r,{win:t}),d=ep(r,r.doc),h=nw(r,{win:t}),r.collectFonts&&(f=sw(r)));const m=ow(r),p=aw(r),g=[];for(const y of r.plugins)g.push(y.observer(y.callback,t,y.options));return ne(()=>{dr.forEach(y=>y.reset()),n==null||n.disconnect(),i(),s(),o(),a(),l(),c(),u(),d(),h(),f(),m(),p(),g.forEach(y=>y())})}function Os(r){return typeof window[r]!="undefined"}function Zs(r){return!!(typeof window[r]!="undefined"&&window[r].prototype&&"insertRule"in window[r].prototype&&"deleteRule"in window[r].prototype)}class tp{constructor(e){O(this,"iframeIdToRemoteIdMap",new WeakMap),O(this,"iframeRemoteIdToIdMap",new WeakMap),this.generateIdFn=e}getId(e,t,n,i){const s=n||this.getIdToRemoteIdMap(e),o=i||this.getRemoteIdToIdMap(e);let a=s.get(t);return a||(a=this.generateIdFn(),s.set(t,a),o.set(a,t)),a}getIds(e,t){const n=this.getIdToRemoteIdMap(e),i=this.getRemoteIdToIdMap(e);return t.map(s=>this.getId(e,s,n,i))}getRemoteId(e,t,n){const i=n||this.getRemoteIdToIdMap(e);if(typeof t!="number")return t;const s=i.get(t);return s||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map(i=>this.getRemoteId(e,i,n))}reset(e){if(!e){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}class uw{constructor(e){O(this,"iframes",new WeakMap),O(this,"crossOriginIframeMap",new WeakMap),O(this,"crossOriginIframeMirror",new tp(Cd)),O(this,"crossOriginIframeStyleMirror"),O(this,"crossOriginIframeRootIdMap",new WeakMap),O(this,"mirror"),O(this,"mutationCb"),O(this,"wrappedEmit"),O(this,"loadListener"),O(this,"stylesheetManager"),O(this,"recordCrossOriginIframes"),this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new tp(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){var n,i;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&((n=e.contentWindow)==null||n.addEventListener("message",this.handleMessage.bind(this))),(i=this.loadListener)==null||i.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const t=e;if(t.data.type!=="rrweb"||t.origin!==t.data.origin)return;const n=e.source;if(!n)return;const i=this.crossOriginIframeMap.get(n);if(!i)return;const s=this.transformCrossOriginEvent(i,t.data.event);s&&this.wrappedEmit(s,t.data.isCheckout)}transformCrossOriginEvent(e,t){var n;switch(t.type){case ie.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const i=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,i),this.patchRootIdOnNode(t.data.node,i),{timestamp:t.timestamp,type:ie.IncrementalSnapshot,data:{source:ee.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case ie.Meta:case ie.Load:case ie.DomContentLoaded:return!1;case ie.Plugin:return t;case ie.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case ie.IncrementalSnapshot:switch(t.data.source){case ee.Mutation:return t.data.adds.forEach(i=>{this.replaceIds(i,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(i.node,e);const s=this.crossOriginIframeRootIdMap.get(e);s&&this.patchRootIdOnNode(i.node,s)}),t.data.removes.forEach(i=>{this.replaceIds(i,e,["parentId","id"])}),t.data.attributes.forEach(i=>{this.replaceIds(i,e,["id"])}),t.data.texts.forEach(i=>{this.replaceIds(i,e,["id"])}),t;case ee.Drag:case ee.TouchMove:case ee.MouseMove:return t.data.positions.forEach(i=>{this.replaceIds(i,e,["id"])}),t;case ee.ViewportResize:return!1;case ee.MediaInteraction:case ee.MouseInteraction:case ee.Scroll:case ee.CanvasMutation:case ee.Input:return this.replaceIds(t.data,e,["id"]),t;case ee.StyleSheetRule:case ee.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case ee.Font:return t;case ee.Selection:return t.data.ranges.forEach(i=>{this.replaceIds(i,e,["start","end"])}),t;case ee.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),(n=t.data.styles)==null||n.forEach(i=>{this.replaceStyleIds(i,e,["styleId"])}),t}}return!1}replace(e,t,n,i){for(const s of i)!Array.isArray(t[s])&&typeof t[s]!="number"||(Array.isArray(t[s])?t[s]=e.getIds(n,t[s]):t[s]=e.getId(n,t[s]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(n=>{this.replaceIdOnNode(n,t)})}patchRootIdOnNode(e,t){e.type!==Yf.Document&&!e.rootId&&(e.rootId=t),"childNodes"in e&&e.childNodes.forEach(n=>{this.patchRootIdOnNode(n,t)})}}class dw{constructor(e){O(this,"shadowDoms",new WeakSet),O(this,"mutationCb"),O(this,"scrollCb"),O(this,"bypassOptions"),O(this,"mirror"),O(this,"restoreHandlers",[]),this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!yn(e)||this.shadowDoms.has(e))return;this.shadowDoms.add(e);const n=Qf(W(S({},this.bypassOptions),{doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e);this.restoreHandlers.push(()=>n.disconnect()),this.restoreHandlers.push($f(W(S({},this.bypassOptions),{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))),setTimeout(()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(q.host(e))),this.restoreHandlers.push(ep({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))},0)}observeAttachShadow(e){!e.contentWindow||!e.contentDocument||this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){const n=this;this.restoreHandlers.push(ur(e.prototype,"attachShadow",function(i){return function(s){const o=i.call(this,s),a=q.shadowRoot(this);return a&&Jf(this)&&n.addShadowRoot(a,t),o}}))}reset(){this.restoreHandlers.forEach(e=>{try{e()}catch(t){}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}for(var Kr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",hw=typeof Uint8Array=="undefined"?[]:new Uint8Array(256),Ns=0;Ns<Kr.length;Ns++)hw[Kr.charCodeAt(Ns)]=Ns;var fw=function(r){var e=new Uint8Array(r),t,n=e.length,i="";for(t=0;t<n;t+=3)i+=Kr[e[t]>>2],i+=Kr[(e[t]&3)<<4|e[t+1]>>4],i+=Kr[(e[t+1]&15)<<2|e[t+2]>>6],i+=Kr[e[t+2]&63];return n%3===2?i=i.substring(0,i.length-1)+"=":n%3===1&&(i=i.substring(0,i.length-2)+"=="),i};const rp=new Map;function pw(r,e){let t=rp.get(r);return t||(t=new Map,rp.set(r,t)),t.has(e)||t.set(e,[]),t.get(e)}const np=(r,e,t)=>{if(!r||!(sp(r,e)||typeof r=="object"))return;const n=r.constructor.name,i=pw(t,n);let s=i.indexOf(r);return s===-1&&(s=i.length,i.push(r)),s};function Gs(r,e,t){if(r instanceof Array)return r.map(n=>Gs(n,e,t));if(r===null)return r;if(r instanceof Float32Array||r instanceof Float64Array||r instanceof Int32Array||r instanceof Uint32Array||r instanceof Uint8Array||r instanceof Uint16Array||r instanceof Int16Array||r instanceof Int8Array||r instanceof Uint8ClampedArray)return{rr_type:r.constructor.name,args:[Object.values(r)]};if(r instanceof ArrayBuffer){const n=r.constructor.name,i=fw(r);return{rr_type:n,base64:i}}else{if(r instanceof DataView)return{rr_type:r.constructor.name,args:[Gs(r.buffer,e,t),r.byteOffset,r.byteLength]};if(r instanceof HTMLImageElement){const n=r.constructor.name,{src:i}=r;return{rr_type:n,src:i}}else if(r instanceof HTMLCanvasElement){const n="HTMLImageElement",i=r.toDataURL();return{rr_type:n,src:i}}else{if(r instanceof ImageData)return{rr_type:r.constructor.name,args:[Gs(r.data,e,t),r.width,r.height]};if(sp(r,e)||typeof r=="object"){const n=r.constructor.name,i=np(r,e,t);return{rr_type:n,index:i}}}}return r}const ip=(r,e,t)=>r.map(n=>Gs(n,e,t)),sp=(r,e)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(i=>typeof e[i]=="function").find(i=>r instanceof e[i]);function mw(r,e,t,n){const i=[],s=Object.getOwnPropertyNames(e.CanvasRenderingContext2D.prototype);for(const o of s)try{if(typeof e.CanvasRenderingContext2D.prototype[o]!="function")continue;const a=ur(e.CanvasRenderingContext2D.prototype,o,function(l){return function(...c){return Ne(this.canvas,t,n,!0)||setTimeout(()=>{const u=ip(c,e,this);r(this.canvas,{type:Hr["2D"],property:o,args:u})},0),l.apply(this,c)}});i.push(a)}catch(a){const l=Is(e.CanvasRenderingContext2D.prototype,o,{set(c){r(this.canvas,{type:Hr["2D"],property:o,args:[c],setter:!0})}});i.push(l)}return()=>{i.forEach(o=>o())}}function gw(r){return r==="experimental-webgl"?"webgl":r}function op(r,e,t,n){const i=[];try{const s=ur(r.HTMLCanvasElement.prototype,"getContext",function(o){return function(a,...l){if(!Ne(this,e,t,!0)){const c=gw(a);if("__context"in this||(this.__context=c),n&&["webgl","webgl2"].includes(c))if(l[0]&&typeof l[0]=="object"){const u=l[0];u.preserveDrawingBuffer||(u.preserveDrawingBuffer=!0)}else l.splice(0,1,{preserveDrawingBuffer:!0})}return o.apply(this,[a,...l])}});i.push(s)}catch(s){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach(s=>s())}}function ap(r,e,t,n,i,s){const o=[],a=Object.getOwnPropertyNames(r);for(const l of a)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(l))try{if(typeof r[l]!="function")continue;const c=ur(r,l,function(u){return function(...d){const h=u.apply(this,d);if(np(h,s,this),"tagName"in this.canvas&&!Ne(this.canvas,n,i,!0)){const f=ip(d,s,this),m={type:e,property:l,args:f};t(this.canvas,m)}return h}});o.push(c)}catch(c){const u=Is(r,l,{set(d){t(this.canvas,{type:e,property:l,args:[d],setter:!0})}});o.push(u)}return o}function yw(r,e,t,n){const i=[];return i.push(...ap(e.WebGLRenderingContext.prototype,Hr.WebGL,r,t,n,e)),typeof e.WebGL2RenderingContext!="undefined"&&i.push(...ap(e.WebGL2RenderingContext.prototype,Hr.WebGL2,r,t,n,e)),()=>{i.forEach(s=>s())}}const lp="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIGxldCBsb2dEZWJ1ZyA9IGZhbHNlOwogIGNvbnN0IGRlYnVnID0gKC4uLmFyZ3MpID0+IHsKICAgIGlmIChsb2dEZWJ1ZykgewogICAgICBjb25zb2xlLmRlYnVnKC4uLmFyZ3MpOwogICAgfQogIH07CiAgd29ya2VyLm9ubWVzc2FnZSA9IGFzeW5jIGZ1bmN0aW9uKGUpIHsKICAgIGxvZ0RlYnVnID0gISFlLmRhdGEubG9nRGVidWc7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGR4LCBkeSwgZHcsIGRoLCBkYXRhVVJMT3B0aW9ucyB9ID0gZS5kYXRhOwogICAgICBjb25zdCB0cmFuc3BhcmVudEJhc2U2NCA9IGdldFRyYW5zcGFyZW50QmxvYkZvcigKICAgICAgICB3aWR0aCwKICAgICAgICBoZWlnaHQsCiAgICAgICAgZGF0YVVSTE9wdGlvbnMKICAgICAgKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgY29uc3QgY3R4ID0gb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGN0eC5kcmF3SW1hZ2UoYml0bWFwLCAwLCAwLCB3aWR0aCwgaGVpZ2h0KTsKICAgICAgYml0bWFwLmNsb3NlKCk7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IHR5cGUgPSBibG9iLnR5cGU7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICBpZiAoIWxhc3RCbG9iTWFwLmhhcyhpZCkgJiYgYXdhaXQgdHJhbnNwYXJlbnRCYXNlNjQgPT09IGJhc2U2NCkgewogICAgICAgIGRlYnVnKCJbaGlnaGxpZ2h0LXdvcmtlcl0gY2FudmFzIGJpdG1hcCBpcyB0cmFuc3BhcmVudCIsIHsKICAgICAgICAgIGlkLAogICAgICAgICAgYmFzZTY0CiAgICAgICAgfSk7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCwgc3RhdHVzOiAidHJhbnNwYXJlbnQiIH0pOwogICAgICB9CiAgICAgIGlmIChsYXN0QmxvYk1hcC5nZXQoaWQpID09PSBiYXNlNjQpIHsKICAgICAgICBkZWJ1ZygiW2hpZ2hsaWdodC13b3JrZXJdIGNhbnZhcyBiaXRtYXAgaXMgdW5jaGFuZ2VkIiwgewogICAgICAgICAgaWQsCiAgICAgICAgICBiYXNlNjQKICAgICAgICB9KTsKICAgICAgfQogICAgICBjb25zdCBtc2cgPSB7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0LAogICAgICAgIGR4LAogICAgICAgIGR5LAogICAgICAgIGR3LAogICAgICAgIGRoCiAgICAgIH07CiAgICAgIGRlYnVnKCJbaGlnaGxpZ2h0LXdvcmtlcl0gY2FudmFzIGJpdG1hcCBwcm9jZXNzZWQiLCBtc2cpOwogICAgICB3b3JrZXIucG9zdE1lc3NhZ2UobXNnKTsKICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgfSBlbHNlIHsKICAgICAgZGVidWcoIltoaWdobGlnaHQtd29ya2VyXSBubyBvZmZzY3JlZW5jYW52YXMgc3VwcG9ydCIsIHsKICAgICAgICBpZDogZS5kYXRhLmlkCiAgICAgIH0pOwogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCwgc3RhdHVzOiAidW5zdXBwb3J0ZWQiIH0pOwogICAgfQogIH07Cn0pKCk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWltYWdlLWJpdG1hcC1kYXRhLXVybC13b3JrZXItRHd0SzhBMHouanMubWFwCg==",bw=r=>Uint8Array.from(atob(r),e=>e.charCodeAt(0)),cp=typeof self!="undefined"&&self.Blob&&new Blob([bw(lp)],{type:"text/javascript;charset=utf-8"});function vw(r){let e;try{if(e=cp&&(self.URL||self.webkitURL).createObjectURL(cp),!e)throw"";const t=new Worker(e,{name:r==null?void 0:r.name});return t.addEventListener("error",()=>{(self.URL||self.webkitURL).revokeObjectURL(e)}),t}catch(t){return new Worker("data:text/javascript;base64,"+lp,{name:r==null?void 0:r.name})}finally{e&&(self.URL||self.webkitURL).revokeObjectURL(e)}}class Sw{constructor(e){O(this,"pendingCanvasMutations",new Map),O(this,"rafStamps",{latestId:0,invokeId:null}),O(this,"mirror"),O(this,"logger"),O(this,"worker"),O(this,"snapshotInProgressMap",new Map),O(this,"lastSnapshotTime",new Map),O(this,"options"),O(this,"mutationCb"),O(this,"resetObservers"),O(this,"frozen",!1),O(this,"locked",!1),O(this,"processMutation",(d,h)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(d)||this.pendingCanvasMutations.set(d,[]),this.pendingCanvasMutations.get(d).push(h)});const{sampling:t,win:n,blockClass:i,blockSelector:s,recordCanvas:o,recordLocalVideos:a,recordRemoteVideos:l,initialSnapshotDelay:c,dataURLOptions:u}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,this.logger=e.logger,this.worker=new vw,this.worker.onmessage=d=>{const{id:h}=d.data;if(this.snapshotInProgressMap.set(h,!1),!("base64"in d.data)){this.debug(null,"canvas worker received empty message",{id:h,data:d.data,status:d.data.status});return}const{base64:f,type:m,dx:p,dy:g,dw:y,dh:E}=d.data,T={id:h,type:Hr["2D"],commands:[{property:"clearRect",args:[p,g,y,E]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:f}],type:m}]},p,g,y,E]}]};this.debug(null,"canvas worker recording mutation",T),this.mutationCb(T)},this.options=e,o&&t==="all"?(this.debug(null,"initializing canvas mutation observer",{sampling:t}),this.initCanvasMutationObserver(n,i,s)):o&&typeof t=="number"&&(this.debug(null,"initializing canvas fps observer",{sampling:t}),this.initCanvasFPSObserver(a,l,t,n,i,s,{initialSnapshotDelay:c,dataURLOptions:u},e.resizeFactor,e.maxSnapshotDimension))}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}debug(e,...t){if(!this.logger)return;const n=this.mirror.getId(e);let i="[highlight-canvas-manager]";e&&(i=`[highlight-canvas] [id:${n}]`,e.tagName.toLowerCase()==="canvas"&&(i+=` [ctx:${e.__context}]`)),this.logger.debug(i,e,...t)}snapshot(e){return D(this,null,function*(){var t;const n=this.mirror.getId(e);if(this.snapshotInProgressMap.get(n)){this.debug(e,"snapshotting already in progress for",n);return}const i=1e3/(typeof this.options.samplingManual=="number"?this.options.samplingManual:1),s=this.lastSnapshotTime.get(n);if(!(s&&new Date().getTime()-s<i)){if(this.debug(e,"starting snapshotting"),e.width===0||e.height===0){this.debug(e,"not yet ready",{width:e.width,height:e.height});return}this.lastSnapshotTime.set(n,new Date().getTime()),this.snapshotInProgressMap.set(n,!0);try{if(this.options.clearWebGLBuffer!==!1&&["webgl","webgl2"].includes(e.__context)){const u=e.getContext(e.__context);((t=u==null?void 0:u.getContextAttributes())==null?void 0:t.preserveDrawingBuffer)===!1&&(u.clear(u.COLOR_BUFFER_BIT),this.debug(e,"cleared webgl canvas to load it into memory",{attributes:u==null?void 0:u.getContextAttributes()}))}if(e.width===0||e.height===0){this.debug(e,"not yet ready",{width:e.width,height:e.height});return}let o=this.options.resizeFactor||1;if(this.options.maxSnapshotDimension){const u=Math.max(e.width,e.height);o=Math.min(o,this.options.maxSnapshotDimension/u)}const a=e.width*o,l=e.height*o,c=yield createImageBitmap(e,{resizeWidth:a,resizeHeight:l});this.debug(e,"created image bitmap",{width:c.width,height:c.height}),this.worker.postMessage({id:n,bitmap:c,width:a,height:l,dx:0,dy:0,dw:e.width,dh:e.height,dataURLOptions:this.options.dataURLOptions,logDebug:!!this.logger},[c]),this.debug(e,"sent message")}catch(o){this.debug(e,"failed to snapshot",o)}finally{this.snapshotInProgressMap.set(n,!1)}}})}initCanvasFPSObserver(e,t,n,i,s,o,a,l,c){const u=op(i,s,o,!0),d=1e3/n;let h=0,f;const m=new Map,p=(T,I)=>{const R=[];T.querySelectorAll(I).forEach(Z=>R.push(Z));const N=document.createNodeIterator(T,Node.ELEMENT_NODE);let V;for(;V=N.nextNode();)V!=null&&V.shadowRoot&&R.push(...p(V.shadowRoot,I));return R},g=T=>{const I=[];return p(i.document,"canvas").forEach(R=>{if(!Ne(R,s,o,!0)){this.debug(R,"discovered canvas"),I.push(R);const N=this.mirror.getId(R);m.has(N)||m.set(N,T)}}),I},y=T=>{const I=[];return(e||t)&&p(i.document,"video").forEach(R=>{if(!(!t&&R.src!==""&&R.src.indexOf("blob:")===-1)&&!(!e&&(R.src===""||R.src.indexOf("blob:")!==-1))&&!Ne(R,s,o,!0)){I.push(R);const N=this.mirror.getId(R);m.has(N)||m.set(N,T)}}),I},E=T=>D(this,null,function*(){if(h&&T-h<d){f=requestAnimationFrame(E);return}h=T;const I=N=>{const V=this.mirror.getId(N),Z=m.get(V),w=!a.initialSnapshotDelay||T-Z>a.initialSnapshotDelay;return this.debug(N,{delay:a.initialSnapshotDelay,delta:T-Z,hadLoadingTime:w}),w},R=[];R.push(...g(T).filter(I).map(N=>this.snapshot(N))),R.push(...y(T).filter(I).map(N=>D(this,null,function*(){this.debug(N,"starting video snapshotting");const V=this.mirror.getId(N);if(this.snapshotInProgressMap.get(V)){this.debug(N,"video snapshotting already in progress for",V);return}this.snapshotInProgressMap.set(V,!0);try{const{width:Z,height:w}=N.getBoundingClientRect(),{actualWidth:L,actualHeight:A}={actualWidth:N.videoWidth,actualHeight:N.videoHeight},P=Math.max(L,A);if(P===0){this.debug(N,"not yet ready",{width:N.width,height:N.height,actualWidth:L,actualHeight:A,boxWidth:Z,boxHeight:w});return}let Q=l||1;c&&(Q=Math.min(Q,c/P));const b=L*Q,_=A*Q,x=yield createImageBitmap(N,{resizeWidth:b,resizeHeight:_}),F=Math.max(Z,w)/P,J=L*F,M=A*F,se=(Z-J)/2,re=(w-M)/2;this.debug(N,"created image bitmap",{actualWidth:L,actualHeight:A,boxWidth:Z,boxHeight:w,outputWidth:J,outputHeight:M,resizeWidth:b,resizeHeight:_,scale:Q,outputScale:F,offsetX:se,offsetY:re}),this.worker.postMessage({id:V,bitmap:x,width:b,height:_,dx:se,dy:re,dw:J,dh:M,dataURLOptions:a.dataURLOptions,logDebug:!!this.logger},[x]),this.debug(N,"send message")}catch(Z){this.debug(N,"failed to snapshot",Z)}finally{this.snapshotInProgressMap.set(V,!1)}}))),yield Promise.all(R).catch(console.error),f=requestAnimationFrame(E)});f=requestAnimationFrame(E),this.resetObservers=()=>{u(),f&&cancelAnimationFrame(f)}}initCanvasMutationObserver(e,t,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const i=op(e,t,n,!1),s=mw(this.processMutation.bind(this),e,t,n),o=yw(this.processMutation.bind(this),e,t,n);this.resetObservers=()=>{i(),s(),o()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,requestAnimationFrame(e)};requestAnimationFrame(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((e,t)=>{const n=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,n)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(e);if(!n||t===-1)return;const i=n.map(o=>{const c=o,{type:a}=c;return We(c,["type"])}),{type:s}=n[0];this.mutationCb({id:t,type:s,commands:i}),this.pendingCanvasMutations.delete(e)}}class _w{constructor(e){O(this,"trackedLinkElements",new WeakSet),O(this,"mutationCb"),O(this,"adoptedStyleSheetCb"),O(this,"styleMirror",new FE),this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(e.length===0)return;const n={id:t,styleIds:[]},i=[];for(const s of e){let o;this.styleMirror.has(s)?o=this.styleMirror.getId(s):(o=this.styleMirror.add(s),i.push({styleId:o,rules:Array.from(s.rules||CSSRule,(a,l)=>({rule:_d(a,s.href),index:l}))})),n.styleIds.push(o)}i.length>0&&(n.styles=i),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class Tw{constructor(){O(this,"nodeMap",new WeakMap),O(this,"active",!1)}inOtherBuffer(e,t){const n=this.nodeMap.get(e);return n&&Array.from(n).some(i=>i!==t)}add(e,t){this.active||(this.active=!0,requestAnimationFrame(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}destroy(){}}let ye,Vs,Mn,xs=!1;try{if(Array.from([1],r=>r*2)[0]!==2){const r=document.createElement("iframe");document.body.appendChild(r),Array.from=((md=r.contentWindow)==null?void 0:md.Array.from)||Array.from,document.body.removeChild(r)}}catch(r){console.debug("Unable to override Array.from",r)}const pt=C0();function tt(r={}){var e,t,n,i,s,o,a,l;const{emit:c,checkoutEveryNms:u,checkoutEveryNth:d,blockClass:h="highlight-block",blockSelector:f=null,ignoreClass:m="highlight-ignore",ignoreSelector:p=null,maskTextClass:g="highlight-mask",maskTextSelector:y=null,inlineStylesheet:E=!0,maskAllInputs:T,maskInputOptions:I,slimDOMOptions:R,maskInputFn:N,maskTextFn:V=oa,hooks:Z,packFn:w,sampling:L={},mousemoveWait:A,recordDOM:P=!0,recordCanvas:Q=!1,recordCrossOriginIframes:b=!1,recordAfter:_=r.recordAfter==="DOMContentLoaded"?r.recordAfter:"load",userTriggeredOnInput:x=!1,collectFonts:F=!1,inlineImages:J=!1,inlineVideos:M=!1,plugins:se,keepIframeSrcFn:re=()=>!1,privacySetting:le="default",ignoreCSSAttributes:Oe=new Set([]),errorHandler:ct,logger:Ce}=r,gt=S(S({},r.dataURLOptions),(t=(e=r.sampling)==null?void 0:e.canvas)==null?void 0:t.dataURLOptions);zE(ct);const Lr=b?window.parent===window:!0;let Ut=!1;if(!Lr)try{window.parent.document&&(Ut=!1)}catch(ce){Ut=!0}if(Lr&&!c)throw new Error("emit function is required");if(!Lr&&!Ut)return()=>{};A!==void 0&&L.mousemove===void 0&&(L.mousemove=A),pt.reset();const Ii=T===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:I!==void 0?I:{password:!0},dn=R===!0||R==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:R==="all",headMetaDescKeywords:R==="all",headTitleMutations:R==="all"}:R||{};UE();let Ci,hn=0;const fn=ce=>{for(const yt of se||[])yt.eventProcessor&&(ce=yt.eventProcessor(ce));return w&&!Ut&&(ce=w(ce)),ce};ye=(ce,yt)=>{var be;const ve=ce;if(ve.timestamp=Cs(),(be=dr[0])!=null&&be.isFrozen()&&ve.type!==ie.FullSnapshot&&!(ve.type===ie.IncrementalSnapshot&&ve.data.source===ee.Mutation)&&dr.forEach(Ct=>Ct.unfreeze()),Lr)c==null||c(fn(ve),yt);else if(Ut){const Ct={type:"rrweb",event:fn(ve),origin:window.location.origin,isCheckout:yt};window.parent.postMessage(Ct,"*")}if(ve.type===ie.FullSnapshot)Ci=ve,hn=0;else if(ve.type===ie.IncrementalSnapshot){if(ve.data.source===ee.Mutation&&ve.data.isAttachIframe)return;hn++;const Ct=d&&hn>=d,pe=u&&ve.timestamp-Ci.timestamp>u;(Ct||pe)&&Vs(!0)}};const ir=ce=>{ye({type:ie.IncrementalSnapshot,data:S({source:ee.Mutation},ce)})},ev=ce=>ye({type:ie.IncrementalSnapshot,data:S({source:ee.Scroll},ce)}),tv=ce=>ye({type:ie.IncrementalSnapshot,data:S({source:ee.CanvasMutation},ce)}),pk=ce=>ye({type:ie.IncrementalSnapshot,data:S({source:ee.AdoptedStyleSheet},ce)}),Or=new _w({mutationCb:ir,adoptedStyleSheetCb:pk}),Zr=new uw({mirror:pt,mutationCb:ir,stylesheetManager:Or,recordCrossOriginIframes:b,wrappedEmit:ye});for(const ce of se||[])ce.getMirror&&ce.getMirror({nodeMirror:pt,crossOriginIframeMirror:Zr.crossOriginIframeMirror,crossOriginIframeStyleMirror:Zr.crossOriginIframeStyleMirror});const Hu=new Tw;Mn=new Sw({recordCanvas:Q,recordLocalVideos:J,recordRemoteVideos:M,mutationCb:tv,win:window,blockClass:h,blockSelector:f,mirror:pt,sampling:(n=L==null?void 0:L.canvas)==null?void 0:n.fps,samplingManual:(i=L==null?void 0:L.canvas)==null?void 0:i.fpsManual,clearWebGLBuffer:(s=L==null?void 0:L.canvas)==null?void 0:s.clearWebGLBuffer,initialSnapshotDelay:(o=L==null?void 0:L.canvas)==null?void 0:o.initialSnapshotDelay,dataURLOptions:gt,resizeFactor:(a=L==null?void 0:L.canvas)==null?void 0:a.resizeFactor,maxSnapshotDimension:(l=L==null?void 0:L.canvas)==null?void 0:l.maxSnapshotDimension,logger:Ce});const Mo=new dw({mutationCb:ir,scrollCb:ev,bypassOptions:{blockClass:h,blockSelector:f,maskTextClass:g,maskTextSelector:y,inlineStylesheet:E,maskInputOptions:Ii,dataURLOptions:gt,maskTextFn:V,maskInputFn:N,recordCanvas:Q,inlineImages:J,inlineVideos:M,privacySetting:le,sampling:L,slimDOMOptions:dn,iframeManager:Zr,stylesheetManager:Or,canvasManager:Mn,keepIframeSrcFn:re,processedNodeManager:Hu},mirror:pt});Vs=(ce=!1)=>{if(!P)return;ye({type:ie.Meta,data:{href:window.location.href,width:Af(),height:Wf()}},ce),Or.reset(),Mo.init(),dr.forEach(be=>be.lock());const yt=iS(document,{mirror:pt,blockClass:h,blockSelector:f,maskTextClass:g,maskTextSelector:y,inlineStylesheet:E,maskAllInputs:Ii,maskTextFn:V,maskInputFn:N,slimDOM:dn,dataURLOptions:gt,recordCanvas:Q,inlineImages:J,inlineVideos:M,privacySetting:le,onSerialize:be=>{Uf(be,pt)&&Zr.addIframe(be),Ff(be,pt)&&Or.trackLinkElement(be),vl(be)&&Mo.addShadowRoot(q.shadowRoot(be),document)},onIframeLoad:(be,ve)=>{Zr.attachIframe(be,ve),Mo.observeAttachShadow(be)},onStylesheetLoad:(be,ve)=>{Or.attachLinkElement(be,ve)},keepIframeSrcFn:re});if(!yt)return console.warn("Failed to snapshot the document");ye({type:ie.FullSnapshot,data:{node:yt,initialOffset:kf(window)}},ce),dr.forEach(be=>be.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Or.adoptStyleSheets(document.adoptedStyleSheets,pt.getId(document))};try{const ce=[],yt=ve=>{var Ct;return ne(cw)({mutationCb:ir,mousemoveCb:(pe,Bu)=>ye({type:ie.IncrementalSnapshot,data:{source:Bu,positions:pe}}),mouseInteractionCb:pe=>ye({type:ie.IncrementalSnapshot,data:S({source:ee.MouseInteraction},pe)}),scrollCb:ev,viewportResizeCb:pe=>ye({type:ie.IncrementalSnapshot,data:S({source:ee.ViewportResize},pe)}),inputCb:pe=>ye({type:ie.IncrementalSnapshot,data:S({source:ee.Input},pe)}),mediaInteractionCb:pe=>ye({type:ie.IncrementalSnapshot,data:S({source:ee.MediaInteraction},pe)}),styleSheetRuleCb:pe=>ye({type:ie.IncrementalSnapshot,data:S({source:ee.StyleSheetRule},pe)}),styleDeclarationCb:pe=>ye({type:ie.IncrementalSnapshot,data:S({source:ee.StyleDeclaration},pe)}),canvasMutationCb:tv,fontCb:pe=>ye({type:ie.IncrementalSnapshot,data:S({source:ee.Font},pe)}),selectionCb:pe=>{ye({type:ie.IncrementalSnapshot,data:S({source:ee.Selection},pe)})},customElementCb:pe=>{ye({type:ie.IncrementalSnapshot,data:S({source:ee.CustomElement},pe)})},blockClass:h,ignoreClass:m,ignoreSelector:p,maskTextClass:g,maskTextSelector:y,maskInputOptions:Ii,inlineStylesheet:E,sampling:L,recordDOM:P,recordCanvas:Q,inlineImages:J,inlineVideos:M,userTriggeredOnInput:x,collectFonts:F,doc:ve,maskInputFn:N,maskTextFn:V,keepIframeSrcFn:re,blockSelector:f,slimDOMOptions:dn,dataURLOptions:gt,mirror:pt,iframeManager:Zr,stylesheetManager:Or,shadowDomManager:Mo,processedNodeManager:Hu,canvasManager:Mn,ignoreCSSAttributes:Oe,privacySetting:le,plugins:((Ct=se==null?void 0:se.filter(pe=>pe.observer))==null?void 0:Ct.map(pe=>({observer:pe.observer,options:pe.options,callback:Bu=>ye({type:ie.Plugin,data:{plugin:pe.name,payload:Bu}})})))||[]},Z)};Zr.addLoadListener(ve=>{try{ce.push(yt(ve.contentDocument))}catch(Ct){console.warn(Ct)}});const be=()=>{Vs(),ce.push(yt(document)),xs=!0};return document.readyState==="interactive"||document.readyState==="complete"?be():(ce.push(Pe("DOMContentLoaded",()=>{ye({type:ie.DomContentLoaded,data:{}}),_==="DOMContentLoaded"&&be()})),ce.push(Pe("load",()=>{ye({type:ie.Load,data:{}}),_==="load"&&be()},window))),()=>{ce.forEach(ve=>ve()),Hu.destroy(),xs=!1,jE()}}catch(ce){console.warn(ce)}}tt.addCustomEvent=(r,e)=>{xs&&ye({type:ie.Custom,data:{tag:r,payload:e}})},tt.freezePage=()=>{dr.forEach(r=>r.freeze())},tt.takeFullSnapshot=r=>{if(!xs)throw new Error("please take full snapshot after start recording");Vs(r)},tt.snapshotCanvas=r=>D(this,null,function*(){if(!Mn)throw new Error("canvas manager is not initialized");yield Mn.snapshot(r)}),tt.mirror=pt;var up;(function(r){r[r.NotStarted=0]="NotStarted",r[r.Running=1]="Running",r[r.Stopped=2]="Stopped"})(up||(up={}));const{addCustomEvent:Xs}=tt;var ks=function(){return ks=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},ks.apply(this,arguments)},Ws=new Map,_l=new Map,dp=!0,As=!1;function hp(r){return r.replace(/[\s,]+/g," ").trim()}function Ew(r){return hp(r.source.body.substring(r.start,r.end))}function ww(r){var e=new Set,t=[];return r.definitions.forEach(function(n){if(n.kind==="FragmentDefinition"){var i=n.name.value,s=Ew(n.loc),o=_l.get(i);o&&!o.has(s)?dp&&console.warn("Warning: fragment with name "+i+` already exists.
graphql-tag enforces all fragment names across your application to be unique; read more about
this in the docs: http://dev.apollodata.com/core/fragments.html#unique-names`):o||_l.set(i,o=new Set),o.add(s),e.has(s)||(e.add(s),t.push(n))}else t.push(n)}),ks(ks({},r),{definitions:t})}function Rw(r){var e=new Set(r.definitions);e.forEach(function(n){n.loc&&delete n.loc,Object.keys(n).forEach(function(i){var s=n[i];s&&typeof s=="object"&&e.add(s)})});var t=r.loc;return t&&(delete t.startToken,delete t.endToken),r}function Iw(r){var e=hp(r);if(!Ws.has(e)){var t=ud(r,{experimentalFragmentVariables:As,allowLegacyFragmentVariables:As});if(!t||t.kind!=="Document")throw new Error("Not a valid GraphQL document.");Ws.set(e,Rw(ww(t)))}return Ws.get(e)}function Me(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];typeof r=="string"&&(r=[r]);var n=r[0];return e.forEach(function(i,s){i&&i.kind==="Document"?n+=i.loc.source.body:n+=i,n+=r[s+1]}),Iw(n)}function Cw(){Ws.clear(),_l.clear()}function Lw(){dp=!1}function Ow(){As=!0}function Zw(){As=!1}var Un={gql:Me,resetCaches:Cw,disableFragmentWarnings:Lw,enableExperimentalFragmentVariables:Ow,disableExperimentalFragmentVariables:Zw};(function(r){r.gql=Un.gql,r.resetCaches=Un.resetCaches,r.disableFragmentWarnings=Un.disableFragmentWarnings,r.enableExperimentalFragmentVariables=Un.enableExperimentalFragmentVariables,r.disableExperimentalFragmentVariables=Un.disableExperimentalFragmentVariables})(Me||(Me={})),Me.default=Me;const fp=Me`
	fragment MatchParts on MatchConfig {
		regexValue
		matchValue
	}
`,Nw=Me`
	mutation PushPayload(
		$session_secure_id: String!
		$payload_id: ID!
		$events: ReplayEventsInput!
		$messages: String!
		$resources: String!
		$web_socket_events: String!
		$errors: [ErrorObjectInput]!
		$is_beacon: Boolean
		$has_session_unloaded: Boolean
		$highlight_logs: String
	) {
		pushPayload(
			session_secure_id: $session_secure_id
			payload_id: $payload_id
			events: $events
			messages: $messages
			resources: $resources
			web_socket_events: $web_socket_events
			errors: $errors
			is_beacon: $is_beacon
			has_session_unloaded: $has_session_unloaded
			highlight_logs: $highlight_logs
		)
	}
`,Tl=Me`
	mutation PushSessionEvents(
		$session_secure_id: String!
		$payload_id: Int64ID!
		$data: String!
	) {
		pushSessionEvents(
			session_secure_id: $session_secure_id
			payload_id: $payload_id
			data: $data
		)
	}
`,Gw=Me`
	mutation identifySession(
		$session_secure_id: String!
		$user_identifier: String!
		$user_object: Any
	) {
		identifySession(
			session_secure_id: $session_secure_id
			user_identifier: $user_identifier
			user_object: $user_object
		)
	}
`,Vw=Me`
	mutation addSessionProperties(
		$session_secure_id: String!
		$properties_object: Any
	) {
		addSessionProperties(
			session_secure_id: $session_secure_id
			properties_object: $properties_object
		)
	}
`,xw=Me`
	mutation pushMetrics($metrics: [MetricInput]!) {
		pushMetrics(metrics: $metrics)
	}
`,Xw=Me`
	mutation addSessionFeedback(
		$session_secure_id: String!
		$user_name: String
		$user_email: String
		$verbatim: String!
		$timestamp: Timestamp!
	) {
		addSessionFeedback(
			session_secure_id: $session_secure_id
			user_name: $user_name
			user_email: $user_email
			verbatim: $verbatim
			timestamp: $timestamp
		)
	}
`,kw=Me`
	mutation initializeSession(
		$session_secure_id: String!
		$session_key: String
		$organization_verbose_id: String!
		$enable_strict_privacy: Boolean!
		$privacy_setting: String!
		$enable_recording_network_contents: Boolean!
		$clientVersion: String!
		$firstloadVersion: String!
		$clientConfig: String!
		$environment: String!
		$id: String!
		$appVersion: String
		$serviceName: String!
		$client_id: String!
		$network_recording_domains: [String!]
		$disable_session_recording: Boolean
	) {
		initializeSession(
			session_secure_id: $session_secure_id
			session_key: $session_key
			organization_verbose_id: $organization_verbose_id
			enable_strict_privacy: $enable_strict_privacy
			enable_recording_network_contents: $enable_recording_network_contents
			clientVersion: $clientVersion
			firstloadVersion: $firstloadVersion
			clientConfig: $clientConfig
			environment: $environment
			appVersion: $appVersion
			serviceName: $serviceName
			fingerprint: $id
			client_id: $client_id
			network_recording_domains: $network_recording_domains
			disable_session_recording: $disable_session_recording
			privacy_setting: $privacy_setting
		) {
			secure_id
			project_id
			sampling {
				spans {
					name {
						...MatchParts
					}
					attributes {
						key {
							...MatchParts
						}
						attribute {
							...MatchParts
						}
					}
					events {
						name {
							...MatchParts
						}
						attributes {
							key {
								...MatchParts
							}
							attribute {
								...MatchParts
							}
						}
					}
					samplingRatio
				}
				logs {
					message {
						...MatchParts
					}
					severityText {
						...MatchParts
					}
					attributes {
						key {
							...MatchParts
						}
						attribute {
							...MatchParts
						}
					}
					samplingRatio
				}
			}
		}
	}
	${fp}
`,Ww=Me`
	query Ignore($id: ID!) {
		ignore(id: $id)
	}
`,Aw=Me`
	query GetSamplingConfig($organization_verbose_id: String!) {
		sampling(organization_verbose_id: $organization_verbose_id) {
			spans {
				name {
					...MatchParts
				}
				attributes {
					key {
						...MatchParts
					}
					attribute {
						...MatchParts
					}
				}
				events {
					name {
						...MatchParts
					}
					attributes {
						key {
							...MatchParts
						}
						attribute {
							...MatchParts
						}
					}
				}
				samplingRatio
			}
			logs {
				message {
					...MatchParts
				}
				severityText {
					...MatchParts
				}
				attributes {
					key {
						...MatchParts
					}
					attribute {
						...MatchParts
					}
				}
				samplingRatio
			}
		}
	}
	${fp}
`,Pw=(r,e,t,n)=>r();function El(r,e=Pw){return{PushPayload(t,n){return e(i=>r.request(Nw,t,S(S({},n),i)),"PushPayload","mutation",t)},PushSessionEvents(t,n){return e(i=>r.request(Tl,t,S(S({},n),i)),"PushSessionEvents","mutation",t)},identifySession(t,n){return e(i=>r.request(Gw,t,S(S({},n),i)),"identifySession","mutation",t)},addSessionProperties(t,n){return e(i=>r.request(Vw,t,S(S({},n),i)),"addSessionProperties","mutation",t)},pushMetrics(t,n){return e(i=>r.request(xw,t,S(S({},n),i)),"pushMetrics","mutation",t)},addSessionFeedback(t,n){return e(i=>r.request(Xw,t,S(S({},n),i)),"addSessionFeedback","mutation",t)},initializeSession(t,n){return e(i=>r.request(kw,t,S(S({},n),i)),"initializeSession","mutation",t)},Ignore(t,n){return e(i=>r.request(Ww,t,S(S({},n),i)),"Ignore","query",t)},GetSamplingConfig(t,n){return e(i=>r.request(Aw,t,S(S({},n),i)),"GetSamplingConfig","query",t)}}}const wl=["assert","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"];var ze=(r=>(r.DeviceMemory="DeviceMemory",r.ViewportHeight="ViewportHeight",r.ViewportWidth="ViewportWidth",r.ScreenHeight="ScreenHeight",r.ScreenWidth="ScreenWidth",r.ViewportArea="ViewportArea",r))(ze||{}),Se=(r=>(r.Device="Device",r.WebVital="WebVital",r.Performance="Performance",r.Frontend="Frontend",r.Backend="Backend",r))(Se||{});function Mw(r,e,t){try{if(!(e in r))return()=>{};const n=r[e],i=t(n);return typeof i=="function"&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:n}})),r[e]=i,()=>{r[e]=n}}catch(n){return()=>{}}}function Uw(r){if(!r||!r.outerHTML)return"";let e="";for(;r.parentElement;){let t=r.localName;if(!t)break;t=t.toLowerCase();let n=r.parentElement,i=[];if(n.children&&n.children.length>0)for(let s=0;s<n.children.length;s++){let o=n.children[s];o.localName&&o.localName.toLowerCase&&o.localName.toLowerCase()===t&&i.push(o)}i.length>1&&(t+=":eq("+i.indexOf(r)+")"),e=t+(e?">"+e:""),r=n}return e}function Rl(r){return Object.prototype.toString.call(r)==="[object Object]"}function pp(r,e){if(e===0)return!0;const t=Object.keys(r);for(const n of t)if(Rl(r[n])&&pp(r[n],e-1))return!0;return!1}function Il(r,e){const t={numOfKeysLimit:50,depthOfLimit:4};Object.assign(t,e);const n=[],i=[];return JSON.stringify(r,function(a,l){if(n.length>0){const c=n.indexOf(this);~c?n.splice(c+1):n.push(this),~c?i.splice(c,1/0,a):i.push(a),~n.indexOf(l)&&(n[0]===l?l="[Circular ~]":l="[Circular ~."+i.slice(0,n.indexOf(l)).join(".")+"]")}else n.push(l);if(l==null)return l;if(s(l))return o(l);if(l instanceof Event){const c={};for(const u in l){const d=l[u];Array.isArray(d)?c[u]=Uw(d.length?d[0]:null):c[u]=d}return c}else{if(l instanceof Node)return l instanceof HTMLElement?l?l.outerHTML:"":l.nodeName;if(l instanceof Error)return l.name+": "+l.message}return l});function s(a){return Rl(a)&&Object.keys(a).length>t.numOfKeysLimit||typeof a=="function"?!0:a instanceof Event&&a.isTrusted===!1?Object.keys(a).length===1:!!(Rl(a)&&pp(a,t.depthOfLimit))}function o(a){let l=a.toString();return t.stringLengthLimit&&l.length>t.stringLengthLimit&&(l=`${l.slice(0,t.stringLengthLimit)}...`),l}}function Fw(){var r=document.createElement("canvas");return r.getContext&&r.getContext("2d")?r.toDataURL("image/webp").indexOf("data:image/webp")==0:!1}function mp(){return Fw()?{type:"image/webp",quality:.9}:{type:"image/jpeg",quality:.6}}function gp(r){return typeof r=="number"&&!isNaN(r)&&isFinite(r)}var yp={exports:{}},Cl={exports:{}},bp;function Dw(){return bp||(bp=1,function(r,e){(function(t,n){r.exports=n()})(jo,function(){function t(p){return!isNaN(parseFloat(p))&&isFinite(p)}function n(p){return p.charAt(0).toUpperCase()+p.substring(1)}function i(p){return function(){return this[p]}}var s=["isConstructor","isEval","isNative","isToplevel"],o=["columnNumber","lineNumber"],a=["fileName","functionName","source"],l=["args"],c=["evalOrigin"],u=s.concat(o,a,l,c);function d(p){if(p)for(var g=0;g<u.length;g++)p[u[g]]!==void 0&&this["set"+n(u[g])](p[u[g]])}d.prototype={getArgs:function(){return this.args},setArgs:function(p){if(Object.prototype.toString.call(p)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=p},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(p){if(p instanceof d)this.evalOrigin=p;else if(p instanceof Object)this.evalOrigin=new d(p);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var p=this.getFileName()||"",g=this.getLineNumber()||"",y=this.getColumnNumber()||"",E=this.getFunctionName()||"";return this.getIsEval()?p?"[eval] ("+p+":"+g+":"+y+")":"[eval]:"+g+":"+y:E?E+" ("+p+":"+g+":"+y+")":p+":"+g+":"+y}},d.fromString=function(g){var y=g.indexOf("("),E=g.lastIndexOf(")"),T=g.substring(0,y),I=g.substring(y+1,E).split(","),R=g.substring(E+1);if(R.indexOf("@")===0)var N=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(R,""),V=N[1],Z=N[2],w=N[3];return new d({functionName:T,args:I||void 0,fileName:V,lineNumber:Z||void 0,columnNumber:w||void 0})};for(var h=0;h<s.length;h++)d.prototype["get"+n(s[h])]=i(s[h]),d.prototype["set"+n(s[h])]=function(p){return function(g){this[p]=!!g}}(s[h]);for(var f=0;f<o.length;f++)d.prototype["get"+n(o[f])]=i(o[f]),d.prototype["set"+n(o[f])]=function(p){return function(g){if(!t(g))throw new TypeError(p+" must be a Number");this[p]=Number(g)}}(o[f]);for(var m=0;m<a.length;m++)d.prototype["get"+n(a[m])]=i(a[m]),d.prototype["set"+n(a[m])]=function(p){return function(g){this[p]=String(g)}}(a[m]);return d})}(Cl)),Cl.exports}(function(r,e){(function(t,n){r.exports=n(Dw())})(jo,function(n){var i=/(^|@)\S+:\d+/,s=/^\s*at .*(\S+:\d+|\(native\))/m,o=/^(eval@)?(\[native code])?$/;return{parse:function(l){if(typeof l.stacktrace!="undefined"||typeof l["opera#sourceloc"]!="undefined")return this.parseOpera(l);if(l.stack&&l.stack.match(s))return this.parseV8OrIE(l);if(l.stack)return this.parseFFOrSafari(l);throw new Error("Cannot parse given Error object")},extractLocation:function(l){if(l.indexOf(":")===-1)return[l];var c=/(.+?)(?::(\d+))?(?::(\d+))?$/,u=c.exec(l.replace(/[()]/g,""));return[u[1],u[2]||void 0,u[3]||void 0]},parseV8OrIE:function(l){var c=l.stack.split(`
`).filter(function(u){return!!u.match(s)},this);return c.map(function(u){u.indexOf("(eval ")>-1&&(u=u.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var d=u.replace(/^\s+/,"").replace(/\(eval code/g,"("),h=d.match(/ (\((.+):(\d+):(\d+)\)$)/);d=h?d.replace(h[0],""):d;var f=d.split(/\s+/).slice(1),m=this.extractLocation(h?h[1]:f.pop()),p=f.join(" ")||void 0,g=["eval","<anonymous>"].indexOf(m[0])>-1?void 0:m[0];return new n({functionName:p,fileName:g,lineNumber:m[1],columnNumber:m[2],source:u})},this)},parseFFOrSafari:function(l){var c=l.stack.split(`
`).filter(function(u){return!u.match(o)},this);return c.map(function(u){if(u.indexOf(" > eval")>-1&&(u=u.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),u.indexOf("@")===-1&&u.indexOf(":")===-1)return new n({functionName:u});var d=/((.*".+"[^@]*)?[^@]*)(?:@)/,h=u.match(d),f=h&&h[1]?h[1]:void 0,m=this.extractLocation(u.replace(d,""));return new n({functionName:f,fileName:m[0],lineNumber:m[1],columnNumber:m[2],source:u})},this)},parseOpera:function(l){return!l.stacktrace||l.message.indexOf(`
`)>-1&&l.message.split(`
`).length>l.stacktrace.split(`
`).length?this.parseOpera9(l):l.stack?this.parseOpera11(l):this.parseOpera10(l)},parseOpera9:function(l){for(var c=/Line (\d+).*script (?:in )?(\S+)/i,u=l.message.split(`
`),d=[],h=2,f=u.length;h<f;h+=2){var m=c.exec(u[h]);m&&d.push(new n({fileName:m[2],lineNumber:m[1],source:u[h]}))}return d},parseOpera10:function(l){for(var c=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,u=l.stacktrace.split(`
`),d=[],h=0,f=u.length;h<f;h+=2){var m=c.exec(u[h]);m&&d.push(new n({functionName:m[3]||void 0,fileName:m[2],lineNumber:m[1],source:u[h]}))}return d},parseOpera11:function(l){var c=l.stack.split(`
`).filter(function(u){return!!u.match(i)&&!u.match(/^Error created at/)},this);return c.map(function(u){var d=u.split("@"),h=this.extractLocation(d.pop()),f=d.shift()||"",m=f.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,p;f.match(/\(([^)]*)\)/)&&(p=f.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var g=p===void 0||p==="[arguments not available]"?void 0:p.split(",");return new n({functionName:m,args:g,fileName:h[0],lineNumber:h[1],columnNumber:h[2],source:u})},this)}}})})(yp);var Jw=yp.exports;const vp=Gi(Jw);function Fn(r){try{return vp.parse(r)}catch(e){try{return vp.parse(new Error)}catch(t){return console.warn("Highlight Warning: failed to parse error",{originalError:e,secondaryError:t}),[]}}}const Sp={level:[...wl],logger:"console",stringifyOptions:{depthOfLimit:10,numOfKeysLimit:100,stringLengthLimit:1e3}};function _p(r,e){const t=e.logger;if(!t)return()=>{};let n;typeof t=="string"?n=window[t]:n=t;const i=[];if(e.level.includes("error")&&window){const o=a=>{const{message:l,error:c}=a;let u=[];c&&(u=Fn(c));const d=[Il(l,e.stringifyOptions)];r({type:"Error",trace:u,time:Date.now(),value:d})};window.addEventListener("error",o),i.push(()=>{window&&window.removeEventListener("error",o)})}for(const o of e.level)i.push(s(n,o));return()=>{i.forEach(o=>o())};function s(o,a){return o[a]?Mw(o,a,l=>(...c)=>{l.apply(this,c);try{r(Tp(a,e,...c))}catch(u){l("highlight logger error:",u,...c)}}):()=>{}}}function Tp(r,e,...t){const n=Fn(new Error),i=e.serializeConsoleAttributes?t.map(s=>typeof s=="object"?Il(s,e.stringifyOptions):s):t.filter(s=>typeof s!="object").map(s=>`${s}`);return{type:r,trace:n,value:i,attributes:Il(t.filter(s=>typeof s=="object").reduce((s,o)=>S(S({},s),o),{}),e.stringifyOptions),time:Date.now()}}const Yw={start:0,end:3},Hw={start:4,end:5},Ll={start:6,end:7},Ol={start:8,end:8},Bw={start:9,end:9},Kw={start:10,end:15};function zw(){if(crypto&&crypto.getRandomValues){const e=new Uint8Array(16);return crypto.getRandomValues(e),[...e.values()]}const r=[];for(let e=0;e<16;e+=1)r.push(Math.floor(Math.random()*256));return r}function zr(r,e){let t="";for(let n=e.start;n<=e.end;n+=1)t+=r[n].toString(16).padStart(2,"0");return t}function jw(r){return r[Ol.start]=(r[Ol.start]|128)&191,r[Ll.start]=r[Ll.start]&15|64,`${zr(r,Yw)}-${zr(r,Hw)}-${zr(r,Ll)}-${zr(r,Ol)}${zr(r,Bw)}-${zr(r,Kw)}`}function Qw(){const r=zw();return jw(r)}function Ps(){return typeof crypto!="undefined"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():Qw()}function Zl(r,e,t,n){var l,c,u,d;let i=n!=null?n:e,s=Fn(i),o={};e instanceof Error&&(e=e.message,e.cause&&(o={"exception.cause":e.cause}));const a=$w(s);r({error:i,event:dt(e),type:"window.onerror",url:window.location.href,source:t!=null?t:"",lineNumber:(l=a[0])!=null&&l.lineNumber?(c=a[0])==null?void 0:c.lineNumber:0,columnNumber:(u=a[0])!=null&&u.columnNumber?(d=a[0])==null?void 0:d.columnNumber:0,stackTrace:a,timestamp:new Date().toISOString(),payload:o?dt(o):void 0,id:Ps()})}const Ep=(r,{enablePromisePatch:e})=>{if(typeof window=="undefined")return()=>{};const t=window.onerror=(o,a,l,c,u)=>{Zl(r,o,a,u)},n=window.onunhandledrejection=o=>{if(o.reason){const a=o.promise;a.getStack?Zl(r,o.reason,o.type,a.getStack()):Zl(r,o.reason,o.type)}},i=window.Promise,s=class extends i{constructor(l){super(l);v(this,"promiseCreationError");this.promiseCreationError=new Error}getStack(){return this.promiseCreationError}static shouldPatch(){const l=typeof window.Zone=="undefined";return e&&l}};return s.shouldPatch()&&(window.Promise=s),()=>{window.Promise=i,window.onunhandledrejection=n,window.onerror=t}},$w=r=>{var t,n;if(r.length===0)return r;const e=r[0];return(t=e.fileName)!=null&&t.includes("highlight.run")||(n=e.fileName)!=null&&n.includes("highlight.io")||e.functionName==="new highlightPromise"?r.slice(1):r},Nl=['["\\"Script error.\\""]','"Script error."','["\\"Load failed.\\""]','"Load failed."','["\\"Network request failed.\\""]','"Network request failed."','["\\"Document is not focused.\\""]','"Document is not focused."','["\\"Failed to fetch\\""]','"Failed to fetch"','[{"isTrusted":true}]','{"isTrusted":true}','["{}"]','"{}"','[""]','""','["\\"\\""]','""'],Gl=["websocket error",'\\"ResizeObserver loop'];var qw=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},hr="1.9.0",wp=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function eR(r){var e=new Set([r]),t=new Set,n=r.match(wp);if(!n)return function(){return!1};var i={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(i.prerelease!=null)return function(l){return l===r};function s(a){return t.add(a),!1}function o(a){return e.add(a),!0}return function(l){if(e.has(l))return!0;if(t.has(l))return!1;var c=l.match(wp);if(!c)return s(l);var u={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return u.prerelease!=null||i.major!==u.major?s(l):i.major===0?i.minor===u.minor&&i.patch<=u.patch?o(l):s(l):i.minor<=u.minor?o(l):s(l)}}var tR=eR(hr),rR=hr.split(".")[0],Dn=Symbol.for("opentelemetry.js.api."+rR),Jn=qw;function Yn(r,e,t,n){var i;n===void 0&&(n=!1);var s=Jn[Dn]=(i=Jn[Dn])!==null&&i!==void 0?i:{version:hr};if(!n&&s[r]){var o=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+r);return t.error(o.stack||o.message),!1}if(s.version!==hr){var o=new Error("@opentelemetry/api: Registration of version v"+s.version+" for "+r+" does not match previously registered API v"+hr);return t.error(o.stack||o.message),!1}return s[r]=e,t.debug("@opentelemetry/api: Registered a global for "+r+" v"+hr+"."),!0}function fr(r){var e,t,n=(e=Jn[Dn])===null||e===void 0?void 0:e.version;if(!(!n||!tR(n)))return(t=Jn[Dn])===null||t===void 0?void 0:t[r]}function Hn(r,e){e.debug("@opentelemetry/api: Unregistering a global for "+r+" v"+hr+".");var t=Jn[Dn];t&&delete t[r]}var nR=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},iR=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))},sR=function(){function r(e){this._namespace=e.namespace||"DiagComponentLogger"}return r.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Bn("debug",this._namespace,e)},r.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Bn("error",this._namespace,e)},r.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Bn("info",this._namespace,e)},r.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Bn("warn",this._namespace,e)},r.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Bn("verbose",this._namespace,e)},r}();function Bn(r,e,t){var n=fr("diag");if(n)return t.unshift(e),n[r].apply(n,iR([],nR(t),!1))}var ue;(function(r){r[r.NONE=0]="NONE",r[r.ERROR=30]="ERROR",r[r.WARN=50]="WARN",r[r.INFO=60]="INFO",r[r.DEBUG=70]="DEBUG",r[r.VERBOSE=80]="VERBOSE",r[r.ALL=9999]="ALL"})(ue||(ue={}));function oR(r,e){r<ue.NONE?r=ue.NONE:r>ue.ALL&&(r=ue.ALL),e=e||{};function t(n,i){var s=e[n];return typeof s=="function"&&r>=i?s.bind(e):function(){}}return{error:t("error",ue.ERROR),warn:t("warn",ue.WARN),info:t("info",ue.INFO),debug:t("debug",ue.DEBUG),verbose:t("verbose",ue.VERBOSE)}}var aR=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},lR=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))},cR="diag",St=function(){function r(){function e(i){return function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];var a=fr("diag");if(a)return a[i].apply(a,lR([],aR(s),!1))}}var t=this,n=function(i,s){var o,a,l;if(s===void 0&&(s={logLevel:ue.INFO}),i===t){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error((o=c.stack)!==null&&o!==void 0?o:c.message),!1}typeof s=="number"&&(s={logLevel:s});var u=fr("diag"),d=oR((a=s.logLevel)!==null&&a!==void 0?a:ue.INFO,i);if(u&&!s.suppressOverrideMessage){var h=(l=new Error().stack)!==null&&l!==void 0?l:"<failed to generate stacktrace>";u.warn("Current logger will be overwritten from "+h),d.warn("Current logger will overwrite one already registered from "+h)}return Yn("diag",d,t,!0)};t.setLogger=n,t.disable=function(){Hn(cR,t)},t.createComponentLogger=function(i){return new sR(i)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return r.instance=function(){return this._instance||(this._instance=new r),this._instance},r}(),uR=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},dR=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hR=function(){function r(e){this._entries=e?new Map(e):new Map}return r.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},r.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var t=uR(e,2),n=t[0],i=t[1];return[n,i]})},r.prototype.setEntry=function(e,t){var n=new r(this._entries);return n._entries.set(e,t),n},r.prototype.removeEntry=function(e){var t=new r(this._entries);return t._entries.delete(e),t},r.prototype.removeEntries=function(){for(var e,t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s=new r(this._entries);try{for(var o=dR(n),a=o.next();!a.done;a=o.next()){var l=a.value;s._entries.delete(l)}}catch(c){e={error:c}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return s},r.prototype.clear=function(){return new r},r}(),fR=Symbol("BaggageEntryMetadata"),pR=St.instance();function mR(r){return r===void 0&&(r={}),new hR(new Map(Object.entries(r)))}function Rp(r){return typeof r!="string"&&(pR.error("Cannot create baggage metadata from unknown type: "+typeof r),r=""),{__TYPE__:fR,toString:function(){return r}}}function Kn(r){return Symbol.for(r)}var gR=function(){function r(e){var t=this;t._currentContext=e?new Map(e):new Map,t.getValue=function(n){return t._currentContext.get(n)},t.setValue=function(n,i){var s=new r(t._currentContext);return s._currentContext.set(n,i),s},t.deleteValue=function(n){var i=new r(t._currentContext);return i._currentContext.delete(n),i}}return r}(),pr=new gR,mr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),yR=function(){function r(){}return r.prototype.createGauge=function(e,t){return IR},r.prototype.createHistogram=function(e,t){return CR},r.prototype.createCounter=function(e,t){return RR},r.prototype.createUpDownCounter=function(e,t){return LR},r.prototype.createObservableGauge=function(e,t){return ZR},r.prototype.createObservableCounter=function(e,t){return OR},r.prototype.createObservableUpDownCounter=function(e,t){return NR},r.prototype.addBatchObservableCallback=function(e,t){},r.prototype.removeBatchObservableCallback=function(e){},r}(),Ms=function(){function r(){}return r}(),bR=function(r){mr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.add=function(t,n){},e}(Ms),vR=function(r){mr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.add=function(t,n){},e}(Ms),SR=function(r){mr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.record=function(t,n){},e}(Ms),_R=function(r){mr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.record=function(t,n){},e}(Ms),Vl=function(){function r(){}return r.prototype.addCallback=function(e){},r.prototype.removeCallback=function(e){},r}(),TR=function(r){mr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(Vl),ER=function(r){mr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(Vl),wR=function(r){mr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(Vl),Ip=new yR,RR=new bR,IR=new SR,CR=new _R,LR=new vR,OR=new TR,ZR=new ER,NR=new wR;function GR(){return Ip}var Ht;(function(r){r[r.INT=0]="INT",r[r.DOUBLE=1]="DOUBLE"})(Ht||(Ht={}));var VR={get:function(r,e){if(r!=null)return r[e]},keys:function(r){return r==null?[]:Object.keys(r)}},xR={set:function(r,e,t){r!=null&&(r[e]=t)}},XR=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},kR=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))},WR=function(){function r(){}return r.prototype.active=function(){return pr},r.prototype.with=function(e,t,n){for(var i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return t.call.apply(t,kR([n],XR(i),!1))},r.prototype.bind=function(e,t){return t},r.prototype.enable=function(){return this},r.prototype.disable=function(){return this},r}(),AR=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},PR=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))},xl="context",MR=new WR,Us=function(){function r(){}return r.getInstance=function(){return this._instance||(this._instance=new r),this._instance},r.prototype.setGlobalContextManager=function(e){return Yn(xl,e,St.instance())},r.prototype.active=function(){return this._getContextManager().active()},r.prototype.with=function(e,t,n){for(var i,s=[],o=3;o<arguments.length;o++)s[o-3]=arguments[o];return(i=this._getContextManager()).with.apply(i,PR([e,t,n],AR(s),!1))},r.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},r.prototype._getContextManager=function(){return fr(xl)||MR},r.prototype.disable=function(){this._getContextManager().disable(),Hn(xl,St.instance())},r}(),_t;(function(r){r[r.NONE=0]="NONE",r[r.SAMPLED=1]="SAMPLED"})(_t||(_t={}));var Cp="0000000000000000",Lp="00000000000000000000000000000000",Op={traceId:Lp,spanId:Cp,traceFlags:_t.NONE},zn=function(){function r(e){e===void 0&&(e=Op),this._spanContext=e}return r.prototype.spanContext=function(){return this._spanContext},r.prototype.setAttribute=function(e,t){return this},r.prototype.setAttributes=function(e){return this},r.prototype.addEvent=function(e,t){return this},r.prototype.addLink=function(e){return this},r.prototype.addLinks=function(e){return this},r.prototype.setStatus=function(e){return this},r.prototype.updateName=function(e){return this},r.prototype.end=function(e){},r.prototype.isRecording=function(){return!1},r.prototype.recordException=function(e,t){},r}(),Xl=Kn("OpenTelemetry Context Key SPAN");function kl(r){return r.getValue(Xl)||void 0}function UR(){return kl(Us.getInstance().active())}function Wl(r,e){return r.setValue(Xl,e)}function FR(r){return r.deleteValue(Xl)}function DR(r,e){return Wl(r,new zn(e))}function Zp(r){var e;return(e=kl(r))===null||e===void 0?void 0:e.spanContext()}var JR=/^([0-9a-f]{32})$/i,YR=/^[0-9a-f]{16}$/i;function Np(r){return JR.test(r)&&r!==Lp}function HR(r){return YR.test(r)&&r!==Cp}function jn(r){return Np(r.traceId)&&HR(r.spanId)}function BR(r){return new zn(r)}var Al=Us.getInstance(),Gp=function(){function r(){}return r.prototype.startSpan=function(e,t,n){n===void 0&&(n=Al.active());var i=!!(t!=null&&t.root);if(i)return new zn;var s=n&&Zp(n);return KR(s)&&jn(s)?new zn(s):new zn},r.prototype.startActiveSpan=function(e,t,n,i){var s,o,a;if(!(arguments.length<2)){arguments.length===2?a=t:arguments.length===3?(s=t,a=n):(s=t,o=n,a=i);var l=o!=null?o:Al.active(),c=this.startSpan(e,s,l),u=Wl(l,c);return Al.with(u,a,void 0,c)}},r}();function KR(r){return typeof r=="object"&&typeof r.spanId=="string"&&typeof r.traceId=="string"&&typeof r.traceFlags=="number"}var zR=new Gp,jR=function(){function r(e,t,n,i){this._provider=e,this.name=t,this.version=n,this.options=i}return r.prototype.startSpan=function(e,t,n){return this._getTracer().startSpan(e,t,n)},r.prototype.startActiveSpan=function(e,t,n,i){var s=this._getTracer();return Reflect.apply(s.startActiveSpan,s,arguments)},r.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):zR},r}(),QR=function(){function r(){}return r.prototype.getTracer=function(e,t,n){return new Gp},r}(),$R=new QR,Vp=function(){function r(){}return r.prototype.getTracer=function(e,t,n){var i;return(i=this.getDelegateTracer(e,t,n))!==null&&i!==void 0?i:new jR(this,e,t,n)},r.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:$R},r.prototype.setDelegate=function(e){this._delegate=e},r.prototype.getDelegateTracer=function(e,t,n){var i;return(i=this._delegate)===null||i===void 0?void 0:i.getTracer(e,t,n)},r}(),Fs;(function(r){r[r.NOT_RECORD=0]="NOT_RECORD",r[r.RECORD=1]="RECORD",r[r.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Fs||(Fs={}));var Qn;(function(r){r[r.INTERNAL=0]="INTERNAL",r[r.SERVER=1]="SERVER",r[r.CLIENT=2]="CLIENT",r[r.PRODUCER=3]="PRODUCER",r[r.CONSUMER=4]="CONSUMER"})(Qn||(Qn={}));var Ds;(function(r){r[r.UNSET=0]="UNSET",r[r.OK=1]="OK",r[r.ERROR=2]="ERROR"})(Ds||(Ds={}));var te=Us.getInstance(),G=St.instance(),qR=function(){function r(){}return r.prototype.getMeter=function(e,t,n){return Ip},r}(),eI=new qR,Pl="metrics",tI=function(){function r(){}return r.getInstance=function(){return this._instance||(this._instance=new r),this._instance},r.prototype.setGlobalMeterProvider=function(e){return Yn(Pl,e,St.instance())},r.prototype.getMeterProvider=function(){return fr(Pl)||eI},r.prototype.getMeter=function(e,t,n){return this.getMeterProvider().getMeter(e,t,n)},r.prototype.disable=function(){Hn(Pl,St.instance())},r}(),jr=tI.getInstance(),rI=function(){function r(){}return r.prototype.inject=function(e,t){},r.prototype.extract=function(e,t){return e},r.prototype.fields=function(){return[]},r}(),Ml=Kn("OpenTelemetry Baggage Key");function xp(r){return r.getValue(Ml)||void 0}function nI(){return xp(Us.getInstance().active())}function iI(r,e){return r.setValue(Ml,e)}function sI(r){return r.deleteValue(Ml)}var Ul="propagation",oI=new rI,aI=function(){function r(){this.createBaggage=mR,this.getBaggage=xp,this.getActiveBaggage=nI,this.setBaggage=iI,this.deleteBaggage=sI}return r.getInstance=function(){return this._instance||(this._instance=new r),this._instance},r.prototype.setGlobalPropagator=function(e){return Yn(Ul,e,St.instance())},r.prototype.inject=function(e,t,n){return n===void 0&&(n=xR),this._getGlobalPropagator().inject(e,t,n)},r.prototype.extract=function(e,t,n){return n===void 0&&(n=VR),this._getGlobalPropagator().extract(e,t,n)},r.prototype.fields=function(){return this._getGlobalPropagator().fields()},r.prototype.disable=function(){Hn(Ul,St.instance())},r.prototype._getGlobalPropagator=function(){return fr(Ul)||oI},r}(),Ue=aI.getInstance(),Fl="trace",lI=function(){function r(){this._proxyTracerProvider=new Vp,this.wrapSpanContext=BR,this.isSpanContextValid=jn,this.deleteSpan=FR,this.getSpan=kl,this.getActiveSpan=UR,this.getSpanContext=Zp,this.setSpan=Wl,this.setSpanContext=DR}return r.getInstance=function(){return this._instance||(this._instance=new r),this._instance},r.prototype.setGlobalTracerProvider=function(e){var t=Yn(Fl,this._proxyTracerProvider,St.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},r.prototype.getTracerProvider=function(){return fr(Fl)||this._proxyTracerProvider},r.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},r.prototype.disable=function(){Hn(Fl,St.instance()),this._proxyTracerProvider=new Vp},r}(),oe=lI.getInstance(),cI=Kn("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function Xp(r){return r.getValue(cI)===!0}var uI="=",Dl=";",Jl=",",Yl="baggage",dI=180,hI=4096,fI=8192,pI=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s};function mI(r){return r.reduce(function(e,t){var n=""+e+(e!==""?Jl:"")+t;return n.length>fI?e:n},"")}function gI(r){return r.getAllEntries().map(function(e){var t=pI(e,2),n=t[0],i=t[1],s=encodeURIComponent(n)+"="+encodeURIComponent(i.value);return i.metadata!==void 0&&(s+=Dl+i.metadata.toString()),s})}function yI(r){var e=r.split(Dl);if(!(e.length<=0)){var t=e.shift();if(t){var n=t.indexOf(uI);if(!(n<=0)){var i=decodeURIComponent(t.substring(0,n).trim()),s=decodeURIComponent(t.substring(n+1).trim()),o;return e.length>0&&(o=Rp(e.join(Dl))),{key:i,value:s,metadata:o}}}}}var bI=function(){function r(){}return r.prototype.inject=function(e,t,n){var i=Ue.getBaggage(e);if(!(!i||Xp(e))){var s=gI(i).filter(function(a){return a.length<=hI}).slice(0,dI),o=mI(s);o.length>0&&n.set(t,Yl,o)}},r.prototype.extract=function(e,t,n){var i=n.get(t,Yl),s=Array.isArray(i)?i.join(Jl):i;if(!s)return e;var o={};if(s.length===0)return e;var a=s.split(Jl);return a.forEach(function(l){var c=yI(l);if(c){var u={value:c.value};c.metadata&&(u.metadata=c.metadata),o[c.key]=u}}),Object.entries(o).length===0?e:Ue.setBaggage(e,Ue.createBaggage(o))},r.prototype.fields=function(){return[Yl]},r}(),Hl;(function(r){r.AlwaysOff="always_off",r.AlwaysOn="always_on",r.ParentBasedAlwaysOff="parentbased_always_off",r.ParentBasedAlwaysOn="parentbased_always_on",r.ParentBasedTraceIdRatio="parentbased_traceidratio",r.TraceIdRatio="traceidratio"})(Hl||(Hl={}));var vI=",",SI=["OTEL_SDK_DISABLED"];function _I(r){return SI.indexOf(r)>-1}var TI=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function EI(r){return TI.indexOf(r)>-1}var wI=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS","OTEL_SEMCONV_STABILITY_OPT_IN"];function RI(r){return wI.indexOf(r)>-1}var Bl=1/0,Kl=128,II=128,CI=128,kp={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:ue.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:Bl,OTEL_ATTRIBUTE_COUNT_LIMIT:Kl,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:Bl,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:Kl,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:Bl,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:Kl,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:II,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:CI,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:Hl.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative",OTEL_SEMCONV_STABILITY_OPT_IN:[]};function LI(r,e,t){if(typeof t[r]!="undefined"){var n=String(t[r]);e[r]=n.toLowerCase()==="true"}}function OI(r,e,t,n,i){if(n===void 0&&(n=-1/0),i===void 0&&(i=1/0),typeof t[r]!="undefined"){var s=Number(t[r]);isNaN(s)||(s<n?e[r]=n:s>i?e[r]=i:e[r]=s)}}function ZI(r,e,t,n){n===void 0&&(n=vI);var i=t[r];typeof i=="string"&&(e[r]=i.split(n).map(function(s){return s.trim()}))}var NI={ALL:ue.ALL,VERBOSE:ue.VERBOSE,DEBUG:ue.DEBUG,INFO:ue.INFO,WARN:ue.WARN,ERROR:ue.ERROR,NONE:ue.NONE};function GI(r,e,t){var n=t[r];if(typeof n=="string"){var i=NI[n.toUpperCase()];i!=null&&(e[r]=i)}}function VI(r){var e={};for(var t in kp){var n=t;switch(n){case"OTEL_LOG_LEVEL":GI(n,e,r);break;default:if(_I(n))LI(n,e,r);else if(EI(n))OI(n,e,r);else if(RI(n))ZI(n,e,r);else{var i=r[n];typeof i!="undefined"&&i!==null&&(e[n]=String(i))}}}return e}var xI=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{};function XI(){var r=VI(xI);return Object.assign({},kp,r)}var zl=performance,kI=9,WI=6,AI=Math.pow(10,WI),Wp=Math.pow(10,kI);function Ap(r){var e=r/1e3,t=Math.trunc(e),n=Math.round(r%1e3*AI);return[t,n]}function PI(){var r=zl.timeOrigin;if(typeof r!="number"){var e=zl;r=e.timing&&e.timing.fetchStart}return r}function MI(r){var e=Ap(PI()),t=Ap(zl.now());return UI(e,t)}function UI(r,e){var t=[r[0]+e[0],r[1]+e[1]];return t[1]>=Wp&&(t[1]-=Wp,t[0]+=1),t}var Fe;(function(r){r[r.SUCCESS=0]="SUCCESS",r[r.FAILED=1]="FAILED"})(Fe||(Fe={}));var FI=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},DI=function(){function r(e){e===void 0&&(e={});var t;this._propagators=(t=e.propagators)!==null&&t!==void 0?t:[],this._fields=Array.from(new Set(this._propagators.map(function(n){return typeof n.fields=="function"?n.fields():[]}).reduce(function(n,i){return n.concat(i)},[])))}return r.prototype.inject=function(e,t,n){var i,s;try{for(var o=FI(this._propagators),a=o.next();!a.done;a=o.next()){var l=a.value;try{l.inject(e,t,n)}catch(c){G.warn("Failed to inject with "+l.constructor.name+". Err: "+c.message)}}}catch(c){i={error:c}}finally{try{a&&!a.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}},r.prototype.extract=function(e,t,n){return this._propagators.reduce(function(i,s){try{return s.extract(i,t,n)}catch(o){G.warn("Failed to extract with "+s.constructor.name+". Err: "+o.message)}return i},e)},r.prototype.fields=function(){return this._fields.slice()},r}(),jl="[_0-9a-z-*/]",JI="[a-z]"+jl+"{0,255}",YI="[a-z0-9]"+jl+"{0,240}@[a-z]"+jl+"{0,13}",HI=new RegExp("^(?:"+JI+"|"+YI+")$"),BI=/^[ -~]{0,255}[!-~]$/,KI=/,|=/;function zI(r){return HI.test(r)}function jI(r){return BI.test(r)&&!KI.test(r)}var Pp=32,QI=512,Mp=",",Up="=",$I=function(){function r(e){this._internalState=new Map,e&&this._parse(e)}return r.prototype.set=function(e,t){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,t),n},r.prototype.unset=function(e){var t=this._clone();return t._internalState.delete(e),t},r.prototype.get=function(e){return this._internalState.get(e)},r.prototype.serialize=function(){var e=this;return this._keys().reduce(function(t,n){return t.push(n+Up+e.get(n)),t},[]).join(Mp)},r.prototype._parse=function(e){e.length>QI||(this._internalState=e.split(Mp).reverse().reduce(function(t,n){var i=n.trim(),s=i.indexOf(Up);if(s!==-1){var o=i.slice(0,s),a=i.slice(s+1,n.length);zI(o)&&jI(a)&&t.set(o,a)}return t},new Map),this._internalState.size>Pp&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,Pp))))},r.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},r.prototype._clone=function(){var e=new r;return e._internalState=new Map(this._internalState),e},r}(),Ql="traceparent",$l="tracestate",qI="00",eC="(?!ff)[\\da-f]{2}",tC="(?![0]{32})[\\da-f]{32}",rC="(?![0]{16})[\\da-f]{16}",nC="[\\da-f]{2}",iC=new RegExp("^\\s?("+eC+")-("+tC+")-("+rC+")-("+nC+")(-.*)?\\s?$");function sC(r){var e=iC.exec(r);return!e||e[1]==="00"&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)}}var oC=function(){function r(){}return r.prototype.inject=function(e,t,n){var i=oe.getSpanContext(e);if(!(!i||Xp(e)||!jn(i))){var s=qI+"-"+i.traceId+"-"+i.spanId+"-0"+Number(i.traceFlags||_t.NONE).toString(16);n.set(t,Ql,s),i.traceState&&n.set(t,$l,i.traceState.serialize())}},r.prototype.extract=function(e,t,n){var i=n.get(t,Ql);if(!i)return e;var s=Array.isArray(i)?i[0]:i;if(typeof s!="string")return e;var o=sC(s);if(!o)return e;o.isRemote=!0;var a=n.get(t,$l);if(a){var l=Array.isArray(a)?a.join(","):a;o.traceState=new $I(typeof l=="string"?l:void 0)}return oe.setSpanContext(e,o)},r.prototype.fields=function(){return[Ql,$l]},r}(),aC="[object Object]",lC="[object Null]",cC="[object Undefined]",uC=Function.prototype,Fp=uC.toString,dC=Fp.call(Object),hC=fC(Object.getPrototypeOf,Object),Dp=Object.prototype,Jp=Dp.hasOwnProperty,gr=Symbol?Symbol.toStringTag:void 0,Yp=Dp.toString;function fC(r,e){return function(t){return r(e(t))}}function Hp(r){if(!pC(r)||mC(r)!==aC)return!1;var e=hC(r);if(e===null)return!0;var t=Jp.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Fp.call(t)===dC}function pC(r){return r!=null&&typeof r=="object"}function mC(r){return r==null?r===void 0?cC:lC:gr&&gr in Object(r)?gC(r):yC(r)}function gC(r){var e=Jp.call(r,gr),t=r[gr],n=!1;try{r[gr]=void 0,n=!0}catch(s){}var i=Yp.call(r);return n&&(e?r[gr]=t:delete r[gr]),i}function yC(r){return Yp.call(r)}var bC=20;function vC(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];for(var t=r.shift(),n=new WeakMap;r.length>0;)t=Bp(t,r.shift(),0,n);return t}function ql(r){return Js(r)?r.slice():r}function Bp(r,e,t,n){t===void 0&&(t=0);var i;if(!(t>bC)){if(t++,Ys(r)||Ys(e)||zp(e))i=ql(e);else if(Js(r)){if(i=r.slice(),Js(e))for(var s=0,o=e.length;s<o;s++)i.push(ql(e[s]));else if($n(e))for(var a=Object.keys(e),s=0,o=a.length;s<o;s++){var l=a[s];i[l]=ql(e[l])}}else if($n(r))if($n(e)){if(!SC(r,e))return e;i=Object.assign({},r);for(var a=Object.keys(e),s=0,o=a.length;s<o;s++){var l=a[s],c=e[l];if(Ys(c))typeof c=="undefined"?delete i[l]:i[l]=c;else{var u=i[l],d=c;if(Kp(r,l,n)||Kp(e,l,n))delete i[l];else{if($n(u)&&$n(d)){var h=n.get(u)||[],f=n.get(d)||[];h.push({obj:r,key:l}),f.push({obj:e,key:l}),n.set(u,h),n.set(d,f)}i[l]=Bp(i[l],c,t,n)}}}}else i=e;return i}}function Kp(r,e,t){for(var n=t.get(r[e])||[],i=0,s=n.length;i<s;i++){var o=n[i];if(o.key===e&&o.obj===r)return!0}return!1}function Js(r){return Array.isArray(r)}function zp(r){return typeof r=="function"}function $n(r){return!Ys(r)&&!Js(r)&&!zp(r)&&typeof r=="object"}function Ys(r){return typeof r=="string"||typeof r=="number"||typeof r=="boolean"||typeof r=="undefined"||r instanceof Date||r instanceof RegExp||r===null}function SC(r,e){return!(!Hp(r)||!Hp(e))}var jp=function(){function r(){}return r.prototype.emit=function(e){},r}(),_C=new jp,TC=function(){function r(){}return r.prototype.getLogger=function(e,t,n){return new jp},r}(),Qp=new TC,EC=function(){function r(e,t,n,i){this._provider=e,this.name=t,this.version=n,this.options=i}return r.prototype.emit=function(e){this._getLogger().emit(e)},r.prototype._getLogger=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateLogger(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):_C},r}(),$p=function(){function r(){}return r.prototype.getLogger=function(e,t,n){var i;return(i=this.getDelegateLogger(e,t,n))!==null&&i!==void 0?i:new EC(this,e,t,n)},r.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:Qp},r.prototype.setDelegate=function(e){this._delegate=e},r.prototype.getDelegateLogger=function(e,t,n){var i;return(i=this._delegate)===null||i===void 0?void 0:i.getLogger(e,t,n)},r}(),wC=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},Hs=Symbol.for("io.opentelemetry.js.api.logs"),qn=wC;function RC(r,e,t){return function(n){return n===r?e:t}}var qp=1,IC=function(){function r(){this._proxyLoggerProvider=new $p}return r.getInstance=function(){return this._instance||(this._instance=new r),this._instance},r.prototype.setGlobalLoggerProvider=function(e){return qn[Hs]?this.getLoggerProvider():(qn[Hs]=RC(qp,e,Qp),this._proxyLoggerProvider.setDelegate(e),e)},r.prototype.getLoggerProvider=function(){var e,t;return(t=(e=qn[Hs])===null||e===void 0?void 0:e.call(qn,qp))!==null&&t!==void 0?t:this._proxyLoggerProvider},r.prototype.getLogger=function(e,t,n){return this.getLoggerProvider().getLogger(e,t,n)},r.prototype.disable=function(){delete qn[Hs],this._proxyLoggerProvider=new $p},r}(),ei=IC.getInstance();function CC(r,e,t,n){for(var i=0,s=r.length;i<s;i++){var o=r[i];e&&o.setTracerProvider(e),t&&o.setMeterProvider(t),n&&o.setLoggerProvider&&o.setLoggerProvider(n),o.getConfig().enabled||o.enable()}}function LC(r){r.forEach(function(e){return e.disable()})}function OC(r){var e,t,n=r.tracerProvider||oe.getTracerProvider(),i=r.meterProvider||jr.getMeterProvider(),s=r.loggerProvider||ei.getLoggerProvider(),o=(t=(e=r.instrumentations)===null||e===void 0?void 0:e.flat())!==null&&t!==void 0?t:[];return CC(o,n,i,s),function(){LC(o)}}function ec(r){return typeof r=="function"}var De=console.error.bind(console);function ti(r,e,t){var n=!!r[e]&&r.propertyIsEnumerable(e);Object.defineProperty(r,e,{configurable:!0,enumerable:n,writable:!0,value:t})}function ri(r){r&&r.logger&&(ec(r.logger)?De=r.logger:De("new logger isn't a function, not replacing"))}function em(r,e,t){if(!r||!r[e]){De("no original function "+e+" to wrap");return}if(!t){De("no wrapper function"),De(new Error().stack);return}if(!ec(r[e])||!ec(t)){De("original object and wrapper must be functions");return}var n=r[e],i=t(n,e);return ti(i,"__original",n),ti(i,"__unwrap",function(){r[e]===i&&ti(r,e,n)}),ti(i,"__wrapped",!0),ti(r,e,i),i}function ZC(r,e,t){if(r)Array.isArray(r)||(r=[r]);else{De("must provide one or more modules to patch"),De(new Error().stack);return}if(!(e&&Array.isArray(e))){De("must provide one or more functions to wrap on modules");return}r.forEach(function(n){e.forEach(function(i){em(n,i,t)})})}function tm(r,e){if(!r||!r[e]){De("no function to unwrap."),De(new Error().stack);return}if(!r[e].__unwrap)De("no original to unwrap to -- has "+e+" already been unwrapped?");else return r[e].__unwrap()}function NC(r,e){if(r)Array.isArray(r)||(r=[r]);else{De("must provide one or more modules to patch"),De(new Error().stack);return}if(!(e&&Array.isArray(e))){De("must provide one or more functions to unwrap on modules");return}r.forEach(function(t){e.forEach(function(n){tm(t,n)})})}ri.wrap=em,ri.massWrap=ZC,ri.unwrap=tm,ri.massUnwrap=NC;var Ge=ri,tc=function(){return tc=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},tc.apply(this,arguments)},GC=function(){function r(e,t,n){this.instrumentationName=e,this.instrumentationVersion=t,this._config={},this._wrap=Ge.wrap,this._unwrap=Ge.unwrap,this._massWrap=Ge.massWrap,this._massUnwrap=Ge.massUnwrap,this.setConfig(n),this._diag=G.createComponentLogger({namespace:e}),this._tracer=oe.getTracer(e,t),this._meter=jr.getMeter(e,t),this._logger=ei.getLogger(e,t),this._updateMetricInstruments()}return Object.defineProperty(r.prototype,"meter",{get:function(){return this._meter},enumerable:!1,configurable:!0}),r.prototype.setMeterProvider=function(e){this._meter=e.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()},Object.defineProperty(r.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),r.prototype.setLoggerProvider=function(e){this._logger=e.getLogger(this.instrumentationName,this.instrumentationVersion)},r.prototype.getModuleDefinitions=function(){var e,t=(e=this.init())!==null&&e!==void 0?e:[];return Array.isArray(t)?t:[t]},r.prototype._updateMetricInstruments=function(){},r.prototype.getConfig=function(){return this._config},r.prototype.setConfig=function(e){this._config=tc({enabled:!0},e)},r.prototype.setTracerProvider=function(e){this._tracer=e.getTracer(this.instrumentationName,this.instrumentationVersion)},Object.defineProperty(r.prototype,"tracer",{get:function(){return this._tracer},enumerable:!1,configurable:!0}),r.prototype._runSpanCustomizationHook=function(e,t,n,i){if(e)try{e(n,i)}catch(s){this._diag.error("Error running span customization hook due to exception in handler",{triggerName:t},s)}},r}(),VC=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),xC=function(r){VC(e,r);function e(t,n,i){var s=r.call(this,t,n,i)||this;return s._config.enabled&&s.enable(),s}return e}(GC);function Je(r){return typeof r=="function"&&typeof r.__original=="function"&&typeof r.__unwrap=="function"&&r.__wrapped===!0}var Bs=performance,XC="traceparent",rm=Kn("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function kC(r){return r.setValue(rm,!0)}function rc(r){return r.getValue(rm)===!0}var WC="=",nc=";",ic=",",sc="baggage",AC=180,PC=4096,MC=8192,UC=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s};function FC(r){return r.reduce(function(e,t){var n=""+e+(e!==""?ic:"")+t;return n.length>MC?e:n},"")}function DC(r){return r.getAllEntries().map(function(e){var t=UC(e,2),n=t[0],i=t[1],s=encodeURIComponent(n)+"="+encodeURIComponent(i.value);return i.metadata!==void 0&&(s+=nc+i.metadata.toString()),s})}function JC(r){var e=r.split(nc);if(!(e.length<=0)){var t=e.shift();if(t){var n=t.indexOf(WC);if(!(n<=0)){var i=decodeURIComponent(t.substring(0,n).trim()),s=decodeURIComponent(t.substring(n+1).trim()),o;return e.length>0&&(o=Rp(e.join(nc))),{key:i,value:s,metadata:o}}}}}var YC=function(){function r(){}return r.prototype.inject=function(e,t,n){var i=Ue.getBaggage(e);if(!(!i||rc(e))){var s=DC(i).filter(function(a){return a.length<=PC}).slice(0,AC),o=FC(s);o.length>0&&n.set(t,sc,o)}},r.prototype.extract=function(e,t,n){var i=n.get(t,sc),s=Array.isArray(i)?i.join(ic):i;if(!s)return e;var o={};if(s.length===0)return e;var a=s.split(ic);return a.forEach(function(l){var c=JC(l);if(c){var u={value:c.value};c.metadata&&(u.metadata=c.metadata),o[c.key]=u}}),Object.entries(o).length===0?e:Ue.setBaggage(e,Ue.createBaggage(o))},r.prototype.fields=function(){return[sc]},r}(),nm=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},HC=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s};function Ks(r){var e,t,n={};if(typeof r!="object"||r==null)return n;try{for(var i=nm(Object.entries(r)),s=i.next();!s.done;s=i.next()){var o=HC(s.value,2),a=o[0],l=o[1];if(!BC(a)){G.warn("Invalid attribute key: "+a);continue}if(!im(l)){G.warn("Invalid attribute value set for key: "+a);continue}Array.isArray(l)?n[a]=l.slice():n[a]=l}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n}function BC(r){return typeof r=="string"&&r.length>0}function im(r){return r==null?!0:Array.isArray(r)?KC(r):sm(r)}function KC(r){var e,t,n;try{for(var i=nm(r),s=i.next();!s.done;s=i.next()){var o=s.value;if(o!=null){if(!n){if(sm(o)){n=typeof o;continue}return!1}if(typeof o!==n)return!1}}}catch(a){e={error:a}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return!0}function sm(r){switch(typeof r){case"number":case"boolean":case"string":return!0}return!1}function zC(){return function(r){G.error(jC(r))}}function jC(r){return typeof r=="string"?r:JSON.stringify(QC(r))}function QC(r){for(var e={},t=r;t!==null;)Object.getOwnPropertyNames(t).forEach(function(n){if(!e[n]){var i=t[n];i&&(e[n]=String(i))}}),t=Object.getPrototypeOf(t);return e}var $C=zC();function Qr(r){try{$C(r)}catch(e){}}var Tt;(function(r){r.AlwaysOff="always_off",r.AlwaysOn="always_on",r.ParentBasedAlwaysOff="parentbased_always_off",r.ParentBasedAlwaysOn="parentbased_always_on",r.ParentBasedTraceIdRatio="parentbased_traceidratio",r.TraceIdRatio="traceidratio"})(Tt||(Tt={}));var qC=",",eL=["OTEL_SDK_DISABLED"];function tL(r){return eL.indexOf(r)>-1}var rL=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function nL(r){return rL.indexOf(r)>-1}var iL=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS","OTEL_SEMCONV_STABILITY_OPT_IN"];function sL(r){return iL.indexOf(r)>-1}var zs=1/0,js=128,oL=128,aL=128,om={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:ue.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:zs,OTEL_ATTRIBUTE_COUNT_LIMIT:js,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:zs,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:js,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:zs,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:js,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:oL,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:aL,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:Tt.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative",OTEL_SEMCONV_STABILITY_OPT_IN:[]};function lL(r,e,t){if(typeof t[r]!="undefined"){var n=String(t[r]);e[r]=n.toLowerCase()==="true"}}function cL(r,e,t,n,i){if(n===void 0&&(n=-1/0),i===void 0&&(i=1/0),typeof t[r]!="undefined"){var s=Number(t[r]);isNaN(s)||(s<n?e[r]=n:s>i?e[r]=i:e[r]=s)}}function uL(r,e,t,n){n===void 0&&(n=qC);var i=t[r];typeof i=="string"&&(e[r]=i.split(n).map(function(s){return s.trim()}))}var dL={ALL:ue.ALL,VERBOSE:ue.VERBOSE,DEBUG:ue.DEBUG,INFO:ue.INFO,WARN:ue.WARN,ERROR:ue.ERROR,NONE:ue.NONE};function hL(r,e,t){var n=t[r];if(typeof n=="string"){var i=dL[n.toUpperCase()];i!=null&&(e[r]=i)}}function am(r){var e={};for(var t in om){var n=t;switch(n){case"OTEL_LOG_LEVEL":hL(n,e,r);break;default:if(tL(n))lL(n,e,r);else if(nL(n))cL(n,e,r);else if(sL(n))uL(n,e,r);else{var i=r[n];typeof i!="undefined"&&i!==null&&(e[n]=String(i))}}}return e}var lm=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{};function ni(){var r=am(lm);return Object.assign({},om,r)}function fL(){return am(lm)}var $r=performance,pL="exception.type",mL="exception.message",gL="exception.stacktrace",yL="http.response_content_length",bL="http.response_content_length_uncompressed",oc=pL,ac=mL,vL=gL,SL=yL,_L=bL,TL=9,EL=6,wL=Math.pow(10,EL),Qs=Math.pow(10,TL);function Bt(r){var e=r/1e3,t=Math.trunc(e),n=Math.round(r%1e3*wL);return[t,n]}function lc(){var r=$r.timeOrigin;if(typeof r!="number"){var e=$r;r=e.timing&&e.timing.fetchStart}return r}function cm(r){var e=Bt(lc()),t=Bt(typeof r=="number"?r:$r.now());return dm(e,t)}function ii(r){if(cc(r))return r;if(typeof r=="number")return r<lc()?cm(r):Bt(r);if(r instanceof Date)return Bt(r.getTime());throw TypeError("Invalid input type")}function RL(r,e){var t=e[0]-r[0],n=e[1]-r[1];return n<0&&(t-=1,n+=Qs),[t,n]}function Kt(r){return r[0]*Qs+r[1]}function cc(r){return Array.isArray(r)&&r.length===2&&typeof r[0]=="number"&&typeof r[1]=="number"}function um(r){return cc(r)||typeof r=="number"||r instanceof Date}function dm(r,e){var t=[r[0]+e[0],r[1]+e[1]];return t[1]>=Qs&&(t[1]-=Qs,t[0]+=1),t}var uc;(function(r){r[r.SUCCESS=0]="SUCCESS",r[r.FAILED=1]="FAILED"})(uc||(uc={}));var IL=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},CL=function(){function r(e){e===void 0&&(e={});var t;this._propagators=(t=e.propagators)!==null&&t!==void 0?t:[],this._fields=Array.from(new Set(this._propagators.map(function(n){return typeof n.fields=="function"?n.fields():[]}).reduce(function(n,i){return n.concat(i)},[])))}return r.prototype.inject=function(e,t,n){var i,s;try{for(var o=IL(this._propagators),a=o.next();!a.done;a=o.next()){var l=a.value;try{l.inject(e,t,n)}catch(c){G.warn("Failed to inject with "+l.constructor.name+". Err: "+c.message)}}}catch(c){i={error:c}}finally{try{a&&!a.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}},r.prototype.extract=function(e,t,n){return this._propagators.reduce(function(i,s){try{return s.extract(i,t,n)}catch(o){G.warn("Failed to extract with "+s.constructor.name+". Err: "+o.message)}return i},e)},r.prototype.fields=function(){return this._fields.slice()},r}(),dc="[_0-9a-z-*/]",LL="[a-z]"+dc+"{0,255}",OL="[a-z0-9]"+dc+"{0,240}@[a-z]"+dc+"{0,13}",ZL=new RegExp("^(?:"+LL+"|"+OL+")$"),NL=/^[ -~]{0,255}[!-~]$/,GL=/,|=/;function VL(r){return ZL.test(r)}function xL(r){return NL.test(r)&&!GL.test(r)}var hm=32,XL=512,fm=",",pm="=",kL=function(){function r(e){this._internalState=new Map,e&&this._parse(e)}return r.prototype.set=function(e,t){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,t),n},r.prototype.unset=function(e){var t=this._clone();return t._internalState.delete(e),t},r.prototype.get=function(e){return this._internalState.get(e)},r.prototype.serialize=function(){var e=this;return this._keys().reduce(function(t,n){return t.push(n+pm+e.get(n)),t},[]).join(fm)},r.prototype._parse=function(e){e.length>XL||(this._internalState=e.split(fm).reverse().reduce(function(t,n){var i=n.trim(),s=i.indexOf(pm);if(s!==-1){var o=i.slice(0,s),a=i.slice(s+1,n.length);VL(o)&&xL(a)&&t.set(o,a)}return t},new Map),this._internalState.size>hm&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,hm))))},r.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},r.prototype._clone=function(){var e=new r;return e._internalState=new Map(this._internalState),e},r}(),hc="traceparent",fc="tracestate",WL="00",AL="(?!ff)[\\da-f]{2}",PL="(?![0]{32})[\\da-f]{32}",ML="(?![0]{16})[\\da-f]{16}",UL="[\\da-f]{2}",FL=new RegExp("^\\s?("+AL+")-("+PL+")-("+ML+")-("+UL+")(-.*)?\\s?$");function DL(r){var e=FL.exec(r);return!e||e[1]==="00"&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)}}var JL=function(){function r(){}return r.prototype.inject=function(e,t,n){var i=oe.getSpanContext(e);if(!(!i||rc(e)||!jn(i))){var s=WL+"-"+i.traceId+"-"+i.spanId+"-0"+Number(i.traceFlags||_t.NONE).toString(16);n.set(t,hc,s),i.traceState&&n.set(t,fc,i.traceState.serialize())}},r.prototype.extract=function(e,t,n){var i=n.get(t,hc);if(!i)return e;var s=Array.isArray(i)?i[0]:i;if(typeof s!="string")return e;var o=DL(s);if(!o)return e;o.isRemote=!0;var a=n.get(t,fc);if(a){var l=Array.isArray(a)?a.join(","):a;o.traceState=new kL(typeof l=="string"?l:void 0)}return oe.setSpanContext(e,o)},r.prototype.fields=function(){return[hc,fc]},r}(),YL="[object Object]",HL="[object Null]",BL="[object Undefined]",KL=Function.prototype,mm=KL.toString,zL=mm.call(Object),jL=QL(Object.getPrototypeOf,Object),gm=Object.prototype,ym=gm.hasOwnProperty,yr=Symbol?Symbol.toStringTag:void 0,bm=gm.toString;function QL(r,e){return function(t){return r(e(t))}}function vm(r){if(!$L(r)||qL(r)!==YL)return!1;var e=jL(r);if(e===null)return!0;var t=ym.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&mm.call(t)===zL}function $L(r){return r!=null&&typeof r=="object"}function qL(r){return r==null?r===void 0?BL:HL:yr&&yr in Object(r)?eO(r):tO(r)}function eO(r){var e=ym.call(r,yr),t=r[yr],n=!1;try{r[yr]=void 0,n=!0}catch(s){}var i=bm.call(r);return n&&(e?r[yr]=t:delete r[yr]),i}function tO(r){return bm.call(r)}var rO=20;function nO(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];for(var t=r.shift(),n=new WeakMap;r.length>0;)t=Sm(t,r.shift(),0,n);return t}function pc(r){return $s(r)?r.slice():r}function Sm(r,e,t,n){t===void 0&&(t=0);var i;if(!(t>rO)){if(t++,qs(r)||qs(e)||Tm(e))i=pc(e);else if($s(r)){if(i=r.slice(),$s(e))for(var s=0,o=e.length;s<o;s++)i.push(pc(e[s]));else if(si(e))for(var a=Object.keys(e),s=0,o=a.length;s<o;s++){var l=a[s];i[l]=pc(e[l])}}else if(si(r))if(si(e)){if(!iO(r,e))return e;i=Object.assign({},r);for(var a=Object.keys(e),s=0,o=a.length;s<o;s++){var l=a[s],c=e[l];if(qs(c))typeof c=="undefined"?delete i[l]:i[l]=c;else{var u=i[l],d=c;if(_m(r,l,n)||_m(e,l,n))delete i[l];else{if(si(u)&&si(d)){var h=n.get(u)||[],f=n.get(d)||[];h.push({obj:r,key:l}),f.push({obj:e,key:l}),n.set(u,h),n.set(d,f)}i[l]=Sm(i[l],c,t,n)}}}}else i=e;return i}}function _m(r,e,t){for(var n=t.get(r[e])||[],i=0,s=n.length;i<s;i++){var o=n[i];if(o.key===e&&o.obj===r)return!0}return!1}function $s(r){return Array.isArray(r)}function Tm(r){return typeof r=="function"}function si(r){return!qs(r)&&!$s(r)&&!Tm(r)&&typeof r=="object"}function qs(r){return typeof r=="string"||typeof r=="number"||typeof r=="boolean"||typeof r=="undefined"||r instanceof Date||r instanceof RegExp||r===null}function iO(r,e){return!(!vm(r)||!vm(e))}function sO(r,e){return typeof e=="string"?r===e:!!r.match(e)}var oO=function(){function r(){var e=this;this._promise=new Promise(function(t,n){e._resolve=t,e._reject=n})}return Object.defineProperty(r.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),r.prototype.resolve=function(e){this._resolve(e)},r.prototype.reject=function(e){this._reject(e)},r}(),aO=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},lO=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))},cO=function(){function r(e,t){this._callback=e,this._that=t,this._isCalled=!1,this._deferred=new oO}return Object.defineProperty(r.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),r.prototype.call=function(){for(var e,t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((e=this._callback).call.apply(e,lO([this._that],aO(n),!1))).then(function(s){return t._deferred.resolve(s)},function(s){return t._deferred.reject(s)})}catch(s){this._deferred.reject(s)}}return this._deferred.promise},r}(),uO="exception",mc=function(){return mc=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},mc.apply(this,arguments)},dO=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Em=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},hO=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))},fO=function(){function r(e,t,n,i,s,o,a,l,c,u){a===void 0&&(a=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:Ds.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=i,this.parentSpanId=o,this.kind=s,this.links=a;var d=Date.now();this._performanceStartTime=$r.now(),this._performanceOffset=d-(this._performanceStartTime+lc()),this._startTimeProvided=l!=null,this.startTime=this._getTime(l!=null?l:d),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,u!=null&&this.setAttributes(u),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,t)}return r.prototype.spanContext=function(){return this._spanContext},r.prototype.setAttribute=function(e,t){return t==null||this._isSpanEnded()?this:e.length===0?(G.warn("Invalid attribute key: "+e),this):im(t)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?(this._droppedAttributesCount++,this):(this.attributes[e]=this._truncateToSize(t),this):(G.warn("Invalid attribute value set for key: "+e),this)},r.prototype.setAttributes=function(e){var t,n;try{for(var i=dO(Object.entries(e)),s=i.next();!s.done;s=i.next()){var o=Em(s.value,2),a=o[0],l=o[1];this.setAttribute(a,l)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return this},r.prototype.addEvent=function(e,t,n){if(this._isSpanEnded())return this;if(this._spanLimits.eventCountLimit===0)return G.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(this._droppedEventsCount===0&&G.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),um(t)&&(um(n)||(n=t),t=void 0);var i=Ks(t);return this.events.push({name:e,attributes:i,time:this._getTime(n),droppedAttributesCount:0}),this},r.prototype.addLink=function(e){return this.links.push(e),this},r.prototype.addLinks=function(e){var t;return(t=this.links).push.apply(t,hO([],Em(e),!1)),this},r.prototype.setStatus=function(e){return this._isSpanEnded()?this:(this.status=mc({},e),this.status.message!=null&&typeof e.message!="string"&&(G.warn("Dropping invalid status.message of type '"+typeof e.message+"', expected 'string'"),delete this.status.message),this)},r.prototype.updateName=function(e){return this._isSpanEnded()?this:(this.name=e,this)},r.prototype.end=function(e){if(this._isSpanEnded()){G.error(this.name+" "+this._spanContext.traceId+"-"+this._spanContext.spanId+" - You can only call end() on a span once.");return}this._ended=!0,this.endTime=this._getTime(e),this._duration=RL(this.startTime,this.endTime),this._duration[0]<0&&(G.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&G.warn("Dropped "+this._droppedEventsCount+" events because eventCountLimit reached"),this._spanProcessor.onEnd(this)},r.prototype._getTime=function(e){if(typeof e=="number"&&e<=$r.now())return cm(e+this._performanceOffset);if(typeof e=="number")return Bt(e);if(e instanceof Date)return Bt(e.getTime());if(cc(e))return e;if(this._startTimeProvided)return Bt(Date.now());var t=$r.now()-this._performanceStartTime;return dm(this.startTime,Bt(t))},r.prototype.isRecording=function(){return this._ended===!1},r.prototype.recordException=function(e,t){var n={};typeof e=="string"?n[ac]=e:e&&(e.code?n[oc]=e.code.toString():e.name&&(n[oc]=e.name),e.message&&(n[ac]=e.message),e.stack&&(n[vL]=e.stack)),n[oc]||n[ac]?this.addEvent(uO,n,t):G.warn("Failed to record an exception "+e)},Object.defineProperty(r.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"droppedAttributesCount",{get:function(){return this._droppedAttributesCount},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"droppedEventsCount",{get:function(){return this._droppedEventsCount},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"droppedLinksCount",{get:function(){return this._droppedLinksCount},enumerable:!1,configurable:!0}),r.prototype._isSpanEnded=function(){return this._ended&&G.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},r.prototype._truncateToLimitUtil=function(e,t){return e.length<=t?e:e.substring(0,t)},r.prototype._truncateToSize=function(e){var t=this,n=this._attributeValueLengthLimit;return n<=0?(G.warn("Attribute value limit must be positive, got "+n),e):typeof e=="string"?this._truncateToLimitUtil(e,n):Array.isArray(e)?e.map(function(i){return typeof i=="string"?t._truncateToLimitUtil(i,n):i}):e},r}(),qr;(function(r){r[r.NOT_RECORD=0]="NOT_RECORD",r[r.RECORD=1]="RECORD",r[r.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(qr||(qr={}));var eo=function(){function r(){}return r.prototype.shouldSample=function(){return{decision:qr.NOT_RECORD}},r.prototype.toString=function(){return"AlwaysOffSampler"},r}(),en=function(){function r(){}return r.prototype.shouldSample=function(){return{decision:qr.RECORD_AND_SAMPLED}},r.prototype.toString=function(){return"AlwaysOnSampler"},r}(),gc=function(){function r(e){var t,n,i,s;this._root=e.root,this._root||(Qr(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new en),this._remoteParentSampled=(t=e.remoteParentSampled)!==null&&t!==void 0?t:new en,this._remoteParentNotSampled=(n=e.remoteParentNotSampled)!==null&&n!==void 0?n:new eo,this._localParentSampled=(i=e.localParentSampled)!==null&&i!==void 0?i:new en,this._localParentNotSampled=(s=e.localParentNotSampled)!==null&&s!==void 0?s:new eo}return r.prototype.shouldSample=function(e,t,n,i,s,o){var a=oe.getSpanContext(e);return!a||!jn(a)?this._root.shouldSample(e,t,n,i,s,o):a.isRemote?a.traceFlags&_t.SAMPLED?this._remoteParentSampled.shouldSample(e,t,n,i,s,o):this._remoteParentNotSampled.shouldSample(e,t,n,i,s,o):a.traceFlags&_t.SAMPLED?this._localParentSampled.shouldSample(e,t,n,i,s,o):this._localParentNotSampled.shouldSample(e,t,n,i,s,o)},r.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},r}(),wm=function(){function r(e){e===void 0&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(this._ratio*4294967295)}return r.prototype.shouldSample=function(e,t){return{decision:Np(t)&&this._accumulate(t)<this._upperBound?qr.RECORD_AND_SAMPLED:qr.NOT_RECORD}},r.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},r.prototype._normalize=function(e){return typeof e!="number"||isNaN(e)?0:e>=1?1:e<=0?0:e},r.prototype._accumulate=function(e){for(var t=0,n=0;n<e.length/8;n++){var i=n*8,s=parseInt(e.slice(i,i+8),16);t=(t^s)>>>0}return t},r}(),pO=Tt.AlwaysOn,tn=1;function Rm(){var r=ni();return{sampler:Im(r),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:r.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:r.OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:r.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:r.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:r.OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:r.OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:r.OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:r.OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT},mergeResourceWithDefaults:!0}}function Im(r){switch(r===void 0&&(r=ni()),r.OTEL_TRACES_SAMPLER){case Tt.AlwaysOn:return new en;case Tt.AlwaysOff:return new eo;case Tt.ParentBasedAlwaysOn:return new gc({root:new en});case Tt.ParentBasedAlwaysOff:return new gc({root:new eo});case Tt.TraceIdRatio:return new wm(Cm(r));case Tt.ParentBasedTraceIdRatio:return new gc({root:new wm(Cm(r))});default:return G.error('OTEL_TRACES_SAMPLER value "'+r.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+pO+'".'),new en}}function Cm(r){if(r.OTEL_TRACES_SAMPLER_ARG===void 0||r.OTEL_TRACES_SAMPLER_ARG==="")return G.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to "+tn+"."),tn;var e=Number(r.OTEL_TRACES_SAMPLER_ARG);return isNaN(e)?(G.error("OTEL_TRACES_SAMPLER_ARG="+r.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to "+tn+"."),tn):e<0||e>1?(G.error("OTEL_TRACES_SAMPLER_ARG="+r.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to "+tn+"."),tn):e}function mO(r){var e={sampler:Im()},t=Rm(),n=Object.assign({},t,e,r);return n.generalLimits=Object.assign({},t.generalLimits,r.generalLimits||{}),n.spanLimits=Object.assign({},t.spanLimits,r.spanLimits||{}),n}function gO(r){var e,t,n,i,s,o,a,l,c,u,d,h,f=Object.assign({},r.spanLimits),m=fL();return f.attributeCountLimit=(o=(s=(i=(t=(e=r.spanLimits)===null||e===void 0?void 0:e.attributeCountLimit)!==null&&t!==void 0?t:(n=r.generalLimits)===null||n===void 0?void 0:n.attributeCountLimit)!==null&&i!==void 0?i:m.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)!==null&&s!==void 0?s:m.OTEL_ATTRIBUTE_COUNT_LIMIT)!==null&&o!==void 0?o:js,f.attributeValueLengthLimit=(h=(d=(u=(l=(a=r.spanLimits)===null||a===void 0?void 0:a.attributeValueLengthLimit)!==null&&l!==void 0?l:(c=r.generalLimits)===null||c===void 0?void 0:c.attributeValueLengthLimit)!==null&&u!==void 0?u:m.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&d!==void 0?d:m.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&h!==void 0?h:zs,Object.assign({},r,{spanLimits:f})}var yO=function(){function r(e,t){this._exporter=e,this._isExporting=!1,this._finishedSpans=[],this._droppedSpansCount=0;var n=ni();this._maxExportBatchSize=typeof(t==null?void 0:t.maxExportBatchSize)=="number"?t.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(t==null?void 0:t.maxQueueSize)=="number"?t.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(t==null?void 0:t.scheduledDelayMillis)=="number"?t.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(t==null?void 0:t.exportTimeoutMillis)=="number"?t.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new cO(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(G.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return r.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},r.prototype.onStart=function(e,t){},r.prototype.onEnd=function(e){this._shutdownOnce.isCalled||e.spanContext().traceFlags&_t.SAMPLED&&this._addToBuffer(e)},r.prototype.shutdown=function(){return this._shutdownOnce.call()},r.prototype._shutdown=function(){var e=this;return Promise.resolve().then(function(){return e.onShutdown()}).then(function(){return e._flushAll()}).then(function(){return e._exporter.shutdown()})},r.prototype._addToBuffer=function(e){if(this._finishedSpans.length>=this._maxQueueSize){this._droppedSpansCount===0&&G.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(G.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer()},r.prototype._flushAll=function(){var e=this;return new Promise(function(t,n){for(var i=[],s=Math.ceil(e._finishedSpans.length/e._maxExportBatchSize),o=0,a=s;o<a;o++)i.push(e._flushOneBatch());Promise.all(i).then(function(){t()}).catch(n)})},r.prototype._flushOneBatch=function(){var e=this;return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise(function(t,n){var i=setTimeout(function(){n(new Error("Timeout"))},e._exportTimeoutMillis);te.with(kC(te.active()),function(){var s;e._finishedSpans.length<=e._maxExportBatchSize?(s=e._finishedSpans,e._finishedSpans=[]):s=e._finishedSpans.splice(0,e._maxExportBatchSize);for(var o=function(){return e._exporter.export(s,function(d){var h;clearTimeout(i),d.code===uc.SUCCESS?t():n((h=d.error)!==null&&h!==void 0?h:new Error("BatchSpanProcessor: span export failed"))})},a=null,l=0,c=s.length;l<c;l++){var u=s[l];u.resource.asyncAttributesPending&&u.resource.waitForAsyncAttributes&&(a!=null||(a=[]),a.push(u.resource.waitForAsyncAttributes()))}a===null?o():Promise.all(a).then(o,function(d){Qr(d),n(d)})})})},r.prototype._maybeStartTimer=function(){var e=this;if(!this._isExporting){var t=function(){e._isExporting=!0,e._flushOneBatch().finally(function(){e._isExporting=!1,e._finishedSpans.length>0&&(e._clearTimer(),e._maybeStartTimer())}).catch(function(n){e._isExporting=!1,Qr(n)})};if(this._finishedSpans.length>=this._maxExportBatchSize)return t();this._timer===void 0&&(this._timer=setTimeout(function(){return t()},this._scheduledDelayMillis))}},r.prototype._clearTimer=function(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)},r}(),bO=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Lm=function(r){bO(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.onInit(n),i}return e.prototype.onInit=function(t){var n=this;(t==null?void 0:t.disableAutoFlushOnDocumentHide)!==!0&&typeof document!="undefined"&&(this._visibilityChangeListener=function(){document.visibilityState==="hidden"&&n.forceFlush().catch(function(i){Qr(i)})},this._pageHideListener=function(){n.forceFlush().catch(function(i){Qr(i)})},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))},e.prototype.onShutdown=function(){typeof document!="undefined"&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))},e}(yO),vO=8,SO=16,_O=function(){function r(){this.generateTraceId=Om(SO),this.generateSpanId=Om(vO)}return r}(),to=Array(32);function Om(r){return function(){for(var t=0;t<r*2;t++)to[t]=Math.floor(Math.random()*16)+48,to[t]>=58&&(to[t]+=39);return String.fromCharCode.apply(null,to.slice(0,r*2))}}var TO=function(){function r(e,t,n){this._tracerProvider=n;var i=mO(t);this._sampler=i.sampler,this._generalLimits=i.generalLimits,this._spanLimits=i.spanLimits,this._idGenerator=t.idGenerator||new _O,this.resource=n.resource,this.instrumentationLibrary=e}return r.prototype.startSpan=function(e,t,n){var i,s,o;t===void 0&&(t={}),n===void 0&&(n=te.active()),t.root&&(n=oe.deleteSpan(n));var a=oe.getSpan(n);if(rc(n)){G.debug("Instrumentation suppressed, returning Noop Span");var l=oe.wrapSpanContext(Op);return l}var c=a==null?void 0:a.spanContext(),u=this._idGenerator.generateSpanId(),d,h,f;!c||!oe.isSpanContextValid(c)?d=this._idGenerator.generateTraceId():(d=c.traceId,h=c.traceState,f=c.spanId);var m=(i=t.kind)!==null&&i!==void 0?i:Qn.INTERNAL,p=((s=t.links)!==null&&s!==void 0?s:[]).map(function(N){return{context:N.context,attributes:Ks(N.attributes)}}),g=Ks(t.attributes),y=this._sampler.shouldSample(n,d,e,m,g,p);h=(o=y.traceState)!==null&&o!==void 0?o:h;var E=y.decision===Fs.RECORD_AND_SAMPLED?_t.SAMPLED:_t.NONE,T={traceId:d,spanId:u,traceFlags:E,traceState:h};if(y.decision===Fs.NOT_RECORD){G.debug("Recording is off, propagating context in a non-recording span");var l=oe.wrapSpanContext(T);return l}var I=Ks(Object.assign(g,y.attributes)),R=new fO(this,n,e,T,m,f,p,t.startTime,void 0,I);return R},r.prototype.startActiveSpan=function(e,t,n,i){var s,o,a;if(!(arguments.length<2)){arguments.length===2?a=t:arguments.length===3?(s=t,a=n):(s=t,o=n,a=i);var l=o!=null?o:te.active(),c=this.startSpan(e,s,l),u=oe.setSpan(l,c);return te.with(u,a,void 0,c)}},r.prototype.getGeneralLimits=function(){return this._generalLimits},r.prototype.getSpanLimits=function(){return this._spanLimits},r.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},r}(),EO="process.runtime.name",wO="service.name",RO="telemetry.sdk.name",IO="telemetry.sdk.language",CO="telemetry.sdk.version",LO=EO,OO=wO,yc=RO,bc=IO,vc=CO,ZO="webjs",NO=ZO,GO="1.30.1",rn,Sc=(rn={},rn[yc]="opentelemetry",rn[LO]="browser",rn[bc]=NO,rn[vc]=GO,rn);function VO(){return"unknown_service"}var zt=function(){return zt=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},zt.apply(this,arguments)},xO=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})},XO=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},kO=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},oi=function(){function r(e,t){var n=this,i;this._attributes=e,this.asyncAttributesPending=t!=null,this._syncAttributes=(i=this._attributes)!==null&&i!==void 0?i:{},this._asyncAttributesPromise=t==null?void 0:t.then(function(s){return n._attributes=Object.assign({},n._attributes,s),n.asyncAttributesPending=!1,s},function(s){return G.debug("a resource's async attributes promise rejected: %s",s),n.asyncAttributesPending=!1,{}})}return r.empty=function(){return r.EMPTY},r.default=function(){var e;return new r((e={},e[OO]=VO(),e[bc]=Sc[bc],e[yc]=Sc[yc],e[vc]=Sc[vc],e))},Object.defineProperty(r.prototype,"attributes",{get:function(){var e;return this.asyncAttributesPending&&G.error("Accessing resource attributes before async attributes settled"),(e=this._attributes)!==null&&e!==void 0?e:{}},enumerable:!1,configurable:!0}),r.prototype.waitForAsyncAttributes=function(){return xO(this,void 0,void 0,function(){return XO(this,function(e){switch(e.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},r.prototype.merge=function(e){var t=this,n;if(!e)return this;var i=zt(zt({},this._syncAttributes),(n=e._syncAttributes)!==null&&n!==void 0?n:e.attributes);if(!this._asyncAttributesPromise&&!e._asyncAttributesPromise)return new r(i);var s=Promise.all([this._asyncAttributesPromise,e._asyncAttributesPromise]).then(function(o){var a,l=kO(o,2),c=l[0],u=l[1];return zt(zt(zt(zt({},t._syncAttributes),c),(a=e._syncAttributes)!==null&&a!==void 0?a:e.attributes),u)});return new r(i,s)},r.EMPTY=new r({}),r}(),ro=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Zm=function(){function r(e){this._spanProcessors=e}return r.prototype.forceFlush=function(){var e,t,n=[];try{for(var i=ro(this._spanProcessors),s=i.next();!s.done;s=i.next()){var o=s.value;n.push(o.forceFlush())}}catch(a){e={error:a}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return new Promise(function(a){Promise.all(n).then(function(){a()}).catch(function(l){Qr(l||new Error("MultiSpanProcessor: forceFlush failed")),a()})})},r.prototype.onStart=function(e,t){var n,i;try{for(var s=ro(this._spanProcessors),o=s.next();!o.done;o=s.next()){var a=o.value;a.onStart(e,t)}}catch(l){n={error:l}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},r.prototype.onEnd=function(e){var t,n;try{for(var i=ro(this._spanProcessors),s=i.next();!s.done;s=i.next()){var o=s.value;o.onEnd(e)}}catch(a){t={error:a}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},r.prototype.shutdown=function(){var e,t,n=[];try{for(var i=ro(this._spanProcessors),s=i.next();!s.done;s=i.next()){var o=s.value;n.push(o.shutdown())}}catch(a){e={error:a}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return new Promise(function(a,l){Promise.all(n).then(function(){a()},l)})},r}(),WO=function(){function r(){}return r.prototype.onStart=function(e,t){},r.prototype.onEnd=function(e){},r.prototype.shutdown=function(){return Promise.resolve()},r.prototype.forceFlush=function(){return Promise.resolve()},r}(),AO=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},PO=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))},br;(function(r){r[r.resolved=0]="resolved",r[r.timeout=1]="timeout",r[r.error=2]="error",r[r.unresolved=3]="unresolved"})(br||(br={}));var MO=function(){function r(e){e===void 0&&(e={});var t,n;this._registeredSpanProcessors=[],this._tracers=new Map;var i=nO({},Rm(),gO(e));if(this.resource=(t=i.resource)!==null&&t!==void 0?t:oi.empty(),i.mergeResourceWithDefaults&&(this.resource=oi.default().merge(this.resource)),this._config=Object.assign({},i,{resource:this.resource}),!((n=e.spanProcessors)===null||n===void 0)&&n.length)this._registeredSpanProcessors=PO([],AO(e.spanProcessors),!1),this.activeSpanProcessor=new Zm(this._registeredSpanProcessors);else{var s=this._buildExporterFromEnv();if(s!==void 0){var o=new Lm(s);this.activeSpanProcessor=o}else this.activeSpanProcessor=new WO}}return r.prototype.getTracer=function(e,t,n){var i=e+"@"+(t||"")+":"+((n==null?void 0:n.schemaUrl)||"");return this._tracers.has(i)||this._tracers.set(i,new TO({name:e,version:t,schemaUrl:n==null?void 0:n.schemaUrl},this._config,this)),this._tracers.get(i)},r.prototype.addSpanProcessor=function(e){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(function(t){return G.error("Error while trying to shutdown current span processor",t)}),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new Zm(this._registeredSpanProcessors)},r.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},r.prototype.register=function(e){e===void 0&&(e={}),oe.setGlobalTracerProvider(this),e.propagator===void 0&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&te.setGlobalContextManager(e.contextManager),e.propagator&&Ue.setGlobalPropagator(e.propagator)},r.prototype.forceFlush=function(){var e=this._config.forceFlushTimeoutMillis,t=this._registeredSpanProcessors.map(function(n){return new Promise(function(i){var s,o=setTimeout(function(){i(new Error("Span processor did not completed within timeout period of "+e+" ms")),s=br.timeout},e);n.forceFlush().then(function(){clearTimeout(o),s!==br.timeout&&(s=br.resolved,i(s))}).catch(function(a){clearTimeout(o),s=br.error,i(a)})})});return new Promise(function(n,i){Promise.all(t).then(function(s){var o=s.filter(function(a){return a!==br.resolved});o.length>0?i(o):n()}).catch(function(s){return i([s])})})},r.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},r.prototype._getPropagator=function(e){var t;return(t=this.constructor._registeredPropagators.get(e))===null||t===void 0?void 0:t()},r.prototype._getSpanExporter=function(e){var t;return(t=this.constructor._registeredExporters.get(e))===null||t===void 0?void 0:t()},r.prototype._buildPropagatorFromEnv=function(){var e=this,t=Array.from(new Set(ni().OTEL_PROPAGATORS)),n=t.map(function(s){var o=e._getPropagator(s);return o||G.warn('Propagator "'+s+'" requested through environment variable is unavailable.'),o}),i=n.reduce(function(s,o){return o&&s.push(o),s},[]);if(i.length!==0)return t.length===1?i[0]:new CL({propagators:i})},r.prototype._buildExporterFromEnv=function(){var e=ni().OTEL_TRACES_EXPORTER;if(!(e==="none"||e==="")){var t=this._getSpanExporter(e);return t||G.error('Exporter "'+e+'" requested through environment variable is unavailable.'),t}},r._registeredPropagators=new Map([["tracecontext",function(){return new JL}],["baggage",function(){return new YC}]]),r._registeredExporters=new Map,r}(),UO=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},FO=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))},Nm=function(){function r(){this._enabled=!1,this._currentContext=pr}return r.prototype._bindFunction=function(e,t){e===void 0&&(e=pr);var n=this,i=function(){for(var s=this,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return n.with(e,function(){return t.apply(s,o)})};return Object.defineProperty(i,"length",{enumerable:!1,configurable:!0,writable:!1,value:t.length}),i},r.prototype.active=function(){return this._currentContext},r.prototype.bind=function(e,t){return e===void 0&&(e=this.active()),typeof t=="function"?this._bindFunction(e,t):t},r.prototype.disable=function(){return this._currentContext=pr,this._enabled=!1,this},r.prototype.enable=function(){return this._enabled?this:(this._enabled=!0,this._currentContext=pr,this)},r.prototype.with=function(e,t,n){for(var i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];var o=this._currentContext;this._currentContext=e||pr;try{return t.call.apply(t,FO([n],UO(i),!1))}finally{this._currentContext=o}},r}(),DO=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),JO=function(r){DO(e,r);function e(t){t===void 0&&(t={});var n=r.call(this,t)||this;if(t.contextManager)throw"contextManager should be defined in register method not in constructor";if(t.propagator)throw"propagator should be defined in register method not in constructor";return n}return e.prototype.register=function(t){t===void 0&&(t={}),t.contextManager===void 0&&(t.contextManager=new Nm),t.contextManager&&t.contextManager.enable(),r.prototype.register.call(this,t)},e}(MO),Y;(function(r){r.CONNECT_END="connectEnd",r.CONNECT_START="connectStart",r.DECODED_BODY_SIZE="decodedBodySize",r.DOM_COMPLETE="domComplete",r.DOM_CONTENT_LOADED_EVENT_END="domContentLoadedEventEnd",r.DOM_CONTENT_LOADED_EVENT_START="domContentLoadedEventStart",r.DOM_INTERACTIVE="domInteractive",r.DOMAIN_LOOKUP_END="domainLookupEnd",r.DOMAIN_LOOKUP_START="domainLookupStart",r.ENCODED_BODY_SIZE="encodedBodySize",r.FETCH_START="fetchStart",r.LOAD_EVENT_END="loadEventEnd",r.LOAD_EVENT_START="loadEventStart",r.NAVIGATION_START="navigationStart",r.REDIRECT_END="redirectEnd",r.REDIRECT_START="redirectStart",r.REQUEST_START="requestStart",r.RESPONSE_END="responseEnd",r.RESPONSE_START="responseStart",r.SECURE_CONNECTION_START="secureConnectionStart",r.UNLOAD_EVENT_END="unloadEventEnd",r.UNLOAD_EVENT_START="unloadEventStart"})(Y||(Y={}));var _c;function YO(){return _c||(_c=document.createElement("a")),_c}function jt(r,e){return e in r}function Ie(r,e,t,n){var i=void 0,s=void 0;jt(t,e)&&typeof t[e]=="number"&&(i=t[e]);var o=Y.FETCH_START;if(jt(t,o)&&typeof t[o]=="number"&&(s=t[o]),i!==void 0&&s!==void 0&&i>=s)return r.addEvent(e,i),r}function nn(r,e,t){t===void 0&&(t=!1),t||(Ie(r,Y.FETCH_START,e),Ie(r,Y.DOMAIN_LOOKUP_START,e),Ie(r,Y.DOMAIN_LOOKUP_END,e),Ie(r,Y.CONNECT_START,e),jt(e,"name")&&e.name.startsWith("https:")&&Ie(r,Y.SECURE_CONNECTION_START,e),Ie(r,Y.CONNECT_END,e),Ie(r,Y.REQUEST_START,e),Ie(r,Y.RESPONSE_START,e),Ie(r,Y.RESPONSE_END,e));var n=e[Y.ENCODED_BODY_SIZE];n!==void 0&&r.setAttribute(SL,n);var i=e[Y.DECODED_BODY_SIZE];i!==void 0&&n!==i&&r.setAttribute(_L,i)}function HO(r){return r.slice().sort(function(e,t){var n=e[Y.FETCH_START],i=t[Y.FETCH_START];return n>i?1:n<i?-1:0})}function Gm(){return typeof location!="undefined"?location.origin:void 0}function Vm(r,e,t,n,i,s){i===void 0&&(i=new WeakSet);var o=Vt(r);r=o.toString();var a=KO(r,e,t,n,i,s);if(a.length===0)return{mainRequest:void 0};if(a.length===1)return{mainRequest:a[0]};var l=HO(a);if(o.origin!==Gm()&&l.length>1){var c=l[0],u=BO(l,c[Y.RESPONSE_END],t),d=c[Y.RESPONSE_END],h=u[Y.FETCH_START];return h<d&&(u=c,c=void 0),{corsPreFlightRequest:c,mainRequest:u}}else return{mainRequest:a[0]}}function BO(r,e,t){for(var n=Kt(t),i=Kt(ii(e)),s=r[1],o,a=r.length,l=1;l<a;l++){var c=r[l],u=Kt(ii(c[Y.FETCH_START])),d=Kt(ii(c[Y.RESPONSE_END])),h=n-d;u>=i&&(!o||h<o)&&(o=h,s=c)}return s}function KO(r,e,t,n,i,s){var o=Kt(e),a=Kt(t),l=n.filter(function(c){var u=Kt(ii(c[Y.FETCH_START])),d=Kt(ii(c[Y.RESPONSE_END]));return c.initiatorType.toLowerCase()===(s||"xmlhttprequest")&&c.name===r&&u>=o&&d<=a});return l.length>0&&(l=l.filter(function(c){return!i.has(c)})),l}function Vt(r){if(typeof URL=="function")return new URL(r,typeof document!="undefined"?document.baseURI:typeof location!="undefined"?location.href:void 0);var e=YO();return e.href=r,e}function xm(r,e){if(r.nodeType===Node.DOCUMENT_NODE)return"/";var t=jO(r,e);if(e&&t.indexOf("@id")>0)return t;var n="";return r.parentNode&&(n+=xm(r.parentNode,!1)),n+=t,n}function zO(r){if(!r.parentNode)return 0;var e=[r.nodeType];r.nodeType===Node.CDATA_SECTION_NODE&&e.push(Node.TEXT_NODE);var t=Array.from(r.parentNode.childNodes);return t=t.filter(function(n){var i=n.localName;return e.indexOf(n.nodeType)>=0&&i===r.localName}),t.length>=1?t.indexOf(r)+1:0}function jO(r,e){var t=r.nodeType,n=zO(r),i="";if(t===Node.ELEMENT_NODE){var s=r.getAttribute("id");if(e&&s)return'//*[@id="'+s+'"]';i=r.localName}else if(t===Node.TEXT_NODE||t===Node.CDATA_SECTION_NODE)i="text()";else if(t===Node.COMMENT_NODE)i="comment()";else return"";return i&&n>1?"/"+i+"["+n+"]":"/"+i}function Xm(r,e){var t=e||[];(typeof t=="string"||t instanceof RegExp)&&(t=[t]);var n=Vt(r);return n.origin===Gm()?!0:t.some(function(i){return sO(r,i)})}var Tc=function(){return Tc=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Tc.apply(this,arguments)},QO=function(){function r(e,t,n){this.instrumentationName=e,this.instrumentationVersion=t,this._config={},this._wrap=Ge.wrap,this._unwrap=Ge.unwrap,this._massWrap=Ge.massWrap,this._massUnwrap=Ge.massUnwrap,this.setConfig(n),this._diag=G.createComponentLogger({namespace:e}),this._tracer=oe.getTracer(e,t),this._meter=jr.getMeter(e,t),this._logger=ei.getLogger(e,t),this._updateMetricInstruments()}return Object.defineProperty(r.prototype,"meter",{get:function(){return this._meter},enumerable:!1,configurable:!0}),r.prototype.setMeterProvider=function(e){this._meter=e.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()},Object.defineProperty(r.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),r.prototype.setLoggerProvider=function(e){this._logger=e.getLogger(this.instrumentationName,this.instrumentationVersion)},r.prototype.getModuleDefinitions=function(){var e,t=(e=this.init())!==null&&e!==void 0?e:[];return Array.isArray(t)?t:[t]},r.prototype._updateMetricInstruments=function(){},r.prototype.getConfig=function(){return this._config},r.prototype.setConfig=function(e){this._config=Tc({enabled:!0},e)},r.prototype.setTracerProvider=function(e){this._tracer=e.getTracer(this.instrumentationName,this.instrumentationVersion)},Object.defineProperty(r.prototype,"tracer",{get:function(){return this._tracer},enumerable:!1,configurable:!0}),r.prototype._runSpanCustomizationHook=function(e,t,n,i){if(e)try{e(n,i)}catch(s){this._diag.error("Error running span customization hook due to exception in handler",{triggerName:t},s)}},r}(),$O=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),qO=function(r){$O(e,r);function e(t,n,i){var s=r.call(this,t,n,i)||this;return s._config.enabled&&s.enable(),s}return e}(QO);function km(r,e,t){var n,i;try{i=r()}catch(s){n=s}finally{return e(n,i),i}}var ai;(function(r){r.DOCUMENT_LOAD="documentLoad",r.DOCUMENT_FETCH="documentFetch",r.RESOURCE_FETCH="resourceFetch"})(ai||(ai={}));var eZ="0.44.0",tZ="@opentelemetry/instrumentation-document-load";const rZ="http.url",nZ="http.user_agent",Ec=rZ,iZ=nZ,wc="exception.message",sZ="exception.stacktrace",Rc="exception.type",oZ="service.name",aZ="service.version",Wm="telemetry.sdk.name",Am="telemetry.sdk.version",lZ="url.full",cZ="url.path",uZ="url.query",dZ="user_agent.original";var no;(function(r){r.FIRST_PAINT="firstPaint",r.FIRST_CONTENTFUL_PAINT="firstContentfulPaint"})(no||(no={}));var hZ=function(){var r,e,t={},n=(e=(r=Bs).getEntriesByType)===null||e===void 0?void 0:e.call(r,"navigation")[0];if(n){var i=Object.values(Y);i.forEach(function(a){if(jt(n,a)){var l=n[a];typeof l=="number"&&(t[a]=l)}})}else{var s=Bs,o=s.timing;if(o){var i=Object.values(Y);i.forEach(function(l){if(jt(o,l)){var c=o[l];typeof c=="number"&&(t[l]=c)}})}}return t},Pm={"first-paint":no.FIRST_PAINT,"first-contentful-paint":no.FIRST_CONTENTFUL_PAINT},fZ=function(r){var e,t,n=(t=(e=Bs).getEntriesByType)===null||t===void 0?void 0:t.call(e,"paint");n&&n.forEach(function(i){var s=i.name,o=i.startTime;jt(Pm,s)&&r.addEvent(Pm[s],o)})},pZ=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),mZ=function(r){pZ(e,r);function e(t){t===void 0&&(t={});var n=r.call(this,tZ,eZ,t)||this;return n.component="document-load",n.version="1",n.moduleName=n.component,n}return e.prototype.init=function(){},e.prototype._onDocumentLoaded=function(){var t=this;window.setTimeout(function(){t._collectPerformance()})},e.prototype._addResourcesSpans=function(t){var n=this,i,s,o=(s=(i=Bs).getEntriesByType)===null||s===void 0?void 0:s.call(i,"resource");o&&o.forEach(function(a){n._initResourceSpan(a,t)})},e.prototype._collectPerformance=function(){var t=this,n=Array.from(document.getElementsByTagName("meta")).find(function(o){return o.getAttribute("name")===XC}),i=hZ(),s=n&&n.content||"";te.with(Ue.extract(pr,{traceparent:s}),function(){var o,a=t._startSpan(ai.DOCUMENT_LOAD,Y.FETCH_START,i);a&&(te.with(oe.setSpan(te.active(),a),function(){var l=t._startSpan(ai.DOCUMENT_FETCH,Y.FETCH_START,i);l&&(l.setAttribute(Ec,location.href),te.with(oe.setSpan(te.active(),l),function(){var c;t.getConfig().ignoreNetworkEvents||nn(l,i),t._addCustomAttributesOnSpan(l,(c=t.getConfig().applyCustomAttributesOnSpan)===null||c===void 0?void 0:c.documentFetch),t._endSpan(l,Y.RESPONSE_END,i)}))}),a.setAttribute(Ec,location.href),a.setAttribute(iZ,navigator.userAgent),t._addResourcesSpans(a),t.getConfig().ignoreNetworkEvents||(Ie(a,Y.FETCH_START,i),Ie(a,Y.UNLOAD_EVENT_START,i),Ie(a,Y.UNLOAD_EVENT_END,i),Ie(a,Y.DOM_INTERACTIVE,i),Ie(a,Y.DOM_CONTENT_LOADED_EVENT_START,i),Ie(a,Y.DOM_CONTENT_LOADED_EVENT_END,i),Ie(a,Y.DOM_COMPLETE,i),Ie(a,Y.LOAD_EVENT_START,i),Ie(a,Y.LOAD_EVENT_END,i)),t.getConfig().ignorePerformancePaintEvents||fZ(a),t._addCustomAttributesOnSpan(a,(o=t.getConfig().applyCustomAttributesOnSpan)===null||o===void 0?void 0:o.documentLoad),t._endSpan(a,Y.LOAD_EVENT_END,i))})},e.prototype._endSpan=function(t,n,i){t&&(jt(i,n)?t.end(i[n]):t.end())},e.prototype._initResourceSpan=function(t,n){var i,s=this._startSpan(ai.RESOURCE_FETCH,Y.FETCH_START,t,n);s&&(s.setAttribute(Ec,t.name),this.getConfig().ignoreNetworkEvents||nn(s,t),this._addCustomAttributesOnResourceSpan(s,t,(i=this.getConfig().applyCustomAttributesOnSpan)===null||i===void 0?void 0:i.resourceFetch),this._endSpan(s,Y.RESPONSE_END,t))},e.prototype._startSpan=function(t,n,i,s){if(jt(i,n)&&typeof i[n]=="number"){var o=this.tracer.startSpan(t,{startTime:i[n]},s?oe.setSpan(te.active(),s):void 0);return o}},e.prototype._waitForPageLoad=function(){window.document.readyState==="complete"?this._onDocumentLoaded():(this._onDocumentLoaded=this._onDocumentLoaded.bind(this),window.addEventListener("load",this._onDocumentLoaded))},e.prototype._addCustomAttributesOnSpan=function(t,n){var i=this;n&&km(function(){return n(t)},function(s){s&&i._diag.error("addCustomAttributesOnSpan",s)})},e.prototype._addCustomAttributesOnResourceSpan=function(t,n,i){var s=this;i&&km(function(){return i(t,n)},function(o){o&&s._diag.error("addCustomAttributesOnResourceSpan",o)})},e.prototype.enable=function(){window.removeEventListener("load",this._onDocumentLoaded),this._waitForPageLoad()},e.prototype.disable=function(){window.removeEventListener("load",this._onDocumentLoaded)},e}(qO),Ic=function(){return Ic=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Ic.apply(this,arguments)},gZ=function(){function r(e,t,n){this.instrumentationName=e,this.instrumentationVersion=t,this._config={},this._wrap=Ge.wrap,this._unwrap=Ge.unwrap,this._massWrap=Ge.massWrap,this._massUnwrap=Ge.massUnwrap,this.setConfig(n),this._diag=G.createComponentLogger({namespace:e}),this._tracer=oe.getTracer(e,t),this._meter=jr.getMeter(e,t),this._logger=ei.getLogger(e,t),this._updateMetricInstruments()}return Object.defineProperty(r.prototype,"meter",{get:function(){return this._meter},enumerable:!1,configurable:!0}),r.prototype.setMeterProvider=function(e){this._meter=e.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()},Object.defineProperty(r.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),r.prototype.setLoggerProvider=function(e){this._logger=e.getLogger(this.instrumentationName,this.instrumentationVersion)},r.prototype.getModuleDefinitions=function(){var e,t=(e=this.init())!==null&&e!==void 0?e:[];return Array.isArray(t)?t:[t]},r.prototype._updateMetricInstruments=function(){},r.prototype.getConfig=function(){return this._config},r.prototype.setConfig=function(e){this._config=Ic({enabled:!0},e)},r.prototype.setTracerProvider=function(e){this._tracer=e.getTracer(this.instrumentationName,this.instrumentationVersion)},Object.defineProperty(r.prototype,"tracer",{get:function(){return this._tracer},enumerable:!1,configurable:!0}),r.prototype._runSpanCustomizationHook=function(e,t,n,i){if(e)try{e(n,i)}catch(s){this._diag.error("Error running span customization hook due to exception in handler",{triggerName:t},s)}},r}(),yZ=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),bZ=function(r){yZ(e,r);function e(t,n,i){var s=r.call(this,t,n,i)||this;return s._config.enabled&&s.enable(),s}return e}(gZ);function vZ(r,e,t){var n,i;try{i=r()}catch(s){n=s}finally{return e(n,i),i}}function SZ(r){return typeof r=="function"&&typeof r.__original=="function"&&typeof r.__unwrap=="function"&&r.__wrapped===!0}var Cc=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},Lc=performance,_Z="http.method",TZ="http.url",EZ="http.host",wZ="http.scheme",RZ="http.status_code",IZ="http.user_agent",CZ="http.request_content_length_uncompressed",LZ=_Z,OZ=TZ,ZZ=EZ,NZ=wZ,GZ=RZ,VZ=IZ,xZ=CZ,XZ=9,kZ=6,WZ=Math.pow(10,kZ),Mm=Math.pow(10,XZ);function Oc(r){var e=r/1e3,t=Math.trunc(e),n=Math.round(r%1e3*WZ);return[t,n]}function AZ(){var r=Lc.timeOrigin;if(typeof r!="number"){var e=Lc;r=e.timing&&e.timing.fetchStart}return r}function Um(r){var e=Oc(AZ()),t=Oc(Lc.now());return PZ(e,t)}function PZ(r,e){var t=[r[0]+e[0],r[1]+e[1]];return t[1]>=Mm&&(t[1]-=Mm,t[0]+=1),t}var MZ=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function UZ(r,e){return typeof e=="string"?r===e:!!r.match(e)}function FZ(r,e){var t,n;if(!e)return!1;try{for(var i=MZ(e),s=i.next();!s.done;s=i.next()){var o=s.value;if(UZ(r,o))return!0}}catch(a){t={error:a}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return!1}var io;(function(r){r.COMPONENT="component",r.HTTP_ERROR_NAME="http.error_name",r.HTTP_STATUS_TEXT="http.status_text"})(io||(io={}));var DZ=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})},JZ=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},YZ=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},HZ=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},Fm=G.createComponentLogger({namespace:"@opentelemetry/opentelemetry-instrumentation-fetch/utils"});function BZ(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(r[0]instanceof URL||typeof r[0]=="string"){var t=r[1];if(!(t!=null&&t.body))return Promise.resolve();if(t.body instanceof ReadableStream){var n=KZ(t.body),i=n.body,s=n.length;return t.body=i,s}else return Promise.resolve(zZ(t.body))}else{var o=r[0];return o!=null&&o.body?o.clone().text().then(function(a){return Zc(a)}):Promise.resolve()}}function KZ(r){if(!r.pipeThrough)return Fm.warn("Platform has ReadableStream but not pipeThrough!"),{body:r,length:Promise.resolve(void 0)};var e=0,t,n=new Promise(function(s){t=s}),i=new TransformStream({start:function(){},transform:function(s,o){return DZ(this,void 0,void 0,function(){var a;return JZ(this,function(l){switch(l.label){case 0:return[4,s];case 1:return a=l.sent(),e+=a.byteLength,o.enqueue(s),[2]}})})},flush:function(){t(e)}});return{body:r.pipeThrough(i),length:n}}function zZ(r){if(typeof Document!="undefined"&&r instanceof Document)return new XMLSerializer().serializeToString(document).length;if(r instanceof Blob)return r.size;if(r.byteLength!==void 0)return r.byteLength;if(r instanceof FormData)return QZ(r);if(r instanceof URLSearchParams)return Zc(r.toString());if(typeof r=="string")return Zc(r);Fm.warn("unknown body type")}var jZ=new TextEncoder;function Zc(r){return jZ.encode(r).byteLength}function QZ(r){var e,t,n=0;try{for(var i=YZ(r.entries()),s=i.next();!s.done;s=i.next()){var o=HZ(s.value,2),a=o[0],l=o[1];n+=a.length,l instanceof Blob?n+=l.size:n+=l.length}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n}var Dm="0.57.2",$Z=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),qZ=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},eN=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))},Nc,tN=300,Jm=typeof process=="object"&&((Nc=process.release)===null||Nc===void 0?void 0:Nc.name)==="node",rN=function(r){$Z(e,r);function e(t){t===void 0&&(t={});var n=r.call(this,"@opentelemetry/instrumentation-fetch",Dm,t)||this;return n.component="fetch",n.version=Dm,n.moduleName=n.component,n._usedResources=new WeakSet,n._tasksCount=0,n}return e.prototype.init=function(){},e.prototype._addChildSpan=function(t,n){var i=this.tracer.startSpan("CORS Preflight",{startTime:n[Y.FETCH_START]},oe.setSpan(te.active(),t));nn(i,n,this.getConfig().ignoreNetworkEvents),i.end(n[Y.RESPONSE_END])},e.prototype._addFinalSpanAttributes=function(t,n){var i=Vt(n.url);t.setAttribute(GZ,n.status),n.statusText!=null&&t.setAttribute(io.HTTP_STATUS_TEXT,n.statusText),t.setAttribute(ZZ,i.host),t.setAttribute(NZ,i.protocol.replace(":","")),typeof navigator!="undefined"&&t.setAttribute(VZ,navigator.userAgent)},e.prototype._addHeaders=function(t,n){if(!Xm(n,this.getConfig().propagateTraceHeaderCorsUrls)){var i={};Ue.inject(te.active(),i),Object.keys(i).length>0&&this._diag.debug("headers inject skipped due to CORS policy");return}if(t instanceof Request)Ue.inject(te.active(),t.headers,{set:function(s,o,a){return s.set(o,typeof a=="string"?a:String(a))}});else if(t.headers instanceof Headers)Ue.inject(te.active(),t.headers,{set:function(s,o,a){return s.set(o,typeof a=="string"?a:String(a))}});else if(t.headers instanceof Map)Ue.inject(te.active(),t.headers,{set:function(s,o,a){return s.set(o,typeof a=="string"?a:String(a))}});else{var i={};Ue.inject(te.active(),i),t.headers=Object.assign({},i,t.headers||{})}},e.prototype._clearResources=function(){this._tasksCount===0&&this.getConfig().clearTimingResources&&(performance.clearResourceTimings(),this._usedResources=new WeakSet)},e.prototype._createSpan=function(t,n){var i;if(n===void 0&&(n={}),FZ(t,this.getConfig().ignoreUrls)){this._diag.debug("ignoring span as url matches ignored url");return}var s=(n.method||"GET").toUpperCase(),o="HTTP "+s;return this.tracer.startSpan(o,{kind:Qn.CLIENT,attributes:(i={},i[io.COMPONENT]=this.moduleName,i[LZ]=s,i[OZ]=t,i)})},e.prototype._findResourceAndAddNetworkEvents=function(t,n,i){var s=n.entries;if(!s.length){if(!performance.getEntriesByType)return;s=performance.getEntriesByType("resource")}var o=Vm(n.spanUrl,n.startTime,i,s,this._usedResources,"fetch");if(o.mainRequest){var a=o.mainRequest;this._markResourceAsUsed(a);var l=o.corsPreFlightRequest;l&&(this._addChildSpan(t,l),this._markResourceAsUsed(l)),nn(t,a,this.getConfig().ignoreNetworkEvents)}},e.prototype._markResourceAsUsed=function(t){this._usedResources.add(t)},e.prototype._endSpan=function(t,n,i){var s=this,o=Oc(Date.now()),a=Um();this._addFinalSpanAttributes(t,i),setTimeout(function(){var l;(l=n.observer)===null||l===void 0||l.disconnect(),s._findResourceAndAddNetworkEvents(t,n,a),s._tasksCount--,s._clearResources(),t.end(o)},tN)},e.prototype._patchConstructor=function(){var t=this;return function(n){var i=t;return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var l=this,c=Vt(o[0]instanceof Request?o[0].url:String(o[0])).href,u=o[0]instanceof Request?o[0]:o[1]||{},d=i._createSpan(c,u);if(!d)return n.apply(this,o);var h=i._prepareSpanData(c);i.getConfig().measureRequestSize&&BZ.apply(void 0,eN([],qZ(o),!1)).then(function(y){y&&d.setAttribute(xZ,y)}).catch(function(y){i._diag.warn("getFetchBodyLength",y)});function f(y,E){i._applyAttributesAfterFetch(y,u,E),i._endSpan(y,h,{status:E.status||0,statusText:E.message,url:c})}function m(y,E){i._applyAttributesAfterFetch(y,u,E),E.status>=200&&E.status<400?i._endSpan(y,h,E):i._endSpan(y,h,{status:E.status,statusText:E.statusText,url:c})}function p(y,E,T){try{var I=T.clone(),R=T.clone(),N=I.body;if(N){var V=N.getReader(),Z=function(){V.read().then(function(w){var L=w.done;L?m(y,R):Z()},function(w){f(y,w)})};Z()}else m(y,T)}finally{E(T)}}function g(y,E,T){try{f(y,T)}finally{E(T)}}return new Promise(function(y,E){return te.with(oe.setSpan(te.active(),d),function(){return i._addHeaders(u,c),i._tasksCount++,n.apply(l,u instanceof Request?[u]:[c,u]).then(p.bind(l,d,y),g.bind(l,d,E))})})}}},e.prototype._applyAttributesAfterFetch=function(t,n,i){var s=this,o=this.getConfig().applyCustomAttributesOnSpan;o&&vZ(function(){return o(t,n,i)},function(a){a&&s._diag.error("applyCustomAttributesOnSpan",a)})},e.prototype._prepareSpanData=function(t){var n=Um(),i=[];if(typeof PerformanceObserver!="function")return{entries:i,startTime:n,spanUrl:t};var s=new PerformanceObserver(function(o){var a=o.getEntries();a.forEach(function(l){l.initiatorType==="fetch"&&l.name===t&&i.push(l)})});return s.observe({entryTypes:["resource"]}),{entries:i,observer:s,startTime:n,spanUrl:t}},e.prototype.enable=function(){if(Jm){this._diag.warn("this instrumentation is intended for web usage only, it does not instrument Node.js's fetch()");return}SZ(fetch)&&(this._unwrap(Cc,"fetch"),this._diag.debug("removing previous patch for constructor")),this._wrap(Cc,"fetch",this._patchConstructor())},e.prototype.disable=function(){Jm||(this._unwrap(Cc,"fetch"),this._usedResources=new WeakSet)},e}(bZ),Gc=function(){return Gc=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Gc.apply(this,arguments)},nN=function(){function r(e,t,n){this.instrumentationName=e,this.instrumentationVersion=t,this._config={},this._wrap=Ge.wrap,this._unwrap=Ge.unwrap,this._massWrap=Ge.massWrap,this._massUnwrap=Ge.massUnwrap,this.setConfig(n),this._diag=G.createComponentLogger({namespace:e}),this._tracer=oe.getTracer(e,t),this._meter=jr.getMeter(e,t),this._logger=ei.getLogger(e,t),this._updateMetricInstruments()}return Object.defineProperty(r.prototype,"meter",{get:function(){return this._meter},enumerable:!1,configurable:!0}),r.prototype.setMeterProvider=function(e){this._meter=e.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()},Object.defineProperty(r.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),r.prototype.setLoggerProvider=function(e){this._logger=e.getLogger(this.instrumentationName,this.instrumentationVersion)},r.prototype.getModuleDefinitions=function(){var e,t=(e=this.init())!==null&&e!==void 0?e:[];return Array.isArray(t)?t:[t]},r.prototype._updateMetricInstruments=function(){},r.prototype.getConfig=function(){return this._config},r.prototype.setConfig=function(e){this._config=Gc({enabled:!0},e)},r.prototype.setTracerProvider=function(e){this._tracer=e.getTracer(this.instrumentationName,this.instrumentationVersion)},Object.defineProperty(r.prototype,"tracer",{get:function(){return this._tracer},enumerable:!1,configurable:!0}),r.prototype._runSpanCustomizationHook=function(e,t,n,i){if(e)try{e(n,i)}catch(s){this._diag.error("Error running span customization hook due to exception in handler",{triggerName:t},s)}},r}(),iN=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),sN=function(r){iN(e,r);function e(t,n,i){var s=r.call(this,t,n,i)||this;return s._config.enabled&&s.enable(),s}return e}(nN);function oN(r,e,t){var n,i;try{i=r()}catch(s){n=s}finally{return e(n,i),i}}function Ym(r){return typeof r=="function"&&typeof r.__original=="function"&&typeof r.__unwrap=="function"&&r.__wrapped===!0}var li=performance,aN="http.method",lN="http.url",cN="http.host",uN="http.scheme",dN="http.status_code",hN="http.user_agent",fN="http.request_content_length_uncompressed",pN=aN,mN=lN,gN=cN,yN=uN,bN=dN,vN=hN,SN=fN,_N=9,TN=6,EN=Math.pow(10,TN),Hm=Math.pow(10,_N);function Bm(r){var e=r/1e3,t=Math.trunc(e),n=Math.round(r%1e3*EN);return[t,n]}function wN(){var r=li.timeOrigin;if(typeof r!="number"){var e=li;r=e.timing&&e.timing.fetchStart}return r}function Km(r){var e=Bm(wN()),t=Bm(li.now());return RN(e,t)}function RN(r,e){var t=[r[0]+e[0],r[1]+e[1]];return t[1]>=Hm&&(t[1]-=Hm,t[0]+=1),t}var IN=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function CN(r,e){return typeof e=="string"?r===e:!!r.match(e)}function LN(r,e){var t,n;if(!e)return!1;try{for(var i=IN(e),s=i.next();!s.done;s=i.next()){var o=s.value;if(CN(r,o))return!0}}catch(a){t={error:a}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return!1}var xt;(function(r){r.METHOD_OPEN="open",r.METHOD_SEND="send",r.EVENT_ABORT="abort",r.EVENT_ERROR="error",r.EVENT_LOAD="loaded",r.EVENT_TIMEOUT="timeout"})(xt||(xt={}));var ON=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ZN=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},NN=G.createComponentLogger({namespace:"@opentelemetry/opentelemetry-instrumentation-xml-http-request/utils"});function GN(r){if(typeof Document!="undefined"&&r instanceof Document)return new XMLSerializer().serializeToString(document).length;if(r instanceof Blob)return r.size;if(r.byteLength!==void 0)return r.byteLength;if(r instanceof FormData)return xN(r);if(r instanceof URLSearchParams)return zm(r.toString());if(typeof r=="string")return zm(r);NN.warn("unknown body type")}var VN=new TextEncoder;function zm(r){return VN.encode(r).byteLength}function xN(r){var e,t,n=0;try{for(var i=ON(r.entries()),s=i.next();!s.done;s=i.next()){var o=ZN(s.value,2),a=o[0],l=o[1];n+=a.length,l instanceof Blob?n+=l.size:n+=l.length}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n}var jm="0.57.2",Vc;(function(r){r.HTTP_STATUS_TEXT="http.status_text"})(Vc||(Vc={}));var XN=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),kN=300,WN=function(r){XN(e,r);function e(t){t===void 0&&(t={});var n=r.call(this,"@opentelemetry/instrumentation-xml-http-request",jm,t)||this;return n.component="xml-http-request",n.version=jm,n.moduleName=n.component,n._tasksCount=0,n._xhrMem=new WeakMap,n._usedResources=new WeakSet,n}return e.prototype.init=function(){},e.prototype._addHeaders=function(t,n){var i=Vt(n).href;if(!Xm(i,this.getConfig().propagateTraceHeaderCorsUrls)){var s={};Ue.inject(te.active(),s),Object.keys(s).length>0&&this._diag.debug("headers inject skipped due to CORS policy");return}var o={};Ue.inject(te.active(),o),Object.keys(o).forEach(function(a){t.setRequestHeader(a,String(o[a]))})},e.prototype._addChildSpan=function(t,n){var i=this;te.with(oe.setSpan(te.active(),t),function(){var s=i.tracer.startSpan("CORS Preflight",{startTime:n[Y.FETCH_START]});nn(s,n,i.getConfig().ignoreNetworkEvents),s.end(n[Y.RESPONSE_END])})},e.prototype._addFinalSpanAttributes=function(t,n,i){if(typeof i=="string"){var s=Vt(i);n.status!==void 0&&t.setAttribute(bN,n.status),n.statusText!==void 0&&t.setAttribute(Vc.HTTP_STATUS_TEXT,n.statusText),t.setAttribute(gN,s.host),t.setAttribute(yN,s.protocol.replace(":","")),t.setAttribute(vN,navigator.userAgent)}},e.prototype._applyAttributesAfterXHR=function(t,n){var i=this,s=this.getConfig().applyCustomAttributesOnSpan;typeof s=="function"&&oN(function(){return s(t,n)},function(o){o&&i._diag.error("applyCustomAttributesOnSpan",o)})},e.prototype._addResourceObserver=function(t,n){var i=this._xhrMem.get(t);!i||typeof PerformanceObserver!="function"||typeof PerformanceResourceTiming!="function"||(i.createdResources={observer:new PerformanceObserver(function(s){var o=s.getEntries(),a=Vt(n);o.forEach(function(l){l.initiatorType==="xmlhttprequest"&&l.name===a.href&&i.createdResources&&i.createdResources.entries.push(l)})}),entries:[]},i.createdResources.observer.observe({entryTypes:["resource"]}))},e.prototype._clearResources=function(){this._tasksCount===0&&this.getConfig().clearTimingResources&&(li.clearResourceTimings(),this._xhrMem=new WeakMap,this._usedResources=new WeakSet)},e.prototype._findResourceAndAddNetworkEvents=function(t,n,i,s,o){if(!(!i||!s||!o||!t.createdResources)){var a=t.createdResources.entries;(!a||!a.length)&&(a=li.getEntriesByType("resource"));var l=Vm(Vt(i).href,s,o,a,this._usedResources);if(l.mainRequest){var c=l.mainRequest;this._markResourceAsUsed(c);var u=l.corsPreFlightRequest;u&&(this._addChildSpan(n,u),this._markResourceAsUsed(u)),nn(n,c,this.getConfig().ignoreNetworkEvents)}}},e.prototype._cleanPreviousSpanInformation=function(t){var n=this._xhrMem.get(t);if(n){var i=n.callbackToRemoveEvents;i&&i(),this._xhrMem.delete(t)}},e.prototype._createSpan=function(t,n,i){var s;if(LN(n,this.getConfig().ignoreUrls)){this._diag.debug("ignoring span as url matches ignored url");return}var o=i.toUpperCase(),a=this.tracer.startSpan(o,{kind:Qn.CLIENT,attributes:(s={},s[pN]=i,s[mN]=Vt(n).toString(),s)});return a.addEvent(xt.METHOD_OPEN),this._cleanPreviousSpanInformation(t),this._xhrMem.set(t,{span:a,spanUrl:n}),a},e.prototype._markResourceAsUsed=function(t){this._usedResources.add(t)},e.prototype._patchOpen=function(){var t=this;return function(n){var i=t;return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var l=o[0],c=o[1];return i._createSpan(this,c,l),n.apply(this,o)}}},e.prototype._patchSend=function(){var t=this;function n(u,d,h,f){var m=d.callbackToRemoveEvents;typeof m=="function"&&m();var p=d.span,g=d.spanUrl,y=d.sendStartTime;p&&(t._findResourceAndAddNetworkEvents(d,p,g,y,h),p.addEvent(u,f),t._addFinalSpanAttributes(p,d,g),p.end(f),t._tasksCount--),t._clearResources()}function i(u,d){var h=t._xhrMem.get(d);if(h){h.status=d.status,h.statusText=d.statusText,t._xhrMem.delete(d),h.span&&t._applyAttributesAfterXHR(h.span,d);var f=Km(),m=Date.now();setTimeout(function(){n(u,h,f,m)},kN)}}function s(){i(xt.EVENT_ERROR,this)}function o(){i(xt.EVENT_ABORT,this)}function a(){i(xt.EVENT_TIMEOUT,this)}function l(){this.status<299?i(xt.EVENT_LOAD,this):i(xt.EVENT_ERROR,this)}function c(u){u.removeEventListener("abort",o),u.removeEventListener("error",s),u.removeEventListener("load",l),u.removeEventListener("timeout",a);var d=t._xhrMem.get(u);d&&(d.callbackToRemoveEvents=void 0)}return function(u){return function(){for(var h=this,f=[],m=0;m<arguments.length;m++)f[m]=arguments[m];var p=t._xhrMem.get(this);if(!p)return u.apply(this,f);var g=p.span,y=p.spanUrl;if(g&&y){if(t.getConfig().measureRequestSize&&(f!=null&&f[0])){var E=f[0],T=GN(E);T!==void 0&&g.setAttribute(SN,T)}te.with(oe.setSpan(te.active(),g),function(){t._tasksCount++,p.sendStartTime=Km(),g.addEvent(xt.METHOD_SEND),h.addEventListener("abort",o),h.addEventListener("error",s),h.addEventListener("load",l),h.addEventListener("timeout",a),p.callbackToRemoveEvents=function(){c(h),p.createdResources&&p.createdResources.observer.disconnect()},t._addHeaders(h,y),t._addResourceObserver(h,y)})}return u.apply(this,f)}}},e.prototype.enable=function(){this._diag.debug("applying patch to",this.moduleName,this.version),Ym(XMLHttpRequest.prototype.open)&&(this._unwrap(XMLHttpRequest.prototype,"open"),this._diag.debug("removing previous patch from method open")),Ym(XMLHttpRequest.prototype.send)&&(this._unwrap(XMLHttpRequest.prototype,"send"),this._diag.debug("removing previous patch from method send")),this._wrap(XMLHttpRequest.prototype,"open",this._patchOpen()),this._wrap(XMLHttpRequest.prototype,"send",this._patchSend())},e.prototype.disable=function(){this._diag.debug("removing patch from",this.moduleName,this.version),this._unwrap(XMLHttpRequest.prototype,"open"),this._unwrap(XMLHttpRequest.prototype,"send"),this._tasksCount=0,this._xhrMem=new WeakMap,this._usedResources=new WeakSet},e}(sN);const so=1e3,Qm=1e3*2,$m=4*60*60*1e3,xc=15*60*1e3,oo={normal:{bytes:1e7,time:4*60*1e3},canvas:{bytes:16e6,time:5e3}},qm=100,ci="app.highlight.io",AN="https://app.launchdarkly.com",PN={"observability.ld-stg.launchdarkly.com":"ld-stg.launchdarkly.com","observability.app.launchdarkly.com":"app.launchdarkly.com","observability.app.ld.catamorphic.com":"app.ld.catamorphic.com"},MN="/projects/default",UN=new RegExp("pub\\.(?<domain>.+)");/*! js-cookie v3.0.5 | MIT */function ao(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)r[n]=t[n]}return r}var FN={read:function(r){return r[0]==='"'&&(r=r.slice(1,-1)),r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(r){return encodeURIComponent(r).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function Xc(r,e){function t(i,s,o){if(typeof document!="undefined"){o=ao({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var l in o)o[l]&&(a+="; "+l,o[l]!==!0&&(a+="="+o[l].split(";")[0]));return document.cookie=i+"="+r.write(s,i)+a}}function n(i){if(!(typeof document=="undefined"||arguments.length&&!i)){for(var s=document.cookie?document.cookie.split("; "):[],o={},a=0;a<s.length;a++){var l=s[a].split("="),c=l.slice(1).join("=");try{var u=decodeURIComponent(l[0]);if(o[u]=r.read(c,u),i===u)break}catch(d){}}return i?o[i]:o}}return Object.create({set:t,get:n,remove:function(i,s){t(i,"",ao({},s,{expires:-1}))},withAttributes:function(i){return Xc(this.converter,ao({},this.attributes,i))},withConverter:function(i){return Xc(ao({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(r)}})}var kc=Xc(FN,{path:"/"});const eg=Object.create(null),Ve=(r,e,...t)=>{const n=`[@launchdarkly plugins]: (${r}): `;console[e].apply(console,[n,...t]),DN(n,...t)},Qt=(r,e,t,...n)=>{eg[`${r}-${e}`]||(eg[`${r}-${e}`]=!0,Ve(r,t,...n))},DN=(r,...e)=>D(this,null,function*(){try{const{LDObserve:t}=yield Promise.resolve().then(()=>lk);t.recordLog(`${r}${e}`,"warn")}catch(t){}});var ui=(r=>(r.CLIENT_ID="highlightClientID",r))(ui||{});let lo="localStorage",Wc=!0;class JN{constructor(){v(this,"storage",{})}get length(){return Object.keys(this.storage).length}key(e){var n;return(n=Object.keys(this.storage)[e])!=null?n:null}getItem(e){var t;return(t=this.storage[e])!=null?t:""}setItem(e,t){this.storage[e]=t}removeItem(e){delete this.storage[e]}}class YN{getItem(e){var t;return(t=kc.get(e))!=null?t:""}setItem(e,t){if(!Wc)return;const n=new Date;n.setTime(n.getTime()+xc),kc.set(e,t,{expires:n})}removeItem(e){Wc&&kc.remove(e)}}const sn=new JN,co=new YN,di=()=>{let r=null;if(typeof window=="undefined")return sn;try{switch(lo){case"localStorage":r=window.localStorage;break;case"sessionStorage":r=window.sessionStorage;break}r||(Qt("storage","getPersistentStorage","debug",`persistent storage was not found for mode ${lo}; using global storage`),r=sn)}catch(e){Qt("storage","getPersistentStorage","debug","failed to get persistent storage; using global storage",e),r=sn}return r},tg=r=>{lo=r},uo=r=>{Wc=r},xe=r=>{try{return di().getItem(r)}catch(e){return Qt("storage","getItem","debug",`failed to get item ${r}; using global storage`,e),sn.getItem(r)}},rt=(r,e)=>{co.setItem(r,e);try{return di().setItem(r,e)}catch(t){return Qt("storage","setItem","debug",`failed to set item ${r}; using global storage`,t),sn.setItem(r,e)}},on=r=>{co.removeItem(r);try{return di().removeItem(r)}catch(e){return Qt("storage","removeItem","debug",`failed to remove item ${r}; using global storage`,e),sn.removeItem(r)}},HN=r=>{if(lo==="sessionStorage"){console.warn("highlight.io cannot use local storage; segment integration will not work");return}if(typeof window=="undefined"){console.warn("highlight.io cannot use local storage (not a window); segment integration will not work");return}const e=window.localStorage.setItem;window.localStorage.setItem=function(){const[t,n]=arguments;r({keyName:t,keyValue:n}),e.apply(this,[t,n])}};var _e=(r=>(r.SEGMENT_LAST_SENT_HASH_KEY="HIGHLIGHT_SEGMENT_LAST_SENT_HASH_KEY",r.SESSION_ID="sessionID",r.SESSION_DATA="sessionData",r.USER_IDENTIFIER="highlightIdentifier",r.USER_OBJECT="highlightUserObject",r))(_e||{});const ho=r=>`${_e.SESSION_DATA}_${r}`,Xt=()=>{var r;return typeof globalThis!="undefined"&&((r=globalThis.persistentSessionSecureID)!=null&&r.length)?globalThis.persistentSessionSecureID:rg()},BN=r=>{typeof globalThis!="undefined"&&(r!=null&&r.length)&&(globalThis.persistentSessionSecureID=r)},rg=()=>{var r;return(r=xe(_e.SESSION_ID))!=null?r:""},$t=r=>{rt(_e.SESSION_ID,r)},KN=r=>{const e=ho(r);return JSON.parse(xe(e)||"{}")},kt=r=>{r||(r=rg());let e=KN(r);if(e&&e.lastPushTime&&Date.now()-e.lastPushTime<xc)return e;on(ho(r))},nt=function(r){if(!(r!=null&&r.sessionSecureID))return;const e=r.sessionSecureID;BN(e);const t=ho(e);rt(t,JSON.stringify(r)),zN(t)},ng=function(){const r=co.getItem(_e.SESSION_ID);$t(r);const e=ho(r),t=co.getItem(e);try{nt(JSON.parse(t))}catch(n){}};function zN(r){const e=`${_e.SESSION_DATA}_`;for(let t=di().length-1;t>=0;t--){const n=di().key(t);if(n&&n.startsWith(e)&&n!==r)try{const i=JSON.parse(xe(n)||"{}");i.lastPushTime!==void 0&&Date.now()-i.lastPushTime>=xc&&(Qt("highlightSession","pruneSessionData","debug",`removing session data for stale key ${n}`),on(n))}catch(i){Qt("highlightSession","pruneSessionData","error",`failed to parse session data for key ${n}`,i)}}}const ig=(r,e,t)=>{const n=sg(e,r.headers,t);return W(S({},r),{headers:n})},sg=(r,e,t)=>{var i,s;const n=S({},e);return t?((i=Object.keys(n))==null||i.forEach(o=>{[...t].includes(o==null?void 0:o.toLowerCase())||(n[o]="[REDACTED]")}),n):((s=Object.keys(n))==null||s.forEach(o=>{[...jN,...r].includes(o==null?void 0:o.toLowerCase())&&(n[o]="[REDACTED]")}),n)},jN=["authorization","cookie","proxy-authorization","token"],og=["https://www.googleapis.com/identitytoolkit","https://securetoken.googleapis.com"],QN=new RegExp("sdk\\/evalx\\/[^/]+\\/contexts\\/(?<context>[^/?]*)\\??.*?"),$N=new RegExp("\\/eval\\/[^/]+\\/(?<context>[^/?]*)\\??.*?");function qN(r){return!!(r.includes("/sdk/evalx")&&r.match(QN)||r.includes("/eval/")&&r.match($N))}const ag="X-Highlight-Request",lg=r=>{let e=r;return!r.startsWith("https://")&&!r.startsWith("http://")&&(e=`${window.location.origin}${e}`),e.replace(/\/+$/,"")},eG=(r,{headersToRedact:e,headersToRecord:t,requestResponseSanitizer:n})=>{var l,c;let i=r;if(n){let d=!0;try{i.request.body=JSON.parse(i.request.body)}catch(f){d=!1}let h=!0;try{i.response.body=JSON.parse(i.response.body)}catch(f){h=!1}try{i=n(i)}catch(f){}finally{d=d&&!!((l=i==null?void 0:i.request)!=null&&l.body),h=h&&!!((c=i==null?void 0:i.response)!=null&&c.body),d&&(i.request.body=JSON.stringify(i.request.body)),h&&(i.response.body=JSON.stringify(i.response.body))}if(!i)return null}const u=i,{request:s,response:o}=u,a=We(u,["request","response"]);return S({request:ig(s,e,t),response:ig(o,e,t)},a)},cg=(r,e,t,n)=>{r.sort((l,c)=>l.responseEnd-c.responseEnd);const i={xmlhttprequest:{},others:{},fetch:{}},s=r.reduce((l,c)=>{const u=lg(c.name);return c.initiatorType===t?l[t][u]=[...l[t][u]||[],c]:l.others[u]=[...l.others[u]||[],c],l},i);let o={};o=e.reduce((l,c)=>{const u=lg(c.request.url);return l[u]=[...l[u]||[],c],l},o);for(let l in s[t]){const c=s[t][l],u=o[l];if(!u)continue;const d=Math.max(c.length-u.length,0);for(let h=d;h<c.length;h++)c[h]&&(c[h].requestResponsePair=u[h-d])}let a=[];for(let l in s)for(let c in s[l])a=a.concat(s[l][c]);return a.sort((l,c)=>l.fetchStart-c.fetchStart).reduce((l,c)=>{let u=c.requestResponsePair;return u&&(u=eG(c.requestResponsePair,n),!u)||(c.toJSON=function(){const d=window.performance.timeOrigin;return{initiatorType:this.initiatorType,startTimeAbs:d+this.startTime,connectStartAbs:d+this.connectStart,connectEndAbs:d+this.connectEnd,domainLookupStartAbs:d+this.domainLookupStart,domainLookupEndAbs:d+this.domainLookupEnd,fetchStartAbs:d+this.fetchStart,redirectStartAbs:d+this.redirectStart,redirectEndAbs:d+this.redirectEnd,requestStartAbs:d+this.requestStart,responseStartAbs:d+this.responseStart,responseEndAbs:d+this.responseEnd,secureConnectionStartAbs:d+this.secureConnectionStart,workerStartAbs:d+this.workerStart,name:this.name,transferSize:this.transferSize,encodedBodySize:this.encodedBodySize,decodedBodySize:this.decodedBodySize,nextHopProtocol:this.nextHopProtocol,requestResponsePairs:u}},l.push(c)),l},[])},tG=r=>["events.ld.catamorphic.com","events.launchdarkly.com"].some(e=>r.toLocaleLowerCase().includes(e)),rG=r=>qN(r),nG=(r,e)=>e.some(t=>r.toLocaleLowerCase().includes(t)),fo=(r,e,t)=>!nG(r,e)&&!rG(r)&&!tG(r),Ac=(r,e,t)=>{var s;if(t.some(o=>r.toLowerCase().includes(o)))return!1;let n=[];e===!0?(n=["localhost",/^\//],(s=window==null?void 0:window.location)!=null&&s.host&&n.push(window.location.host)):e instanceof Array&&(n=e);let i=!1;return n.forEach(o=>{r.match(o)&&(i=!0)}),i};function iG(r){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=t.length,i=0;i<r;i++)e+=t.charAt(Math.floor(Math.random()*n));return e}const Pc=()=>{const r=iG(10),e=Y1(),t=e==null?void 0:e.spanContext().traceId;return[Xt(),t!=null?t:r]},ug=(r,e)=>r+"/"+e,sG=(r,e,t,n,i,s)=>{const o=XMLHttpRequest.prototype,a=o.open,l=o.send,c=o.setRequestHeader;return o.open=function(u,d){return typeof d=="string"?this._url=d:this._url=d.toString(),this._method=u,this._requestHeaders={},this._shouldRecordHeaderAndBody=!n.some(h=>this._url.toLowerCase().includes(h)),a.apply(this,arguments)},o.setRequestHeader=function(u,d){return this._requestHeaders[u]=d,c.apply(this,arguments)},o.send=function(u){if(!fo(this._url,e))return l.apply(this,arguments);const[d,h]=Pc();Ac(this._url,t,n)&&this.setRequestHeader(ag,ug(d,h));const f=this._shouldRecordHeaderAndBody,m={sessionSecureID:d,id:h,url:this._url,verb:this._method,headers:f?this._requestHeaders:{},body:void 0};if(f&&u){const p=dg(u,m.url);p&&(this._body=p,m.body=qt(p,i,s,m.headers))}return this.addEventListener("load",function(){return D(this,null,function*(){const p={status:this.status,headers:{},body:void 0};if(f){const E=this.getAllResponseHeaders().trim().split(/[\r\n]+/),T={};if(E.forEach(function(I){const R=I.split(": "),N=R.shift();T[N]=R.join(": ")}),p.headers=T,u){const I=dg(u,m.url);I&&(m.body=qt(I,i,s,p.headers))}if(this.responseType===""||this.responseType==="text")p.body=qt(this.responseText,i,s,p.headers),p.size=this.responseText.length*8;else if(this.responseType==="blob"){if(this.response instanceof Blob)try{const I=yield this.response.text();p.body=qt(I,i,s,p.headers),p.size=this.response.size}catch(I){}}else try{p.body=qt(this.response,i,s,p.headers)}catch(I){}}r({request:m,response:p,urlBlocked:!f})})}),this.addEventListener("error",function(){return D(this,null,function*(){const p={status:this.status,headers:void 0,body:void 0};r({request:m,response:p,urlBlocked:!1})})}),l.apply(this,arguments)},()=>{o.open=a,o.send=l,o.setRequestHeader=c}},dg=(r,e)=>{if(typeof r=="string"){if(!((e!=null&&e.includes("localhost")||e!=null&&e.includes("highlight.run"))&&(r.includes("pushPayload")||r.includes("pushSessionEvents"))))return r}else if(typeof r=="object"||typeof r=="number"||typeof r=="boolean")return dt(r);return null},hg=64*1024,oG={"application/json":64*1024*1024,"text/plain":64*1024*1024},qt=(r,e,t,n)=>{var s,o,a;let i=hg;if(n){let l="";typeof n.get=="function"?l=(s=n.get("content-type"))!=null?s:"":l=(o=n["content-type"])!=null?o:"";try{l=l.split(";")[0]}catch(c){}i=(a=oG[l])!=null?a:hg}if(r){if(e)try{const l=JSON.parse(r);Array.isArray(l)?l.forEach(c=>{Object.keys(c).forEach(u=>{e.includes(u.toLocaleLowerCase())&&(c[u]="[REDACTED]")})}):Object.keys(l).forEach(c=>{e.includes(c.toLocaleLowerCase())&&(l[c]="[REDACTED]")}),r=JSON.stringify(l)}catch(l){}if(t)try{const l=JSON.parse(r);Object.keys(l).forEach(c=>{t.includes(c.toLocaleLowerCase())||(l[c]="[REDACTED]")}),r=JSON.stringify(l)}catch(l){}}try{r=r.slice(0,i)}catch(l){}return r},aG=(r,e,t,n,i,s)=>{const o=window._fetchProxy;return window._fetchProxy=function(a,l){const{method:c,url:u}=lG(a,l);if(!fo(u,e))return o.call(this,a,l);const[d,h]=Pc();if(Ac(u,t,n)){l=l||{};let g=new Headers(l.headers);a instanceof Request&&[...a.headers].forEach(([y,E])=>g.set(y,E)),g.set(ag,ug(d,h)),l.headers=Object.fromEntries(g.entries())}const f={sessionSecureID:d,id:h,headers:{},body:void 0,url:u,verb:c},m=!n.some(g=>u.toLowerCase().includes(g));m&&(f.headers=Object.fromEntries(new Headers(l==null?void 0:l.headers).entries()),f.body=qt(l==null?void 0:l.body,i,s,l==null?void 0:l.headers));let p=o.call(this,a,l);return cG(p,f,r,m,i,s),p},()=>{window._fetchProxy=o}},lG=(r,e)=>{const t=e&&e.method||typeof r=="object"&&"method"in r&&r.method||"GET";let n;return typeof r=="object"?"url"in r&&r.url?n=r.url:n=r.toString():n=r,{method:t,url:n}},cG=(r,e,t,n,i,s)=>{const o=a=>D(this,null,function*(){let l={body:void 0,headers:void 0,status:0,size:0},c=!1,u=!n;"stack"in a||a instanceof Error?(l=W(S({},l),{body:a.message,status:0,size:void 0}),c=!0):"status"in a&&(l=W(S({},l),{status:a.status}),n&&(l.body=yield fg(a,s,i),l.headers=Object.fromEntries(a.headers.entries()),l.size=l.body.length*8),(a.type==="opaque"||a.type==="opaqueredirect")&&(u=!0,l=W(S({},l),{body:"CORS blocked request"})),c=!0),c&&t({request:e,response:l,urlBlocked:u})});r.then(o).catch(()=>{})},fg=(r,e,t)=>D(this,null,function*(){let n;try{const s=r.clone().body;if(s){let o=s.getReader(),a=new TextDecoder,l,c="";for(;!(l=yield o.read()).done;){let u=l.value;c+=a.decode(u)}n=c,n=qt(n,t,e,r.headers)}else n=""}catch(i){n=`Unable to clone response: ${i}`}return n});var pg=function(){function r(e){this._delegate=e}return r.prototype.export=function(e,t){this._delegate.export(e,t)},r.prototype.forceFlush=function(){return this._delegate.forceFlush()},r.prototype.shutdown=function(){return this._delegate.shutdown()},r}(),uG=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),mg=function(r){uG(e,r);function e(t,n,i){var s=r.call(this,t)||this;return s.name="OTLPExporterError",s.data=i,s.code=n,s}return e}(Error);function dG(r){if(!Number.isNaN(r)&&Number.isFinite(r)&&r>0)return r;throw new Error("Configuration: timeoutMillis is invalid, expected number greater than 0 (actual: '"+r+"')")}function hG(r){if(r!=null)return function(){return r}}function fG(r,e,t){var n,i,s,o,a,l;return{timeoutMillis:dG((i=(n=r.timeoutMillis)!==null&&n!==void 0?n:e.timeoutMillis)!==null&&i!==void 0?i:t.timeoutMillis),concurrencyLimit:(o=(s=r.concurrencyLimit)!==null&&s!==void 0?s:e.concurrencyLimit)!==null&&o!==void 0?o:t.concurrencyLimit,compression:(l=(a=r.compression)!==null&&a!==void 0?a:e.compression)!==null&&l!==void 0?l:t.compression}}function pG(){return{timeoutMillis:1e4,concurrencyLimit:30,compression:"none"}}var mG=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})},gG=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},yG=function(){function r(e){this._sendingPromises=[],this._concurrencyLimit=e}return r.prototype.pushPromise=function(e){var t=this;if(this.hasReachedLimit())throw new Error("Concurrency Limit reached");this._sendingPromises.push(e);var n=function(){var i=t._sendingPromises.indexOf(e);t._sendingPromises.splice(i,1)};e.then(n,n)},r.prototype.hasReachedLimit=function(){return this._sendingPromises.length>=this._concurrencyLimit},r.prototype.awaitAll=function(){return mG(this,void 0,void 0,function(){return gG(this,function(e){switch(e.label){case 0:return[4,Promise.all(this._sendingPromises)];case 1:return e.sent(),[2]}})})},r}();function bG(r){return new yG(r.concurrencyLimit)}function vG(r){return Object.prototype.hasOwnProperty.call(r,"partialSuccess")}function SG(){return{handleResponse:function(r){r==null||!vG(r)||r.partialSuccess==null||Object.keys(r.partialSuccess).length===0||G.warn("Received Partial Success response:",JSON.stringify(r.partialSuccess))}}}var _G=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})},TG=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},EG=function(){function r(e,t,n,i,s){this._transport=e,this._serializer=t,this._responseHandler=n,this._promiseQueue=i,this._timeout=s,this._diagLogger=G.createComponentLogger({namespace:"OTLPExportDelegate"})}return r.prototype.export=function(e,t){var n=this;if(this._diagLogger.debug("items to be sent",e),this._promiseQueue.hasReachedLimit()){t({code:Fe.FAILED,error:new Error("Concurrent export limit reached")});return}var i=this._serializer.serializeRequest(e);if(i==null){t({code:Fe.FAILED,error:new Error("Nothing to send")});return}this._promiseQueue.pushPromise(this._transport.send(i,this._timeout).then(function(s){if(s.status==="success"){if(s.data!=null)try{n._responseHandler.handleResponse(n._serializer.deserializeResponse(s.data))}catch(o){n._diagLogger.warn("Export succeeded but could not deserialize response - is the response specification compliant?",o,s.data)}t({code:Fe.SUCCESS});return}else if(s.status==="failure"&&s.error){t({code:Fe.FAILED,error:s.error});return}else s.status==="retryable"?t({code:Fe.FAILED,error:new mg("Export failed with retryable status")}):t({code:Fe.FAILED,error:new mg("Export failed with unknown error")})},function(s){return t({code:Fe.FAILED,error:s})}))},r.prototype.forceFlush=function(){return this._promiseQueue.awaitAll()},r.prototype.shutdown=function(){return _G(this,void 0,void 0,function(){return TG(this,function(e){switch(e.label){case 0:return this._diagLogger.debug("shutdown started"),[4,this.forceFlush()];case 1:return e.sent(),this._transport.shutdown(),[2]}})})},r}();function wG(r,e){return new EG(r.transport,r.serializer,SG(),r.promiseHandler,e.timeout)}function gg(r,e,t){return wG({transport:t,serializer:e,promiseHandler:bG(r)},{timeout:r.timeoutMillis})}function yg(r){return r>=48&&r<=57?r-48:r>=97&&r<=102?r-87:r-55}function Mc(r){for(var e=new Uint8Array(r.length/2),t=0,n=0;n<r.length;n+=2){var i=yg(r.charCodeAt(n)),s=yg(r.charCodeAt(n+1));e[t++]=i<<4|s}return e}var RG=9,IG=Math.pow(10,RG);function CG(r){return r[0]*IG+r[1]}function bg(r){var e=BigInt(1e9);return BigInt(r[0])*e+BigInt(r[1])}function LG(r){var e=Number(BigInt.asUintN(32,r)),t=Number(BigInt.asUintN(32,r>>BigInt(32)));return{low:e,high:t}}function vg(r){var e=bg(r);return LG(e)}function OG(r){var e=bg(r);return e.toString()}var ZG=typeof BigInt!="undefined"?OG:CG;function Sg(r){return r}function _g(r){if(r!==void 0)return Mc(r)}var NG={encodeHrTime:vg,encodeSpanContext:Mc,encodeOptionalSpanContext:_g};function Tg(r){var e,t;if(r===void 0)return NG;var n=(e=r.useLongBits)!==null&&e!==void 0?e:!0,i=(t=r.useHex)!==null&&t!==void 0?t:!1;return{encodeHrTime:n?vg:ZG,encodeSpanContext:i?Sg:Mc,encodeOptionalSpanContext:i?Sg:_g}}var GG=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s};function Eg(r){return{attributes:vr(r.attributes),droppedAttributesCount:0}}function wg(r){return{name:r.name,version:r.version}}function vr(r){return Object.keys(r).map(function(e){return Rg(e,r[e])})}function Rg(r,e){return{key:r,value:Ig(e)}}function Ig(r){var e=typeof r;return e==="string"?{stringValue:r}:e==="number"?Number.isInteger(r)?{intValue:r}:{doubleValue:r}:e==="boolean"?{boolValue:r}:r instanceof Uint8Array?{bytesValue:r}:Array.isArray(r)?{arrayValue:{values:r.map(Ig)}}:e==="object"&&r!=null?{kvlistValue:{values:Object.entries(r).map(function(t){var n=GG(t,2),i=n[0],s=n[1];return Rg(i,s)})}}:{}}var mt;(function(r){r[r.DELTA=0]="DELTA",r[r.CUMULATIVE=1]="CUMULATIVE"})(mt||(mt={}));var Et;(function(r){r[r.HISTOGRAM=0]="HISTOGRAM",r[r.EXPONENTIAL_HISTOGRAM=1]="EXPONENTIAL_HISTOGRAM",r[r.GAUGE=2]="GAUGE",r[r.SUM=3]="SUM"})(Et||(Et={}));var VG=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Cg=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})},Lg=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},xG=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},XG=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))},kG=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function WG(r){return r!=null}function Og(r){var e=Object.keys(r);return e.length===0?"":(e=e.sort(),JSON.stringify(e.map(function(t){return[t,r[t]]})))}function AG(r){var e,t;return r.name+":"+((e=r.version)!==null&&e!==void 0?e:"")+":"+((t=r.schemaUrl)!==null&&t!==void 0?t:"")}var Zg=function(r){VG(e,r);function e(t){var n=r.call(this,t)||this;return Object.setPrototypeOf(n,e.prototype),n}return e}(Error);function hi(r,e){var t,n=new Promise(function(s,o){t=setTimeout(function(){o(new Zg("Operation timed out."))},e)});return Promise.race([r,n]).then(function(i){return clearTimeout(t),i},function(i){throw clearTimeout(t),i})}function PG(r){return Cg(this,void 0,void 0,function(){var e=this;return Lg(this,function(t){return[2,Promise.all(r.map(function(n){return Cg(e,void 0,void 0,function(){var i,s;return Lg(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,n];case 1:return i=o.sent(),[2,{status:"fulfilled",value:i}];case 2:return s=o.sent(),[2,{status:"rejected",reason:s}];case 3:return[2]}})})}))]})})}function MG(r){return r.status==="rejected"}function Ng(r,e){var t=[];return r.forEach(function(n){t.push.apply(t,XG([],xG(e(n)),!1))}),t}function UG(r,e){var t,n;if(r.size!==e.size)return!1;try{for(var i=kG(r),s=i.next();!s.done;s=i.next()){var o=s.value;if(!e.has(o))return!1}}catch(a){t={error:a}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return!0}function FG(r,e){for(var t=0,n=r.length-1,i=r.length;n>=t;){var s=t+Math.trunc((n-t)/2);r[s]<e?t=s+1:(i=s,n=s-1)}return i}function DG(r,e){return r.toLowerCase()===e.toLowerCase()}var Sr;(function(r){r[r.DROP=0]="DROP",r[r.SUM=1]="SUM",r[r.LAST_VALUE=2]="LAST_VALUE",r[r.HISTOGRAM=3]="HISTOGRAM",r[r.EXPONENTIAL_HISTOGRAM=4]="EXPONENTIAL_HISTOGRAM"})(Sr||(Sr={}));var JG=function(){function r(){this.kind=Sr.DROP}return r.prototype.createAccumulation=function(){},r.prototype.merge=function(e,t){},r.prototype.diff=function(e,t){},r.prototype.toMetricData=function(e,t,n,i){},r}(),j;(function(r){r.COUNTER="COUNTER",r.GAUGE="GAUGE",r.HISTOGRAM="HISTOGRAM",r.UP_DOWN_COUNTER="UP_DOWN_COUNTER",r.OBSERVABLE_COUNTER="OBSERVABLE_COUNTER",r.OBSERVABLE_GAUGE="OBSERVABLE_GAUGE",r.OBSERVABLE_UP_DOWN_COUNTER="OBSERVABLE_UP_DOWN_COUNTER"})(j||(j={}));function er(r,e,t){var n,i,s,o;return KG(r)||G.warn('Invalid metric name: "'+r+'". The metric name should be a ASCII string with a length no greater than 255 characters.'),{name:r,type:e,description:(n=t==null?void 0:t.description)!==null&&n!==void 0?n:"",unit:(i=t==null?void 0:t.unit)!==null&&i!==void 0?i:"",valueType:(s=t==null?void 0:t.valueType)!==null&&s!==void 0?s:Ht.DOUBLE,advice:(o=t==null?void 0:t.advice)!==null&&o!==void 0?o:{}}}function YG(r,e){var t,n;return{name:(t=r.name)!==null&&t!==void 0?t:e.name,description:(n=r.description)!==null&&n!==void 0?n:e.description,type:e.type,unit:e.unit,valueType:e.valueType,advice:e.advice}}function HG(r,e){return DG(r.name,e.name)&&r.unit===e.unit&&r.type===e.type&&r.valueType===e.valueType}var BG=/^[a-z][a-z0-9_.\-/]{0,254}$/i;function KG(r){return r.match(BG)!=null}var zG=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s};function jG(r){var e=r.map(function(){return 0});return e.push(0),{buckets:{boundaries:r,counts:e},sum:0,count:0,hasMinMax:!1,min:1/0,max:-1/0}}var Uc=function(){function r(e,t,n,i){n===void 0&&(n=!0),i===void 0&&(i=jG(t)),this.startTime=e,this._boundaries=t,this._recordMinMax=n,this._current=i}return r.prototype.record=function(e){if(!Number.isNaN(e)){this._current.count+=1,this._current.sum+=e,this._recordMinMax&&(this._current.min=Math.min(e,this._current.min),this._current.max=Math.max(e,this._current.max),this._current.hasMinMax=!0);var t=FG(this._boundaries,e);this._current.buckets.counts[t]+=1}},r.prototype.setStartTime=function(e){this.startTime=e},r.prototype.toPointValue=function(){return this._current},r}(),Gg=function(){function r(e,t){this._boundaries=e,this._recordMinMax=t,this.kind=Sr.HISTOGRAM}return r.prototype.createAccumulation=function(e){return new Uc(e,this._boundaries,this._recordMinMax)},r.prototype.merge=function(e,t){for(var n=e.toPointValue(),i=t.toPointValue(),s=n.buckets.counts,o=i.buckets.counts,a=new Array(s.length),l=0;l<s.length;l++)a[l]=s[l]+o[l];var c=1/0,u=-1/0;return this._recordMinMax&&(n.hasMinMax&&i.hasMinMax?(c=Math.min(n.min,i.min),u=Math.max(n.max,i.max)):n.hasMinMax?(c=n.min,u=n.max):i.hasMinMax&&(c=i.min,u=i.max)),new Uc(e.startTime,n.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:n.buckets.boundaries,counts:a},count:n.count+i.count,sum:n.sum+i.sum,hasMinMax:this._recordMinMax&&(n.hasMinMax||i.hasMinMax),min:c,max:u})},r.prototype.diff=function(e,t){for(var n=e.toPointValue(),i=t.toPointValue(),s=n.buckets.counts,o=i.buckets.counts,a=new Array(s.length),l=0;l<s.length;l++)a[l]=o[l]-s[l];return new Uc(t.startTime,n.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:n.buckets.boundaries,counts:a},count:i.count-n.count,sum:i.sum-n.sum,hasMinMax:!1,min:1/0,max:-1/0})},r.prototype.toMetricData=function(e,t,n,i){return{descriptor:e,aggregationTemporality:t,dataPointType:Et.HISTOGRAM,dataPoints:n.map(function(s){var o=zG(s,2),a=o[0],l=o[1],c=l.toPointValue(),u=e.type===j.GAUGE||e.type===j.UP_DOWN_COUNTER||e.type===j.OBSERVABLE_GAUGE||e.type===j.OBSERVABLE_UP_DOWN_COUNTER;return{attributes:a,startTime:l.startTime,endTime:i,value:{min:c.hasMinMax?c.min:void 0,max:c.hasMinMax?c.max:void 0,sum:u?void 0:c.sum,buckets:c.buckets,count:c.count}}})}},r}(),Fc=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},Dc=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))},Vg=function(){function r(e,t,n,i){e===void 0&&(e=new QG),t===void 0&&(t=0),n===void 0&&(n=0),i===void 0&&(i=0),this.backing=e,this.indexBase=t,this.indexStart=n,this.indexEnd=i}return Object.defineProperty(r.prototype,"offset",{get:function(){return this.indexStart},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"length",{get:function(){return this.backing.length===0||this.indexEnd===this.indexStart&&this.at(0)===0?0:this.indexEnd-this.indexStart+1},enumerable:!1,configurable:!0}),r.prototype.counts=function(){var e=this;return Array.from({length:this.length},function(t,n){return e.at(n)})},r.prototype.at=function(e){var t=this.indexBase-this.indexStart;return e<t&&(e+=this.backing.length),e-=t,this.backing.countAt(e)},r.prototype.incrementBucket=function(e,t){this.backing.increment(e,t)},r.prototype.decrementBucket=function(e,t){this.backing.decrement(e,t)},r.prototype.trim=function(){for(var e=0;e<this.length;e++)if(this.at(e)!==0){this.indexStart+=e;break}else if(e===this.length-1){this.indexStart=this.indexEnd=this.indexBase=0;return}for(var e=this.length-1;e>=0;e--)if(this.at(e)!==0){this.indexEnd-=this.length-e-1;break}this._rotate()},r.prototype.downscale=function(e){this._rotate();for(var t=1+this.indexEnd-this.indexStart,n=1<<e,i=0,s=0,o=this.indexStart;o<=this.indexEnd;){var a=o%n;a<0&&(a+=n);for(var l=a;l<n&&i<t;l++)this._relocateBucket(s,i),i++,o++;s++}this.indexStart>>=e,this.indexEnd>>=e,this.indexBase=this.indexStart},r.prototype.clone=function(){return new r(this.backing.clone(),this.indexBase,this.indexStart,this.indexEnd)},r.prototype._rotate=function(){var e=this.indexBase-this.indexStart;e!==0&&(e>0?(this.backing.reverse(0,this.backing.length),this.backing.reverse(0,e),this.backing.reverse(e,this.backing.length)):(this.backing.reverse(0,this.backing.length),this.backing.reverse(0,this.backing.length+e)),this.indexBase=this.indexStart)},r.prototype._relocateBucket=function(e,t){e!==t&&this.incrementBucket(e,this.backing.emptyBucket(t))},r}(),QG=function(){function r(e){e===void 0&&(e=[0]),this._counts=e}return Object.defineProperty(r.prototype,"length",{get:function(){return this._counts.length},enumerable:!1,configurable:!0}),r.prototype.countAt=function(e){return this._counts[e]},r.prototype.growTo=function(e,t,n){var i=new Array(e).fill(0);i.splice.apply(i,Dc([n,this._counts.length-t],Fc(this._counts.slice(t)),!1)),i.splice.apply(i,Dc([0,t],Fc(this._counts.slice(0,t)),!1)),this._counts=i},r.prototype.reverse=function(e,t){for(var n=Math.floor((e+t)/2)-e,i=0;i<n;i++){var s=this._counts[e+i];this._counts[e+i]=this._counts[t-i-1],this._counts[t-i-1]=s}},r.prototype.emptyBucket=function(e){var t=this._counts[e];return this._counts[e]=0,t},r.prototype.increment=function(e,t){this._counts[e]+=t},r.prototype.decrement=function(e,t){this._counts[e]>=t?this._counts[e]-=t:this._counts[e]=0},r.prototype.clone=function(){return new r(Dc([],Fc(this._counts),!1))},r}(),$G=52,qG=2146435072,eV=1048575,Jc=1023,xg=-Jc+1,Xg=Jc,Yc=Math.pow(2,-1022);function kg(r){var e=new DataView(new ArrayBuffer(8));e.setFloat64(0,r);var t=e.getUint32(0),n=(t&qG)>>20;return n-Jc}function Wg(r){var e=new DataView(new ArrayBuffer(8));e.setFloat64(0,r);var t=e.getUint32(0),n=e.getUint32(4),i=(t&eV)*Math.pow(2,32);return i+n}function Hc(r,e){return r===0||r===Number.POSITIVE_INFINITY||r===Number.NEGATIVE_INFINITY||Number.isNaN(r)?r:r*Math.pow(2,e)}function tV(r){return r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r++,r}var rV=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),fi=function(r){rV(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(Error),nV=function(){function r(e){this._shift=-e}return r.prototype.mapToIndex=function(e){if(e<Yc)return this._minNormalLowerBoundaryIndex();var t=kg(e),n=this._rightShift(Wg(e)-1,$G);return t+n>>this._shift},r.prototype.lowerBoundary=function(e){var t=this._minNormalLowerBoundaryIndex();if(e<t)throw new fi("underflow: "+e+" is < minimum lower boundary: "+t);var n=this._maxNormalLowerBoundaryIndex();if(e>n)throw new fi("overflow: "+e+" is > maximum lower boundary: "+n);return Hc(1,e<<this._shift)},Object.defineProperty(r.prototype,"scale",{get:function(){return this._shift===0?0:-this._shift},enumerable:!1,configurable:!0}),r.prototype._minNormalLowerBoundaryIndex=function(){var e=xg>>this._shift;return this._shift<2&&e--,e},r.prototype._maxNormalLowerBoundaryIndex=function(){return Xg>>this._shift},r.prototype._rightShift=function(e,t){return Math.floor(e*Math.pow(2,-t))},r}(),iV=function(){function r(e){this._scale=e,this._scaleFactor=Hc(Math.LOG2E,e),this._inverseFactor=Hc(Math.LN2,-e)}return r.prototype.mapToIndex=function(e){if(e<=Yc)return this._minNormalLowerBoundaryIndex()-1;if(Wg(e)===0){var t=kg(e);return(t<<this._scale)-1}var n=Math.floor(Math.log(e)*this._scaleFactor),i=this._maxNormalLowerBoundaryIndex();return n>=i?i:n},r.prototype.lowerBoundary=function(e){var t=this._maxNormalLowerBoundaryIndex();if(e>=t){if(e===t)return 2*Math.exp((e-(1<<this._scale))/this._scaleFactor);throw new fi("overflow: "+e+" is > maximum lower boundary: "+t)}var n=this._minNormalLowerBoundaryIndex();if(e<=n){if(e===n)return Yc;if(e===n-1)return Math.exp((e+(1<<this._scale))/this._scaleFactor)/2;throw new fi("overflow: "+e+" is < minimum lower boundary: "+n)}return Math.exp(e*this._inverseFactor)},Object.defineProperty(r.prototype,"scale",{get:function(){return this._scale},enumerable:!1,configurable:!0}),r.prototype._minNormalLowerBoundaryIndex=function(){return xg<<this._scale},r.prototype._maxNormalLowerBoundaryIndex=function(){return(Xg+1<<this._scale)-1},r}(),Ag=-10,Pg=20,sV=Array.from({length:31},function(r,e){return e>10?new iV(e-10):new nV(e-10)});function Mg(r){if(r>Pg||r<Ag)throw new fi("expected scale >= "+Ag+" && <= "+Pg+", got: "+r);return sV[r+10]}var oV=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},po=function(){function r(e,t){this.low=e,this.high=t}return r.combine=function(e,t){return new r(Math.min(e.low,t.low),Math.max(e.high,t.high))},r}(),aV=20,lV=160,Bc=2,cV=function(){function r(e,t,n,i,s,o,a,l,c,u,d){e===void 0&&(e=e),t===void 0&&(t=lV),n===void 0&&(n=!0),i===void 0&&(i=0),s===void 0&&(s=0),o===void 0&&(o=0),a===void 0&&(a=Number.POSITIVE_INFINITY),l===void 0&&(l=Number.NEGATIVE_INFINITY),c===void 0&&(c=new Vg),u===void 0&&(u=new Vg),d===void 0&&(d=Mg(aV)),this.startTime=e,this._maxSize=t,this._recordMinMax=n,this._sum=i,this._count=s,this._zeroCount=o,this._min=a,this._max=l,this._positive=c,this._negative=u,this._mapping=d,this._maxSize<Bc&&(G.warn("Exponential Histogram Max Size set to "+this._maxSize+",                 changing to the minimum size of: "+Bc),this._maxSize=Bc)}return r.prototype.record=function(e){this.updateByIncrement(e,1)},r.prototype.setStartTime=function(e){this.startTime=e},r.prototype.toPointValue=function(){return{hasMinMax:this._recordMinMax,min:this.min,max:this.max,sum:this.sum,positive:{offset:this.positive.offset,bucketCounts:this.positive.counts()},negative:{offset:this.negative.offset,bucketCounts:this.negative.counts()},count:this.count,scale:this.scale,zeroCount:this.zeroCount}},Object.defineProperty(r.prototype,"sum",{get:function(){return this._sum},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"min",{get:function(){return this._min},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"max",{get:function(){return this._max},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"zeroCount",{get:function(){return this._zeroCount},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"scale",{get:function(){return this._count===this._zeroCount?0:this._mapping.scale},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"positive",{get:function(){return this._positive},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"negative",{get:function(){return this._negative},enumerable:!1,configurable:!0}),r.prototype.updateByIncrement=function(e,t){if(!Number.isNaN(e)){if(e>this._max&&(this._max=e),e<this._min&&(this._min=e),this._count+=t,e===0){this._zeroCount+=t;return}this._sum+=e*t,e>0?this._updateBuckets(this._positive,e,t):this._updateBuckets(this._negative,-e,t)}},r.prototype.merge=function(e){this._count===0?(this._min=e.min,this._max=e.max):e.count!==0&&(e.min<this.min&&(this._min=e.min),e.max>this.max&&(this._max=e.max)),this.startTime=e.startTime,this._sum+=e.sum,this._count+=e.count,this._zeroCount+=e.zeroCount;var t=this._minScale(e);this._downscale(this.scale-t),this._mergeBuckets(this.positive,e,e.positive,t),this._mergeBuckets(this.negative,e,e.negative,t)},r.prototype.diff=function(e){this._min=1/0,this._max=-1/0,this._sum-=e.sum,this._count-=e.count,this._zeroCount-=e.zeroCount;var t=this._minScale(e);this._downscale(this.scale-t),this._diffBuckets(this.positive,e,e.positive,t),this._diffBuckets(this.negative,e,e.negative,t)},r.prototype.clone=function(){return new r(this.startTime,this._maxSize,this._recordMinMax,this._sum,this._count,this._zeroCount,this._min,this._max,this.positive.clone(),this.negative.clone(),this._mapping)},r.prototype._updateBuckets=function(e,t,n){var i=this._mapping.mapToIndex(t),s=!1,o=0,a=0;if(e.length===0?(e.indexStart=i,e.indexEnd=e.indexStart,e.indexBase=e.indexStart):i<e.indexStart&&e.indexEnd-i>=this._maxSize?(s=!0,a=i,o=e.indexEnd):i>e.indexEnd&&i-e.indexStart>=this._maxSize&&(s=!0,a=e.indexStart,o=i),s){var l=this._changeScale(o,a);this._downscale(l),i=this._mapping.mapToIndex(t)}this._incrementIndexBy(e,i,n)},r.prototype._incrementIndexBy=function(e,t,n){if(n!==0){if(e.length===0&&(e.indexStart=e.indexEnd=e.indexBase=t),t<e.indexStart){var i=e.indexEnd-t;i>=e.backing.length&&this._grow(e,i+1),e.indexStart=t}else if(t>e.indexEnd){var i=t-e.indexStart;i>=e.backing.length&&this._grow(e,i+1),e.indexEnd=t}var s=t-e.indexBase;s<0&&(s+=e.backing.length),e.incrementBucket(s,n)}},r.prototype._grow=function(e,t){var n=e.backing.length,i=e.indexBase-e.indexStart,s=n-i,o=tV(t);o>this._maxSize&&(o=this._maxSize);var a=o-i;e.backing.growTo(o,s,a)},r.prototype._changeScale=function(e,t){for(var n=0;e-t>=this._maxSize;)e>>=1,t>>=1,n++;return n},r.prototype._downscale=function(e){if(e!==0){if(e<0)throw new Error("impossible change of scale: "+this.scale);var t=this._mapping.scale-e;this._positive.downscale(e),this._negative.downscale(e),this._mapping=Mg(t)}},r.prototype._minScale=function(e){var t=Math.min(this.scale,e.scale),n=po.combine(this._highLowAtScale(this.positive,this.scale,t),this._highLowAtScale(e.positive,e.scale,t)),i=po.combine(this._highLowAtScale(this.negative,this.scale,t),this._highLowAtScale(e.negative,e.scale,t));return Math.min(t-this._changeScale(n.high,n.low),t-this._changeScale(i.high,i.low))},r.prototype._highLowAtScale=function(e,t,n){if(e.length===0)return new po(0,-1);var i=t-n;return new po(e.indexStart>>i,e.indexEnd>>i)},r.prototype._mergeBuckets=function(e,t,n,i){for(var s=n.offset,o=t.scale-i,a=0;a<n.length;a++)this._incrementIndexBy(e,s+a>>o,n.at(a))},r.prototype._diffBuckets=function(e,t,n,i){for(var s=n.offset,o=t.scale-i,a=0;a<n.length;a++){var l=s+a>>o,c=l-e.indexBase;c<0&&(c+=e.backing.length),e.decrementBucket(c,n.at(a))}e.trim()},r}(),uV=function(){function r(e,t){this._maxSize=e,this._recordMinMax=t,this.kind=Sr.EXPONENTIAL_HISTOGRAM}return r.prototype.createAccumulation=function(e){return new cV(e,this._maxSize,this._recordMinMax)},r.prototype.merge=function(e,t){var n=t.clone();return n.merge(e),n},r.prototype.diff=function(e,t){var n=t.clone();return n.diff(e),n},r.prototype.toMetricData=function(e,t,n,i){return{descriptor:e,aggregationTemporality:t,dataPointType:Et.EXPONENTIAL_HISTOGRAM,dataPoints:n.map(function(s){var o=oV(s,2),a=o[0],l=o[1],c=l.toPointValue(),u=e.type===j.GAUGE||e.type===j.UP_DOWN_COUNTER||e.type===j.OBSERVABLE_GAUGE||e.type===j.OBSERVABLE_UP_DOWN_COUNTER;return{attributes:a,startTime:l.startTime,endTime:i,value:{min:c.hasMinMax?c.min:void 0,max:c.hasMinMax?c.max:void 0,sum:u?void 0:c.sum,positive:{offset:c.positive.offset,bucketCounts:c.positive.bucketCounts},negative:{offset:c.negative.offset,bucketCounts:c.negative.bucketCounts},count:c.count,scale:c.scale,zeroCount:c.zeroCount}}})}},r}(),dV=Kn("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function hV(r){return r.setValue(dV,!0)}function fV(){return function(r){G.error(pV(r))}}function pV(r){return typeof r=="string"?r:JSON.stringify(mV(r))}function mV(r){for(var e={},t=r;t!==null;)Object.getOwnPropertyNames(t).forEach(function(n){if(!e[n]){var i=t[n];i&&(e[n]=String(i))}}),t=Object.getPrototypeOf(t);return e}var gV=fV();function Ug(r){try{gV(r)}catch(e){}}var yV=6,bV=Math.pow(10,yV);function Kc(r){var e=r/1e3,t=Math.trunc(e),n=Math.round(r%1e3*bV);return[t,n]}function mo(r){return r[0]*1e6+r[1]/1e3}var zc;(function(r){r[r.SUCCESS=0]="SUCCESS",r[r.FAILED=1]="FAILED"})(zc||(zc={}));function vV(r,e){return new Promise(function(t){te.with(hV(te.active()),function(){r.export(e,function(n){t(n)})})})}var SV={_export:vV},_V=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},jc=function(){function r(e,t,n){t===void 0&&(t=0),n===void 0&&(n=[0,0]),this.startTime=e,this._current=t,this.sampleTime=n}return r.prototype.record=function(e){this._current=e,this.sampleTime=Kc(Date.now())},r.prototype.setStartTime=function(e){this.startTime=e},r.prototype.toPointValue=function(){return this._current},r}(),TV=function(){function r(){this.kind=Sr.LAST_VALUE}return r.prototype.createAccumulation=function(e){return new jc(e)},r.prototype.merge=function(e,t){var n=mo(t.sampleTime)>=mo(e.sampleTime)?t:e;return new jc(e.startTime,n.toPointValue(),n.sampleTime)},r.prototype.diff=function(e,t){var n=mo(t.sampleTime)>=mo(e.sampleTime)?t:e;return new jc(t.startTime,n.toPointValue(),n.sampleTime)},r.prototype.toMetricData=function(e,t,n,i){return{descriptor:e,aggregationTemporality:t,dataPointType:Et.GAUGE,dataPoints:n.map(function(s){var o=_V(s,2),a=o[0],l=o[1];return{attributes:a,startTime:l.startTime,endTime:i,value:l.toPointValue()}})}},r}(),EV=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},pi=function(){function r(e,t,n,i){n===void 0&&(n=0),i===void 0&&(i=!1),this.startTime=e,this.monotonic=t,this._current=n,this.reset=i}return r.prototype.record=function(e){this.monotonic&&e<0||(this._current+=e)},r.prototype.setStartTime=function(e){this.startTime=e},r.prototype.toPointValue=function(){return this._current},r}(),Fg=function(){function r(e){this.monotonic=e,this.kind=Sr.SUM}return r.prototype.createAccumulation=function(e){return new pi(e,this.monotonic)},r.prototype.merge=function(e,t){var n=e.toPointValue(),i=t.toPointValue();return t.reset?new pi(t.startTime,this.monotonic,i,t.reset):new pi(e.startTime,this.monotonic,n+i)},r.prototype.diff=function(e,t){var n=e.toPointValue(),i=t.toPointValue();return this.monotonic&&n>i?new pi(t.startTime,this.monotonic,i,!0):new pi(t.startTime,this.monotonic,i-n)},r.prototype.toMetricData=function(e,t,n,i){return{descriptor:e,aggregationTemporality:t,dataPointType:Et.SUM,dataPoints:n.map(function(s){var o=EV(s,2),a=o[0],l=o[1];return{attributes:a,startTime:l.startTime,endTime:i,value:l.toPointValue()}}),isMonotonic:this.monotonic}},r}(),_r=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Wt=function(){function r(){}return r.Drop=function(){return Dg},r.Sum=function(){return Jg},r.LastValue=function(){return Yg},r.Histogram=function(){return Hg},r.ExponentialHistogram=function(){return NV},r.Default=function(){return GV},r}(),wV=function(r){_r(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.createAggregator=function(t){return e.DEFAULT_INSTANCE},e.DEFAULT_INSTANCE=new JG,e}(Wt),RV=function(r){_r(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.createAggregator=function(t){switch(t.type){case j.COUNTER:case j.OBSERVABLE_COUNTER:case j.HISTOGRAM:return e.MONOTONIC_INSTANCE;default:return e.NON_MONOTONIC_INSTANCE}},e.MONOTONIC_INSTANCE=new Fg(!0),e.NON_MONOTONIC_INSTANCE=new Fg(!1),e}(Wt),IV=function(r){_r(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.createAggregator=function(t){return e.DEFAULT_INSTANCE},e.DEFAULT_INSTANCE=new TV,e}(Wt),CV=function(r){_r(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.createAggregator=function(t){return e.DEFAULT_INSTANCE},e.DEFAULT_INSTANCE=new Gg([0,5,10,25,50,75,100,250,500,750,1e3,2500,5e3,7500,1e4],!0),e}(Wt),LV=function(r){_r(e,r);function e(t,n){n===void 0&&(n=!0);var i=r.call(this)||this;if(i._recordMinMax=n,t==null)throw new Error("ExplicitBucketHistogramAggregation should be created with explicit boundaries, if a single bucket histogram is required, please pass an empty array");t=t.concat(),t=t.sort(function(a,l){return a-l});var s=t.lastIndexOf(-1/0),o=t.indexOf(1/0);return o===-1&&(o=void 0),i._boundaries=t.slice(s+1,o),i}return e.prototype.createAggregator=function(t){return new Gg(this._boundaries,this._recordMinMax)},e}(Wt),OV=function(r){_r(e,r);function e(t,n){t===void 0&&(t=160),n===void 0&&(n=!0);var i=r.call(this)||this;return i._maxSize=t,i._recordMinMax=n,i}return e.prototype.createAggregator=function(t){return new uV(this._maxSize,this._recordMinMax)},e}(Wt),ZV=function(r){_r(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._resolve=function(t){switch(t.type){case j.COUNTER:case j.UP_DOWN_COUNTER:case j.OBSERVABLE_COUNTER:case j.OBSERVABLE_UP_DOWN_COUNTER:return Jg;case j.GAUGE:case j.OBSERVABLE_GAUGE:return Yg;case j.HISTOGRAM:return t.advice.explicitBucketBoundaries?new LV(t.advice.explicitBucketBoundaries):Hg}return G.warn("Unable to recognize instrument type: "+t.type),Dg},e.prototype.createAggregator=function(t){return this._resolve(t).createAggregator(t)},e}(Wt),Dg=new wV,Jg=new RV,Yg=new IV,Hg=new CV,NV=new OV,GV=new ZV,VV=function(r){return Wt.Default()},xV=function(r){return mt.CUMULATIVE},Qc=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})},$c=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Bg=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},XV=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))},kV=function(){function r(e){var t,n,i;this._shutdown=!1,this._aggregationSelector=(t=e==null?void 0:e.aggregationSelector)!==null&&t!==void 0?t:VV,this._aggregationTemporalitySelector=(n=e==null?void 0:e.aggregationTemporalitySelector)!==null&&n!==void 0?n:xV,this._metricProducers=(i=e==null?void 0:e.metricProducers)!==null&&i!==void 0?i:[],this._cardinalitySelector=e==null?void 0:e.cardinalitySelector}return r.prototype.setMetricProducer=function(e){if(this._sdkMetricProducer)throw new Error("MetricReader can not be bound to a MeterProvider again.");this._sdkMetricProducer=e,this.onInitialized()},r.prototype.selectAggregation=function(e){return this._aggregationSelector(e)},r.prototype.selectAggregationTemporality=function(e){return this._aggregationTemporalitySelector(e)},r.prototype.selectCardinalityLimit=function(e){return this._cardinalitySelector?this._cardinalitySelector(e):2e3},r.prototype.onInitialized=function(){},r.prototype.collect=function(e){return Qc(this,void 0,void 0,function(){var t,n,i,s,o,a;return $c(this,function(l){switch(l.label){case 0:if(this._sdkMetricProducer===void 0)throw new Error("MetricReader is not bound to a MetricProducer");if(this._shutdown)throw new Error("MetricReader is shutdown");return[4,Promise.all(XV([this._sdkMetricProducer.collect({timeoutMillis:e==null?void 0:e.timeoutMillis})],Bg(this._metricProducers.map(function(c){return c.collect({timeoutMillis:e==null?void 0:e.timeoutMillis})})),!1))];case 1:return t=Bg.apply(void 0,[l.sent()]),n=t[0],i=t.slice(1),s=n.errors.concat(Ng(i,function(c){return c.errors})),o=n.resourceMetrics.resource,a=n.resourceMetrics.scopeMetrics.concat(Ng(i,function(c){return c.resourceMetrics.scopeMetrics})),[2,{resourceMetrics:{resource:o,scopeMetrics:a},errors:s}]}})})},r.prototype.shutdown=function(e){return Qc(this,void 0,void 0,function(){return $c(this,function(t){switch(t.label){case 0:return this._shutdown?(G.error("Cannot call shutdown twice."),[2]):(e==null?void 0:e.timeoutMillis)!=null?[3,2]:[4,this.onShutdown()];case 1:return t.sent(),[3,4];case 2:return[4,hi(this.onShutdown(),e.timeoutMillis)];case 3:t.sent(),t.label=4;case 4:return this._shutdown=!0,[2]}})})},r.prototype.forceFlush=function(e){return Qc(this,void 0,void 0,function(){return $c(this,function(t){switch(t.label){case 0:return this._shutdown?(G.warn("Cannot forceFlush on already shutdown MetricReader."),[2]):(e==null?void 0:e.timeoutMillis)!=null?[3,2]:[4,this.onForceFlush()];case 1:return t.sent(),[2];case 2:return[4,hi(this.onForceFlush(),e.timeoutMillis)];case 3:return t.sent(),[2]}})})},r}(),WV=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),go=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})},yo=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},AV=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},PV=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))},MV=function(r){WV(e,r);function e(t){var n,i,s,o,a=r.call(this,{aggregationSelector:(n=t.exporter.selectAggregation)===null||n===void 0?void 0:n.bind(t.exporter),aggregationTemporalitySelector:(i=t.exporter.selectAggregationTemporality)===null||i===void 0?void 0:i.bind(t.exporter),metricProducers:t.metricProducers})||this;if(t.exportIntervalMillis!==void 0&&t.exportIntervalMillis<=0)throw Error("exportIntervalMillis must be greater than 0");if(t.exportTimeoutMillis!==void 0&&t.exportTimeoutMillis<=0)throw Error("exportTimeoutMillis must be greater than 0");if(t.exportTimeoutMillis!==void 0&&t.exportIntervalMillis!==void 0&&t.exportIntervalMillis<t.exportTimeoutMillis)throw Error("exportIntervalMillis must be greater than or equal to exportTimeoutMillis");return a._exportInterval=(s=t.exportIntervalMillis)!==null&&s!==void 0?s:6e4,a._exportTimeout=(o=t.exportTimeoutMillis)!==null&&o!==void 0?o:3e4,a._exporter=t.exporter,a}return e.prototype._runOnce=function(){return go(this,void 0,void 0,function(){var t;return yo(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,hi(this._doRun(),this._exportTimeout)];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),t instanceof Zg?(G.error("Export took longer than %s milliseconds and timed out.",this._exportTimeout),[2]):(Ug(t),[3,3]);case 3:return[2]}})})},e.prototype._doRun=function(){var t,n;return go(this,void 0,void 0,function(){var i,s,o,a,l,c;return yo(this,function(u){switch(u.label){case 0:return[4,this.collect({timeoutMillis:this._exportTimeout})];case 1:if(i=u.sent(),s=i.resourceMetrics,o=i.errors,o.length>0&&(c=G).error.apply(c,PV(["PeriodicExportingMetricReader: metrics collection errors"],AV(o),!1)),!s.resource.asyncAttributesPending)return[3,5];u.label=2;case 2:return u.trys.push([2,4,,5]),[4,(n=(t=s.resource).waitForAsyncAttributes)===null||n===void 0?void 0:n.call(t)];case 3:return u.sent(),[3,5];case 4:return a=u.sent(),G.debug("Error while resolving async portion of resource: ",a),Ug(a),[3,5];case 5:return s.scopeMetrics.length===0?[2]:[4,SV._export(this._exporter,s)];case 6:if(l=u.sent(),l.code!==zc.SUCCESS)throw new Error("PeriodicExportingMetricReader: metrics export failed (error "+l.error+")");return[2]}})})},e.prototype.onInitialized=function(){var t=this;this._interval=setInterval(function(){t._runOnce()},this._exportInterval)},e.prototype.onForceFlush=function(){return go(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return[4,this._runOnce()];case 1:return t.sent(),[4,this._exporter.forceFlush()];case 2:return t.sent(),[2]}})})},e.prototype.onShutdown=function(){return go(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return this._interval&&clearInterval(this._interval),[4,this.onForceFlush()];case 1:return t.sent(),[4,this._exporter.shutdown()];case 2:return t.sent(),[2]}})})},e}(kV),UV=function(){function r(){this._registeredViews=[]}return r.prototype.addView=function(e){this._registeredViews.push(e)},r.prototype.findViews=function(e,t){var n=this,i=this._registeredViews.filter(function(s){return n._matchInstrument(s.instrumentSelector,e)&&n._matchMeter(s.meterSelector,t)});return i},r.prototype._matchInstrument=function(e,t){return(e.getType()===void 0||t.type===e.getType())&&e.getNameFilter().match(t.name)&&e.getUnitFilter().match(t.unit)},r.prototype._matchMeter=function(e,t){return e.getNameFilter().match(t.name)&&(t.version===void 0||e.getVersionFilter().match(t.version))&&(t.schemaUrl===void 0||e.getSchemaUrlFilter().match(t.schemaUrl))},r}(),Tr=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),bo=function(){function r(e,t){this._writableMetricStorage=e,this._descriptor=t}return r.prototype._record=function(e,t,n){if(t===void 0&&(t={}),n===void 0&&(n=te.active()),typeof e!="number"){G.warn("non-number value provided to metric "+this._descriptor.name+": "+e);return}this._descriptor.valueType===Ht.INT&&!Number.isInteger(e)&&(G.warn("INT value type cannot accept a floating-point value for "+this._descriptor.name+", ignoring the fractional digits."),e=Math.trunc(e),!Number.isInteger(e))||this._writableMetricStorage.record(e,t,n,Kc(Date.now()))},r}(),FV=function(r){Tr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.add=function(t,n,i){this._record(t,n,i)},e}(bo),DV=function(r){Tr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.add=function(t,n,i){if(t<0){G.warn("negative value provided to counter "+this._descriptor.name+": "+t);return}this._record(t,n,i)},e}(bo),JV=function(r){Tr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.record=function(t,n,i){this._record(t,n,i)},e}(bo),YV=function(r){Tr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.record=function(t,n,i){if(t<0){G.warn("negative value provided to histogram "+this._descriptor.name+": "+t);return}this._record(t,n,i)},e}(bo),vo=function(){function r(e,t,n){this._observableRegistry=n,this._descriptor=e,this._metricStorages=t}return r.prototype.addCallback=function(e){this._observableRegistry.addCallback(e,this)},r.prototype.removeCallback=function(e){this._observableRegistry.removeCallback(e,this)},r}(),HV=function(r){Tr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(vo),BV=function(r){Tr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(vo),KV=function(r){Tr(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(vo);function qc(r){return r instanceof vo}var zV=function(){function r(e){this._meterSharedState=e}return r.prototype.createGauge=function(e,t){var n=er(e,j.GAUGE,t),i=this._meterSharedState.registerMetricStorage(n);return new JV(i,n)},r.prototype.createHistogram=function(e,t){var n=er(e,j.HISTOGRAM,t),i=this._meterSharedState.registerMetricStorage(n);return new YV(i,n)},r.prototype.createCounter=function(e,t){var n=er(e,j.COUNTER,t),i=this._meterSharedState.registerMetricStorage(n);return new DV(i,n)},r.prototype.createUpDownCounter=function(e,t){var n=er(e,j.UP_DOWN_COUNTER,t),i=this._meterSharedState.registerMetricStorage(n);return new FV(i,n)},r.prototype.createObservableGauge=function(e,t){var n=er(e,j.OBSERVABLE_GAUGE,t),i=this._meterSharedState.registerAsyncMetricStorage(n);return new BV(n,i,this._meterSharedState.observableRegistry)},r.prototype.createObservableCounter=function(e,t){var n=er(e,j.OBSERVABLE_COUNTER,t),i=this._meterSharedState.registerAsyncMetricStorage(n);return new HV(n,i,this._meterSharedState.observableRegistry)},r.prototype.createObservableUpDownCounter=function(e,t){var n=er(e,j.OBSERVABLE_UP_DOWN_COUNTER,t),i=this._meterSharedState.registerAsyncMetricStorage(n);return new KV(n,i,this._meterSharedState.observableRegistry)},r.prototype.addBatchObservableCallback=function(e,t){this._meterSharedState.observableRegistry.addBatchCallback(e,t)},r.prototype.removeBatchObservableCallback=function(e,t){this._meterSharedState.observableRegistry.removeBatchCallback(e,t)},r}(),Kg=function(){function r(e){this._instrumentDescriptor=e}return r.prototype.getInstrumentDescriptor=function(){return this._instrumentDescriptor},r.prototype.updateDescription=function(e){this._instrumentDescriptor=er(this._instrumentDescriptor.name,this._instrumentDescriptor.type,{description:e,valueType:this._instrumentDescriptor.valueType,unit:this._instrumentDescriptor.unit,advice:this._instrumentDescriptor.advice})},r}(),jV=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),zg=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},QV=function(){function r(e){this._hash=e,this._valueMap=new Map,this._keyMap=new Map}return r.prototype.get=function(e,t){return t!=null||(t=this._hash(e)),this._valueMap.get(t)},r.prototype.getOrDefault=function(e,t){var n=this._hash(e);if(this._valueMap.has(n))return this._valueMap.get(n);var i=t();return this._keyMap.has(n)||this._keyMap.set(n,e),this._valueMap.set(n,i),i},r.prototype.set=function(e,t,n){n!=null||(n=this._hash(e)),this._keyMap.has(n)||this._keyMap.set(n,e),this._valueMap.set(n,t)},r.prototype.has=function(e,t){return t!=null||(t=this._hash(e)),this._valueMap.has(t)},r.prototype.keys=function(){var e,t;return zg(this,function(n){switch(n.label){case 0:e=this._keyMap.entries(),t=e.next(),n.label=1;case 1:return t.done===!0?[3,3]:[4,[t.value[1],t.value[0]]];case 2:return n.sent(),t=e.next(),[3,1];case 3:return[2]}})},r.prototype.entries=function(){var e,t;return zg(this,function(n){switch(n.label){case 0:e=this._valueMap.entries(),t=e.next(),n.label=1;case 1:return t.done===!0?[3,3]:[4,[this._keyMap.get(t.value[0]),t.value[1],t.value[0]]];case 2:return n.sent(),t=e.next(),[3,1];case 3:return[2]}})},Object.defineProperty(r.prototype,"size",{get:function(){return this._valueMap.size},enumerable:!1,configurable:!0}),r}(),Er=function(r){jV(e,r);function e(){return r.call(this,Og)||this}return e}(QV),$V=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},jg=function(){function r(e,t){this._aggregator=e,this._activeCollectionStorage=new Er,this._cumulativeMemoStorage=new Er,this._overflowAttributes={"otel.metric.overflow":!0},this._cardinalityLimit=(t!=null?t:2e3)-1,this._overflowHashCode=Og(this._overflowAttributes)}return r.prototype.record=function(e,t,n,i){var s=this,o=this._activeCollectionStorage.get(t);if(!o){if(this._activeCollectionStorage.size>=this._cardinalityLimit){var a=this._activeCollectionStorage.getOrDefault(this._overflowAttributes,function(){return s._aggregator.createAccumulation(i)});a==null||a.record(e);return}o=this._aggregator.createAccumulation(i),this._activeCollectionStorage.set(t,o)}o==null||o.record(e)},r.prototype.batchCumulate=function(e,t){var n=this;Array.from(e.entries()).forEach(function(i){var s=$V(i,3),o=s[0],a=s[1],l=s[2],c=n._aggregator.createAccumulation(t);c==null||c.record(a);var u=c;if(n._cumulativeMemoStorage.has(o,l)){var d=n._cumulativeMemoStorage.get(o,l);u=n._aggregator.diff(d,c)}else if(n._cumulativeMemoStorage.size>=n._cardinalityLimit&&(o=n._overflowAttributes,l=n._overflowHashCode,n._cumulativeMemoStorage.has(o,l))){var d=n._cumulativeMemoStorage.get(o,l);u=n._aggregator.diff(d,c)}if(n._activeCollectionStorage.has(o,l)){var h=n._activeCollectionStorage.get(o,l);u=n._aggregator.merge(h,u)}n._cumulativeMemoStorage.set(o,c,l),n._activeCollectionStorage.set(o,u,l)})},r.prototype.collect=function(){var e=this._activeCollectionStorage;return this._activeCollectionStorage=new Er,e},r}(),eu=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qg=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},$g=function(){function r(e,t){var n=this;this._aggregator=e,this._unreportedAccumulations=new Map,this._reportHistory=new Map,t.forEach(function(i){n._unreportedAccumulations.set(i,[])})}return r.prototype.buildMetrics=function(e,t,n,i){this._stashAccumulations(n);var s=this._getMergedUnreportedAccumulations(e),o=s,a;if(this._reportHistory.has(e)){var l=this._reportHistory.get(e),c=l.collectionTime;a=l.aggregationTemporality,a===mt.CUMULATIVE?o=r.merge(l.accumulations,s,this._aggregator):o=r.calibrateStartTime(l.accumulations,s,c)}else a=e.selectAggregationTemporality(t.type);this._reportHistory.set(e,{accumulations:o,collectionTime:i,aggregationTemporality:a});var u=qV(o);if(u.length!==0)return this._aggregator.toMetricData(t,a,u,i)},r.prototype._stashAccumulations=function(e){var t,n,i=this._unreportedAccumulations.keys();try{for(var s=eu(i),o=s.next();!o.done;o=s.next()){var a=o.value,l=this._unreportedAccumulations.get(a);l===void 0&&(l=[],this._unreportedAccumulations.set(a,l)),l.push(e)}}catch(c){t={error:c}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}},r.prototype._getMergedUnreportedAccumulations=function(e){var t,n,i=new Er,s=this._unreportedAccumulations.get(e);if(this._unreportedAccumulations.set(e,[]),s===void 0)return i;try{for(var o=eu(s),a=o.next();!a.done;a=o.next()){var l=a.value;i=r.merge(i,l,this._aggregator)}}catch(c){t={error:c}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i},r.merge=function(e,t,n){for(var i=e,s=t.entries(),o=s.next();o.done!==!0;){var a=Qg(o.value,3),l=a[0],c=a[1],u=a[2];if(e.has(l,u)){var d=e.get(l,u),h=n.merge(d,c);i.set(l,h,u)}else i.set(l,c,u);o=s.next()}return i},r.calibrateStartTime=function(e,t,n){var i,s;try{for(var o=eu(e.keys()),a=o.next();!a.done;a=o.next()){var l=Qg(a.value,2),c=l[0],u=l[1],d=t.get(c,u);d==null||d.setStartTime(n)}}catch(h){i={error:h}}finally{try{a&&!a.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}return t},r}();function qV(r){return Array.from(r.entries())}var ex=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),tx=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},rx=function(r){ex(e,r);function e(t,n,i,s,o){var a=r.call(this,t)||this;return a._attributesProcessor=i,a._aggregationCardinalityLimit=o,a._deltaMetricStorage=new jg(n,a._aggregationCardinalityLimit),a._temporalMetricStorage=new $g(n,s),a}return e.prototype.record=function(t,n){var i=this,s=new Er;Array.from(t.entries()).forEach(function(o){var a=tx(o,2),l=a[0],c=a[1];s.set(i._attributesProcessor.process(l),c)}),this._deltaMetricStorage.batchCumulate(s,n)},e.prototype.collect=function(t,n){var i=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(t,this._instrumentDescriptor,i,n)},e}(Kg);function qg(r,e){var t="";return r.unit!==e.unit&&(t+="	- Unit '"+r.unit+"' does not match '"+e.unit+`'
`),r.type!==e.type&&(t+="	- Type '"+r.type+"' does not match '"+e.type+`'
`),r.valueType!==e.valueType&&(t+="	- Value Type '"+r.valueType+"' does not match '"+e.valueType+`'
`),r.description!==e.description&&(t+="	- Description '"+r.description+"' does not match '"+e.description+`'
`),t}function nx(r,e){return"	- use valueType '"+r.valueType+"' on instrument creation or use an instrument name other than '"+e.name+"'"}function ix(r,e){return"	- use unit '"+r.unit+"' on instrument creation or use an instrument name other than '"+e.name+"'"}function sx(r,e){var t={name:e.name,type:e.type,unit:e.unit},n=JSON.stringify(t);return"	- create a new view with a name other than '"+r.name+"' and InstrumentSelector '"+n+"'"}function ox(r,e){var t={name:e.name,type:e.type,unit:e.unit},n=JSON.stringify(t);return"	- create a new view with a name other than '"+r.name+"' and InstrumentSelector '"+n+`'
    	- OR - create a new view with the name `+r.name+" and description '"+r.description+"' and InstrumentSelector "+n+`
    	- OR - create a new view with the name `+e.name+" and description '"+r.description+"' and InstrumentSelector "+n}function ey(r,e){return r.valueType!==e.valueType?nx(r,e):r.unit!==e.unit?ix(r,e):r.type!==e.type?sx(r,e):r.description!==e.description?ox(r,e):""}var tu=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ax=function(){function r(){this._sharedRegistry=new Map,this._perCollectorRegistry=new Map}return r.create=function(){return new r},r.prototype.getStorages=function(e){var t,n,i,s,o=[];try{for(var a=tu(this._sharedRegistry.values()),l=a.next();!l.done;l=a.next()){var c=l.value;o=o.concat(c)}}catch(f){t={error:f}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}var u=this._perCollectorRegistry.get(e);if(u!=null)try{for(var d=tu(u.values()),h=d.next();!h.done;h=d.next()){var c=h.value;o=o.concat(c)}}catch(f){i={error:f}}finally{try{h&&!h.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}return o},r.prototype.register=function(e){this._registerStorage(e,this._sharedRegistry)},r.prototype.registerForCollector=function(e,t){var n=this._perCollectorRegistry.get(e);n==null&&(n=new Map,this._perCollectorRegistry.set(e,n)),this._registerStorage(t,n)},r.prototype.findOrUpdateCompatibleStorage=function(e){var t=this._sharedRegistry.get(e.name);return t===void 0?null:this._findOrUpdateCompatibleStorage(e,t)},r.prototype.findOrUpdateCompatibleCollectorStorage=function(e,t){var n=this._perCollectorRegistry.get(e);if(n===void 0)return null;var i=n.get(t.name);return i===void 0?null:this._findOrUpdateCompatibleStorage(t,i)},r.prototype._registerStorage=function(e,t){var n=e.getInstrumentDescriptor(),i=t.get(n.name);if(i===void 0){t.set(n.name,[e]);return}i.push(e)},r.prototype._findOrUpdateCompatibleStorage=function(e,t){var n,i,s=null;try{for(var o=tu(t),a=o.next();!a.done;a=o.next()){var l=a.value,c=l.getInstrumentDescriptor();HG(c,e)?(c.description!==e.description&&(e.description.length>c.description.length&&l.updateDescription(e.description),G.warn("A view or instrument with the name ",e.name,` has already been registered, but has a different description and is incompatible with another registered view.
`,`Details:
`,qg(c,e),`The longer description will be used.
To resolve the conflict:`,ey(c,e))),s=l):G.warn("A view or instrument with the name ",e.name,` has already been registered and is incompatible with another registered view.
`,`Details:
`,qg(c,e),`To resolve the conflict:
`,ey(c,e))}}catch(u){n={error:u}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return s},r}(),lx=function(){function r(e){this._backingStorages=e}return r.prototype.record=function(e,t,n,i){this._backingStorages.forEach(function(s){s.record(e,t,n,i)})},r}(),cx=function(){function r(e,t){this._instrumentName=e,this._valueType=t,this._buffer=new Er}return r.prototype.observe=function(e,t){if(t===void 0&&(t={}),typeof e!="number"){G.warn("non-number value provided to metric "+this._instrumentName+": "+e);return}this._valueType===Ht.INT&&!Number.isInteger(e)&&(G.warn("INT value type cannot accept a floating-point value for "+this._instrumentName+", ignoring the fractional digits."),e=Math.trunc(e),!Number.isInteger(e))||this._buffer.set(t,e)},r}(),ux=function(){function r(){this._buffer=new Map}return r.prototype.observe=function(e,t,n){if(n===void 0&&(n={}),!!qc(e)){var i=this._buffer.get(e);if(i==null&&(i=new Er,this._buffer.set(e,i)),typeof t!="number"){G.warn("non-number value provided to metric "+e._descriptor.name+": "+t);return}e._descriptor.valueType===Ht.INT&&!Number.isInteger(t)&&(G.warn("INT value type cannot accept a floating-point value for "+e._descriptor.name+", ignoring the fractional digits."),t=Math.trunc(t),!Number.isInteger(t))||i.set(n,t)}},r}(),ru=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})},nu=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},ty=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},ry=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))},dx=function(){function r(){this._callbacks=[],this._batchCallbacks=[]}return r.prototype.addCallback=function(e,t){var n=this._findCallback(e,t);n>=0||this._callbacks.push({callback:e,instrument:t})},r.prototype.removeCallback=function(e,t){var n=this._findCallback(e,t);n<0||this._callbacks.splice(n,1)},r.prototype.addBatchCallback=function(e,t){var n=new Set(t.filter(qc));if(n.size===0){G.error("BatchObservableCallback is not associated with valid instruments",t);return}var i=this._findBatchCallback(e,n);i>=0||this._batchCallbacks.push({callback:e,instruments:n})},r.prototype.removeBatchCallback=function(e,t){var n=new Set(t.filter(qc)),i=this._findBatchCallback(e,n);i<0||this._batchCallbacks.splice(i,1)},r.prototype.observe=function(e,t){return ru(this,void 0,void 0,function(){var n,i,s,o;return nu(this,function(a){switch(a.label){case 0:return n=this._observeCallbacks(e,t),i=this._observeBatchCallbacks(e,t),[4,PG(ry(ry([],ty(n),!1),ty(i),!1))];case 1:return s=a.sent(),o=s.filter(MG).map(function(l){return l.reason}),[2,o]}})})},r.prototype._observeCallbacks=function(e,t){var n=this;return this._callbacks.map(function(i){var s=i.callback,o=i.instrument;return ru(n,void 0,void 0,function(){var a,l;return nu(this,function(c){switch(c.label){case 0:return a=new cx(o._descriptor.name,o._descriptor.valueType),l=Promise.resolve(s(a)),t!=null&&(l=hi(l,t)),[4,l];case 1:return c.sent(),o._metricStorages.forEach(function(u){u.record(a._buffer,e)}),[2]}})})})},r.prototype._observeBatchCallbacks=function(e,t){var n=this;return this._batchCallbacks.map(function(i){var s=i.callback,o=i.instruments;return ru(n,void 0,void 0,function(){var a,l;return nu(this,function(c){switch(c.label){case 0:return a=new ux,l=Promise.resolve(s(a)),t!=null&&(l=hi(l,t)),[4,l];case 1:return c.sent(),o.forEach(function(u){var d=a._buffer.get(u);d!=null&&u._metricStorages.forEach(function(h){h.record(d,e)})}),[2]}})})})},r.prototype._findCallback=function(e,t){return this._callbacks.findIndex(function(n){return n.callback===e&&n.instrument===t})},r.prototype._findBatchCallback=function(e,t){return this._batchCallbacks.findIndex(function(n){return n.callback===e&&UG(n.instruments,t)})},r}(),hx=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),fx=function(r){hx(e,r);function e(t,n,i,s,o){var a=r.call(this,t)||this;return a._attributesProcessor=i,a._aggregationCardinalityLimit=o,a._deltaMetricStorage=new jg(n,a._aggregationCardinalityLimit),a._temporalMetricStorage=new $g(n,s),a}return e.prototype.record=function(t,n,i,s){n=this._attributesProcessor.process(n,i),this._deltaMetricStorage.record(t,n,i,s)},e.prototype.collect=function(t,n){var i=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(t,this._instrumentDescriptor,i,n)},e}(Kg),ny=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),iu=function(){function r(){}return r.Noop=function(){return mx},r}(),px=function(r){ny(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.process=function(t,n){return t},e}(iu);(function(r){ny(e,r);function e(t){var n=r.call(this)||this;return n._allowedAttributeNames=t,n}return e.prototype.process=function(t,n){var i=this,s={};return Object.keys(t).filter(function(o){return i._allowedAttributeNames.includes(o)}).forEach(function(o){return s[o]=t[o]}),s},e})(iu);var mx=new px,gx=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})},yx=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},bx=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},vx=function(){function r(e,t){this._meterProviderSharedState=e,this._instrumentationScope=t,this.metricStorageRegistry=new ax,this.observableRegistry=new dx,this.meter=new zV(this)}return r.prototype.registerMetricStorage=function(e){var t=this._registerMetricStorage(e,fx);return t.length===1?t[0]:new lx(t)},r.prototype.registerAsyncMetricStorage=function(e){var t=this._registerMetricStorage(e,rx);return t},r.prototype.collect=function(e,t,n){return gx(this,void 0,void 0,function(){var i,s,o;return yx(this,function(a){switch(a.label){case 0:return[4,this.observableRegistry.observe(t,n==null?void 0:n.timeoutMillis)];case 1:return i=a.sent(),s=this.metricStorageRegistry.getStorages(e),s.length===0?[2,null]:(o=s.map(function(l){return l.collect(e,t)}).filter(WG),o.length===0?[2,{errors:i}]:[2,{scopeMetrics:{scope:this._instrumentationScope,metrics:o},errors:i}])}})})},r.prototype._registerMetricStorage=function(e,t){var n=this,i=this._meterProviderSharedState.viewRegistry.findViews(e,this._instrumentationScope),s=i.map(function(l){var c=YG(l,e),u=n.metricStorageRegistry.findOrUpdateCompatibleStorage(c);if(u!=null)return u;var d=l.aggregation.createAggregator(c),h=new t(c,d,l.attributesProcessor,n._meterProviderSharedState.metricCollectors,l.aggregationCardinalityLimit);return n.metricStorageRegistry.register(h),h});if(s.length===0){var o=this._meterProviderSharedState.selectAggregations(e.type),a=o.map(function(l){var c=bx(l,2),u=c[0],d=c[1],h=n.metricStorageRegistry.findOrUpdateCompatibleCollectorStorage(u,e);if(h!=null)return h;var f=d.createAggregator(e),m=u.selectCardinalityLimit(e.type),p=new t(e,f,iu.Noop(),[u],m);return n.metricStorageRegistry.registerForCollector(u,p),p});s=s.concat(a)}return s},r}(),Sx=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_x=function(){function r(e){this.resource=e,this.viewRegistry=new UV,this.metricCollectors=[],this.meterSharedStates=new Map}return r.prototype.getMeterSharedState=function(e){var t=AG(e),n=this.meterSharedStates.get(t);return n==null&&(n=new vx(this,e),this.meterSharedStates.set(t,n)),n},r.prototype.selectAggregations=function(e){var t,n,i=[];try{for(var s=Sx(this.metricCollectors),o=s.next();!o.done;o=s.next()){var a=o.value;i.push([a,a.selectAggregation(e)])}}catch(l){t={error:l}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return i},r}(),So=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})},_o=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Tx=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},Ex=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))},wx=function(){function r(e,t){this._sharedState=e,this._metricReader=t}return r.prototype.collect=function(e){return So(this,void 0,void 0,function(){var t,n,i,s,o=this;return _o(this,function(a){switch(a.label){case 0:return t=Kc(Date.now()),n=[],i=[],s=Array.from(this._sharedState.meterSharedStates.values()).map(function(l){return So(o,void 0,void 0,function(){var c;return _o(this,function(u){switch(u.label){case 0:return[4,l.collect(this,t,e)];case 1:return c=u.sent(),(c==null?void 0:c.scopeMetrics)!=null&&n.push(c.scopeMetrics),(c==null?void 0:c.errors)!=null&&i.push.apply(i,Ex([],Tx(c.errors),!1)),[2]}})})}),[4,Promise.all(s)];case 1:return a.sent(),[2,{resourceMetrics:{resource:this._sharedState.resource,scopeMetrics:n},errors:i}]}})})},r.prototype.forceFlush=function(e){return So(this,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return[4,this._metricReader.forceFlush(e)];case 1:return t.sent(),[2]}})})},r.prototype.shutdown=function(e){return So(this,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return[4,this._metricReader.shutdown(e)];case 1:return t.sent(),[2]}})})},r.prototype.selectAggregationTemporality=function(e){return this._metricReader.selectAggregationTemporality(e)},r.prototype.selectAggregation=function(e){return this._metricReader.selectAggregation(e)},r.prototype.selectCardinalityLimit=function(e){var t,n,i;return(i=(n=(t=this._metricReader).selectCardinalityLimit)===null||n===void 0?void 0:n.call(t,e))!==null&&i!==void 0?i:2e3},r}(),iy=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})},sy=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},oy=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function Rx(r,e){var t=e!=null?e:oi.empty();return r?oi.default().merge(t):t}var Ix=function(){function r(e){var t,n,i,s,o;if(this._shutdown=!1,this._sharedState=new _x(Rx((o=e==null?void 0:e.mergeResourceWithDefaults)!==null&&o!==void 0?o:!0,e==null?void 0:e.resource)),(e==null?void 0:e.views)!=null&&e.views.length>0)try{for(var a=oy(e.views),l=a.next();!l.done;l=a.next()){var c=l.value;this._sharedState.viewRegistry.addView(c)}}catch(f){t={error:f}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}if((e==null?void 0:e.readers)!=null&&e.readers.length>0)try{for(var u=oy(e.readers),d=u.next();!d.done;d=u.next()){var h=d.value;this.addMetricReader(h)}}catch(f){i={error:f}}finally{try{d&&!d.done&&(s=u.return)&&s.call(u)}finally{if(i)throw i.error}}}return r.prototype.getMeter=function(e,t,n){return t===void 0&&(t=""),n===void 0&&(n={}),this._shutdown?(G.warn("A shutdown MeterProvider cannot provide a Meter"),GR()):this._sharedState.getMeterSharedState({name:e,version:t,schemaUrl:n.schemaUrl}).meter},r.prototype.addMetricReader=function(e){var t=new wx(this._sharedState,e);e.setMetricProducer(t),this._sharedState.metricCollectors.push(t)},r.prototype.shutdown=function(e){return iy(this,void 0,void 0,function(){return sy(this,function(t){switch(t.label){case 0:return this._shutdown?(G.warn("shutdown may only be called once per MeterProvider"),[2]):(this._shutdown=!0,[4,Promise.all(this._sharedState.metricCollectors.map(function(n){return n.shutdown(e)}))]);case 1:return t.sent(),[2]}})})},r.prototype.forceFlush=function(e){return iy(this,void 0,void 0,function(){return sy(this,function(t){switch(t.label){case 0:return this._shutdown?(G.warn("invalid attempt to force flush after MeterProvider shutdown"),[2]):[4,Promise.all(this._sharedState.metricCollectors.map(function(n){return n.forceFlush(e)}))];case 1:return t.sent(),[2]}})})},r}();function Cx(r,e){var t=Tg(e);return{resource:Eg(r.resource),schemaUrl:void 0,scopeMetrics:Lx(r.scopeMetrics,t)}}function Lx(r,e){return Array.from(r.map(function(t){return{scope:wg(t.scope),metrics:t.metrics.map(function(n){return Ox(n,e)}),schemaUrl:t.scope.schemaUrl}}))}function Ox(r,e){var t={name:r.descriptor.name,description:r.descriptor.description,unit:r.descriptor.unit},n=Vx(r.aggregationTemporality);switch(r.dataPointType){case Et.SUM:t.sum={aggregationTemporality:n,isMonotonic:r.isMonotonic,dataPoints:ay(r,e)};break;case Et.GAUGE:t.gauge={dataPoints:ay(r,e)};break;case Et.HISTOGRAM:t.histogram={aggregationTemporality:n,dataPoints:Nx(r,e)};break;case Et.EXPONENTIAL_HISTOGRAM:t.exponentialHistogram={aggregationTemporality:n,dataPoints:Gx(r,e)};break}return t}function Zx(r,e,t){var n={attributes:vr(r.attributes),startTimeUnixNano:t.encodeHrTime(r.startTime),timeUnixNano:t.encodeHrTime(r.endTime)};switch(e){case Ht.INT:n.asInt=r.value;break;case Ht.DOUBLE:n.asDouble=r.value;break}return n}function ay(r,e){return r.dataPoints.map(function(t){return Zx(t,r.descriptor.valueType,e)})}function Nx(r,e){return r.dataPoints.map(function(t){var n=t.value;return{attributes:vr(t.attributes),bucketCounts:n.buckets.counts,explicitBounds:n.buckets.boundaries,count:n.count,sum:n.sum,min:n.min,max:n.max,startTimeUnixNano:e.encodeHrTime(t.startTime),timeUnixNano:e.encodeHrTime(t.endTime)}})}function Gx(r,e){return r.dataPoints.map(function(t){var n=t.value;return{attributes:vr(t.attributes),count:n.count,min:n.min,max:n.max,sum:n.sum,positive:{offset:n.positive.offset,bucketCounts:n.positive.bucketCounts},negative:{offset:n.negative.offset,bucketCounts:n.negative.bucketCounts},scale:n.scale,zeroCount:n.zeroCount,startTimeUnixNano:e.encodeHrTime(t.startTime),timeUnixNano:e.encodeHrTime(t.endTime)}})}function Vx(r){switch(r){case mt.DELTA:return 1;case mt.CUMULATIVE:return 2}}function xx(r,e){return{resourceMetrics:r.map(function(t){return Cx(t,e)})}}var Xx=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kx=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s};function Wx(r,e){var t,n=r.spanContext(),i=r.status;return{traceId:e.encodeSpanContext(n.traceId),spanId:e.encodeSpanContext(n.spanId),parentSpanId:e.encodeOptionalSpanContext(r.parentSpanId),traceState:(t=n.traceState)===null||t===void 0?void 0:t.serialize(),name:r.name,kind:r.kind==null?0:r.kind+1,startTimeUnixNano:e.encodeHrTime(r.startTime),endTimeUnixNano:e.encodeHrTime(r.endTime),attributes:vr(r.attributes),droppedAttributesCount:r.droppedAttributesCount,events:r.events.map(function(s){return Px(s,e)}),droppedEventsCount:r.droppedEventsCount,status:{code:i.code,message:i.message},links:r.links.map(function(s){return Ax(s,e)}),droppedLinksCount:r.droppedLinksCount}}function Ax(r,e){var t;return{attributes:r.attributes?vr(r.attributes):[],spanId:e.encodeSpanContext(r.context.spanId),traceId:e.encodeSpanContext(r.context.traceId),traceState:(t=r.context.traceState)===null||t===void 0?void 0:t.serialize(),droppedAttributesCount:r.droppedAttributesCount||0}}function Px(r,e){return{attributes:r.attributes?vr(r.attributes):[],name:r.name,timeUnixNano:e.encodeHrTime(r.time),droppedAttributesCount:r.droppedAttributesCount||0}}function Mx(r,e){var t=Tg(e);return{resourceSpans:Fx(r,t)}}function Ux(r){var e,t,n=new Map;try{for(var i=Xx(r),s=i.next();!s.done;s=i.next()){var o=s.value,a=n.get(o.resource);a||(a=new Map,n.set(o.resource,a));var l=o.instrumentationLibrary.name+"@"+(o.instrumentationLibrary.version||"")+":"+(o.instrumentationLibrary.schemaUrl||""),c=a.get(l);c||(c=[],a.set(l,c)),c.push(o)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n}function Fx(r,e){for(var t=Ux(r),n=[],i=t.entries(),s=i.next();!s.done;){for(var o=kx(s.value,2),a=o[0],l=o[1],c=[],u=l.values(),d=u.next();!d.done;){var h=d.value;if(h.length>0){var f=h.map(function(p){return Wx(p,e)});c.push({scope:wg(h[0].instrumentationLibrary),spans:f,schemaUrl:h[0].instrumentationLibrary.schemaUrl})}d=u.next()}var m={resource:Eg(a),scopeSpans:c,schemaUrl:void 0};n.push(m),s=i.next()}return n}var Dx={serializeRequest:function(r){var e=xx([r],{useLongBits:!1}),t=new TextEncoder;return t.encode(JSON.stringify(e))},deserializeResponse:function(r){var e=new TextDecoder;return JSON.parse(e.decode(r))}},Jx={serializeRequest:function(r){var e=Mx(r,{useHex:!0,useLongBits:!1}),t=new TextEncoder;return t.encode(JSON.stringify(e))},deserializeResponse:function(r){var e=new TextDecoder;return JSON.parse(e.decode(r))}},Yx=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})},Hx=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Bx=5,Kx=1e3,zx=5e3,jx=1.5,ly=.2;function Qx(){return Math.random()*(2*ly)-ly}var $x=function(){function r(e){this._transport=e}return r.prototype.retry=function(e,t,n){var i=this;return new Promise(function(s,o){setTimeout(function(){i._transport.send(e,t).then(s,o)},n)})},r.prototype.send=function(e,t){var n;return Yx(this,void 0,void 0,function(){var i,s,o,a,l,c,u;return Hx(this,function(d){switch(d.label){case 0:return i=Date.now()+t,[4,this._transport.send(e,t)];case 1:s=d.sent(),o=Bx,a=Kx,d.label=2;case 2:return s.status==="retryable"&&o>0?(o--,l=Math.max(Math.min(a,zx)+Qx(),0),a=a*jx,c=(n=s.retryInMillis)!==null&&n!==void 0?n:l,u=i-Date.now(),c>u?[2,s]:[4,this.retry(e,u,c)]):[3,4];case 3:return s=d.sent(),[3,2];case 4:return[2,s]}})})},r.prototype.shutdown=function(){return this._transport.shutdown()},r}();function cy(r){return new $x(r.transport)}function qx(r){var e=[429,502,503,504];return e.includes(r)}function e1(r){if(r!=null){var e=Number.parseInt(r,10);if(Number.isInteger(e))return e>0?e*1e3:-1;var t=new Date(r).getTime()-Date.now();return t>=0?t:0}}var t1=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s},r1=function(){function r(e){this._parameters=e}return r.prototype.send=function(e,t){var n=this;return new Promise(function(i){var s=new XMLHttpRequest;s.timeout=t,s.open("POST",n._parameters.url);var o=n._parameters.headers();Object.entries(o).forEach(function(a){var l=t1(a,2),c=l[0],u=l[1];s.setRequestHeader(c,u)}),s.ontimeout=function(a){i({status:"failure",error:new Error("XHR request timed out")})},s.onreadystatechange=function(){s.status>=200&&s.status<=299?(G.debug("XHR success"),i({status:"success"})):s.status&&qx(s.status)?i({status:"retryable",retryInMillis:e1(s.getResponseHeader("Retry-After"))}):s.status!==0&&i({status:"failure",error:new Error("XHR request failed with non-retryable status")})},s.onabort=function(){i({status:"failure",error:new Error("XHR request aborted")})},s.onerror=function(){i({status:"failure",error:new Error("XHR request errored")})},s.send(e)})},r.prototype.shutdown=function(){},r}();function n1(r){return new r1(r)}var i1=function(){function r(e){this._params=e}return r.prototype.send=function(e){var t=this;return new Promise(function(n){navigator.sendBeacon(t._params.url,new Blob([e],{type:t._params.blobType}))?(G.debug("SendBeacon success"),n({status:"success"})):n({status:"failure",error:new Error("SendBeacon failed")})})},r.prototype.shutdown=function(){},r}();function s1(r){return new i1(r)}function o1(r,e){return gg(r,e,cy({transport:n1(r)}))}function a1(r,e){return gg(r,e,cy({transport:s1({url:r.url,blobType:r.headers()["Content-Type"]})}))}var l1=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s};function c1(r){return function(){var e,t={};return Object.entries((e=r==null?void 0:r())!==null&&e!==void 0?e:{}).forEach(function(n){var i=l1(n,2),s=i[0],o=i[1];typeof o!="undefined"?t[s]=String(o):G.warn('Header "'+s+'" has invalid value ('+o+") and will be ignored")}),t}}var wr=function(){return wr=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},wr.apply(this,arguments)};function u1(r,e,t){var n=wr({},t()),i={};return function(){return e!=null&&Object.assign(i,e()),r!=null&&Object.assign(i,r()),Object.assign(i,n)}}function d1(r){if(r!=null)try{return new URL(r),r}catch(e){throw new Error("Configuration: Could not parse user-provided export URL: '"+r+"'")}}function h1(r,e,t){var n,i,s,o;return wr(wr({},fG(r,e,t)),{headers:u1(c1(r.headers),e.headers,t.headers),url:(i=(n=d1(r.url))!==null&&n!==void 0?n:e.url)!==null&&i!==void 0?i:t.url,agentOptions:(o=(s=r.agentOptions)!==null&&s!==void 0?s:e.agentOptions)!==null&&o!==void 0?o:t.agentOptions})}function f1(r,e){return wr(wr({},pG()),{headers:function(){return r},url:"http://localhost:4318/"+e,agentOptions:{keepAlive:!0}})}function p1(r,e,t){return h1({url:r.url,timeoutMillis:r.timeoutMillis,headers:hG(r.headers),concurrencyLimit:r.concurrencyLimit},{},f1(t,e))}function uy(r,e,t,n){var i=!!r.headers||typeof navigator.sendBeacon!="function",s=p1(r,t,n);return i?o1(s,e):a1(s,e)}var m1=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),g1=function(r){m1(e,r);function e(t){return t===void 0&&(t={}),r.call(this,uy(t,Jx,"v1/traces",{"Content-Type":"application/json"}))||this}return e}(pg),To;(function(r){r[r.DELTA=0]="DELTA",r[r.CUMULATIVE=1]="CUMULATIVE",r[r.LOWMEMORY=2]="LOWMEMORY"})(To||(To={}));var y1=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),su=function(){return mt.CUMULATIVE},dy=function(r){switch(r){case j.COUNTER:case j.OBSERVABLE_COUNTER:case j.GAUGE:case j.HISTOGRAM:case j.OBSERVABLE_GAUGE:return mt.DELTA;case j.UP_DOWN_COUNTER:case j.OBSERVABLE_UP_DOWN_COUNTER:return mt.CUMULATIVE}},hy=function(r){switch(r){case j.COUNTER:case j.HISTOGRAM:return mt.DELTA;case j.GAUGE:case j.UP_DOWN_COUNTER:case j.OBSERVABLE_UP_DOWN_COUNTER:case j.OBSERVABLE_COUNTER:case j.OBSERVABLE_GAUGE:return mt.CUMULATIVE}};function b1(){var r=XI(),e=r.OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE.trim().toLowerCase();return e==="cumulative"?su:e==="delta"?dy:e==="lowmemory"?hy:(G.warn("OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE is set to '"+r.OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE+"', but only 'cumulative' and 'delta' are allowed. Using default ('cumulative') instead."),su)}function v1(r){return r!=null?r===To.DELTA?dy:r===To.LOWMEMORY?hy:su:b1()}function S1(r){return r!=null&&r.aggregationPreference?r.aggregationPreference:function(e){return Wt.Default()}}var _1=function(r){y1(e,r);function e(t,n){var i=r.call(this,t)||this;return i._aggregationSelector=S1(n),i._aggregationTemporalitySelector=v1(n==null?void 0:n.temporalityPreference),i}return e.prototype.selectAggregation=function(t){return this._aggregationSelector(t)},e.prototype.selectAggregationTemporality=function(t){return this._aggregationTemporalitySelector(t)},e}(pg),T1=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),E1=function(r){T1(e,r);function e(t){return r.call(this,uy(t!=null?t:{},Dx,"v1/metrics",{"Content-Type":"application/json"}),t)||this}return e}(_1),fy=(r=>(r.BillingQuotaExceeded="BillingQuotaExceeded",r))(fy||{});const ou=3,au=1e3,lu=500,w1=[fy.BillingQuotaExceeded.toString()],R1=r=>{var t;return((t=r.response.errors)==null?void 0:t.find(n=>w1.includes(n.message)))===void 0},cu=()=>{const r=(e,t,n,i,s=0)=>D(this,null,function*(){try{return yield e()}catch(o){if(o instanceof Vr&&!R1(o))throw o;if(s<ou)return yield new Promise(a=>setTimeout(a,au+lu*Math.pow(2,s))),yield r(e,t,n,i,s+1);throw console.error(`highlight.io: data request failed after ${s} retries`),o}});return r};function I1(r,e){const t=r.spanContext();return{name:r.name,kind:r.kind,spanContext:()=>t,parentSpanId:r.parentSpanId,startTime:r.startTime,endTime:r.endTime,status:r.status,attributes:vC(r.attributes,e),links:r.links,events:r.events,duration:r.duration,ended:r.ended,resource:r.resource,instrumentationLibrary:r.instrumentationLibrary,droppedAttributesCount:r.droppedAttributesCount,droppedEventsCount:r.droppedEventsCount,droppedLinksCount:r.droppedLinksCount}}function C1(r,e){if(!e.isSamplingEnabled())return r;const t=[],n={},i={};for(const s of r){s.parentSpanId&&(i[s.parentSpanId]=i[s.parentSpanId]||[],i[s.parentSpanId].push(s.spanContext().spanId));const o=e.shouldSample(s);o.sample?o.attributes?n[s.spanContext().spanId]=I1(s,o.attributes):n[s.spanContext().spanId]=s:t.push(s.spanContext().spanId)}for(;t.length>0;){const s=t.shift(),o=i[s];if(o)for(const a of o)delete n[a],t.push(a)}return Object.values(n)}class L1 extends g1{constructor(e,t){super(W(S({},e),{headers:{}})),this.sampler=t}export(e,t){const n=C1(e,this.sampler);if(n.length===0)return;let i=0;const s=o=>{if(o.code===Fe.SUCCESS)return t({code:Fe.SUCCESS});if(i++,i>ou)return t({code:Fe.FAILED,error:o.error});new Promise(a=>setTimeout(a,au+lu*Math.pow(2,i))).then(()=>{super.export(n,s)})};super.export(n,s)}}class O1 extends E1{constructor(e){super(W(S({},e),{headers:{}}))}export(e,t){let n=0;const i=s=>{var o;if(s.code===Fe.SUCCESS)return t({code:Fe.SUCCESS});if(n++,n>ou)return console.error(`[@launchdarkly/observability] failed to export OTeL metrics: ${(o=s.error)==null?void 0:o.message}`,s.error),t({code:Fe.FAILED,error:s.error});new Promise(a=>setTimeout(a,au+lu*Math.pow(2,n))).then(()=>{var a;console.warn(`[@launchdarkly/observability] retry ${n}, failed to export OTeL metrics: ${(a=s.error)==null?void 0:a.message}`,s.error),super.export(e,i)})};super.export(e,i)}}const Z1="OT_ZONE_CONTEXT",N1="Navigation:",G1=["click","input","submit"];function V1(){return!1}const It=class It extends xC{constructor(t={}){var n;super(It.moduleName,It.version,t);v(this,"_spansData",new WeakMap);v(this,"_zonePatched");v(this,"_wrappedListeners",new WeakMap);v(this,"_eventsSpanMap",new WeakMap);v(this,"_eventNames");v(this,"_shouldPreventSpanCreation");this._eventNames=new Set((n=t==null?void 0:t.eventNames)!=null?n:G1),this._shouldPreventSpanCreation=typeof(t==null?void 0:t.shouldPreventSpanCreation)=="function"?t.shouldPreventSpanCreation:V1}init(){}_checkForTimeout(t,n){const i=this._spansData.get(n);i&&(t.source==="setTimeout"?i.hrTimeLastTimeout=MI():t.source!=="Promise.then"&&t.source!=="setTimeout"&&(i.hrTimeLastTimeout=void 0))}_allowEventName(t){return this._eventNames.has(t)}_createSpan(t,n){var a;const i=t==null?void 0:t.target,s=t==null?void 0:t.type;if(!(i instanceof HTMLElement)||!i.getAttribute||i.hasAttribute("disabled")||!this._allowEventName(s))return;const o=xm(i,!0);try{const l=this.tracer.startSpan(s,{attributes:{"event.type":s,"event.tag":i.tagName,"event.xpath":o,"event.id":i.id,"event.classname":i.className,"event.text":(a=i.textContent)!=null?a:"","event.url":window.location.href,"viewport.width":window.innerWidth,"viewport.height":window.innerHeight}},n?oe.setSpan(te.active(),n):void 0);return t instanceof MouseEvent&&(l.setAttribute("event.x",t.clientX),l.setAttribute("event.y",t.clientY),l.setAttribute("event.relativeX",t.clientX/window.innerWidth),l.setAttribute("event.relativeY",t.clientY/window.innerHeight),s==="scroll"&&(l.setAttribute("event.scrollX",window.scrollX),l.setAttribute("event.scrollY",window.scrollY))),this._shouldPreventSpanCreation(s,i,l)===!0?void 0:(this._spansData.set(l,{taskCount:0}),l)}catch(l){this._diag.error("failed to start create new user interaction span",l)}}_decrementTask(t){const n=this._spansData.get(t);n&&(n.taskCount--,n.taskCount===0&&this._tryToEndSpan(t,n.hrTimeLastTimeout))}_getCurrentSpan(t){const n=t.get(Z1);return n&&oe.getSpan(n)}_incrementTask(t){const n=this._spansData.get(t);n&&n.taskCount++}addPatchedListener(t,n,i,s){let o=this._wrappedListeners.get(i);o||(o=new Map,this._wrappedListeners.set(i,o));let a=o.get(n);return a||(a=new Map,o.set(n,a)),a.has(t)?!1:(a.set(t,s),!0)}removePatchedListener(t,n,i){const s=this._wrappedListeners.get(i);if(!s)return;const o=s.get(n);if(!o)return;const a=o.get(t);return a&&(o.delete(t),o.size===0&&(s.delete(n),s.size===0&&this._wrappedListeners.delete(i))),a}_invokeListener(t,n,i){return typeof t=="function"?t.apply(n,i):t.handleEvent(i[0])}_patchAddEventListener(){const t=this;let n=new Map;return i=>function(o,a,l){if(!a)return i.call(this,o,a,l);const c=l&&typeof l=="object"&&l.once,u=function(...d){var p;let h;const f=d[0];if(!(f!=null&&f.type))return t._invokeListener(a,this,d);if(Date.now()-((p=n.get(f.type))!=null?p:0)<1e3/60)return t._invokeListener(a,this,d);n.set(f.type,Date.now()),f&&(h=t._eventsSpanMap.get(f)),c&&t.removePatchedListener(this,o,a);const m=t._createSpan(f,h);return m?(f&&t._eventsSpanMap.set(f,m),te.with(oe.setSpan(te.active(),m),()=>{const g=t._invokeListener(a,this,d);return m.end(),g})):t._invokeListener(a,this,d)};if(t.addPatchedListener(this,o,a,u))return i.call(this,o,u,l)}}_patchRemoveEventListener(){const t=this;return n=>function(s,o,a){const l=t.removePatchedListener(this,s,o);return l?n.call(this,s,l,a):n.call(this,s,o,a)}}_getPatchableEventTargets(){return window.EventTarget?[EventTarget.prototype]:[Node.prototype,Window.prototype]}_patchHistoryApi(){this._unpatchHistoryApi(),this._wrap(history,"replaceState",this._patchHistoryMethod()),this._wrap(history,"pushState",this._patchHistoryMethod()),this._wrap(history,"back",this._patchHistoryMethod()),this._wrap(history,"forward",this._patchHistoryMethod()),this._wrap(history,"go",this._patchHistoryMethod())}_patchHistoryMethod(){const t=this;return n=>function(...s){const o=`${location.pathname}${location.hash}${location.search}`,a=n.apply(this,s),l=`${location.pathname}${location.hash}${location.search}`;return o!==l&&t._updateInteractionName(l),a}}_unpatchHistoryApi(){Je(history.replaceState)&&this._unwrap(history,"replaceState"),Je(history.pushState)&&this._unwrap(history,"pushState"),Je(history.back)&&this._unwrap(history,"back"),Je(history.forward)&&this._unwrap(history,"forward"),Je(history.go)&&this._unwrap(history,"go")}_updateInteractionName(t){const n=oe.getSpan(te.active());n&&typeof n.updateName=="function"&&n.updateName(`${N1} ${t}`)}_patchZoneCancelTask(){const t=this;return n=>function(s){const o=Zone.current,a=t._getCurrentSpan(o);return a&&t._shouldCountTask(s,o)&&t._decrementTask(a),n.call(this,s)}}_patchZoneScheduleTask(){const t=this;return n=>function(s){const o=Zone.current,a=t._getCurrentSpan(o);return a&&t._shouldCountTask(s,o)&&(t._incrementTask(a),t._checkForTimeout(s,a)),n.call(this,s)}}_patchZoneRunTask(){const t=this;return n=>function(s,o,a){const l=Array.isArray(a)&&a[0]instanceof Event?a[0]:void 0,c=l==null?void 0:l.target;let u;const d=this;if(c){if(u=t._createSpan(l),u)return t._incrementTask(u),d.run(()=>{try{return te.with(oe.setSpan(te.active(),u),()=>{const h=Zone.current;return s._zone=h,n.call(h,s,o,a)})}finally{t._decrementTask(u)}})}else u=t._getCurrentSpan(d);try{return n.call(d,s,o,a)}finally{u&&t._shouldCountTask(s,d)&&t._decrementTask(u)}}}_shouldCountTask(t,n){if(t._zone&&(n=t._zone),!n||!t.data||t.data.isPeriodic)return!1;const i=this._getCurrentSpan(n);return!i||!this._spansData.get(i)?!1:t.type==="macroTask"||t.type==="microTask"}_tryToEndSpan(t,n){t&&this._spansData.get(t)&&(t.end(n),this._spansData.delete(t))}enable(){const t=this._getZoneWithPrototype();this._diag.debug("applying patch to",It.moduleName,It.version,"zone:",!!t),t?(Je(t.prototype.runTask)&&(this._unwrap(t.prototype,"runTask"),this._diag.debug("removing previous patch from method runTask")),Je(t.prototype.scheduleTask)&&(this._unwrap(t.prototype,"scheduleTask"),this._diag.debug("removing previous patch from method scheduleTask")),Je(t.prototype.cancelTask)&&(this._unwrap(t.prototype,"cancelTask"),this._diag.debug("removing previous patch from method cancelTask")),this._zonePatched=!0,this._wrap(t.prototype,"runTask",this._patchZoneRunTask()),this._wrap(t.prototype,"scheduleTask",this._patchZoneScheduleTask()),this._wrap(t.prototype,"cancelTask",this._patchZoneCancelTask())):(this._zonePatched=!1,this._getPatchableEventTargets().forEach(i=>{Je(i.addEventListener)&&(this._unwrap(i,"addEventListener"),this._diag.debug("removing previous patch from method addEventListener")),Je(i.removeEventListener)&&(this._unwrap(i,"removeEventListener"),this._diag.debug("removing previous patch from method removeEventListener")),this._wrap(i,"addEventListener",this._patchAddEventListener()),this._wrap(i,"removeEventListener",this._patchRemoveEventListener())})),this._patchHistoryApi()}disable(){const t=this._getZoneWithPrototype();this._diag.debug("removing patch from",It.moduleName,It.version,"zone:",!!t),t&&this._zonePatched?(Je(t.prototype.runTask)&&this._unwrap(t.prototype,"runTask"),Je(t.prototype.scheduleTask)&&this._unwrap(t.prototype,"scheduleTask"),Je(t.prototype.cancelTask)&&this._unwrap(t.prototype,"cancelTask")):this._getPatchableEventTargets().forEach(i=>{Je(i.addEventListener)&&this._unwrap(i,"addEventListener"),Je(i.removeEventListener)&&this._unwrap(i,"removeEventListener")}),this._unpatchHistoryApi()}_getZoneWithPrototype(){return window.Zone}};v(It,"version","0.1.1"),v(It,"moduleName","user-interaction");let uu=It;class du{constructor(e,t){v(this,"debug");v(this,"name");this.debug=e,this.name=t}log(...e){if(this.debug){let t=`[${Date.now()}]`;this.name&&(t+=` - ${this.name}`),console.log.apply(console,[t,...e])}}warn(...e){let t=`[${Date.now()}]`;this.name&&(t+=` - ${this.name}`),console.warn.apply(console,[t,...e])}}class hu{constructor(){v(this,"_sdk");v(this,"_isLoaded",!1);v(this,"_callBuffer",[]);v(this,"_capacity",1e5);v(this,"_droppedEvents",0);v(this,"_exceededCapacity",!1);v(this,"_logger",new du)}_bufferCall(e,t){if(this._isLoaded)try{return this._sdk[e](...t)}catch(n){Ve(`Error executing buffered call to ${e}:`,"error",n)}else{this._enqueue({method:e,args:t});return}}_enqueue(e){this._callBuffer.length<this._capacity?(this._callBuffer.push(e),this._exceededCapacity=!1):(this._exceededCapacity||(this._exceededCapacity=!0,Ve("Exceeded event queue capacity. Increase capacity to avoid dropping events.","warn")),this._droppedEvents+=1)}load(e){this._sdk=e,this._isLoaded=!0;for(const{method:t,args:n}of this._callBuffer)try{this._sdk[t](...n)}catch(i){Ve(`Error executing buffered call to ${t}:`,"error",i)}this._callBuffer=[]}}const Xe="feature_flag",py="launchdarkly",fu="evaluation",x1=`${Xe}.${fu}`,my=`${Xe}.set.id`,gy=`${Xe}.key`,yy=`${Xe}.contextKeys`,by=`${Xe}.context.id`,vy=`${Xe}.result.value`,pu=`${Xe}.provider.name`,Eo={kind:`${Xe}.result.reason.kind`,errorKind:`${Xe}.result.reason.errorKind`,ruleIndex:`${Xe}.result.reason.ruleIndex`,ruleId:`${Xe}.result.reason.ruleId`,prerequisiteKey:`${Xe}.result.reason.prerequisiteKey`,inExperiment:`${Xe}.result.reason.inExperiment`,bigSegmentsStatus:`${Xe}.result.reason.bigSegmentsStatus`},Sy=`${Xe}.result.variationIndex`,_y=`${py}.application.id`,Ty=`${py}.application.version`,X1="$ld:telemetry:session:init",Ey="$ld:telemetry:track",k1="document_load",W1="result.status";function wy(r){return r.includes("%")||r.includes(":")?r.replace(/%/g,"%25").replace(/:/g,"%3A"):r}function Ry(r){return r.kind==="multi"}function Rr(r){return Ry(r)?Object.keys(r).sort().filter(e=>e!=="kind").map(e=>`${e}:${wy(r[e].key)}`).join(":"):"kind"in r&&r.kind==="user"?r.key:"kind"in r?`${r.kind}:${wy(r.key)}`:r.key}function mi(r){return Ry(r)?Object.keys(r).sort().filter(e=>e!=="kind").map(e=>({[e]:r[e].key})).reduce((e,t)=>S(S({},e),t),{}):"kind"in r?{[r.kind]:r.key}:{user:r.key}}function A1(r,e,t){e.addHook({getMetadata:()=>({name:"highlight.run"}),afterIdentify:(n,i,s)=>{var a,l;const o=W(S({},mi(n.context)),{key:(l=(a=t==null?void 0:t.contextFriendlyName)==null?void 0:a.call(t,n.context))!=null?l:Rr(n.context)});return r.log("LD.identify","INFO",o),s.status==="completed"&&r.identify(o.key,o,"LaunchDarkly"),i},afterEvaluation:(n,i,s)=>{const o=S({[pu]:"LaunchDarkly",[gy]:n.flagKey,[vy]:JSON.stringify(s.value)},s.variationIndex?{[Sy]:s.variationIndex}:{});if(s.reason)for(const a in Eo){const l=a,c=s.reason[l];c&&(o[Eo[l]]=c)}return n.context&&(o[yy]=JSON.stringify(mi(n.context)),o[by]=Rr(n.context)),r.startSpan(fu,a=>{a&&a.addEvent(x1,o)}),i}})}class P1{constructor(e,t){v(this,"client");v(this,"metadata");this.client=e,this.metadata=t}getHooks(e){return[]}init(e){this.client.track(X1,{sessionID:e})}recordGauge(e,t){}identify(e,t,n={},i){}error(e,t){}track(e,t){const n=t.event;this.client.track(n?`${Ey}:${n}`:Ey,W(S({},t),{sessionID:e}))}}class wo extends hu{constructor(t,n){super();v(this,"client");this.client=new P1(t,n)}getHooks(t){return[{getMetadata:()=>({name:"highlight.run/ld"}),afterIdentify:(n,i,s)=>(this.load(this.client),i)}]}init(t){return this._bufferCall("init",[t])}recordGauge(t,n){return this._bufferCall("recordGauge",[t,n])}identify(t,n,i={},s){return this._bufferCall("identify",[t,n,i,s])}error(t,n){return this._bufferCall("error",[t,n])}track(t,n){return this._bufferCall("track",[t,n])}}const mu={version:"9.23.0"}.version;let ke={},At;const Ro="highlight.record",M1="highlight.session_id",Iy="launchdarkly.js.log",U1="launchdarkly.exception.id",Cy="launchdarkly.sampling.ratio",Ly="log.severity",Oy="log.message",Zy=(r,e)=>{var p,g,y,E,T,I,R,N,V;if(ke.tracerProvider||ke.meterProvider){console.warn("OTEL already initialized. Skipping...");return}At=r;const t=r.backendUrl||void 0||"https://pub.highlight.io",n=[...(g=(p=r.networkRecordingOptions)==null?void 0:p.urlBlocklist)!=null?g:[],...og],i=(y=r.environment)!=null?y:"production",s={url:r.otlpEndpoint+"/v1/traces",concurrencyLimit:10,timeoutMillis:3e4,compression:"gzip",keepAlive:!0,httpAgentOptions:{timeout:6e4,keepAlive:!0}},o=new L1(s,e),a=new F1(o,{maxExportBatchSize:1024,maxQueueSize:2048,exportTimeoutMillis:s.timeoutMillis,scheduledDelayMillis:s.timeoutMillis}),l=new oi({[oZ]:(E=r.serviceName)!=null?E:"highlight-browser",[aZ]:r.serviceVersion,"deployment.environment.name":i,"highlight.project_id":r.projectId,[dZ]:navigator.userAgent,"browser.language":navigator.language,"telemetry.distro.name":"@highlight-run/observability","telemetry.distro.version":mu});ke.tracerProvider=new JO({resource:l,mergeResourceWithDefaults:!0,spanProcessors:[a]}),oe.setGlobalTracerProvider(ke.tracerProvider);const c=new O1(W(S({},s),{url:r.otlpEndpoint+"/v1/metrics"})),u=new MV({exporter:c,exportIntervalMillis:s.timeoutMillis,exportTimeoutMillis:s.timeoutMillis});ke.meterProvider=new Ix({resource:l,readers:[u]}),jr.setGlobalMeterProvider(ke.meterProvider);let d=[];((T=r.instrumentations)==null?void 0:T["@opentelemetry/instrumentation-document-load"])!==!1&&d.push(new mZ({applyCustomAttributesOnSpan:{documentLoad:Vy,documentFetch:Vy,resourceFetch:B1}})),((I=r.instrumentations)==null?void 0:I["@opentelemetry/instrumentation-user-interaction"])!==!1&&d.push(new uu({eventNames:r.eventNames})),(R=r.networkRecordingOptions)!=null&&R.enabled&&(((N=r.instrumentations)==null?void 0:N["@opentelemetry/instrumentation-fetch"])!==!1&&d.push(new rN({propagateTraceHeaderCorsUrls:Xy(r.tracingOrigins),applyCustomAttributesOnSpan:(L,A,P)=>D(this,null,function*(){var _,x;if(!L.attributes||L.attributes[Ro]===!1)return;if(!(P instanceof Response)){L.setAttributes({"http.response.error":P.message,"http.response.status":P.status});return}Gy(L,A.body,A.headers,r.networkRecordingOptions);const b=yield fg(P,(_=r.networkRecordingOptions)==null?void 0:_.bodyKeysToRecord,(x=r.networkRecordingOptions)==null?void 0:x.networkBodyKeysToRedact);L.setAttribute("http.response.body",b)})})),((V=r.instrumentations)==null?void 0:V["@opentelemetry/instrumentation-xml-http-request"])!==!1&&d.push(new WN({propagateTraceHeaderCorsUrls:Xy(r.tracingOrigins),applyCustomAttributesOnSpan:(L,A)=>{var _,x;const P=A;if(!L.attributes||L.attributes[Ro]===!1)return;Gy(L,P._body,P._requestHeaders,r.networkRecordingOptions);const b=qt(P._body,(_=r.networkRecordingOptions)==null?void 0:_.networkBodyKeysToRedact,(x=r.networkRecordingOptions)==null?void 0:x.bodyKeysToRecord,P._requestHeaders);L.setAttribute("http.request.body",b)}}))),OC({instrumentations:d});const m=new Nm;return m.enable(),ke.tracerProvider.register({contextManager:m,propagator:new DI({propagators:[new bI,new D1({backendUrl:t,otlpEndpoint:r.otlpEndpoint,tracingOrigins:r.tracingOrigins,urlBlocklist:n})]})}),ke};class F1 extends Lm{onStart(e,t){e.setAttribute(M1,Xt()),super.onStart(e,t)}onEnd(e){e.attributes[Ro]!==!1&&super.onEnd(e)}}class D1 extends oC{constructor(t){super();v(this,"highlightEndpoints");v(this,"tracingOrigins");v(this,"urlBlocklist");this.highlightEndpoints=[t.backendUrl,`${t.otlpEndpoint}/v1/traces`,`${t.otlpEndpoint}/v1/logs`,`${t.otlpEndpoint}/v1/metrics`],this.tracingOrigins=t.tracingOrigins,this.urlBlocklist=t.urlBlocklist}inject(t,n,i){var a;const s=oe.getSpan(t);if(!s||!s.attributes)return;const o=s.attributes["http.url"];typeof o=="string"&&(H1(o,this.highlightEndpoints,this.tracingOrigins,this.urlBlocklist)||s.setAttribute(Ro,!1),!Ac(o,(a=this.tracingOrigins)!=null?a:[],this.urlBlocklist))||super.inject(t,n,i)}}const Ny="highlight-browser",J1=Ny,Io=()=>{var r;return(r=ke.tracerProvider)==null?void 0:r.getTracer(Ny)},tr=()=>{var r;return(r=ke.meterProvider)==null?void 0:r.getMeter(J1)},Y1=()=>oe.getActiveSpan(),gu=()=>D(this,null,function*(){yield Promise.allSettled([D(this,null,function*(){ke.tracerProvider?(yield ke.tracerProvider.shutdown(),ke.tracerProvider=void 0):console.warn("OTEL shutdown called without initialized tracerProvider.")}),D(this,null,function*(){ke.meterProvider?(yield ke.meterProvider.shutdown(),ke.meterProvider=void 0):console.warn("OTEL shutdown called without initialized meterProvider.")})])}),Gy=(r,e,t,n)=>{var u;const i=typeof e=="string"?e:String(e);if(!r.attributes)return;const o=r.attributes["http.url"],a=new URL(o);let l;try{l=e?JSON.parse(i):void 0,l.operationName&&r.setAttribute("graphql.operation.name",l.operationName)}catch(d){}const c=sg((u=n==null?void 0:n.networkHeadersToRedact)!=null?u:[],t,n==null?void 0:n.headerKeysToRecord);r.setAttributes({"highlight.type":"http.request","http.request.headers":JSON.stringify(c),"http.request.body":i,[lZ]:o,[cZ]:a.pathname,[uZ]:a.search}),a.searchParams.size>0&&r.setAttributes({"url.query_params":JSON.stringify(Object.fromEntries(a.searchParams))})},H1=(r,e,t,n)=>n!=null&&n.some(s=>r.toLowerCase().includes(s))?!1:fo(r,e),Vy=r=>{var s,o,a;if(!r.events)return;const t=r.events,n={unload:it("unloadEventStart","unloadEventEnd",t),dom_interactive:it("fetchStart","domInteractive",t),dom_content_loaded:it("domContentLoadedEventStart","domContentLoadedEventEnd",t),dom_complete:it("fetchStart","domComplete",t),load_event:it("loadEventStart","loadEventEnd",t),document_load:it("fetchStart","loadEventEnd",t),first_paint:it("fetchStart","firstPaint",t),first_contentful_paint:it("fetchStart","firstContentfulPaint",t),domain_lookup:it("domainLookupStart","domainLookupEnd",t),connect:it("connectStart","connectEnd",t),request:it("requestStart","requestEnd",t),response:it("responseStart","responseEnd",t)},i=(o=(s=At==null?void 0:At.getIntegrations)==null?void 0:s.call(At))!=null?o:[];if(n.document_load!==void 0)for(const l of i)l.recordGauge((a=At==null?void 0:At.sessionSecureId)!=null?a:"",{name:k1,value:n.document_load/1e6});Object.entries(n).forEach(([l,c])=>{c!==void 0&&(r.setAttribute(`timings.${l}.ns`,c),r.setAttribute(`timings.${l}.readable`,xy(c)))})};function it(r,e,t){const n=t.find(a=>a.name===r),i=t.find(a=>a.name===e);if(!n||!i)return;const s=n.time[0]*1e9+n.time[1];return i.time[0]*1e9+i.time[1]-s}const B1=(r,e)=>{const t={domain_lookup:(e.domainLookupEnd-e.domainLookupStart)*1e9,connect:(e.connectEnd-e.connectStart)*1e9,request:(e.responseEnd-e.requestStart)*1e9,response:(e.responseEnd-e.responseStart)*1e9};Object.entries(t).forEach(([n,i])=>{r.setAttribute(`timings.${n}.ns`,i),r.setAttribute(`timings.${n}.readable`,xy(i))})},xy=r=>{if(r>=36e11){const o=r/36e11;return`${Number(o.toFixed(1))}h`}else if(r>=6e10){const o=r/6e10;return`${Number(o.toFixed(1))}m`}else if(r>=1e9){const o=r/1e9;return`${Number(o.toFixed(1))}s`}else if(r>=1e6){const o=r/1e6;return`${Number(o.toFixed(1))}ms`}else if(r>=1e3){const o=r/1e3;return`${Number(o.toFixed(1))}s`}else return`${Number(r.toFixed(1))}ns`},Xy=r=>r===!0?[/localhost/,/^\//,new RegExp(window.location.host)]:Array.isArray(r)?r.map(e=>typeof e=="string"?new RegExp(e):e):/^$/,K1=(r,e,t)=>{const n=window._highlightWebSocketRequestCallback;window._highlightWebSocketRequestCallback=r;const i=window._highlightWebSocketEventCallback;return window._highlightWebSocketEventCallback=s=>{const d=s,{message:o,size:a}=d,l=We(d,["message","size"]),u=t.some(h=>s.name.toLowerCase().includes(h))?l:s;e(u)},()=>{window._highlightWebSocketRequestCallback=n,window._highlightWebSocketEventCallback=i}},z1=({xhrCallback:r,fetchCallback:e,webSocketRequestCallback:t,webSocketEventCallback:n,disableWebSocketRecording:i,bodyKeysToRedact:s,highlightEndpoints:o,tracingOrigins:a,urlBlocklist:l,bodyKeysToRecord:c})=>{const u=sG(r,o,a,l,s,c),d=aG(e,o,a,l,s,c),h=i?()=>{}:K1(t,n,l);return()=>{u(),d(),h()}};class Pt{constructor(e){v(this,"disableConsoleRecording");v(this,"reportConsoleErrors");v(this,"enablePromisePatch");v(this,"consoleMethodsToRecord");v(this,"listeners");v(this,"errors");v(this,"messages");v(this,"options");v(this,"hasNetworkRecording",!0);v(this,"disableNetworkRecording");v(this,"enableRecordingNetworkContents");v(this,"xhrNetworkContents");v(this,"fetchNetworkContents");v(this,"disableRecordingWebSocketContents");v(this,"webSocketNetworkContents");v(this,"webSocketEventContents");v(this,"tracingOrigins");v(this,"networkHeadersToRedact");v(this,"networkBodyKeysToRedact");v(this,"networkBodyKeysToRecord");v(this,"networkHeaderKeysToRecord");v(this,"lastNetworkRequestTimestamp");v(this,"urlBlocklist");v(this,"highlightEndpoints");v(this,"requestResponseSanitizer");var t,n;this.options=e,this.disableConsoleRecording=!!e.disableConsoleRecording,this.reportConsoleErrors=(t=e.reportConsoleErrors)!=null?t:!1,this.enablePromisePatch=(n=e.enablePromisePatch)!=null?n:!1,this.consoleMethodsToRecord=e.consoleMethodsToRecord||[...wl],this.listeners=[],this.errors=[],this.messages=[],this.lastNetworkRequestTimestamp=0}isListening(){return this.listeners.length>0}startListening(){if(this.isListening())return;const e=this;this.disableConsoleRecording||this.listeners.push(_p(t=>{var n,i,s;if(this.reportConsoleErrors&&(t.type==="Error"||t.type==="error")&&t.value&&t.trace){const o=dt(t.value);if(Nl.includes(o)||Gl.some(a=>o.includes(a)))return;e.errors.push({event:o,type:"console.error",url:window.location.href,source:(n=t.trace[0])!=null&&n.fileName?t.trace[0].fileName:"",lineNumber:(i=t.trace[0])!=null&&i.lineNumber?t.trace[0].lineNumber:0,columnNumber:(s=t.trace[0])!=null&&s.columnNumber?t.trace[0].columnNumber:0,stackTrace:t.trace,timestamp:new Date().toISOString(),id:Ps()})}e.messages.push(t)},W(S({},Sp),{level:this.consoleMethodsToRecord}))),this.listeners.push(Ep(t=>{Nl.includes(t.event)||Gl.some(n=>t.event.includes(n))||e.errors.push(t)},{enablePromisePatch:this.enablePromisePatch})),this.listeners.push(gu),Pt.setupNetworkListener(this,this.options)}stopListening(){this.listeners.forEach(e=>e()),this.listeners=[]}static setupNetworkListener(e,t){var s,o,a,l,c,u,d,h,f,m,p,g;const n=(t==null?void 0:t.backendUrl)||void 0||"https://pub.highlight.io",i=t.otlpEndpoint||"https://otel.highlight.io";e.highlightEndpoints=[n,`${i}/v1/traces`,`${i}/v1/logs`,`${i}/v1/metrics`],e.xhrNetworkContents=[],e.fetchNetworkContents=[],e.webSocketNetworkContents=[],e.webSocketEventContents=[],e.networkHeadersToRedact=[],e.urlBlocklist=[],e.tracingOrigins=t.tracingOrigins||[],(t==null?void 0:t.disableNetworkRecording)!==void 0?(e.disableNetworkRecording=t==null?void 0:t.disableNetworkRecording,e.enableRecordingNetworkContents=!1,e.disableRecordingWebSocketContents=!0,e.networkHeadersToRedact=[],e.networkBodyKeysToRedact=[],e.urlBlocklist=[],e.networkBodyKeysToRecord=[]):typeof(t==null?void 0:t.networkRecording)=="boolean"?(e.disableNetworkRecording=!t.networkRecording,e.enableRecordingNetworkContents=!1,e.disableRecordingWebSocketContents=!0,e.networkHeadersToRedact=[],e.networkBodyKeysToRedact=[],e.urlBlocklist=[]):(((s=t.networkRecording)==null?void 0:s.enabled)!==void 0?e.disableNetworkRecording=!t.networkRecording.enabled:e.disableNetworkRecording=!1,e.enableRecordingNetworkContents=((o=t.networkRecording)==null?void 0:o.recordHeadersAndBody)||!1,e.disableRecordingWebSocketContents=((a=t.networkRecording)==null?void 0:a.disableWebSocketEventRecordings)||!1,e.networkHeadersToRedact=((c=(l=t.networkRecording)==null?void 0:l.networkHeadersToRedact)==null?void 0:c.map(y=>y.toLowerCase()))||[],e.networkBodyKeysToRedact=((d=(u=t.networkRecording)==null?void 0:u.networkBodyKeysToRedact)==null?void 0:d.map(y=>y.toLowerCase()))||[],e.urlBlocklist=((f=(h=t.networkRecording)==null?void 0:h.urlBlocklist)==null?void 0:f.map(y=>y.toLowerCase()))||[],e.urlBlocklist=[...e.urlBlocklist,...og],e.requestResponseSanitizer=(m=t.networkRecording)==null?void 0:m.requestResponseSanitizer,e.networkHeaderKeysToRecord=(p=t.networkRecording)==null?void 0:p.headerKeysToRecord,e.networkHeaderKeysToRecord&&(e.networkHeadersToRedact=[],e.networkHeaderKeysToRecord=e.networkHeaderKeysToRecord.map(y=>y.toLocaleLowerCase())),e.networkBodyKeysToRecord=(g=t.networkRecording)==null?void 0:g.bodyKeysToRecord,e.networkBodyKeysToRecord&&(e.networkBodyKeysToRedact=[],e.networkBodyKeysToRecord=e.networkBodyKeysToRecord.map(y=>y.toLocaleLowerCase()))),!e.disableNetworkRecording&&e.enableRecordingNetworkContents&&e.listeners.push(z1({xhrCallback:y=>{e.xhrNetworkContents.push(y)},fetchCallback:y=>{e.fetchNetworkContents.push(y)},webSocketRequestCallback:y=>{e.webSocketNetworkContents&&e.webSocketNetworkContents.push(y)},webSocketEventCallback:y=>{e.webSocketEventContents.push(y)},disableWebSocketRecording:e.disableRecordingWebSocketContents,bodyKeysToRedact:e.networkBodyKeysToRedact,highlightEndpoints:e.highlightEndpoints,tracingOrigins:e.tracingOrigins,urlBlocklist:e.urlBlocklist,bodyKeysToRecord:e.networkBodyKeysToRecord}))}static getRecordedNetworkResources(e,t){var s,o;let n=[],i=[];if(!e.disableNetworkRecording){const a=((s=window==null?void 0:window.performance)==null?void 0:s.timeOrigin)||0;n=performance.getEntriesByType("resource");const l=(t-a)*2;if(n=n.filter(c=>c.responseEnd<e.lastNetworkRequestTimestamp?!1:fo(c.name,e.highlightEndpoints)).map(c=>W(S({},c.toJSON()),{offsetStartTime:c.startTime-l,offsetResponseEnd:c.responseEnd-l,offsetFetchStart:c.fetchStart-l})),e.lastNetworkRequestTimestamp=((o=n.at(-1))==null?void 0:o.responseEnd)||e.lastNetworkRequestTimestamp,e.enableRecordingNetworkContents){const c={headersToRedact:e.networkHeadersToRedact,headersToRecord:e.networkHeaderKeysToRecord,requestResponseSanitizer:e.requestResponseSanitizer};n=cg(n,e.xhrNetworkContents,"xmlhttprequest",c),n=cg(n,e.fetchNetworkContents,"fetch",c)}}return e.disableRecordingWebSocketContents||(i=e.webSocketNetworkContents||[]),[...n,...i]}static getRecordedWebSocketEvents(e){let t=[];return!e.disableNetworkRecording&&!e.disableRecordingWebSocketContents&&(t=e.webSocketEventContents),t}static clearRecordedNetworkResources(e){e.disableNetworkRecording||(e.xhrNetworkContents=[],e.fetchNetworkContents=[],e.webSocketNetworkContents=[],e.webSocketEventContents=[],performance.clearResourceTimings())}}const ky=r=>{r(window.location.href);const e=history.pushState;history.pushState=(s=>function(){var a=s.apply(this,arguments);return window.dispatchEvent(new Event("pushstate")),window.dispatchEvent(new Event("locationchange")),a})(history.pushState);const t=history.replaceState;history.replaceState=(s=>function(){var a=s.apply(this,arguments);return window.dispatchEvent(new Event("replacestate")),window.dispatchEvent(new Event("locationchange")),a})(history.replaceState);const n=()=>{window.dispatchEvent(new Event("locationchange"))};window.addEventListener("popstate",n);const i=function(){r(window.location.href)};return window.addEventListener("locationchange",i),()=>{window.removeEventListener("popstate",n),window.removeEventListener("locationchange",i),history.pushState=e,history.replaceState=t}},Wy=r=>{switch(r){case"strict":return[!0,void 0];case"default":return[!0,void 0];case"none":return[!1,{password:!0}]}};let st,yu;function Ay(r,e){return r.nodeType,Node.ELEMENT_NODE,Tu(r);return j1(r,e)}function bu(r){if(r.id.length)return`#${r.id}`;if(r.classList.length){let e=[];for(const t of r.classList)e.push(`.${t}`);return`${r.nodeName.toLowerCase()}${e.join(",")}`}return r.nodeName.toLowerCase()}function j1(r,e){if(r.tagName.toLowerCase()==="html")return"html";try{const t={root:document.body,idName:i=>!0,className:i=>!0,tagName:i=>!0,attr:(i,s)=>!1,seedMinLength:1,optimizedMinLength:2,threshold:50,maxNumberOfTries:1e3,optimized:!0};st=S(S({},t),e),yu=Q1(st.root,t);let n=vu(r,0,()=>vu(r,1,()=>vu(r,2)));if(n){if(st.optimized){const i=Dy(Jy(n,r));i.length>0&&(n=i[0])}return Co(n)}else return Tu(r)}catch(t){return Tu(r)}}function Q1(r,e){return r.nodeType===Node.DOCUMENT_NODE?r:r===e.root?r.ownerDocument:r}function vu(r,e,t){let n=null,i=[],s=r,o=0;for(;s&&s!==st.root.parentElement;){let a=Lo($1(s))||Lo(...q1(s))||Lo(...eX(s))||Lo(tX(s))||[rX()];const l=nX(s);if(e===0)l&&(a=a.concat(a.filter(_u).map(c=>Su(c,l))));else if(e===1)a=a.slice(0,1),l&&(a=a.concat(a.filter(_u).map(c=>Su(c,l))));else if(e===2){const[c]=a=a.slice(0,1);l&&_u(c)&&(a=[Su(c,l)])}for(let c of a)c.level=o;if(i.push(a),i.length>=st.seedMinLength&&(n=Py(i,t),n))break;s=s.parentElement,o++}return n||(n=Py(i,t)),n}function Py(r,e){const t=Dy(Fy(r));if(t.length>st.threshold)return e?e():null;for(let n of t)if(Uy(n))return n;return null}function Co(r){let e=r[0],t=e.name;for(let n=1;n<r.length;n++){const i=r[n].level||0;e.level===i-1?t=`${r[n].name} > ${t}`:t=`${r[n].name} ${t}`,e=r[n]}return t}function My(r){return r.map(e=>e.penalty).reduce((e,t)=>e+t,0)}function Uy(r){switch(yu.querySelectorAll(Co(r)).length){case 0:return!0;case 1:return!0;default:return!1}}function $1(r){const e=r.getAttribute("id");return e&&st.idName(e)?{name:"#"+Oo(e,{isIdentifier:!0}),penalty:0}:null}function q1(r){return Array.from(r.attributes).filter(t=>st.attr(t.name,t.value)).map(t=>({name:"["+Oo(t.name,{isIdentifier:!0})+'="'+Oo(t.value)+'"]',penalty:.5}))}function eX(r){return Array.from(r.classList).filter(st.className).map(t=>({name:"."+Oo(t,{isIdentifier:!0}),penalty:1}))}function tX(r){const e=r.tagName.toLowerCase();return st.tagName(e)?{name:e,penalty:2}:null}function rX(){return{name:"*",penalty:3}}function nX(r){const e=r.parentNode;if(!e)return null;let t=e.firstChild;if(!t)return null;let n=0;for(;t&&(t.nodeType===Node.ELEMENT_NODE&&n++,t!==r);)t=t.nextSibling;return n}function Su(r,e){return{name:r.name+`:nth-child(${e})`,penalty:r.penalty+1}}function _u(r){return r.name!=="html"&&!r.name.startsWith("#")}function Lo(...r){const e=r.filter(iX);return e.length>0?e:null}function iX(r){return r!=null}function*Fy(r,e=[]){if(r.length>0)for(let t of r[0])yield*ju(Fy(r.slice(1,r.length),e.concat(t)));else yield e}function Dy(r){return Array.from(r).sort((e,t)=>My(e)-My(t))}function*Jy(r,e,t={counter:0,visited:new Map}){if(r.length>2&&r.length>st.optimizedMinLength)for(let n=1;n<r.length-1;n++){if(t.counter>st.maxNumberOfTries)return;t.counter+=1;const i=[...r];i.splice(n,1);const s=Co(i);if(t.visited.has(s))return;Uy(i)&&sX(i,e)&&(yield i,t.visited.set(s,!0),yield*ju(Jy(i,e,t)))}}function sX(r,e){return yu.querySelector(Co(r))===e}const oX=/[ -,\.\/:-@\[-\^`\{-~]/,aX=/[ -,\.\/:-@\[\]\^`\{-~]/,lX=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,cX={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1};function Oo(r,e={}){const t=S(S({},cX),e);t.quotes!="single"&&t.quotes!="double"&&(t.quotes="single");const n=t.quotes=="double"?'"':"'",i=t.isIdentifier,s=r.charAt(0);let o="",a=0;const l=r.length;for(;a<l;){const c=r.charAt(a++);let u=c.charCodeAt(0),d;if(u<32||u>126){if(u>=55296&&u<=56319&&a<l){const h=r.charCodeAt(a++);(h&64512)==56320?u=((u&1023)<<10)+(h&1023)+65536:a--}d="\\"+u.toString(16).toUpperCase()+" "}else t.escapeEverything?oX.test(c)?d="\\"+c:d="\\"+u.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(c)?d="\\"+u.toString(16).toUpperCase()+" ":c=="\\"||!i&&(c=='"'&&n==c||c=="'"&&n==c)||i&&aX.test(c)?d="\\"+c:d=c;o+=d}return i&&(/^-[-\d]/.test(o)?o="\\-"+o.slice(1):/\d/.test(s)&&(o="\\3"+s+" "+o.slice(1))),o=o.replace(lX,function(c,u,d){return u&&u.length%2?c:(u||"")+d}),!i&&t.wrap?n+o+n:o}const Tu=r=>{let e="";const t=r.getAttribute("class"),n=r.getAttribute("id");return n&&(e=e.concat(Yy(n,"#"))),t&&(e=e.concat(Yy(t,"."))),e===""&&(e=e.concat(r.tagName.toLowerCase())),e},Yy=(r,e)=>`${e}${r.trim().split(" ").join(e)}`,Hy=r=>{const e=t=>{if(t.target){const n=t.target,i=Ay(n);r(i,t)}};return window.addEventListener("click",e),()=>window.removeEventListener("click",e)},By=r=>{const e=t=>{if(t.target){const n=Ay(t.target);r(n)}};return window.addEventListener("focusin",e),()=>window.removeEventListener("focusin",e)},uX=30,dX=()=>new Promise(r=>requestAnimationFrame(e=>requestAnimationFrame(t=>r(t-e)))),hX=()=>D(this,null,function*(){const r=[];for(let e=0;e<uX;e++)r.push(yield dX());return r.reduce((e,t)=>e+t,0)/r.length}),Ky=(r,e)=>{let t={},n=16.666666666666668;hX().then(l=>n=l);const i=l=>{var c;t!=null&&t.event||(t={event:l,location:window.location.href,timerStart:(c=window.performance)==null?void 0:c.now()},window.requestAnimationFrame(s))},s=()=>{if(!(t!=null&&t.timerStart))return;const l=window.performance.now()-t.timerStart-n;o(l),t={}},o=l=>{const c=(new Date().getTime()-e)/1e3;r({relativeTimestamp:c,jankAmount:l,querySelector:a(),newLocation:window.location.href!=t.location?window.location.href:void 0})},a=()=>{var l;return(l=t==null?void 0:t.event)!=null&&l.target?bu(t.event.target):""};return window.addEventListener("click",i,!0),window.addEventListener("keydown",i,!0),()=>{window.removeEventListener("keydown",i,!0),window.removeEventListener("click",i,!0)}},zy=r=>{let e,t;if(typeof document.hidden!="undefined"?(e="hidden",t="visibilitychange"):typeof document.msHidden!="undefined"?(e="msHidden",t="msvisibilitychange"):typeof document.webkitHidden!="undefined"&&(e="webkitHidden",t="webkitvisibilitychange"),t===void 0)return()=>{};if(e===void 0)return()=>{};const n=e,i=()=>{const o=document[n];r(!!o)};document.addEventListener(t,i);const s=t;return()=>document.removeEventListener(s,i)},jy=typeof window!="undefined"&&"performance"in window&&"memory"in performance?performance:{memory:{}},Qy=(r,e)=>{let t=0,n=0;const i=()=>{const u=(new Date().getTime()-e)/1e3,d=jy.memory.jsHeapSizeLimit||0,h=jy.memory.usedJSHeapSize||0;r({jsHeapSizeLimit:d,usedJSHeapSize:h,relativeTimestamp:u,fps:t})};i();let s;s=setInterval(()=>{i()},1e3);let o=0,a=Date.now();const l=function(){var c=Date.now();o++,c>1e3+a&&(t=Math.round(o*1e3/(c-a)),o=0,a=c),n=requestAnimationFrame(l)};return l(),()=>{clearInterval(s),cancelAnimationFrame(n)}},$y=r=>{r(window.location.href);var e=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(s){setTimeout(()=>{var a;var o;try{o=JSON.parse((a=s==null?void 0:s.toString())!=null?a:"")}catch(l){return}(o.type==="track"||o.type==="identify")&&Eu(o)&&r(o)},100),e.call(this,s)};const t=s=>{if(s.key==="ajs_user_id"||s.key==="ajs_anonymous_id"||s.key==="ajs_user_traits"){const{userId:o,userTraits:a}=qy();if(o){let l={};a&&(l=JSON.parse(a));const c={type:"identify",userId:o.toString(),traits:l};Eu(c)&&r(c)}}},{userId:n,userTraits:i}=qy();if(n){let s={};i&&(s=JSON.parse(i));const o={type:"identify",userId:n.toString(),traits:s};Eu(o)&&r(o)}return window.addEventListener("storage",t),HN(({keyName:s})=>{t({key:s})}),()=>{window.removeEventListener("storage",t),XMLHttpRequest.prototype.send=e}},qy=()=>{const r=xe("ajs_user_id"),e=xe("ajs_user_traits"),t=xe("ajs_anonymous_id");return{userId:r,userTraits:e,anonymousId:t}},Eu=r=>{if(!r)return!1;let e="";try{e=JSON.stringify(r)}catch(i){return!1}const t=fX(e),n=xe(_e.SEGMENT_LAST_SENT_HASH_KEY);return n===void 0||t!==n?(rt(_e.SEGMENT_LAST_SENT_HASH_KEY,t),!0):!1},fX=r=>{var e=0,t=r.length,n=0;if(t>0)for(;n<t;)e=(e<<5)-e+r.charCodeAt(n++)|0;return e.toString()},eb=(r,e)=>{const t=pX(r);let n=[];const i=!1,s=!0;for(let o=0;o<t.length;o++){let a=t[o].split("+");n=[],a.length>1&&(n=yX(rb,a)),a=a[a.length-1],a=a==="*"?"*":gX(a),a in wt||(wt[a]=[]),wt[a].push({mods:n,shortcut:t[o],key:t[o],method:e,keyup:i,keydown:s,scope:"all",splitKey:"+"})}bX(document,"keydown",o=>{SX(o)})};let Ye=[];function pX(r){typeof r!="string"&&(r=""),r=r.replace(/\s/g,"");const e=r.split(",");let t=e.lastIndexOf("");for(;t>=0;)e[t-1]+=",",e.splice(t,1),t=e.lastIndexOf("");return e}const wt={},wu=typeof navigator!="undefined"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1,mX={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"":20,",":188,".":190,"/":191,"`":192,"-":wu?173:189,"=":wu?61:187,";":wu?59:186,"'":222,"[":219,"]":221,"\\":220},tb={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},He={16:!1,18:!1,17:!1,91:!1},rb={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":91,cmd:91,command:91},gX=r=>mX[r.toLowerCase()]||rb[r.toLowerCase()]||r.toUpperCase().charCodeAt(0);function yX(r,e){const t=e.slice(0,e.length-1);for(let n=0;n<t.length;n++)t[n]=r[t[n].toLowerCase()];return t}function bX(r,e,t){r.addEventListener?r.addEventListener(e,t,!1):r.attachEvent&&r.attachEvent(`on${e}`,()=>{t(window.event)})}function vX(r,e,t){let n;if(e.scope===t||e.scope==="all"){n=e.mods.length>0;for(const i in He)Object.prototype.hasOwnProperty.call(He,i)&&(!He[i]&&e.mods.indexOf(+i)>-1||He[i]&&e.mods.indexOf(+i)===-1)&&(n=!1);(e.mods.length===0&&!He[16]&&!He[18]&&!He[17]&&!He[91]||n||e.shortcut==="*")&&e.method(r,e)===!1&&(r.preventDefault?r.preventDefault():r.returnValue=!1,r.stopPropagation&&r.stopPropagation(),r.cancelBubble&&(r.cancelBubble=!0))}}function SX(r){const e=wt["*"];let t=r.keyCode||r.which||r.charCode;if((t===93||t===224)&&(t=91),Ye.indexOf(t)===-1&&t!==229&&Ye.push(t),["ctrlKey","altKey","shiftKey","metaKey"].forEach(n=>{const i=tb[n];r[n]&&Ye.indexOf(i)===-1?Ye.push(i):!r[n]&&Ye.indexOf(i)>-1?Ye.splice(Ye.indexOf(i),1):n==="metaKey"&&r[n]&&Ye.length===3&&(r.ctrlKey||r.shiftKey||r.altKey||(Ye=Ye.slice(Ye.indexOf(i))))}),!(t in He&&(He[t]=!0,!e))){for(const n in He)Object.prototype.hasOwnProperty.call(He,n)&&(He[n]=r[tb[n]]);if(r.getModifierState&&!(r.altKey&&!r.ctrlKey)&&r.getModifierState("AltGraph")&&(Ye.indexOf(17)===-1&&Ye.push(17),Ye.indexOf(18)===-1&&Ye.push(18),He[17]=!0,He[18]=!0),t in wt){for(let n=0;n<wt[t].length;n++)if((r.type==="keydown"&&wt[t][n].keydown||r.type==="keyup"&&wt[t][n].keyup)&&wt[t][n].key){const i=wt[t][n];vX(r,i,"all")}}}}const Ru=r=>{let e;const n=()=>{clearTimeout(e),e=setTimeout(()=>{var i,s;r({height:window.innerHeight,width:window.innerWidth,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,pixelDepth:window.screen.pixelDepth,orientation:(s=(i=window.screen.orientation)==null?void 0:i.angle)!=null?s:0})},500)};return window.addEventListener("resize",n),n(),()=>window.removeEventListener("resize",n)};var rr,gi,nb,Zo,Iu,ib=-1,Ir=function(r){addEventListener("pageshow",function(e){e.persisted&&(ib=e.timeStamp,r(e))},!0)},Cu=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},No=function(){var r=Cu();return r&&r.activationStart||0},ot=function(r,e){var t=Cu(),n="navigate";return ib>=0?n="back-forward-cache":t&&(document.prerendering||No()>0?n="prerender":document.wasDiscarded?n="restore":t.type&&(n=t.type.replace(/_/g,"-"))),{name:r,value:e===void 0?-1:e,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:n}},an=function(r,e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(r)){var n=new PerformanceObserver(function(i){Promise.resolve().then(function(){e(i.getEntries())})});return n.observe(Object.assign({type:r,buffered:!0},t||{})),n}}catch(i){}},at=function(r,e,t,n){var i,s;return function(o){e.value>=0&&(o||n)&&((s=e.value-(i||0))||i===void 0)&&(i=e.value,e.delta=s,e.rating=function(a,l){return a>l[1]?"poor":a>l[0]?"needs-improvement":"good"}(e.value,t),r(e))}},Lu=function(r){requestAnimationFrame(function(){return requestAnimationFrame(function(){return r()})})},Go=function(r){var e=function(t){t.type!=="pagehide"&&document.visibilityState!=="hidden"||r(t)};addEventListener("visibilitychange",e,!0),addEventListener("pagehide",e,!0)},Ou=function(r){var e=!1;return function(t){e||(r(t),e=!0)}},ln=-1,sb=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},Vo=function(r){document.visibilityState==="hidden"&&ln>-1&&(ln=r.type==="visibilitychange"?r.timeStamp:0,_X())},ob=function(){addEventListener("visibilitychange",Vo,!0),addEventListener("prerenderingchange",Vo,!0)},_X=function(){removeEventListener("visibilitychange",Vo,!0),removeEventListener("prerenderingchange",Vo,!0)},Zu=function(){return ln<0&&(ln=sb(),ob(),Ir(function(){setTimeout(function(){ln=sb(),ob()},0)})),{get firstHiddenTime(){return ln}}},yi=function(r){document.prerendering?addEventListener("prerenderingchange",function(){return r()},!0):r()},ab=[1800,3e3],lb=function(r,e){e=e||{},yi(function(){var t,n=Zu(),i=ot("FCP"),s=an("paint",function(o){o.forEach(function(a){a.name==="first-contentful-paint"&&(s.disconnect(),a.startTime<n.firstHiddenTime&&(i.value=Math.max(a.startTime-No(),0),i.entries.push(a),t(!0)))})});s&&(t=at(r,i,ab,e.reportAllChanges),Ir(function(o){i=ot("FCP"),t=at(r,i,ab,e.reportAllChanges),Lu(function(){i.value=performance.now()-o.timeStamp,t(!0)})}))})},cb=[.1,.25],TX=function(r,e){e=e||{},lb(Ou(function(){var t,n=ot("CLS",0),i=0,s=[],o=function(l){l.forEach(function(c){if(!c.hadRecentInput){var u=s[0],d=s[s.length-1];i&&c.startTime-d.startTime<1e3&&c.startTime-u.startTime<5e3?(i+=c.value,s.push(c)):(i=c.value,s=[c])}}),i>n.value&&(n.value=i,n.entries=s,t())},a=an("layout-shift",o);a&&(t=at(r,n,cb,e.reportAllChanges),Go(function(){o(a.takeRecords()),t(!0)}),Ir(function(){i=0,n=ot("CLS",0),t=at(r,n,cb,e.reportAllChanges),Lu(function(){return t()})}),setTimeout(t,0))}))},bi={passive:!0,capture:!0},EX=new Date,ub=function(r,e){rr||(rr=e,gi=r,nb=new Date,hb(removeEventListener),db())},db=function(){if(gi>=0&&gi<nb-EX){var r={entryType:"first-input",name:rr.type,target:rr.target,cancelable:rr.cancelable,startTime:rr.timeStamp,processingStart:rr.timeStamp+gi};Zo.forEach(function(e){e(r)}),Zo=[]}},wX=function(r){if(r.cancelable){var e=(r.timeStamp>1e12?new Date:performance.now())-r.timeStamp;r.type=="pointerdown"?function(t,n){var i=function(){ub(t,n),o()},s=function(){o()},o=function(){removeEventListener("pointerup",i,bi),removeEventListener("pointercancel",s,bi)};addEventListener("pointerup",i,bi),addEventListener("pointercancel",s,bi)}(e,r):ub(e,r)}},hb=function(r){["mousedown","keydown","touchstart","pointerdown"].forEach(function(e){return r(e,wX,bi)})},fb=[100,300],RX=function(r,e){e=e||{},yi(function(){var t,n=Zu(),i=ot("FID"),s=function(l){l.startTime<n.firstHiddenTime&&(i.value=l.processingStart-l.startTime,i.entries.push(l),t(!0))},o=function(l){l.forEach(s)},a=an("first-input",o);t=at(r,i,fb,e.reportAllChanges),a&&Go(Ou(function(){o(a.takeRecords()),a.disconnect()})),a&&Ir(function(){var l;i=ot("FID"),t=at(r,i,fb,e.reportAllChanges),Zo=[],gi=-1,rr=null,hb(addEventListener),l=s,Zo.push(l),db()})})},pb=0,Nu=1/0,xo=0,IX=function(r){r.forEach(function(e){e.interactionId&&(Nu=Math.min(Nu,e.interactionId),xo=Math.max(xo,e.interactionId),pb=xo?(xo-Nu)/7+1:0)})},mb=function(){return Iu?pb:performance.interactionCount||0},CX=function(){"interactionCount"in performance||Iu||(Iu=an("event",IX,{type:"event",buffered:!0,durationThreshold:0}))},gb=[200,500],yb=0,bb=function(){return mb()-yb},Rt=[],Gu={},vb=function(r){var e=Rt[Rt.length-1],t=Gu[r.interactionId];if(t||Rt.length<10||r.duration>e.latency){if(t)t.entries.push(r),t.latency=Math.max(t.latency,r.duration);else{var n={id:r.interactionId,latency:r.duration,entries:[r]};Gu[n.id]=n,Rt.push(n)}Rt.sort(function(i,s){return s.latency-i.latency}),Rt.splice(10).forEach(function(i){delete Gu[i.id]})}},LX=function(r,e){e=e||{},yi(function(){var t;CX();var n,i=ot("INP"),s=function(a){a.forEach(function(u){u.interactionId&&vb(u),u.entryType==="first-input"&&!Rt.some(function(d){return d.entries.some(function(h){return u.duration===h.duration&&u.startTime===h.startTime})})&&vb(u)});var l,c=(l=Math.min(Rt.length-1,Math.floor(bb()/50)),Rt[l]);c&&c.latency!==i.value&&(i.value=c.latency,i.entries=c.entries,n())},o=an("event",s,{durationThreshold:(t=e.durationThreshold)!==null&&t!==void 0?t:40});n=at(r,i,gb,e.reportAllChanges),o&&("interactionId"in PerformanceEventTiming.prototype&&o.observe({type:"first-input",buffered:!0}),Go(function(){s(o.takeRecords()),i.value<0&&bb()>0&&(i.value=0,i.entries=[]),n(!0)}),Ir(function(){Rt=[],yb=mb(),i=ot("INP"),n=at(r,i,gb,e.reportAllChanges)}))})},Sb=[2500,4e3],Vu={},OX=function(r,e){e=e||{},yi(function(){var t,n=Zu(),i=ot("LCP"),s=function(l){var c=l[l.length-1];c&&c.startTime<n.firstHiddenTime&&(i.value=Math.max(c.startTime-No(),0),i.entries=[c],t())},o=an("largest-contentful-paint",s);if(o){t=at(r,i,Sb,e.reportAllChanges);var a=Ou(function(){Vu[i.id]||(s(o.takeRecords()),o.disconnect(),Vu[i.id]=!0,t(!0))});["keydown","click"].forEach(function(l){addEventListener(l,function(){return setTimeout(a,0)},!0)}),Go(a),Ir(function(l){i=ot("LCP"),t=at(r,i,Sb,e.reportAllChanges),Lu(function(){i.value=performance.now()-l.timeStamp,Vu[i.id]=!0,t(!0)})})}})},_b=[800,1800],ZX=function r(e){document.prerendering?yi(function(){return r(e)}):document.readyState!=="complete"?addEventListener("load",function(){return r(e)},!0):setTimeout(e,0)},NX=function(r,e){e=e||{};var t=ot("TTFB"),n=at(r,t,_b,e.reportAllChanges);ZX(function(){var i=Cu();if(i){var s=i.responseStart;if(s<=0||s>performance.now())return;t.value=Math.max(s-No(),0),t.entries=[i],n(!0),Ir(function(){t=ot("TTFB",0),(n=at(r,t,_b,e.reportAllChanges))(!0)})}})};const Tb=r=>(TX(r),lb(r),RX(r),OX(r),NX(r),LX(r),()=>{}),cn=typeof navigator!="undefined"&&"connection"in navigator?navigator.connection:{},Eb=(r,e)=>{const t=()=>{const s=(new Date().getTime()-e)/1e3;r({relativeTimestamp:s,downlink:cn.downlink,downlinkMax:cn.downlinkMax,effectiveType:cn.effectiveType,rtt:cn.rtt,saveData:cn.saveData,type:cn.type})};t();let n;return n=setInterval(()=>{t()},1e3),()=>{clearInterval(n)}},Xo="iframe parent ready",ko="iframe ok",vi="highlightLogs",GX=r=>{let e=xe(vi)||"";e=e+"["+new Date().getTime()+"] "+r+`
`,rt(vi,e)},wb=()=>xe(vi)||"",Rb=r=>{if(!r)return;let e=xe(vi)||"";e&&(e.startsWith(r)?(e=e.slice(r.length),rt(vi,e)):GX("Unable to clear logs "+r.replace(`
`," ")+" from "+e.replace(`
`," ")))},Ib=()=>{if(!("performance"in window&&"memory"in performance))return{getDeviceDetails:void 0,getCurrentDeviceDetails:void 0};const r=window.performance;return{getDeviceDetails:()=>({deviceMemory:VX(navigator.deviceMemory||0)}),getCurrentDeviceDetails:()=>{const n=xu(r.memory.jsHeapSizeLimit),i=xu(r.memory.totalJSHeapSize),s=xu(r.memory.usedJSHeapSize);return{jsHeapSizeLimit:n,totalJSHeapSize:i,usedJSHeapSize:s}}}},xu=r=>r/Math.pow(1e3,2),VX=r=>1024*r;var Cb={exports:{}};/**
 * @preserve
 * JS Implementation of incremental MurmurHash3 (r150) (as of May 10, 2013)
 *
 * @author <a href="mailto:jensyt@gmail.com">Jens Taylor</a>
 * @see http://github.com/homebrewing/brauhaus-diff
 * @author <a href="mailto:gary.court@gmail.com">Gary Court</a>
 * @see http://github.com/garycourt/murmurhash-js
 * @author <a href="mailto:aappleby@gmail.com">Austin Appleby</a>
 * @see http://sites.google.com/site/murmurhash/
 */(function(r){(function(){var e;function t(n,i){var s=this instanceof t?this:e;if(s.reset(i),typeof n=="string"&&n.length>0&&s.hash(n),s!==this)return s}t.prototype.hash=function(n){var i,s,o,a,l;switch(l=n.length,this.len+=l,s=this.k1,o=0,this.rem){case 0:s^=l>o?n.charCodeAt(o++)&65535:0;case 1:s^=l>o?(n.charCodeAt(o++)&65535)<<8:0;case 2:s^=l>o?(n.charCodeAt(o++)&65535)<<16:0;case 3:s^=l>o?(n.charCodeAt(o)&255)<<24:0,s^=l>o?(n.charCodeAt(o++)&65280)>>8:0}if(this.rem=l+this.rem&3,l-=this.rem,l>0){for(i=this.h1;s=s*11601+(s&65535)*3432906752&4294967295,s=s<<15|s>>>17,s=s*13715+(s&65535)*461832192&4294967295,i^=s,i=i<<13|i>>>19,i=i*5+3864292196&4294967295,!(o>=l);)s=n.charCodeAt(o++)&65535^(n.charCodeAt(o++)&65535)<<8^(n.charCodeAt(o++)&65535)<<16,a=n.charCodeAt(o++),s^=(a&255)<<24^(a&65280)>>8;switch(s=0,this.rem){case 3:s^=(n.charCodeAt(o+2)&65535)<<16;case 2:s^=(n.charCodeAt(o+1)&65535)<<8;case 1:s^=n.charCodeAt(o)&65535}this.h1=i}return this.k1=s,this},t.prototype.result=function(){var n,i;return n=this.k1,i=this.h1,n>0&&(n=n*11601+(n&65535)*3432906752&4294967295,n=n<<15|n>>>17,n=n*13715+(n&65535)*461832192&4294967295,i^=n),i^=this.len,i^=i>>>16,i=i*51819+(i&65535)*2246770688&4294967295,i^=i>>>13,i=i*44597+(i&65535)*3266445312&4294967295,i^=i>>>16,i>>>0},t.prototype.reset=function(n){return this.h1=typeof n=="number"?n:0,this.rem=this.k1=this.len=0,this},e=new t,r.exports=t})()})(Cb);var xX=Cb.exports;const XX=Gi(xX),Xu=28,un="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",kX=2246822507,lt=r=>{var t;var e="";if(r){const n=XX(r).result();for(let i=0;i<Xu;i++){const o=((n^i*kX)>>>0)%un.length;e+=un.charAt(o)}}else{const n=typeof window!="undefined"&&((t=window.crypto)==null?void 0:t.getRandomValues),i=new Uint32Array(Xu);n&&window.crypto.getRandomValues(i);for(let s=0;s<Xu;s++)n?e+=un.charAt(i[s]%un.length):e+=un.charAt(Math.floor(Math.random()*un.length))}return e};var je=Uint8Array,Qe=Uint16Array,ku=Int32Array,Wu=new je([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Au=new je([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Lb=new je([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ob=function(r,e){for(var t=new Qe(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var i=new ku(t[30]),n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)i[s]=s-t[n]<<5|n;return{b:t,r:i}},Zb=Ob(Wu,2),WX=Zb.b,Pu=Zb.r;WX[28]=258,Pu[258]=28;for(var AX=Ob(Au,0),Nb=AX.r,Mu=new Qe(32768),ge=0;ge<32768;++ge){var nr=(ge&43690)>>1|(ge&21845)<<1;nr=(nr&52428)>>2|(nr&13107)<<2,nr=(nr&61680)>>4|(nr&3855)<<4,Mu[ge]=((nr&65280)>>8|(nr&255)<<8)>>1}for(var Si=function(r,e,t){for(var n=r.length,i=0,s=new Qe(e);i<n;++i)r[i]&&++s[r[i]-1];var o=new Qe(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(t){a=new Qe(1<<e);var l=15-e;for(i=0;i<n;++i)if(r[i])for(var c=i<<4|r[i],u=e-r[i],d=o[r[i]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)a[Mu[d]>>l]=c}else for(a=new Qe(n),i=0;i<n;++i)r[i]&&(a[i]=Mu[o[r[i]-1]++]>>15-r[i]);return a},Cr=new je(288),ge=0;ge<144;++ge)Cr[ge]=8;for(var ge=144;ge<256;++ge)Cr[ge]=9;for(var ge=256;ge<280;++ge)Cr[ge]=7;for(var ge=280;ge<288;++ge)Cr[ge]=8;for(var Wo=new je(32),ge=0;ge<32;++ge)Wo[ge]=5;var PX=Si(Cr,9,0),MX=Si(Wo,5,0),Gb=function(r){return(r+7)/8|0},Vb=function(r,e,t){return(t==null||t>r.length)&&(t=r.length),new je(r.subarray(e,t))},Mt=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8},_i=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8,r[n+2]|=t>>16},Uu=function(r,e){for(var t=[],n=0;n<r.length;++n)r[n]&&t.push({s:n,f:r[n]});var i=t.length,s=t.slice();if(!i)return{t:Wb,l:0};if(i==1){var o=new je(t[0].s+1);return o[t[0].s]=1,{t:o,l:1}}t.sort(function(R,N){return R.f-N.f}),t.push({s:-1,f:25001});var a=t[0],l=t[1],c=0,u=1,d=2;for(t[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=i-1;)a=t[t[c].f<t[d].f?c++:d++],l=t[c!=u&&t[c].f<t[d].f?c++:d++],t[u++]={s:-1,f:a.f+l.f,l:a,r:l};for(var h=s[0].s,n=1;n<i;++n)s[n].s>h&&(h=s[n].s);var f=new Qe(h+1),m=Fu(t[u-1],f,0);if(m>e){var n=0,p=0,g=m-e,y=1<<g;for(s.sort(function(N,V){return f[V.s]-f[N.s]||N.f-V.f});n<i;++n){var E=s[n].s;if(f[E]>e)p+=y-(1<<m-f[E]),f[E]=e;else break}for(p>>=g;p>0;){var T=s[n].s;f[T]<e?p-=1<<e-f[T]++-1:++n}for(;n>=0&&p;--n){var I=s[n].s;f[I]==e&&(--f[I],++p)}m=e}return{t:new je(f),l:m}},Fu=function(r,e,t){return r.s==-1?Math.max(Fu(r.l,e,t+1),Fu(r.r,e,t+1)):e[r.s]=t},xb=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new Qe(++e),n=0,i=r[0],s=1,o=function(l){t[n++]=l},a=1;a<=e;++a)if(r[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=r[a]}return{c:t.subarray(0,n),n:e}},Ti=function(r,e){for(var t=0,n=0;n<e.length;++n)t+=r[n]*e[n];return t},Xb=function(r,e,t){var n=t.length,i=Gb(e+2);r[i]=n&255,r[i+1]=n>>8,r[i+2]=r[i]^255,r[i+3]=r[i+1]^255;for(var s=0;s<n;++s)r[i+s+4]=t[s];return(i+4+n)*8},kb=function(r,e,t,n,i,s,o,a,l,c,u){Mt(e,u++,t),++i[256];for(var d=Uu(i,15),h=d.t,f=d.l,m=Uu(s,15),p=m.t,g=m.l,y=xb(h),E=y.c,T=y.n,I=xb(p),R=I.c,N=I.n,V=new Qe(19),Z=0;Z<E.length;++Z)++V[E[Z]&31];for(var Z=0;Z<R.length;++Z)++V[R[Z]&31];for(var w=Uu(V,7),L=w.t,A=w.l,P=19;P>4&&!L[Lb[P-1]];--P);var Q=c+5<<3,b=Ti(i,Cr)+Ti(s,Wo)+o,_=Ti(i,h)+Ti(s,p)+o+14+3*P+Ti(V,L)+2*V[16]+3*V[17]+7*V[18];if(l>=0&&Q<=b&&Q<=_)return Xb(e,u,r.subarray(l,l+c));var x,F,J,M;if(Mt(e,u,1+(_<b)),u+=2,_<b){x=Si(h,f,0),F=h,J=Si(p,g,0),M=p;var se=Si(L,A,0);Mt(e,u,T-257),Mt(e,u+5,N-1),Mt(e,u+10,P-4),u+=14;for(var Z=0;Z<P;++Z)Mt(e,u+3*Z,L[Lb[Z]]);u+=3*P;for(var re=[E,R],le=0;le<2;++le)for(var Oe=re[le],Z=0;Z<Oe.length;++Z){var ct=Oe[Z]&31;Mt(e,u,se[ct]),u+=L[ct],ct>15&&(Mt(e,u,Oe[Z]>>5&127),u+=Oe[Z]>>12)}}else x=PX,F=Cr,J=MX,M=Wo;for(var Z=0;Z<a;++Z){var Ce=n[Z];if(Ce>255){var ct=Ce>>18&31;_i(e,u,x[ct+257]),u+=F[ct+257],ct>7&&(Mt(e,u,Ce>>23&31),u+=Wu[ct]);var gt=Ce&31;_i(e,u,J[gt]),u+=M[gt],gt>3&&(_i(e,u,Ce>>5&8191),u+=Au[gt])}else _i(e,u,x[Ce]),u+=F[Ce]}return _i(e,u,x[256]),u+F[256]},UX=new ku([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Wb=new je(0),FX=function(r,e,t,n,i,s){var o=s.z||r.length,a=new je(n+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(n,a.length-i),c=s.l,u=(s.r||0)&7;if(e){u&&(l[0]=s.r>>3);for(var d=UX[e-1],h=d>>13,f=d&8191,m=(1<<t)-1,p=s.p||new Qe(32768),g=s.h||new Qe(m+1),y=Math.ceil(t/3),E=2*y,T=function(ir){return(r[ir]^r[ir+1]<<y^r[ir+2]<<E)&m},I=new ku(25e3),R=new Qe(288),N=new Qe(32),V=0,Z=0,w=s.i||0,L=0,A=s.w||0,P=0;w+2<o;++w){var Q=T(w),b=w&32767,_=g[Q];if(p[b]=_,g[Q]=b,A<=w){var x=o-w;if((V>7e3||L>24576)&&(x>423||!c)){u=kb(r,l,0,I,R,N,Z,L,P,w-P,u),L=V=Z=0,P=w;for(var F=0;F<286;++F)R[F]=0;for(var F=0;F<30;++F)N[F]=0}var J=2,M=0,se=f,re=b-_&32767;if(x>2&&Q==T(w-re))for(var le=Math.min(h,x)-1,Oe=Math.min(32767,w),ct=Math.min(258,x);re<=Oe&&--se&&b!=_;){if(r[w+J]==r[w+J-re]){for(var Ce=0;Ce<ct&&r[w+Ce]==r[w+Ce-re];++Ce);if(Ce>J){if(J=Ce,M=re,Ce>le)break;for(var gt=Math.min(re,Ce-2),Lr=0,F=0;F<gt;++F){var Ut=w-re+F&32767,Ii=p[Ut],dn=Ut-Ii&32767;dn>Lr&&(Lr=dn,_=Ut)}}}b=_,_=p[b],re+=b-_&32767}if(M){I[L++]=268435456|Pu[J]<<18|Nb[M];var Ci=Pu[J]&31,hn=Nb[M]&31;Z+=Wu[Ci]+Au[hn],++R[257+Ci],++N[hn],A=w+J,++V}else I[L++]=r[w],++R[r[w]]}}for(w=Math.max(w,A);w<o;++w)I[L++]=r[w],++R[r[w]];u=kb(r,l,c,I,R,N,Z,L,P,w-P,u),c||(s.r=u&7|l[u/8|0]<<3,u-=7,s.h=g,s.p=p,s.i=w,s.w=A)}else{for(var w=s.w||0;w<o+c;w+=65535){var fn=w+65535;fn>=o&&(l[u/8|0]=c,fn=o),u=Xb(l,u+1,r.subarray(w,fn))}s.i=o}return Vb(a,0,n+Gb(u)+i)},DX=function(){for(var r=new Int32Array(256),e=0;e<256;++e){for(var t=e,n=9;--n;)t=(t&1&&-306674912)^t>>>1;r[e]=t}return r}(),JX=function(){var r=-1;return{p:function(e){for(var t=r,n=0;n<e.length;++n)t=DX[t&255^e[n]]^t>>>8;r=t},d:function(){return~r}}},YX=function(r,e,t,n,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new je(s.length+r.length);o.set(s),o.set(r,s.length),r=o,i.w=s.length}return FX(r,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+e.mem,t,n,i)},Du=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8},HX=function(r,e){var t=e.filename;if(r[0]=31,r[1]=139,r[2]=8,r[8]=e.level<2?4:e.level==9?2:0,r[9]=3,e.mtime!=0&&Du(r,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),t){r[3]=8;for(var n=0;n<=t.length;++n)r[n+10]=t.charCodeAt(n)}},BX=function(r){return 10+(r.filename?r.filename.length+1:0)};function KX(r,e){e||(e={});var t=JX(),n=r.length;t.p(r);var i=YX(r,e,BX(e),8),s=i.length;return HX(i,e),Du(i,s-8,t.d()),Du(i,s-4,n),i}var Ab=typeof TextEncoder!="undefined"&&new TextEncoder,zX=typeof TextDecoder!="undefined"&&new TextDecoder;try{zX.decode(Wb,{stream:!0})}catch(r){}function jX(r,e){var t;if(Ab)return Ab.encode(r);for(var n=r.length,i=new je(r.length+(r.length>>1)),s=0,o=function(c){i[s++]=c},t=0;t<n;++t){if(s+5>i.length){var a=new je(s+8+(n-t<<1));a.set(i),i=a}var l=r.charCodeAt(t);l<128||e?o(l):l<2048?(o(192|l>>6),o(128|l&63)):l>55295&&l<57344?(l=65536+(l&1047552)|r.charCodeAt(++t)&1023,o(240|l>>18),o(128|l>>12&63),o(128|l>>6&63),o(128|l&63)):(o(224|l>>12),o(128|l>>6&63),o(128|l&63))}return Vb(i,0,s)}function Pb(r){return D(this,null,function*(){const e=jX(JSON.stringify(r)),t=KX(e),n=yield new Promise(i=>{const s=new FileReader;s.onload=()=>i(s.result),s.readAsDataURL(new Blob([new Uint8Array(t)]))});return{compressedBase64:n.slice(n.indexOf(",")+1),compressedSize:t.length,bufferLength:e.length}})}const Mb="dmFyIFZyPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxqcj1PYmplY3QuZGVmaW5lUHJvcGVydGllczt2YXIgcXI9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnM7dmFyICRlPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7dmFyIHRuPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksbm49T2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZTt2YXIgZnQ9KEYsUCxNKT0+UCBpbiBGP1ZyKEYsUCx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6TX0pOkZbUF09TSxEPShGLFApPT57Zm9yKHZhciBNIGluIFB8fChQPXt9KSl0bi5jYWxsKFAsTSkmJmZ0KEYsTSxQW01dKTtpZigkZSlmb3IodmFyIE0gb2YgJGUoUCkpbm4uY2FsbChQLE0pJiZmdChGLE0sUFtNXSk7cmV0dXJuIEZ9LEJlPShGLFApPT5qcihGLHFyKFApKTt2YXIgdmU9KEYsUCk9Pnt2YXIgTT17fTtmb3IodmFyIFggaW4gRil0bi5jYWxsKEYsWCkmJlAuaW5kZXhPZihYKTwwJiYoTVtYXT1GW1hdKTtpZihGIT1udWxsJiYkZSlmb3IodmFyIFggb2YgJGUoRikpUC5pbmRleE9mKFgpPDAmJm5uLmNhbGwoRixYKSYmKE1bWF09RltYXSk7cmV0dXJuIE19O3ZhciBodD0oRixQLE0pPT5mdChGLHR5cGVvZiBQIT0ic3ltYm9sIj9QKyIiOlAsTSk7dmFyIFE9KEYsUCxNKT0+bmV3IFByb21pc2UoKFgsSWUpPT57dmFyIFVlPXJlPT57dHJ5e29lKE0ubmV4dChyZSkpfWNhdGNoKEVlKXtJZShFZSl9fSxWZT1yZT0+e3RyeXtvZShNLnRocm93KHJlKSl9Y2F0Y2goRWUpe0llKEVlKX19LG9lPXJlPT5yZS5kb25lP1gocmUudmFsdWUpOlByb21pc2UucmVzb2x2ZShyZS52YWx1ZSkudGhlbihVZSxWZSk7b2UoKE09TS5hcHBseShGLFApKS5uZXh0KCkpfSk7KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIEYoZSx0KXtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKG4pe24mJnR5cGVvZiBuIT0ic3RyaW5nIiYmIUFycmF5LmlzQXJyYXkobikmJk9iamVjdC5rZXlzKG4pLmZvckVhY2goZnVuY3Rpb24oaSl7aWYoaSE9PSJkZWZhdWx0IiYmIShpIGluIGUpKXt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4saSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsaSxyLmdldD9yOntlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBuW2ldfX0pfX0pfSksT2JqZWN0LmZyZWV6ZShlKX1jb25zdCBQPUpTT04sTT1lPT5lLnRvVXBwZXJDYXNlKCksWD1lPT57Y29uc3QgdD17fTtyZXR1cm4gZS5mb3JFYWNoKChuLGkpPT57dFtpXT1ufSksdH0sSWU9KGUsdCxuKT0+ZS5kb2N1bWVudD9lOntkb2N1bWVudDplLHZhcmlhYmxlczp0LHJlcXVlc3RIZWFkZXJzOm4sc2lnbmFsOnZvaWQgMH0sVWU9KGUsdCxuKT0+ZS5xdWVyeT9lOntxdWVyeTplLHZhcmlhYmxlczp0LHJlcXVlc3RIZWFkZXJzOm4sc2lnbmFsOnZvaWQgMH0sVmU9KGUsdCk9PmUuZG9jdW1lbnRzP2U6e2RvY3VtZW50czplLHJlcXVlc3RIZWFkZXJzOnQsc2lnbmFsOnZvaWQgMH07ZnVuY3Rpb24gb2UoZSx0KXtpZighISFlKXRocm93IG5ldyBFcnJvcih0KX1mdW5jdGlvbiByZShlKXtyZXR1cm4gdHlwZW9mIGU9PSJvYmplY3QiJiZlIT09bnVsbH1mdW5jdGlvbiBFZShlLHQpe2lmKCEhIWUpdGhyb3cgbmV3IEVycm9yKCJVbmV4cGVjdGVkIGludmFyaWFudCB0cmlnZ2VyZWQuIil9Y29uc3Qgcm49L1xyXG58W1xuXHJdL2c7ZnVuY3Rpb24gamUoZSx0KXtsZXQgbj0wLGk9MTtmb3IoY29uc3QgciBvZiBlLmJvZHkubWF0Y2hBbGwocm4pKXtpZih0eXBlb2Ygci5pbmRleD09Im51bWJlciJ8fEVlKCExKSxyLmluZGV4Pj10KWJyZWFrO249ci5pbmRleCtyWzBdLmxlbmd0aCxpKz0xfXJldHVybntsaW5lOmksY29sdW1uOnQrMS1ufX1mdW5jdGlvbiBzbihlKXtyZXR1cm4gZHQoZS5zb3VyY2UsamUoZS5zb3VyY2UsZS5zdGFydCkpfWZ1bmN0aW9uIGR0KGUsdCl7Y29uc3Qgbj1lLmxvY2F0aW9uT2Zmc2V0LmNvbHVtbi0xLGk9IiIucGFkU3RhcnQobikrZS5ib2R5LHI9dC5saW5lLTEscz1lLmxvY2F0aW9uT2Zmc2V0LmxpbmUtMSxvPXQubGluZStzLGM9dC5saW5lPT09MT9uOjAsZj10LmNvbHVtbitjLGQ9YCR7ZS5uYW1lfToke299OiR7Zn0KYCx1PWkuc3BsaXQoL1xyXG58W1xuXHJdL2cpLHk9dVtyXTtpZih5Lmxlbmd0aD4xMjApe2NvbnN0IHY9TWF0aC5mbG9vcihmLzgwKSxiPWYlODAsbT1bXTtmb3IobGV0IE49MDtOPHkubGVuZ3RoO04rPTgwKW0ucHVzaCh5LnNsaWNlKE4sTis4MCkpO3JldHVybiBkK3B0KFtbYCR7b30gfGAsbVswXV0sLi4ubS5zbGljZSgxLHYrMSkubWFwKE49PlsifCIsTl0pLFsifCIsIl4iLnBhZFN0YXJ0KGIpXSxbInwiLG1bdisxXV1dKX1yZXR1cm4gZCtwdChbW2Ake28tMX0gfGAsdVtyLTFdXSxbYCR7b30gfGAseV0sWyJ8IiwiXiIucGFkU3RhcnQoZildLFtgJHtvKzF9IHxgLHVbcisxXV1dKX1mdW5jdGlvbiBwdChlKXtjb25zdCB0PWUuZmlsdGVyKChbaSxyXSk9PnIhPT12b2lkIDApLG49TWF0aC5tYXgoLi4udC5tYXAoKFtpXSk9PmkubGVuZ3RoKSk7cmV0dXJuIHQubWFwKChbaSxyXSk9PmkucGFkU3RhcnQobikrKHI/IiAiK3I6IiIpKS5qb2luKGAKYCl9ZnVuY3Rpb24gb24oZSl7Y29uc3QgdD1lWzBdO3JldHVybiB0PT1udWxsfHwia2luZCJpbiB0fHwibGVuZ3RoImluIHQ/e25vZGVzOnQsc291cmNlOmVbMV0scG9zaXRpb25zOmVbMl0scGF0aDplWzNdLG9yaWdpbmFsRXJyb3I6ZVs0XSxleHRlbnNpb25zOmVbNV19OnR9Y2xhc3MgcWUgZXh0ZW5kcyBFcnJvcntjb25zdHJ1Y3Rvcih0LC4uLm4pe3ZhciBpLHIscztjb25zdHtub2RlczpvLHNvdXJjZTpjLHBvc2l0aW9uczpmLHBhdGg6ZCxvcmlnaW5hbEVycm9yOnUsZXh0ZW5zaW9uczp5fT1vbihuKTtzdXBlcih0KSx0aGlzLm5hbWU9IkdyYXBoUUxFcnJvciIsdGhpcy5wYXRoPWQhPW51bGw/ZDp2b2lkIDAsdGhpcy5vcmlnaW5hbEVycm9yPXUhPW51bGw/dTp2b2lkIDAsdGhpcy5ub2Rlcz1tdChBcnJheS5pc0FycmF5KG8pP286bz9bb106dm9pZCAwKTtjb25zdCB2PW10KChpPXRoaXMubm9kZXMpPT09bnVsbHx8aT09PXZvaWQgMD92b2lkIDA6aS5tYXAobT0+bS5sb2MpLmZpbHRlcihtPT5tIT1udWxsKSk7dGhpcy5zb3VyY2U9YyE9bnVsbD9jOnY9PW51bGx8fChyPXZbMF0pPT09bnVsbHx8cj09PXZvaWQgMD92b2lkIDA6ci5zb3VyY2UsdGhpcy5wb3NpdGlvbnM9ZiE9bnVsbD9mOnY9PW51bGw/dm9pZCAwOnYubWFwKG09Pm0uc3RhcnQpLHRoaXMubG9jYXRpb25zPWYmJmM/Zi5tYXAobT0+amUoYyxtKSk6dj09bnVsbD92b2lkIDA6di5tYXAobT0+amUobS5zb3VyY2UsbS5zdGFydCkpO2NvbnN0IGI9cmUodT09bnVsbD92b2lkIDA6dS5leHRlbnNpb25zKT91PT1udWxsP3ZvaWQgMDp1LmV4dGVuc2lvbnM6dm9pZCAwO3RoaXMuZXh0ZW5zaW9ucz0ocz15IT1udWxsP3k6YikhPT1udWxsJiZzIT09dm9pZCAwP3M6T2JqZWN0LmNyZWF0ZShudWxsKSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLHttZXNzYWdlOnt3cml0YWJsZTohMCxlbnVtZXJhYmxlOiEwfSxuYW1lOntlbnVtZXJhYmxlOiExfSxub2Rlczp7ZW51bWVyYWJsZTohMX0sc291cmNlOntlbnVtZXJhYmxlOiExfSxwb3NpdGlvbnM6e2VudW1lcmFibGU6ITF9LG9yaWdpbmFsRXJyb3I6e2VudW1lcmFibGU6ITF9fSksdSE9bnVsbCYmdS5zdGFjaz9PYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywic3RhY2siLHt2YWx1ZTp1LnN0YWNrLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pOkVycm9yLmNhcHR1cmVTdGFja1RyYWNlP0Vycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMscWUpOk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCJzdGFjayIse3ZhbHVlOkVycm9yKCkuc3RhY2ssd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfSl9Z2V0W1N5bWJvbC50b1N0cmluZ1RhZ10oKXtyZXR1cm4iR3JhcGhRTEVycm9yIn10b1N0cmluZygpe2xldCB0PXRoaXMubWVzc2FnZTtpZih0aGlzLm5vZGVzKWZvcihjb25zdCBuIG9mIHRoaXMubm9kZXMpbi5sb2MmJih0Kz1gCgpgK3NuKG4ubG9jKSk7ZWxzZSBpZih0aGlzLnNvdXJjZSYmdGhpcy5sb2NhdGlvbnMpZm9yKGNvbnN0IG4gb2YgdGhpcy5sb2NhdGlvbnMpdCs9YAoKYCtkdCh0aGlzLnNvdXJjZSxuKTtyZXR1cm4gdH10b0pTT04oKXtjb25zdCB0PXttZXNzYWdlOnRoaXMubWVzc2FnZX07cmV0dXJuIHRoaXMubG9jYXRpb25zIT1udWxsJiYodC5sb2NhdGlvbnM9dGhpcy5sb2NhdGlvbnMpLHRoaXMucGF0aCE9bnVsbCYmKHQucGF0aD10aGlzLnBhdGgpLHRoaXMuZXh0ZW5zaW9ucyE9bnVsbCYmT2JqZWN0LmtleXModGhpcy5leHRlbnNpb25zKS5sZW5ndGg+MCYmKHQuZXh0ZW5zaW9ucz10aGlzLmV4dGVuc2lvbnMpLHR9fWZ1bmN0aW9uIG10KGUpe3JldHVybiBlPT09dm9pZCAwfHxlLmxlbmd0aD09PTA/dm9pZCAwOmV9ZnVuY3Rpb24gRyhlLHQsbil7cmV0dXJuIG5ldyBxZShgU3ludGF4IEVycm9yOiAke259YCx7c291cmNlOmUscG9zaXRpb25zOlt0XX0pfWNsYXNzIGFue2NvbnN0cnVjdG9yKHQsbixpKXt0aGlzLnN0YXJ0PXQuc3RhcnQsdGhpcy5lbmQ9bi5lbmQsdGhpcy5zdGFydFRva2VuPXQsdGhpcy5lbmRUb2tlbj1uLHRoaXMuc291cmNlPWl9Z2V0W1N5bWJvbC50b1N0cmluZ1RhZ10oKXtyZXR1cm4iTG9jYXRpb24ifXRvSlNPTigpe3JldHVybntzdGFydDp0aGlzLnN0YXJ0LGVuZDp0aGlzLmVuZH19fWNsYXNzIHl0e2NvbnN0cnVjdG9yKHQsbixpLHIscyxvKXt0aGlzLmtpbmQ9dCx0aGlzLnN0YXJ0PW4sdGhpcy5lbmQ9aSx0aGlzLmxpbmU9cix0aGlzLmNvbHVtbj1zLHRoaXMudmFsdWU9byx0aGlzLnByZXY9bnVsbCx0aGlzLm5leHQ9bnVsbH1nZXRbU3ltYm9sLnRvU3RyaW5nVGFnXSgpe3JldHVybiJUb2tlbiJ9dG9KU09OKCl7cmV0dXJue2tpbmQ6dGhpcy5raW5kLHZhbHVlOnRoaXMudmFsdWUsbGluZTp0aGlzLmxpbmUsY29sdW1uOnRoaXMuY29sdW1ufX19Y29uc3QgZ3Q9e05hbWU6W10sRG9jdW1lbnQ6WyJkZWZpbml0aW9ucyJdLE9wZXJhdGlvbkRlZmluaXRpb246WyJuYW1lIiwidmFyaWFibGVEZWZpbml0aW9ucyIsImRpcmVjdGl2ZXMiLCJzZWxlY3Rpb25TZXQiXSxWYXJpYWJsZURlZmluaXRpb246WyJ2YXJpYWJsZSIsInR5cGUiLCJkZWZhdWx0VmFsdWUiLCJkaXJlY3RpdmVzIl0sVmFyaWFibGU6WyJuYW1lIl0sU2VsZWN0aW9uU2V0Olsic2VsZWN0aW9ucyJdLEZpZWxkOlsiYWxpYXMiLCJuYW1lIiwiYXJndW1lbnRzIiwiZGlyZWN0aXZlcyIsInNlbGVjdGlvblNldCJdLEFyZ3VtZW50OlsibmFtZSIsInZhbHVlIl0sRnJhZ21lbnRTcHJlYWQ6WyJuYW1lIiwiZGlyZWN0aXZlcyJdLElubGluZUZyYWdtZW50OlsidHlwZUNvbmRpdGlvbiIsImRpcmVjdGl2ZXMiLCJzZWxlY3Rpb25TZXQiXSxGcmFnbWVudERlZmluaXRpb246WyJuYW1lIiwidmFyaWFibGVEZWZpbml0aW9ucyIsInR5cGVDb25kaXRpb24iLCJkaXJlY3RpdmVzIiwic2VsZWN0aW9uU2V0Il0sSW50VmFsdWU6W10sRmxvYXRWYWx1ZTpbXSxTdHJpbmdWYWx1ZTpbXSxCb29sZWFuVmFsdWU6W10sTnVsbFZhbHVlOltdLEVudW1WYWx1ZTpbXSxMaXN0VmFsdWU6WyJ2YWx1ZXMiXSxPYmplY3RWYWx1ZTpbImZpZWxkcyJdLE9iamVjdEZpZWxkOlsibmFtZSIsInZhbHVlIl0sRGlyZWN0aXZlOlsibmFtZSIsImFyZ3VtZW50cyJdLE5hbWVkVHlwZTpbIm5hbWUiXSxMaXN0VHlwZTpbInR5cGUiXSxOb25OdWxsVHlwZTpbInR5cGUiXSxTY2hlbWFEZWZpbml0aW9uOlsiZGVzY3JpcHRpb24iLCJkaXJlY3RpdmVzIiwib3BlcmF0aW9uVHlwZXMiXSxPcGVyYXRpb25UeXBlRGVmaW5pdGlvbjpbInR5cGUiXSxTY2FsYXJUeXBlRGVmaW5pdGlvbjpbImRlc2NyaXB0aW9uIiwibmFtZSIsImRpcmVjdGl2ZXMiXSxPYmplY3RUeXBlRGVmaW5pdGlvbjpbImRlc2NyaXB0aW9uIiwibmFtZSIsImludGVyZmFjZXMiLCJkaXJlY3RpdmVzIiwiZmllbGRzIl0sRmllbGREZWZpbml0aW9uOlsiZGVzY3JpcHRpb24iLCJuYW1lIiwiYXJndW1lbnRzIiwidHlwZSIsImRpcmVjdGl2ZXMiXSxJbnB1dFZhbHVlRGVmaW5pdGlvbjpbImRlc2NyaXB0aW9uIiwibmFtZSIsInR5cGUiLCJkZWZhdWx0VmFsdWUiLCJkaXJlY3RpdmVzIl0sSW50ZXJmYWNlVHlwZURlZmluaXRpb246WyJkZXNjcmlwdGlvbiIsIm5hbWUiLCJpbnRlcmZhY2VzIiwiZGlyZWN0aXZlcyIsImZpZWxkcyJdLFVuaW9uVHlwZURlZmluaXRpb246WyJkZXNjcmlwdGlvbiIsIm5hbWUiLCJkaXJlY3RpdmVzIiwidHlwZXMiXSxFbnVtVHlwZURlZmluaXRpb246WyJkZXNjcmlwdGlvbiIsIm5hbWUiLCJkaXJlY3RpdmVzIiwidmFsdWVzIl0sRW51bVZhbHVlRGVmaW5pdGlvbjpbImRlc2NyaXB0aW9uIiwibmFtZSIsImRpcmVjdGl2ZXMiXSxJbnB1dE9iamVjdFR5cGVEZWZpbml0aW9uOlsiZGVzY3JpcHRpb24iLCJuYW1lIiwiZGlyZWN0aXZlcyIsImZpZWxkcyJdLERpcmVjdGl2ZURlZmluaXRpb246WyJkZXNjcmlwdGlvbiIsIm5hbWUiLCJhcmd1bWVudHMiLCJsb2NhdGlvbnMiXSxTY2hlbWFFeHRlbnNpb246WyJkaXJlY3RpdmVzIiwib3BlcmF0aW9uVHlwZXMiXSxTY2FsYXJUeXBlRXh0ZW5zaW9uOlsibmFtZSIsImRpcmVjdGl2ZXMiXSxPYmplY3RUeXBlRXh0ZW5zaW9uOlsibmFtZSIsImludGVyZmFjZXMiLCJkaXJlY3RpdmVzIiwiZmllbGRzIl0sSW50ZXJmYWNlVHlwZUV4dGVuc2lvbjpbIm5hbWUiLCJpbnRlcmZhY2VzIiwiZGlyZWN0aXZlcyIsImZpZWxkcyJdLFVuaW9uVHlwZUV4dGVuc2lvbjpbIm5hbWUiLCJkaXJlY3RpdmVzIiwidHlwZXMiXSxFbnVtVHlwZUV4dGVuc2lvbjpbIm5hbWUiLCJkaXJlY3RpdmVzIiwidmFsdWVzIl0sSW5wdXRPYmplY3RUeXBlRXh0ZW5zaW9uOlsibmFtZSIsImRpcmVjdGl2ZXMiLCJmaWVsZHMiXX0sY249bmV3IFNldChPYmplY3Qua2V5cyhndCkpO2Z1bmN0aW9uIHZ0KGUpe2NvbnN0IHQ9ZT09bnVsbD92b2lkIDA6ZS5raW5kO3JldHVybiB0eXBlb2YgdD09InN0cmluZyImJmNuLmhhcyh0KX12YXIgZmU7KGZ1bmN0aW9uKGUpe2UuUVVFUlk9InF1ZXJ5IixlLk1VVEFUSU9OPSJtdXRhdGlvbiIsZS5TVUJTQ1JJUFRJT049InN1YnNjcmlwdGlvbiJ9KShmZXx8KGZlPXt9KSk7dmFyIEdlOyhmdW5jdGlvbihlKXtlLlFVRVJZPSJRVUVSWSIsZS5NVVRBVElPTj0iTVVUQVRJT04iLGUuU1VCU0NSSVBUSU9OPSJTVUJTQ1JJUFRJT04iLGUuRklFTEQ9IkZJRUxEIixlLkZSQUdNRU5UX0RFRklOSVRJT049IkZSQUdNRU5UX0RFRklOSVRJT04iLGUuRlJBR01FTlRfU1BSRUFEPSJGUkFHTUVOVF9TUFJFQUQiLGUuSU5MSU5FX0ZSQUdNRU5UPSJJTkxJTkVfRlJBR01FTlQiLGUuVkFSSUFCTEVfREVGSU5JVElPTj0iVkFSSUFCTEVfREVGSU5JVElPTiIsZS5TQ0hFTUE9IlNDSEVNQSIsZS5TQ0FMQVI9IlNDQUxBUiIsZS5PQkpFQ1Q9Ik9CSkVDVCIsZS5GSUVMRF9ERUZJTklUSU9OPSJGSUVMRF9ERUZJTklUSU9OIixlLkFSR1VNRU5UX0RFRklOSVRJT049IkFSR1VNRU5UX0RFRklOSVRJT04iLGUuSU5URVJGQUNFPSJJTlRFUkZBQ0UiLGUuVU5JT049IlVOSU9OIixlLkVOVU09IkVOVU0iLGUuRU5VTV9WQUxVRT0iRU5VTV9WQUxVRSIsZS5JTlBVVF9PQkpFQ1Q9IklOUFVUX09CSkVDVCIsZS5JTlBVVF9GSUVMRF9ERUZJTklUSU9OPSJJTlBVVF9GSUVMRF9ERUZJTklUSU9OIn0pKEdlfHwoR2U9e30pKTt2YXIgVDsoZnVuY3Rpb24oZSl7ZS5OQU1FPSJOYW1lIixlLkRPQ1VNRU5UPSJEb2N1bWVudCIsZS5PUEVSQVRJT05fREVGSU5JVElPTj0iT3BlcmF0aW9uRGVmaW5pdGlvbiIsZS5WQVJJQUJMRV9ERUZJTklUSU9OPSJWYXJpYWJsZURlZmluaXRpb24iLGUuU0VMRUNUSU9OX1NFVD0iU2VsZWN0aW9uU2V0IixlLkZJRUxEPSJGaWVsZCIsZS5BUkdVTUVOVD0iQXJndW1lbnQiLGUuRlJBR01FTlRfU1BSRUFEPSJGcmFnbWVudFNwcmVhZCIsZS5JTkxJTkVfRlJBR01FTlQ9IklubGluZUZyYWdtZW50IixlLkZSQUdNRU5UX0RFRklOSVRJT049IkZyYWdtZW50RGVmaW5pdGlvbiIsZS5WQVJJQUJMRT0iVmFyaWFibGUiLGUuSU5UPSJJbnRWYWx1ZSIsZS5GTE9BVD0iRmxvYXRWYWx1ZSIsZS5TVFJJTkc9IlN0cmluZ1ZhbHVlIixlLkJPT0xFQU49IkJvb2xlYW5WYWx1ZSIsZS5OVUxMPSJOdWxsVmFsdWUiLGUuRU5VTT0iRW51bVZhbHVlIixlLkxJU1Q9Ikxpc3RWYWx1ZSIsZS5PQkpFQ1Q9Ik9iamVjdFZhbHVlIixlLk9CSkVDVF9GSUVMRD0iT2JqZWN0RmllbGQiLGUuRElSRUNUSVZFPSJEaXJlY3RpdmUiLGUuTkFNRURfVFlQRT0iTmFtZWRUeXBlIixlLkxJU1RfVFlQRT0iTGlzdFR5cGUiLGUuTk9OX05VTExfVFlQRT0iTm9uTnVsbFR5cGUiLGUuU0NIRU1BX0RFRklOSVRJT049IlNjaGVtYURlZmluaXRpb24iLGUuT1BFUkFUSU9OX1RZUEVfREVGSU5JVElPTj0iT3BlcmF0aW9uVHlwZURlZmluaXRpb24iLGUuU0NBTEFSX1RZUEVfREVGSU5JVElPTj0iU2NhbGFyVHlwZURlZmluaXRpb24iLGUuT0JKRUNUX1RZUEVfREVGSU5JVElPTj0iT2JqZWN0VHlwZURlZmluaXRpb24iLGUuRklFTERfREVGSU5JVElPTj0iRmllbGREZWZpbml0aW9uIixlLklOUFVUX1ZBTFVFX0RFRklOSVRJT049IklucHV0VmFsdWVEZWZpbml0aW9uIixlLklOVEVSRkFDRV9UWVBFX0RFRklOSVRJT049IkludGVyZmFjZVR5cGVEZWZpbml0aW9uIixlLlVOSU9OX1RZUEVfREVGSU5JVElPTj0iVW5pb25UeXBlRGVmaW5pdGlvbiIsZS5FTlVNX1RZUEVfREVGSU5JVElPTj0iRW51bVR5cGVEZWZpbml0aW9uIixlLkVOVU1fVkFMVUVfREVGSU5JVElPTj0iRW51bVZhbHVlRGVmaW5pdGlvbiIsZS5JTlBVVF9PQkpFQ1RfVFlQRV9ERUZJTklUSU9OPSJJbnB1dE9iamVjdFR5cGVEZWZpbml0aW9uIixlLkRJUkVDVElWRV9ERUZJTklUSU9OPSJEaXJlY3RpdmVEZWZpbml0aW9uIixlLlNDSEVNQV9FWFRFTlNJT049IlNjaGVtYUV4dGVuc2lvbiIsZS5TQ0FMQVJfVFlQRV9FWFRFTlNJT049IlNjYWxhclR5cGVFeHRlbnNpb24iLGUuT0JKRUNUX1RZUEVfRVhURU5TSU9OPSJPYmplY3RUeXBlRXh0ZW5zaW9uIixlLklOVEVSRkFDRV9UWVBFX0VYVEVOU0lPTj0iSW50ZXJmYWNlVHlwZUV4dGVuc2lvbiIsZS5VTklPTl9UWVBFX0VYVEVOU0lPTj0iVW5pb25UeXBlRXh0ZW5zaW9uIixlLkVOVU1fVFlQRV9FWFRFTlNJT049IkVudW1UeXBlRXh0ZW5zaW9uIixlLklOUFVUX09CSkVDVF9UWVBFX0VYVEVOU0lPTj0iSW5wdXRPYmplY3RUeXBlRXh0ZW5zaW9uIn0pKFR8fChUPXt9KSk7ZnVuY3Rpb24gemUoZSl7cmV0dXJuIGU9PT05fHxlPT09MzJ9ZnVuY3Rpb24gX2UoZSl7cmV0dXJuIGU+PTQ4JiZlPD01N31mdW5jdGlvbiBFdChlKXtyZXR1cm4gZT49OTcmJmU8PTEyMnx8ZT49NjUmJmU8PTkwfWZ1bmN0aW9uIF90KGUpe3JldHVybiBFdChlKXx8ZT09PTk1fWZ1bmN0aW9uIHVuKGUpe3JldHVybiBFdChlKXx8X2UoZSl8fGU9PT05NX1mdW5jdGlvbiBsbihlKXt2YXIgdDtsZXQgbj1OdW1iZXIuTUFYX1NBRkVfSU5URUdFUixpPW51bGwscj0tMTtmb3IobGV0IG89MDtvPGUubGVuZ3RoOysrbyl7dmFyIHM7Y29uc3QgYz1lW29dLGY9Zm4oYyk7ZiE9PWMubGVuZ3RoJiYoaT0ocz1pKSE9PW51bGwmJnMhPT12b2lkIDA/czpvLHI9byxvIT09MCYmZjxuJiYobj1mKSl9cmV0dXJuIGUubWFwKChvLGMpPT5jPT09MD9vOm8uc2xpY2UobikpLnNsaWNlKCh0PWkpIT09bnVsbCYmdCE9PXZvaWQgMD90OjAscisxKX1mdW5jdGlvbiBmbihlKXtsZXQgdD0wO2Zvcig7dDxlLmxlbmd0aCYmemUoZS5jaGFyQ29kZUF0KHQpKTspKyt0O3JldHVybiB0fWZ1bmN0aW9uIGhuKGUsdCl7Y29uc3Qgbj1lLnJlcGxhY2UoLyIiIi9nLCdcXCIiIicpLGk9bi5zcGxpdCgvXHJcbnxbXG5ccl0vZykscj1pLmxlbmd0aD09PTEscz1pLmxlbmd0aD4xJiZpLnNsaWNlKDEpLmV2ZXJ5KGI9PmIubGVuZ3RoPT09MHx8emUoYi5jaGFyQ29kZUF0KDApKSksbz1uLmVuZHNXaXRoKCdcXCIiIicpLGM9ZS5lbmRzV2l0aCgnIicpJiYhbyxmPWUuZW5kc1dpdGgoIlxcIiksZD1jfHxmLHU9IXJ8fGUubGVuZ3RoPjcwfHxkfHxzfHxvO2xldCB5PSIiO2NvbnN0IHY9ciYmemUoZS5jaGFyQ29kZUF0KDApKTtyZXR1cm4odSYmIXZ8fHMpJiYoeSs9YApgKSx5Kz1uLCh1fHxkKSYmKHkrPWAKYCksJyIiIicreSsnIiIiJ312YXIgbDsoZnVuY3Rpb24oZSl7ZS5TT0Y9IjxTT0Y+IixlLkVPRj0iPEVPRj4iLGUuQkFORz0iISIsZS5ET0xMQVI9IiQiLGUuQU1QPSImIixlLlBBUkVOX0w9IigiLGUuUEFSRU5fUj0iKSIsZS5TUFJFQUQ9Ii4uLiIsZS5DT0xPTj0iOiIsZS5FUVVBTFM9Ij0iLGUuQVQ9IkAiLGUuQlJBQ0tFVF9MPSJbIixlLkJSQUNLRVRfUj0iXSIsZS5CUkFDRV9MPSJ7IixlLlBJUEU9InwiLGUuQlJBQ0VfUj0ifSIsZS5OQU1FPSJOYW1lIixlLklOVD0iSW50IixlLkZMT0FUPSJGbG9hdCIsZS5TVFJJTkc9IlN0cmluZyIsZS5CTE9DS19TVFJJTkc9IkJsb2NrU3RyaW5nIixlLkNPTU1FTlQ9IkNvbW1lbnQifSkobHx8KGw9e30pKTtjbGFzcyBkbntjb25zdHJ1Y3Rvcih0KXtjb25zdCBuPW5ldyB5dChsLlNPRiwwLDAsMCwwKTt0aGlzLnNvdXJjZT10LHRoaXMubGFzdFRva2VuPW4sdGhpcy50b2tlbj1uLHRoaXMubGluZT0xLHRoaXMubGluZVN0YXJ0PTB9Z2V0W1N5bWJvbC50b1N0cmluZ1RhZ10oKXtyZXR1cm4iTGV4ZXIifWFkdmFuY2UoKXtyZXR1cm4gdGhpcy5sYXN0VG9rZW49dGhpcy50b2tlbix0aGlzLnRva2VuPXRoaXMubG9va2FoZWFkKCl9bG9va2FoZWFkKCl7bGV0IHQ9dGhpcy50b2tlbjtpZih0LmtpbmQhPT1sLkVPRilkbyBpZih0Lm5leHQpdD10Lm5leHQ7ZWxzZXtjb25zdCBuPW1uKHRoaXMsdC5lbmQpO3QubmV4dD1uLG4ucHJldj10LHQ9bn13aGlsZSh0LmtpbmQ9PT1sLkNPTU1FTlQpO3JldHVybiB0fX1mdW5jdGlvbiBwbihlKXtyZXR1cm4gZT09PWwuQkFOR3x8ZT09PWwuRE9MTEFSfHxlPT09bC5BTVB8fGU9PT1sLlBBUkVOX0x8fGU9PT1sLlBBUkVOX1J8fGU9PT1sLlNQUkVBRHx8ZT09PWwuQ09MT058fGU9PT1sLkVRVUFMU3x8ZT09PWwuQVR8fGU9PT1sLkJSQUNLRVRfTHx8ZT09PWwuQlJBQ0tFVF9SfHxlPT09bC5CUkFDRV9MfHxlPT09bC5QSVBFfHxlPT09bC5CUkFDRV9SfWZ1bmN0aW9uIGhlKGUpe3JldHVybiBlPj0wJiZlPD01NTI5NXx8ZT49NTczNDQmJmU8PTExMTQxMTF9ZnVuY3Rpb24gU2UoZSx0KXtyZXR1cm4gVHQoZS5jaGFyQ29kZUF0KHQpKSYmYnQoZS5jaGFyQ29kZUF0KHQrMSkpfWZ1bmN0aW9uIFR0KGUpe3JldHVybiBlPj01NTI5NiYmZTw9NTYzMTl9ZnVuY3Rpb24gYnQoZSl7cmV0dXJuIGU+PTU2MzIwJiZlPD01NzM0M31mdW5jdGlvbiB1ZShlLHQpe2NvbnN0IG49ZS5zb3VyY2UuYm9keS5jb2RlUG9pbnRBdCh0KTtpZihuPT09dm9pZCAwKXJldHVybiBsLkVPRjtpZihuPj0zMiYmbjw9MTI2KXtjb25zdCBpPVN0cmluZy5mcm9tQ29kZVBvaW50KG4pO3JldHVybiBpPT09JyInP2AnIidgOmAiJHtpfSJgfXJldHVybiJVKyIrbi50b1N0cmluZygxNikudG9VcHBlckNhc2UoKS5wYWRTdGFydCg0LCIwIil9ZnVuY3Rpb24gVihlLHQsbixpLHIpe2NvbnN0IHM9ZS5saW5lLG89MStuLWUubGluZVN0YXJ0O3JldHVybiBuZXcgeXQodCxuLGkscyxvLHIpfWZ1bmN0aW9uIG1uKGUsdCl7Y29uc3Qgbj1lLnNvdXJjZS5ib2R5LGk9bi5sZW5ndGg7bGV0IHI9dDtmb3IoO3I8aTspe2NvbnN0IHM9bi5jaGFyQ29kZUF0KHIpO3N3aXRjaChzKXtjYXNlIDY1Mjc5OmNhc2UgOTpjYXNlIDMyOmNhc2UgNDQ6KytyO2NvbnRpbnVlO2Nhc2UgMTA6KytyLCsrZS5saW5lLGUubGluZVN0YXJ0PXI7Y29udGludWU7Y2FzZSAxMzpuLmNoYXJDb2RlQXQocisxKT09PTEwP3IrPTI6KytyLCsrZS5saW5lLGUubGluZVN0YXJ0PXI7Y29udGludWU7Y2FzZSAzNTpyZXR1cm4geW4oZSxyKTtjYXNlIDMzOnJldHVybiBWKGUsbC5CQU5HLHIscisxKTtjYXNlIDM2OnJldHVybiBWKGUsbC5ET0xMQVIscixyKzEpO2Nhc2UgMzg6cmV0dXJuIFYoZSxsLkFNUCxyLHIrMSk7Y2FzZSA0MDpyZXR1cm4gVihlLGwuUEFSRU5fTCxyLHIrMSk7Y2FzZSA0MTpyZXR1cm4gVihlLGwuUEFSRU5fUixyLHIrMSk7Y2FzZSA0NjppZihuLmNoYXJDb2RlQXQocisxKT09PTQ2JiZuLmNoYXJDb2RlQXQocisyKT09PTQ2KXJldHVybiBWKGUsbC5TUFJFQUQscixyKzMpO2JyZWFrO2Nhc2UgNTg6cmV0dXJuIFYoZSxsLkNPTE9OLHIscisxKTtjYXNlIDYxOnJldHVybiBWKGUsbC5FUVVBTFMscixyKzEpO2Nhc2UgNjQ6cmV0dXJuIFYoZSxsLkFULHIscisxKTtjYXNlIDkxOnJldHVybiBWKGUsbC5CUkFDS0VUX0wscixyKzEpO2Nhc2UgOTM6cmV0dXJuIFYoZSxsLkJSQUNLRVRfUixyLHIrMSk7Y2FzZSAxMjM6cmV0dXJuIFYoZSxsLkJSQUNFX0wscixyKzEpO2Nhc2UgMTI0OnJldHVybiBWKGUsbC5QSVBFLHIscisxKTtjYXNlIDEyNTpyZXR1cm4gVihlLGwuQlJBQ0VfUixyLHIrMSk7Y2FzZSAzNDpyZXR1cm4gbi5jaGFyQ29kZUF0KHIrMSk9PT0zNCYmbi5jaGFyQ29kZUF0KHIrMik9PT0zND9ibihlLHIpOnZuKGUscil9aWYoX2Uocyl8fHM9PT00NSlyZXR1cm4gZ24oZSxyLHMpO2lmKF90KHMpKXJldHVybiBObihlLHIpO3Rocm93IEcoZS5zb3VyY2UscixzPT09Mzk/YFVuZXhwZWN0ZWQgc2luZ2xlIHF1b3RlIGNoYXJhY3RlciAoJyksIGRpZCB5b3UgbWVhbiB0byB1c2UgYSBkb3VibGUgcXVvdGUgKCIpP2A6aGUocyl8fFNlKG4scik/YFVuZXhwZWN0ZWQgY2hhcmFjdGVyOiAke3VlKGUscil9LmA6YEludmFsaWQgY2hhcmFjdGVyOiAke3VlKGUscil9LmApfXJldHVybiBWKGUsbC5FT0YsaSxpKX1mdW5jdGlvbiB5bihlLHQpe2NvbnN0IG49ZS5zb3VyY2UuYm9keSxpPW4ubGVuZ3RoO2xldCByPXQrMTtmb3IoO3I8aTspe2NvbnN0IHM9bi5jaGFyQ29kZUF0KHIpO2lmKHM9PT0xMHx8cz09PTEzKWJyZWFrO2lmKGhlKHMpKSsrcjtlbHNlIGlmKFNlKG4scikpcis9MjtlbHNlIGJyZWFrfXJldHVybiBWKGUsbC5DT01NRU5ULHQscixuLnNsaWNlKHQrMSxyKSl9ZnVuY3Rpb24gZ24oZSx0LG4pe2NvbnN0IGk9ZS5zb3VyY2UuYm9keTtsZXQgcj10LHM9bixvPSExO2lmKHM9PT00NSYmKHM9aS5jaGFyQ29kZUF0KCsrcikpLHM9PT00OCl7aWYocz1pLmNoYXJDb2RlQXQoKytyKSxfZShzKSl0aHJvdyBHKGUuc291cmNlLHIsYEludmFsaWQgbnVtYmVyLCB1bmV4cGVjdGVkIGRpZ2l0IGFmdGVyIDA6ICR7dWUoZSxyKX0uYCl9ZWxzZSByPUhlKGUscixzKSxzPWkuY2hhckNvZGVBdChyKTtpZihzPT09NDYmJihvPSEwLHM9aS5jaGFyQ29kZUF0KCsrcikscj1IZShlLHIscykscz1pLmNoYXJDb2RlQXQocikpLChzPT09Njl8fHM9PT0xMDEpJiYobz0hMCxzPWkuY2hhckNvZGVBdCgrK3IpLChzPT09NDN8fHM9PT00NSkmJihzPWkuY2hhckNvZGVBdCgrK3IpKSxyPUhlKGUscixzKSxzPWkuY2hhckNvZGVBdChyKSkscz09PTQ2fHxfdChzKSl0aHJvdyBHKGUuc291cmNlLHIsYEludmFsaWQgbnVtYmVyLCBleHBlY3RlZCBkaWdpdCBidXQgZ290OiAke3VlKGUscil9LmApO3JldHVybiBWKGUsbz9sLkZMT0FUOmwuSU5ULHQscixpLnNsaWNlKHQscikpfWZ1bmN0aW9uIEhlKGUsdCxuKXtpZighX2UobikpdGhyb3cgRyhlLnNvdXJjZSx0LGBJbnZhbGlkIG51bWJlciwgZXhwZWN0ZWQgZGlnaXQgYnV0IGdvdDogJHt1ZShlLHQpfS5gKTtjb25zdCBpPWUuc291cmNlLmJvZHk7bGV0IHI9dCsxO2Zvcig7X2UoaS5jaGFyQ29kZUF0KHIpKTspKytyO3JldHVybiByfWZ1bmN0aW9uIHZuKGUsdCl7Y29uc3Qgbj1lLnNvdXJjZS5ib2R5LGk9bi5sZW5ndGg7bGV0IHI9dCsxLHM9cixvPSIiO2Zvcig7cjxpOyl7Y29uc3QgYz1uLmNoYXJDb2RlQXQocik7aWYoYz09PTM0KXJldHVybiBvKz1uLnNsaWNlKHMsciksVihlLGwuU1RSSU5HLHQscisxLG8pO2lmKGM9PT05Mil7bys9bi5zbGljZShzLHIpO2NvbnN0IGY9bi5jaGFyQ29kZUF0KHIrMSk9PT0xMTc/bi5jaGFyQ29kZUF0KHIrMik9PT0xMjM/RW4oZSxyKTpfbihlLHIpOlRuKGUscik7bys9Zi52YWx1ZSxyKz1mLnNpemUscz1yO2NvbnRpbnVlfWlmKGM9PT0xMHx8Yz09PTEzKWJyZWFrO2lmKGhlKGMpKSsrcjtlbHNlIGlmKFNlKG4scikpcis9MjtlbHNlIHRocm93IEcoZS5zb3VyY2UscixgSW52YWxpZCBjaGFyYWN0ZXIgd2l0aGluIFN0cmluZzogJHt1ZShlLHIpfS5gKX10aHJvdyBHKGUuc291cmNlLHIsIlVudGVybWluYXRlZCBzdHJpbmcuIil9ZnVuY3Rpb24gRW4oZSx0KXtjb25zdCBuPWUuc291cmNlLmJvZHk7bGV0IGk9MCxyPTM7Zm9yKDtyPDEyOyl7Y29uc3Qgcz1uLmNoYXJDb2RlQXQodCtyKyspO2lmKHM9PT0xMjUpe2lmKHI8NXx8IWhlKGkpKWJyZWFrO3JldHVybnt2YWx1ZTpTdHJpbmcuZnJvbUNvZGVQb2ludChpKSxzaXplOnJ9fWlmKGk9aTw8NHxUZShzKSxpPDApYnJlYWt9dGhyb3cgRyhlLnNvdXJjZSx0LGBJbnZhbGlkIFVuaWNvZGUgZXNjYXBlIHNlcXVlbmNlOiAiJHtuLnNsaWNlKHQsdCtyKX0iLmApfWZ1bmN0aW9uIF9uKGUsdCl7Y29uc3Qgbj1lLnNvdXJjZS5ib2R5LGk9TnQobix0KzIpO2lmKGhlKGkpKXJldHVybnt2YWx1ZTpTdHJpbmcuZnJvbUNvZGVQb2ludChpKSxzaXplOjZ9O2lmKFR0KGkpJiZuLmNoYXJDb2RlQXQodCs2KT09PTkyJiZuLmNoYXJDb2RlQXQodCs3KT09PTExNyl7Y29uc3Qgcj1OdChuLHQrOCk7aWYoYnQocikpcmV0dXJue3ZhbHVlOlN0cmluZy5mcm9tQ29kZVBvaW50KGksciksc2l6ZToxMn19dGhyb3cgRyhlLnNvdXJjZSx0LGBJbnZhbGlkIFVuaWNvZGUgZXNjYXBlIHNlcXVlbmNlOiAiJHtuLnNsaWNlKHQsdCs2KX0iLmApfWZ1bmN0aW9uIE50KGUsdCl7cmV0dXJuIFRlKGUuY2hhckNvZGVBdCh0KSk8PDEyfFRlKGUuY2hhckNvZGVBdCh0KzEpKTw8OHxUZShlLmNoYXJDb2RlQXQodCsyKSk8PDR8VGUoZS5jaGFyQ29kZUF0KHQrMykpfWZ1bmN0aW9uIFRlKGUpe3JldHVybiBlPj00OCYmZTw9NTc/ZS00ODplPj02NSYmZTw9NzA/ZS01NTplPj05NyYmZTw9MTAyP2UtODc6LTF9ZnVuY3Rpb24gVG4oZSx0KXtjb25zdCBuPWUuc291cmNlLmJvZHk7c3dpdGNoKG4uY2hhckNvZGVBdCh0KzEpKXtjYXNlIDM0OnJldHVybnt2YWx1ZTonIicsc2l6ZToyfTtjYXNlIDkyOnJldHVybnt2YWx1ZToiXFwiLHNpemU6Mn07Y2FzZSA0NzpyZXR1cm57dmFsdWU6Ii8iLHNpemU6Mn07Y2FzZSA5ODpyZXR1cm57dmFsdWU6IlxiIixzaXplOjJ9O2Nhc2UgMTAyOnJldHVybnt2YWx1ZToiXGYiLHNpemU6Mn07Y2FzZSAxMTA6cmV0dXJue3ZhbHVlOmAKYCxzaXplOjJ9O2Nhc2UgMTE0OnJldHVybnt2YWx1ZToiXHIiLHNpemU6Mn07Y2FzZSAxMTY6cmV0dXJue3ZhbHVlOiIJIixzaXplOjJ9fXRocm93IEcoZS5zb3VyY2UsdCxgSW52YWxpZCBjaGFyYWN0ZXIgZXNjYXBlIHNlcXVlbmNlOiAiJHtuLnNsaWNlKHQsdCsyKX0iLmApfWZ1bmN0aW9uIGJuKGUsdCl7Y29uc3Qgbj1lLnNvdXJjZS5ib2R5LGk9bi5sZW5ndGg7bGV0IHI9ZS5saW5lU3RhcnQscz10KzMsbz1zLGM9IiI7Y29uc3QgZj1bXTtmb3IoO3M8aTspe2NvbnN0IGQ9bi5jaGFyQ29kZUF0KHMpO2lmKGQ9PT0zNCYmbi5jaGFyQ29kZUF0KHMrMSk9PT0zNCYmbi5jaGFyQ29kZUF0KHMrMik9PT0zNCl7Yys9bi5zbGljZShvLHMpLGYucHVzaChjKTtjb25zdCB1PVYoZSxsLkJMT0NLX1NUUklORyx0LHMrMyxsbihmKS5qb2luKGAKYCkpO3JldHVybiBlLmxpbmUrPWYubGVuZ3RoLTEsZS5saW5lU3RhcnQ9cix1fWlmKGQ9PT05MiYmbi5jaGFyQ29kZUF0KHMrMSk9PT0zNCYmbi5jaGFyQ29kZUF0KHMrMik9PT0zNCYmbi5jaGFyQ29kZUF0KHMrMyk9PT0zNCl7Yys9bi5zbGljZShvLHMpLG89cysxLHMrPTQ7Y29udGludWV9aWYoZD09PTEwfHxkPT09MTMpe2MrPW4uc2xpY2UobyxzKSxmLnB1c2goYyksZD09PTEzJiZuLmNoYXJDb2RlQXQocysxKT09PTEwP3MrPTI6KytzLGM9IiIsbz1zLHI9cztjb250aW51ZX1pZihoZShkKSkrK3M7ZWxzZSBpZihTZShuLHMpKXMrPTI7ZWxzZSB0aHJvdyBHKGUuc291cmNlLHMsYEludmFsaWQgY2hhcmFjdGVyIHdpdGhpbiBTdHJpbmc6ICR7dWUoZSxzKX0uYCl9dGhyb3cgRyhlLnNvdXJjZSxzLCJVbnRlcm1pbmF0ZWQgc3RyaW5nLiIpfWZ1bmN0aW9uIE5uKGUsdCl7Y29uc3Qgbj1lLnNvdXJjZS5ib2R5LGk9bi5sZW5ndGg7bGV0IHI9dCsxO2Zvcig7cjxpOyl7Y29uc3Qgcz1uLmNoYXJDb2RlQXQocik7aWYodW4ocykpKytyO2Vsc2UgYnJlYWt9cmV0dXJuIFYoZSxsLk5BTUUsdCxyLG4uc2xpY2UodCxyKSl9Y29uc3QgeG49MTAseHQ9MjtmdW5jdGlvbiBZZShlKXtyZXR1cm4gT2UoZSxbXSl9ZnVuY3Rpb24gT2UoZSx0KXtzd2l0Y2godHlwZW9mIGUpe2Nhc2Uic3RyaW5nIjpyZXR1cm4gSlNPTi5zdHJpbmdpZnkoZSk7Y2FzZSJmdW5jdGlvbiI6cmV0dXJuIGUubmFtZT9gW2Z1bmN0aW9uICR7ZS5uYW1lfV1gOiJbZnVuY3Rpb25dIjtjYXNlIm9iamVjdCI6cmV0dXJuIEFuKGUsdCk7ZGVmYXVsdDpyZXR1cm4gU3RyaW5nKGUpfX1mdW5jdGlvbiBBbihlLHQpe2lmKGU9PT1udWxsKXJldHVybiJudWxsIjtpZih0LmluY2x1ZGVzKGUpKXJldHVybiJbQ2lyY3VsYXJdIjtjb25zdCBuPVsuLi50LGVdO2lmKEluKGUpKXtjb25zdCBpPWUudG9KU09OKCk7aWYoaSE9PWUpcmV0dXJuIHR5cGVvZiBpPT0ic3RyaW5nIj9pOk9lKGksbil9ZWxzZSBpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiBPbihlLG4pO3JldHVybiBTbihlLG4pfWZ1bmN0aW9uIEluKGUpe3JldHVybiB0eXBlb2YgZS50b0pTT049PSJmdW5jdGlvbiJ9ZnVuY3Rpb24gU24oZSx0KXtjb25zdCBuPU9iamVjdC5lbnRyaWVzKGUpO3JldHVybiBuLmxlbmd0aD09PTA/Int9Ijp0Lmxlbmd0aD54dD8iWyIrd24oZSkrIl0iOiJ7ICIrbi5tYXAoKFtyLHNdKT0+cisiOiAiK09lKHMsdCkpLmpvaW4oIiwgIikrIiB9In1mdW5jdGlvbiBPbihlLHQpe2lmKGUubGVuZ3RoPT09MClyZXR1cm4iW10iO2lmKHQubGVuZ3RoPnh0KXJldHVybiJbQXJyYXldIjtjb25zdCBuPU1hdGgubWluKHhuLGUubGVuZ3RoKSxpPWUubGVuZ3RoLW4scj1bXTtmb3IobGV0IHM9MDtzPG47KytzKXIucHVzaChPZShlW3NdLHQpKTtyZXR1cm4gaT09PTE/ci5wdXNoKCIuLi4gMSBtb3JlIGl0ZW0iKTppPjEmJnIucHVzaChgLi4uICR7aX0gbW9yZSBpdGVtc2ApLCJbIityLmpvaW4oIiwgIikrIl0ifWZ1bmN0aW9uIHduKGUpe2NvbnN0IHQ9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpLnJlcGxhY2UoL15cW29iamVjdCAvLCIiKS5yZXBsYWNlKC9dJC8sIiIpO2lmKHQ9PT0iT2JqZWN0IiYmdHlwZW9mIGUuY29uc3RydWN0b3I9PSJmdW5jdGlvbiIpe2NvbnN0IG49ZS5jb25zdHJ1Y3Rvci5uYW1lO2lmKHR5cGVvZiBuPT0ic3RyaW5nIiYmbiE9PSIiKXJldHVybiBufXJldHVybiB0fWNvbnN0IERuPWdsb2JhbFRoaXMucHJvY2VzcyYmcHJvY2Vzcy5lbnYuTk9ERV9FTlY9PT0icHJvZHVjdGlvbiI/ZnVuY3Rpb24odCxuKXtyZXR1cm4gdCBpbnN0YW5jZW9mIG59OmZ1bmN0aW9uKHQsbil7aWYodCBpbnN0YW5jZW9mIG4pcmV0dXJuITA7aWYodHlwZW9mIHQ9PSJvYmplY3QiJiZ0IT09bnVsbCl7dmFyIGk7Y29uc3Qgcj1uLnByb3RvdHlwZVtTeW1ib2wudG9TdHJpbmdUYWddLHM9U3ltYm9sLnRvU3RyaW5nVGFnIGluIHQ/dFtTeW1ib2wudG9TdHJpbmdUYWddOihpPXQuY29uc3RydWN0b3IpPT09bnVsbHx8aT09PXZvaWQgMD92b2lkIDA6aS5uYW1lO2lmKHI9PT1zKXtjb25zdCBvPVllKHQpO3Rocm93IG5ldyBFcnJvcihgQ2Fubm90IHVzZSAke3J9ICIke299IiBmcm9tIGFub3RoZXIgbW9kdWxlIG9yIHJlYWxtLgoKRW5zdXJlIHRoYXQgdGhlcmUgaXMgb25seSBvbmUgaW5zdGFuY2Ugb2YgImdyYXBocWwiIGluIHRoZSBub2RlX21vZHVsZXMKZGlyZWN0b3J5LiBJZiBkaWZmZXJlbnQgdmVyc2lvbnMgb2YgImdyYXBocWwiIGFyZSB0aGUgZGVwZW5kZW5jaWVzIG9mIG90aGVyCnJlbGllZCBvbiBtb2R1bGVzLCB1c2UgInJlc29sdXRpb25zIiB0byBlbnN1cmUgb25seSBvbmUgdmVyc2lvbiBpcyBpbnN0YWxsZWQuCgpodHRwczovL3lhcm5wa2cuY29tL2VuL2RvY3Mvc2VsZWN0aXZlLXZlcnNpb24tcmVzb2x1dGlvbnMKCkR1cGxpY2F0ZSAiZ3JhcGhxbCIgbW9kdWxlcyBjYW5ub3QgYmUgdXNlZCBhdCB0aGUgc2FtZSB0aW1lIHNpbmNlIGRpZmZlcmVudAp2ZXJzaW9ucyBtYXkgaGF2ZSBkaWZmZXJlbnQgY2FwYWJpbGl0aWVzIGFuZCBiZWhhdmlvci4gVGhlIGRhdGEgZnJvbSBvbmUKdmVyc2lvbiB1c2VkIGluIHRoZSBmdW5jdGlvbiBmcm9tIGFub3RoZXIgY291bGQgcHJvZHVjZSBjb25mdXNpbmcgYW5kCnNwdXJpb3VzIHJlc3VsdHMuYCl9fXJldHVybiExfTtjbGFzcyBBdHtjb25zdHJ1Y3Rvcih0LG49IkdyYXBoUUwgcmVxdWVzdCIsaT17bGluZToxLGNvbHVtbjoxfSl7dHlwZW9mIHQ9PSJzdHJpbmcifHxvZSghMSxgQm9keSBtdXN0IGJlIGEgc3RyaW5nLiBSZWNlaXZlZDogJHtZZSh0KX0uYCksdGhpcy5ib2R5PXQsdGhpcy5uYW1lPW4sdGhpcy5sb2NhdGlvbk9mZnNldD1pLHRoaXMubG9jYXRpb25PZmZzZXQubGluZT4wfHxvZSghMSwibGluZSBpbiBsb2NhdGlvbk9mZnNldCBpcyAxLWluZGV4ZWQgYW5kIG11c3QgYmUgcG9zaXRpdmUuIiksdGhpcy5sb2NhdGlvbk9mZnNldC5jb2x1bW4+MHx8b2UoITEsImNvbHVtbiBpbiBsb2NhdGlvbk9mZnNldCBpcyAxLWluZGV4ZWQgYW5kIG11c3QgYmUgcG9zaXRpdmUuIil9Z2V0W1N5bWJvbC50b1N0cmluZ1RhZ10oKXtyZXR1cm4iU291cmNlIn19ZnVuY3Rpb24gQ24oZSl7cmV0dXJuIERuKGUsQXQpfWZ1bmN0aW9uIEl0KGUsdCl7Y29uc3Qgbj1uZXcga24oZSx0KSxpPW4ucGFyc2VEb2N1bWVudCgpO3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoaSwidG9rZW5Db3VudCIse2VudW1lcmFibGU6ITEsdmFsdWU6bi50b2tlbkNvdW50fSksaX1jbGFzcyBrbntjb25zdHJ1Y3Rvcih0LG49e30pe2NvbnN0IGk9Q24odCk/dDpuZXcgQXQodCk7dGhpcy5fbGV4ZXI9bmV3IGRuKGkpLHRoaXMuX29wdGlvbnM9bix0aGlzLl90b2tlbkNvdW50ZXI9MH1nZXQgdG9rZW5Db3VudCgpe3JldHVybiB0aGlzLl90b2tlbkNvdW50ZXJ9cGFyc2VOYW1lKCl7Y29uc3QgdD10aGlzLmV4cGVjdFRva2VuKGwuTkFNRSk7cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOlQuTkFNRSx2YWx1ZTp0LnZhbHVlfSl9cGFyc2VEb2N1bWVudCgpe3JldHVybiB0aGlzLm5vZGUodGhpcy5fbGV4ZXIudG9rZW4se2tpbmQ6VC5ET0NVTUVOVCxkZWZpbml0aW9uczp0aGlzLm1hbnkobC5TT0YsdGhpcy5wYXJzZURlZmluaXRpb24sbC5FT0YpfSl9cGFyc2VEZWZpbml0aW9uKCl7aWYodGhpcy5wZWVrKGwuQlJBQ0VfTCkpcmV0dXJuIHRoaXMucGFyc2VPcGVyYXRpb25EZWZpbml0aW9uKCk7Y29uc3QgdD10aGlzLnBlZWtEZXNjcmlwdGlvbigpLG49dD90aGlzLl9sZXhlci5sb29rYWhlYWQoKTp0aGlzLl9sZXhlci50b2tlbjtpZihuLmtpbmQ9PT1sLk5BTUUpe3N3aXRjaChuLnZhbHVlKXtjYXNlInNjaGVtYSI6cmV0dXJuIHRoaXMucGFyc2VTY2hlbWFEZWZpbml0aW9uKCk7Y2FzZSJzY2FsYXIiOnJldHVybiB0aGlzLnBhcnNlU2NhbGFyVHlwZURlZmluaXRpb24oKTtjYXNlInR5cGUiOnJldHVybiB0aGlzLnBhcnNlT2JqZWN0VHlwZURlZmluaXRpb24oKTtjYXNlImludGVyZmFjZSI6cmV0dXJuIHRoaXMucGFyc2VJbnRlcmZhY2VUeXBlRGVmaW5pdGlvbigpO2Nhc2UidW5pb24iOnJldHVybiB0aGlzLnBhcnNlVW5pb25UeXBlRGVmaW5pdGlvbigpO2Nhc2UiZW51bSI6cmV0dXJuIHRoaXMucGFyc2VFbnVtVHlwZURlZmluaXRpb24oKTtjYXNlImlucHV0IjpyZXR1cm4gdGhpcy5wYXJzZUlucHV0T2JqZWN0VHlwZURlZmluaXRpb24oKTtjYXNlImRpcmVjdGl2ZSI6cmV0dXJuIHRoaXMucGFyc2VEaXJlY3RpdmVEZWZpbml0aW9uKCl9aWYodCl0aHJvdyBHKHRoaXMuX2xleGVyLnNvdXJjZSx0aGlzLl9sZXhlci50b2tlbi5zdGFydCwiVW5leHBlY3RlZCBkZXNjcmlwdGlvbiwgZGVzY3JpcHRpb25zIGFyZSBzdXBwb3J0ZWQgb25seSBvbiB0eXBlIGRlZmluaXRpb25zLiIpO3N3aXRjaChuLnZhbHVlKXtjYXNlInF1ZXJ5IjpjYXNlIm11dGF0aW9uIjpjYXNlInN1YnNjcmlwdGlvbiI6cmV0dXJuIHRoaXMucGFyc2VPcGVyYXRpb25EZWZpbml0aW9uKCk7Y2FzZSJmcmFnbWVudCI6cmV0dXJuIHRoaXMucGFyc2VGcmFnbWVudERlZmluaXRpb24oKTtjYXNlImV4dGVuZCI6cmV0dXJuIHRoaXMucGFyc2VUeXBlU3lzdGVtRXh0ZW5zaW9uKCl9fXRocm93IHRoaXMudW5leHBlY3RlZChuKX1wYXJzZU9wZXJhdGlvbkRlZmluaXRpb24oKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuO2lmKHRoaXMucGVlayhsLkJSQUNFX0wpKXJldHVybiB0aGlzLm5vZGUodCx7a2luZDpULk9QRVJBVElPTl9ERUZJTklUSU9OLG9wZXJhdGlvbjpmZS5RVUVSWSxuYW1lOnZvaWQgMCx2YXJpYWJsZURlZmluaXRpb25zOltdLGRpcmVjdGl2ZXM6W10sc2VsZWN0aW9uU2V0OnRoaXMucGFyc2VTZWxlY3Rpb25TZXQoKX0pO2NvbnN0IG49dGhpcy5wYXJzZU9wZXJhdGlvblR5cGUoKTtsZXQgaTtyZXR1cm4gdGhpcy5wZWVrKGwuTkFNRSkmJihpPXRoaXMucGFyc2VOYW1lKCkpLHRoaXMubm9kZSh0LHtraW5kOlQuT1BFUkFUSU9OX0RFRklOSVRJT04sb3BlcmF0aW9uOm4sbmFtZTppLHZhcmlhYmxlRGVmaW5pdGlvbnM6dGhpcy5wYXJzZVZhcmlhYmxlRGVmaW5pdGlvbnMoKSxkaXJlY3RpdmVzOnRoaXMucGFyc2VEaXJlY3RpdmVzKCExKSxzZWxlY3Rpb25TZXQ6dGhpcy5wYXJzZVNlbGVjdGlvblNldCgpfSl9cGFyc2VPcGVyYXRpb25UeXBlKCl7Y29uc3QgdD10aGlzLmV4cGVjdFRva2VuKGwuTkFNRSk7c3dpdGNoKHQudmFsdWUpe2Nhc2UicXVlcnkiOnJldHVybiBmZS5RVUVSWTtjYXNlIm11dGF0aW9uIjpyZXR1cm4gZmUuTVVUQVRJT047Y2FzZSJzdWJzY3JpcHRpb24iOnJldHVybiBmZS5TVUJTQ1JJUFRJT059dGhyb3cgdGhpcy51bmV4cGVjdGVkKHQpfXBhcnNlVmFyaWFibGVEZWZpbml0aW9ucygpe3JldHVybiB0aGlzLm9wdGlvbmFsTWFueShsLlBBUkVOX0wsdGhpcy5wYXJzZVZhcmlhYmxlRGVmaW5pdGlvbixsLlBBUkVOX1IpfXBhcnNlVmFyaWFibGVEZWZpbml0aW9uKCl7cmV0dXJuIHRoaXMubm9kZSh0aGlzLl9sZXhlci50b2tlbix7a2luZDpULlZBUklBQkxFX0RFRklOSVRJT04sdmFyaWFibGU6dGhpcy5wYXJzZVZhcmlhYmxlKCksdHlwZToodGhpcy5leHBlY3RUb2tlbihsLkNPTE9OKSx0aGlzLnBhcnNlVHlwZVJlZmVyZW5jZSgpKSxkZWZhdWx0VmFsdWU6dGhpcy5leHBlY3RPcHRpb25hbFRva2VuKGwuRVFVQUxTKT90aGlzLnBhcnNlQ29uc3RWYWx1ZUxpdGVyYWwoKTp2b2lkIDAsZGlyZWN0aXZlczp0aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCl9KX1wYXJzZVZhcmlhYmxlKCl7Y29uc3QgdD10aGlzLl9sZXhlci50b2tlbjtyZXR1cm4gdGhpcy5leHBlY3RUb2tlbihsLkRPTExBUiksdGhpcy5ub2RlKHQse2tpbmQ6VC5WQVJJQUJMRSxuYW1lOnRoaXMucGFyc2VOYW1lKCl9KX1wYXJzZVNlbGVjdGlvblNldCgpe3JldHVybiB0aGlzLm5vZGUodGhpcy5fbGV4ZXIudG9rZW4se2tpbmQ6VC5TRUxFQ1RJT05fU0VULHNlbGVjdGlvbnM6dGhpcy5tYW55KGwuQlJBQ0VfTCx0aGlzLnBhcnNlU2VsZWN0aW9uLGwuQlJBQ0VfUil9KX1wYXJzZVNlbGVjdGlvbigpe3JldHVybiB0aGlzLnBlZWsobC5TUFJFQUQpP3RoaXMucGFyc2VGcmFnbWVudCgpOnRoaXMucGFyc2VGaWVsZCgpfXBhcnNlRmllbGQoKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuLG49dGhpcy5wYXJzZU5hbWUoKTtsZXQgaSxyO3JldHVybiB0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4obC5DT0xPTik/KGk9bixyPXRoaXMucGFyc2VOYW1lKCkpOnI9bix0aGlzLm5vZGUodCx7a2luZDpULkZJRUxELGFsaWFzOmksbmFtZTpyLGFyZ3VtZW50czp0aGlzLnBhcnNlQXJndW1lbnRzKCExKSxkaXJlY3RpdmVzOnRoaXMucGFyc2VEaXJlY3RpdmVzKCExKSxzZWxlY3Rpb25TZXQ6dGhpcy5wZWVrKGwuQlJBQ0VfTCk/dGhpcy5wYXJzZVNlbGVjdGlvblNldCgpOnZvaWQgMH0pfXBhcnNlQXJndW1lbnRzKHQpe2NvbnN0IG49dD90aGlzLnBhcnNlQ29uc3RBcmd1bWVudDp0aGlzLnBhcnNlQXJndW1lbnQ7cmV0dXJuIHRoaXMub3B0aW9uYWxNYW55KGwuUEFSRU5fTCxuLGwuUEFSRU5fUil9cGFyc2VBcmd1bWVudCh0PSExKXtjb25zdCBuPXRoaXMuX2xleGVyLnRva2VuLGk9dGhpcy5wYXJzZU5hbWUoKTtyZXR1cm4gdGhpcy5leHBlY3RUb2tlbihsLkNPTE9OKSx0aGlzLm5vZGUobix7a2luZDpULkFSR1VNRU5ULG5hbWU6aSx2YWx1ZTp0aGlzLnBhcnNlVmFsdWVMaXRlcmFsKHQpfSl9cGFyc2VDb25zdEFyZ3VtZW50KCl7cmV0dXJuIHRoaXMucGFyc2VBcmd1bWVudCghMCl9cGFyc2VGcmFnbWVudCgpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW47dGhpcy5leHBlY3RUb2tlbihsLlNQUkVBRCk7Y29uc3Qgbj10aGlzLmV4cGVjdE9wdGlvbmFsS2V5d29yZCgib24iKTtyZXR1cm4hbiYmdGhpcy5wZWVrKGwuTkFNRSk/dGhpcy5ub2RlKHQse2tpbmQ6VC5GUkFHTUVOVF9TUFJFQUQsbmFtZTp0aGlzLnBhcnNlRnJhZ21lbnROYW1lKCksZGlyZWN0aXZlczp0aGlzLnBhcnNlRGlyZWN0aXZlcyghMSl9KTp0aGlzLm5vZGUodCx7a2luZDpULklOTElORV9GUkFHTUVOVCx0eXBlQ29uZGl0aW9uOm4/dGhpcy5wYXJzZU5hbWVkVHlwZSgpOnZvaWQgMCxkaXJlY3RpdmVzOnRoaXMucGFyc2VEaXJlY3RpdmVzKCExKSxzZWxlY3Rpb25TZXQ6dGhpcy5wYXJzZVNlbGVjdGlvblNldCgpfSl9cGFyc2VGcmFnbWVudERlZmluaXRpb24oKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuO3JldHVybiB0aGlzLmV4cGVjdEtleXdvcmQoImZyYWdtZW50IiksdGhpcy5fb3B0aW9ucy5hbGxvd0xlZ2FjeUZyYWdtZW50VmFyaWFibGVzPT09ITA/dGhpcy5ub2RlKHQse2tpbmQ6VC5GUkFHTUVOVF9ERUZJTklUSU9OLG5hbWU6dGhpcy5wYXJzZUZyYWdtZW50TmFtZSgpLHZhcmlhYmxlRGVmaW5pdGlvbnM6dGhpcy5wYXJzZVZhcmlhYmxlRGVmaW5pdGlvbnMoKSx0eXBlQ29uZGl0aW9uOih0aGlzLmV4cGVjdEtleXdvcmQoIm9uIiksdGhpcy5wYXJzZU5hbWVkVHlwZSgpKSxkaXJlY3RpdmVzOnRoaXMucGFyc2VEaXJlY3RpdmVzKCExKSxzZWxlY3Rpb25TZXQ6dGhpcy5wYXJzZVNlbGVjdGlvblNldCgpfSk6dGhpcy5ub2RlKHQse2tpbmQ6VC5GUkFHTUVOVF9ERUZJTklUSU9OLG5hbWU6dGhpcy5wYXJzZUZyYWdtZW50TmFtZSgpLHR5cGVDb25kaXRpb246KHRoaXMuZXhwZWN0S2V5d29yZCgib24iKSx0aGlzLnBhcnNlTmFtZWRUeXBlKCkpLGRpcmVjdGl2ZXM6dGhpcy5wYXJzZURpcmVjdGl2ZXMoITEpLHNlbGVjdGlvblNldDp0aGlzLnBhcnNlU2VsZWN0aW9uU2V0KCl9KX1wYXJzZUZyYWdtZW50TmFtZSgpe2lmKHRoaXMuX2xleGVyLnRva2VuLnZhbHVlPT09Im9uIil0aHJvdyB0aGlzLnVuZXhwZWN0ZWQoKTtyZXR1cm4gdGhpcy5wYXJzZU5hbWUoKX1wYXJzZVZhbHVlTGl0ZXJhbCh0KXtjb25zdCBuPXRoaXMuX2xleGVyLnRva2VuO3N3aXRjaChuLmtpbmQpe2Nhc2UgbC5CUkFDS0VUX0w6cmV0dXJuIHRoaXMucGFyc2VMaXN0KHQpO2Nhc2UgbC5CUkFDRV9MOnJldHVybiB0aGlzLnBhcnNlT2JqZWN0KHQpO2Nhc2UgbC5JTlQ6cmV0dXJuIHRoaXMuYWR2YW5jZUxleGVyKCksdGhpcy5ub2RlKG4se2tpbmQ6VC5JTlQsdmFsdWU6bi52YWx1ZX0pO2Nhc2UgbC5GTE9BVDpyZXR1cm4gdGhpcy5hZHZhbmNlTGV4ZXIoKSx0aGlzLm5vZGUobix7a2luZDpULkZMT0FULHZhbHVlOm4udmFsdWV9KTtjYXNlIGwuU1RSSU5HOmNhc2UgbC5CTE9DS19TVFJJTkc6cmV0dXJuIHRoaXMucGFyc2VTdHJpbmdMaXRlcmFsKCk7Y2FzZSBsLk5BTUU6c3dpdGNoKHRoaXMuYWR2YW5jZUxleGVyKCksbi52YWx1ZSl7Y2FzZSJ0cnVlIjpyZXR1cm4gdGhpcy5ub2RlKG4se2tpbmQ6VC5CT09MRUFOLHZhbHVlOiEwfSk7Y2FzZSJmYWxzZSI6cmV0dXJuIHRoaXMubm9kZShuLHtraW5kOlQuQk9PTEVBTix2YWx1ZTohMX0pO2Nhc2UibnVsbCI6cmV0dXJuIHRoaXMubm9kZShuLHtraW5kOlQuTlVMTH0pO2RlZmF1bHQ6cmV0dXJuIHRoaXMubm9kZShuLHtraW5kOlQuRU5VTSx2YWx1ZTpuLnZhbHVlfSl9Y2FzZSBsLkRPTExBUjppZih0KWlmKHRoaXMuZXhwZWN0VG9rZW4obC5ET0xMQVIpLHRoaXMuX2xleGVyLnRva2VuLmtpbmQ9PT1sLk5BTUUpe2NvbnN0IGk9dGhpcy5fbGV4ZXIudG9rZW4udmFsdWU7dGhyb3cgRyh0aGlzLl9sZXhlci5zb3VyY2Usbi5zdGFydCxgVW5leHBlY3RlZCB2YXJpYWJsZSAiJCR7aX0iIGluIGNvbnN0YW50IHZhbHVlLmApfWVsc2UgdGhyb3cgdGhpcy51bmV4cGVjdGVkKG4pO3JldHVybiB0aGlzLnBhcnNlVmFyaWFibGUoKTtkZWZhdWx0OnRocm93IHRoaXMudW5leHBlY3RlZCgpfX1wYXJzZUNvbnN0VmFsdWVMaXRlcmFsKCl7cmV0dXJuIHRoaXMucGFyc2VWYWx1ZUxpdGVyYWwoITApfXBhcnNlU3RyaW5nTGl0ZXJhbCgpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW47cmV0dXJuIHRoaXMuYWR2YW5jZUxleGVyKCksdGhpcy5ub2RlKHQse2tpbmQ6VC5TVFJJTkcsdmFsdWU6dC52YWx1ZSxibG9jazp0LmtpbmQ9PT1sLkJMT0NLX1NUUklOR30pfXBhcnNlTGlzdCh0KXtjb25zdCBuPSgpPT50aGlzLnBhcnNlVmFsdWVMaXRlcmFsKHQpO3JldHVybiB0aGlzLm5vZGUodGhpcy5fbGV4ZXIudG9rZW4se2tpbmQ6VC5MSVNULHZhbHVlczp0aGlzLmFueShsLkJSQUNLRVRfTCxuLGwuQlJBQ0tFVF9SKX0pfXBhcnNlT2JqZWN0KHQpe2NvbnN0IG49KCk9PnRoaXMucGFyc2VPYmplY3RGaWVsZCh0KTtyZXR1cm4gdGhpcy5ub2RlKHRoaXMuX2xleGVyLnRva2VuLHtraW5kOlQuT0JKRUNULGZpZWxkczp0aGlzLmFueShsLkJSQUNFX0wsbixsLkJSQUNFX1IpfSl9cGFyc2VPYmplY3RGaWVsZCh0KXtjb25zdCBuPXRoaXMuX2xleGVyLnRva2VuLGk9dGhpcy5wYXJzZU5hbWUoKTtyZXR1cm4gdGhpcy5leHBlY3RUb2tlbihsLkNPTE9OKSx0aGlzLm5vZGUobix7a2luZDpULk9CSkVDVF9GSUVMRCxuYW1lOmksdmFsdWU6dGhpcy5wYXJzZVZhbHVlTGl0ZXJhbCh0KX0pfXBhcnNlRGlyZWN0aXZlcyh0KXtjb25zdCBuPVtdO2Zvcig7dGhpcy5wZWVrKGwuQVQpOyluLnB1c2godGhpcy5wYXJzZURpcmVjdGl2ZSh0KSk7cmV0dXJuIG59cGFyc2VDb25zdERpcmVjdGl2ZXMoKXtyZXR1cm4gdGhpcy5wYXJzZURpcmVjdGl2ZXMoITApfXBhcnNlRGlyZWN0aXZlKHQpe2NvbnN0IG49dGhpcy5fbGV4ZXIudG9rZW47cmV0dXJuIHRoaXMuZXhwZWN0VG9rZW4obC5BVCksdGhpcy5ub2RlKG4se2tpbmQ6VC5ESVJFQ1RJVkUsbmFtZTp0aGlzLnBhcnNlTmFtZSgpLGFyZ3VtZW50czp0aGlzLnBhcnNlQXJndW1lbnRzKHQpfSl9cGFyc2VUeXBlUmVmZXJlbmNlKCl7Y29uc3QgdD10aGlzLl9sZXhlci50b2tlbjtsZXQgbjtpZih0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4obC5CUkFDS0VUX0wpKXtjb25zdCBpPXRoaXMucGFyc2VUeXBlUmVmZXJlbmNlKCk7dGhpcy5leHBlY3RUb2tlbihsLkJSQUNLRVRfUiksbj10aGlzLm5vZGUodCx7a2luZDpULkxJU1RfVFlQRSx0eXBlOml9KX1lbHNlIG49dGhpcy5wYXJzZU5hbWVkVHlwZSgpO3JldHVybiB0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4obC5CQU5HKT90aGlzLm5vZGUodCx7a2luZDpULk5PTl9OVUxMX1RZUEUsdHlwZTpufSk6bn1wYXJzZU5hbWVkVHlwZSgpe3JldHVybiB0aGlzLm5vZGUodGhpcy5fbGV4ZXIudG9rZW4se2tpbmQ6VC5OQU1FRF9UWVBFLG5hbWU6dGhpcy5wYXJzZU5hbWUoKX0pfXBlZWtEZXNjcmlwdGlvbigpe3JldHVybiB0aGlzLnBlZWsobC5TVFJJTkcpfHx0aGlzLnBlZWsobC5CTE9DS19TVFJJTkcpfXBhcnNlRGVzY3JpcHRpb24oKXtpZih0aGlzLnBlZWtEZXNjcmlwdGlvbigpKXJldHVybiB0aGlzLnBhcnNlU3RyaW5nTGl0ZXJhbCgpfXBhcnNlU2NoZW1hRGVmaW5pdGlvbigpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW4sbj10aGlzLnBhcnNlRGVzY3JpcHRpb24oKTt0aGlzLmV4cGVjdEtleXdvcmQoInNjaGVtYSIpO2NvbnN0IGk9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpLHI9dGhpcy5tYW55KGwuQlJBQ0VfTCx0aGlzLnBhcnNlT3BlcmF0aW9uVHlwZURlZmluaXRpb24sbC5CUkFDRV9SKTtyZXR1cm4gdGhpcy5ub2RlKHQse2tpbmQ6VC5TQ0hFTUFfREVGSU5JVElPTixkZXNjcmlwdGlvbjpuLGRpcmVjdGl2ZXM6aSxvcGVyYXRpb25UeXBlczpyfSl9cGFyc2VPcGVyYXRpb25UeXBlRGVmaW5pdGlvbigpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW4sbj10aGlzLnBhcnNlT3BlcmF0aW9uVHlwZSgpO3RoaXMuZXhwZWN0VG9rZW4obC5DT0xPTik7Y29uc3QgaT10aGlzLnBhcnNlTmFtZWRUeXBlKCk7cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOlQuT1BFUkFUSU9OX1RZUEVfREVGSU5JVElPTixvcGVyYXRpb246bix0eXBlOml9KX1wYXJzZVNjYWxhclR5cGVEZWZpbml0aW9uKCl7Y29uc3QgdD10aGlzLl9sZXhlci50b2tlbixuPXRoaXMucGFyc2VEZXNjcmlwdGlvbigpO3RoaXMuZXhwZWN0S2V5d29yZCgic2NhbGFyIik7Y29uc3QgaT10aGlzLnBhcnNlTmFtZSgpLHI9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpO3JldHVybiB0aGlzLm5vZGUodCx7a2luZDpULlNDQUxBUl9UWVBFX0RFRklOSVRJT04sZGVzY3JpcHRpb246bixuYW1lOmksZGlyZWN0aXZlczpyfSl9cGFyc2VPYmplY3RUeXBlRGVmaW5pdGlvbigpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW4sbj10aGlzLnBhcnNlRGVzY3JpcHRpb24oKTt0aGlzLmV4cGVjdEtleXdvcmQoInR5cGUiKTtjb25zdCBpPXRoaXMucGFyc2VOYW1lKCkscj10aGlzLnBhcnNlSW1wbGVtZW50c0ludGVyZmFjZXMoKSxzPXRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKSxvPXRoaXMucGFyc2VGaWVsZHNEZWZpbml0aW9uKCk7cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOlQuT0JKRUNUX1RZUEVfREVGSU5JVElPTixkZXNjcmlwdGlvbjpuLG5hbWU6aSxpbnRlcmZhY2VzOnIsZGlyZWN0aXZlczpzLGZpZWxkczpvfSl9cGFyc2VJbXBsZW1lbnRzSW50ZXJmYWNlcygpe3JldHVybiB0aGlzLmV4cGVjdE9wdGlvbmFsS2V5d29yZCgiaW1wbGVtZW50cyIpP3RoaXMuZGVsaW1pdGVkTWFueShsLkFNUCx0aGlzLnBhcnNlTmFtZWRUeXBlKTpbXX1wYXJzZUZpZWxkc0RlZmluaXRpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25hbE1hbnkobC5CUkFDRV9MLHRoaXMucGFyc2VGaWVsZERlZmluaXRpb24sbC5CUkFDRV9SKX1wYXJzZUZpZWxkRGVmaW5pdGlvbigpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW4sbj10aGlzLnBhcnNlRGVzY3JpcHRpb24oKSxpPXRoaXMucGFyc2VOYW1lKCkscj10aGlzLnBhcnNlQXJndW1lbnREZWZzKCk7dGhpcy5leHBlY3RUb2tlbihsLkNPTE9OKTtjb25zdCBzPXRoaXMucGFyc2VUeXBlUmVmZXJlbmNlKCksbz10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCk7cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOlQuRklFTERfREVGSU5JVElPTixkZXNjcmlwdGlvbjpuLG5hbWU6aSxhcmd1bWVudHM6cix0eXBlOnMsZGlyZWN0aXZlczpvfSl9cGFyc2VBcmd1bWVudERlZnMoKXtyZXR1cm4gdGhpcy5vcHRpb25hbE1hbnkobC5QQVJFTl9MLHRoaXMucGFyc2VJbnB1dFZhbHVlRGVmLGwuUEFSRU5fUil9cGFyc2VJbnB1dFZhbHVlRGVmKCl7Y29uc3QgdD10aGlzLl9sZXhlci50b2tlbixuPXRoaXMucGFyc2VEZXNjcmlwdGlvbigpLGk9dGhpcy5wYXJzZU5hbWUoKTt0aGlzLmV4cGVjdFRva2VuKGwuQ09MT04pO2NvbnN0IHI9dGhpcy5wYXJzZVR5cGVSZWZlcmVuY2UoKTtsZXQgczt0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4obC5FUVVBTFMpJiYocz10aGlzLnBhcnNlQ29uc3RWYWx1ZUxpdGVyYWwoKSk7Y29uc3Qgbz10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCk7cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOlQuSU5QVVRfVkFMVUVfREVGSU5JVElPTixkZXNjcmlwdGlvbjpuLG5hbWU6aSx0eXBlOnIsZGVmYXVsdFZhbHVlOnMsZGlyZWN0aXZlczpvfSl9cGFyc2VJbnRlcmZhY2VUeXBlRGVmaW5pdGlvbigpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW4sbj10aGlzLnBhcnNlRGVzY3JpcHRpb24oKTt0aGlzLmV4cGVjdEtleXdvcmQoImludGVyZmFjZSIpO2NvbnN0IGk9dGhpcy5wYXJzZU5hbWUoKSxyPXRoaXMucGFyc2VJbXBsZW1lbnRzSW50ZXJmYWNlcygpLHM9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpLG89dGhpcy5wYXJzZUZpZWxkc0RlZmluaXRpb24oKTtyZXR1cm4gdGhpcy5ub2RlKHQse2tpbmQ6VC5JTlRFUkZBQ0VfVFlQRV9ERUZJTklUSU9OLGRlc2NyaXB0aW9uOm4sbmFtZTppLGludGVyZmFjZXM6cixkaXJlY3RpdmVzOnMsZmllbGRzOm99KX1wYXJzZVVuaW9uVHlwZURlZmluaXRpb24oKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuLG49dGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7dGhpcy5leHBlY3RLZXl3b3JkKCJ1bmlvbiIpO2NvbnN0IGk9dGhpcy5wYXJzZU5hbWUoKSxyPXRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKSxzPXRoaXMucGFyc2VVbmlvbk1lbWJlclR5cGVzKCk7cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOlQuVU5JT05fVFlQRV9ERUZJTklUSU9OLGRlc2NyaXB0aW9uOm4sbmFtZTppLGRpcmVjdGl2ZXM6cix0eXBlczpzfSl9cGFyc2VVbmlvbk1lbWJlclR5cGVzKCl7cmV0dXJuIHRoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbihsLkVRVUFMUyk/dGhpcy5kZWxpbWl0ZWRNYW55KGwuUElQRSx0aGlzLnBhcnNlTmFtZWRUeXBlKTpbXX1wYXJzZUVudW1UeXBlRGVmaW5pdGlvbigpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW4sbj10aGlzLnBhcnNlRGVzY3JpcHRpb24oKTt0aGlzLmV4cGVjdEtleXdvcmQoImVudW0iKTtjb25zdCBpPXRoaXMucGFyc2VOYW1lKCkscj10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCkscz10aGlzLnBhcnNlRW51bVZhbHVlc0RlZmluaXRpb24oKTtyZXR1cm4gdGhpcy5ub2RlKHQse2tpbmQ6VC5FTlVNX1RZUEVfREVGSU5JVElPTixkZXNjcmlwdGlvbjpuLG5hbWU6aSxkaXJlY3RpdmVzOnIsdmFsdWVzOnN9KX1wYXJzZUVudW1WYWx1ZXNEZWZpbml0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9uYWxNYW55KGwuQlJBQ0VfTCx0aGlzLnBhcnNlRW51bVZhbHVlRGVmaW5pdGlvbixsLkJSQUNFX1IpfXBhcnNlRW51bVZhbHVlRGVmaW5pdGlvbigpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW4sbj10aGlzLnBhcnNlRGVzY3JpcHRpb24oKSxpPXRoaXMucGFyc2VFbnVtVmFsdWVOYW1lKCkscj10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCk7cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOlQuRU5VTV9WQUxVRV9ERUZJTklUSU9OLGRlc2NyaXB0aW9uOm4sbmFtZTppLGRpcmVjdGl2ZXM6cn0pfXBhcnNlRW51bVZhbHVlTmFtZSgpe2lmKHRoaXMuX2xleGVyLnRva2VuLnZhbHVlPT09InRydWUifHx0aGlzLl9sZXhlci50b2tlbi52YWx1ZT09PSJmYWxzZSJ8fHRoaXMuX2xleGVyLnRva2VuLnZhbHVlPT09Im51bGwiKXRocm93IEcodGhpcy5fbGV4ZXIuc291cmNlLHRoaXMuX2xleGVyLnRva2VuLnN0YXJ0LGAke3dlKHRoaXMuX2xleGVyLnRva2VuKX0gaXMgcmVzZXJ2ZWQgYW5kIGNhbm5vdCBiZSB1c2VkIGZvciBhbiBlbnVtIHZhbHVlLmApO3JldHVybiB0aGlzLnBhcnNlTmFtZSgpfXBhcnNlSW5wdXRPYmplY3RUeXBlRGVmaW5pdGlvbigpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW4sbj10aGlzLnBhcnNlRGVzY3JpcHRpb24oKTt0aGlzLmV4cGVjdEtleXdvcmQoImlucHV0Iik7Y29uc3QgaT10aGlzLnBhcnNlTmFtZSgpLHI9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpLHM9dGhpcy5wYXJzZUlucHV0RmllbGRzRGVmaW5pdGlvbigpO3JldHVybiB0aGlzLm5vZGUodCx7a2luZDpULklOUFVUX09CSkVDVF9UWVBFX0RFRklOSVRJT04sZGVzY3JpcHRpb246bixuYW1lOmksZGlyZWN0aXZlczpyLGZpZWxkczpzfSl9cGFyc2VJbnB1dEZpZWxkc0RlZmluaXRpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25hbE1hbnkobC5CUkFDRV9MLHRoaXMucGFyc2VJbnB1dFZhbHVlRGVmLGwuQlJBQ0VfUil9cGFyc2VUeXBlU3lzdGVtRXh0ZW5zaW9uKCl7Y29uc3QgdD10aGlzLl9sZXhlci5sb29rYWhlYWQoKTtpZih0LmtpbmQ9PT1sLk5BTUUpc3dpdGNoKHQudmFsdWUpe2Nhc2Uic2NoZW1hIjpyZXR1cm4gdGhpcy5wYXJzZVNjaGVtYUV4dGVuc2lvbigpO2Nhc2Uic2NhbGFyIjpyZXR1cm4gdGhpcy5wYXJzZVNjYWxhclR5cGVFeHRlbnNpb24oKTtjYXNlInR5cGUiOnJldHVybiB0aGlzLnBhcnNlT2JqZWN0VHlwZUV4dGVuc2lvbigpO2Nhc2UiaW50ZXJmYWNlIjpyZXR1cm4gdGhpcy5wYXJzZUludGVyZmFjZVR5cGVFeHRlbnNpb24oKTtjYXNlInVuaW9uIjpyZXR1cm4gdGhpcy5wYXJzZVVuaW9uVHlwZUV4dGVuc2lvbigpO2Nhc2UiZW51bSI6cmV0dXJuIHRoaXMucGFyc2VFbnVtVHlwZUV4dGVuc2lvbigpO2Nhc2UiaW5wdXQiOnJldHVybiB0aGlzLnBhcnNlSW5wdXRPYmplY3RUeXBlRXh0ZW5zaW9uKCl9dGhyb3cgdGhpcy51bmV4cGVjdGVkKHQpfXBhcnNlU2NoZW1hRXh0ZW5zaW9uKCl7Y29uc3QgdD10aGlzLl9sZXhlci50b2tlbjt0aGlzLmV4cGVjdEtleXdvcmQoImV4dGVuZCIpLHRoaXMuZXhwZWN0S2V5d29yZCgic2NoZW1hIik7Y29uc3Qgbj10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCksaT10aGlzLm9wdGlvbmFsTWFueShsLkJSQUNFX0wsdGhpcy5wYXJzZU9wZXJhdGlvblR5cGVEZWZpbml0aW9uLGwuQlJBQ0VfUik7aWYobi5sZW5ndGg9PT0wJiZpLmxlbmd0aD09PTApdGhyb3cgdGhpcy51bmV4cGVjdGVkKCk7cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOlQuU0NIRU1BX0VYVEVOU0lPTixkaXJlY3RpdmVzOm4sb3BlcmF0aW9uVHlwZXM6aX0pfXBhcnNlU2NhbGFyVHlwZUV4dGVuc2lvbigpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW47dGhpcy5leHBlY3RLZXl3b3JkKCJleHRlbmQiKSx0aGlzLmV4cGVjdEtleXdvcmQoInNjYWxhciIpO2NvbnN0IG49dGhpcy5wYXJzZU5hbWUoKSxpPXRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKTtpZihpLmxlbmd0aD09PTApdGhyb3cgdGhpcy51bmV4cGVjdGVkKCk7cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOlQuU0NBTEFSX1RZUEVfRVhURU5TSU9OLG5hbWU6bixkaXJlY3RpdmVzOml9KX1wYXJzZU9iamVjdFR5cGVFeHRlbnNpb24oKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuO3RoaXMuZXhwZWN0S2V5d29yZCgiZXh0ZW5kIiksdGhpcy5leHBlY3RLZXl3b3JkKCJ0eXBlIik7Y29uc3Qgbj10aGlzLnBhcnNlTmFtZSgpLGk9dGhpcy5wYXJzZUltcGxlbWVudHNJbnRlcmZhY2VzKCkscj10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCkscz10aGlzLnBhcnNlRmllbGRzRGVmaW5pdGlvbigpO2lmKGkubGVuZ3RoPT09MCYmci5sZW5ndGg9PT0wJiZzLmxlbmd0aD09PTApdGhyb3cgdGhpcy51bmV4cGVjdGVkKCk7cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOlQuT0JKRUNUX1RZUEVfRVhURU5TSU9OLG5hbWU6bixpbnRlcmZhY2VzOmksZGlyZWN0aXZlczpyLGZpZWxkczpzfSl9cGFyc2VJbnRlcmZhY2VUeXBlRXh0ZW5zaW9uKCl7Y29uc3QgdD10aGlzLl9sZXhlci50b2tlbjt0aGlzLmV4cGVjdEtleXdvcmQoImV4dGVuZCIpLHRoaXMuZXhwZWN0S2V5d29yZCgiaW50ZXJmYWNlIik7Y29uc3Qgbj10aGlzLnBhcnNlTmFtZSgpLGk9dGhpcy5wYXJzZUltcGxlbWVudHNJbnRlcmZhY2VzKCkscj10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCkscz10aGlzLnBhcnNlRmllbGRzRGVmaW5pdGlvbigpO2lmKGkubGVuZ3RoPT09MCYmci5sZW5ndGg9PT0wJiZzLmxlbmd0aD09PTApdGhyb3cgdGhpcy51bmV4cGVjdGVkKCk7cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOlQuSU5URVJGQUNFX1RZUEVfRVhURU5TSU9OLG5hbWU6bixpbnRlcmZhY2VzOmksZGlyZWN0aXZlczpyLGZpZWxkczpzfSl9cGFyc2VVbmlvblR5cGVFeHRlbnNpb24oKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuO3RoaXMuZXhwZWN0S2V5d29yZCgiZXh0ZW5kIiksdGhpcy5leHBlY3RLZXl3b3JkKCJ1bmlvbiIpO2NvbnN0IG49dGhpcy5wYXJzZU5hbWUoKSxpPXRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKSxyPXRoaXMucGFyc2VVbmlvbk1lbWJlclR5cGVzKCk7aWYoaS5sZW5ndGg9PT0wJiZyLmxlbmd0aD09PTApdGhyb3cgdGhpcy51bmV4cGVjdGVkKCk7cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOlQuVU5JT05fVFlQRV9FWFRFTlNJT04sbmFtZTpuLGRpcmVjdGl2ZXM6aSx0eXBlczpyfSl9cGFyc2VFbnVtVHlwZUV4dGVuc2lvbigpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW47dGhpcy5leHBlY3RLZXl3b3JkKCJleHRlbmQiKSx0aGlzLmV4cGVjdEtleXdvcmQoImVudW0iKTtjb25zdCBuPXRoaXMucGFyc2VOYW1lKCksaT10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCkscj10aGlzLnBhcnNlRW51bVZhbHVlc0RlZmluaXRpb24oKTtpZihpLmxlbmd0aD09PTAmJnIubGVuZ3RoPT09MCl0aHJvdyB0aGlzLnVuZXhwZWN0ZWQoKTtyZXR1cm4gdGhpcy5ub2RlKHQse2tpbmQ6VC5FTlVNX1RZUEVfRVhURU5TSU9OLG5hbWU6bixkaXJlY3RpdmVzOmksdmFsdWVzOnJ9KX1wYXJzZUlucHV0T2JqZWN0VHlwZUV4dGVuc2lvbigpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW47dGhpcy5leHBlY3RLZXl3b3JkKCJleHRlbmQiKSx0aGlzLmV4cGVjdEtleXdvcmQoImlucHV0Iik7Y29uc3Qgbj10aGlzLnBhcnNlTmFtZSgpLGk9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpLHI9dGhpcy5wYXJzZUlucHV0RmllbGRzRGVmaW5pdGlvbigpO2lmKGkubGVuZ3RoPT09MCYmci5sZW5ndGg9PT0wKXRocm93IHRoaXMudW5leHBlY3RlZCgpO3JldHVybiB0aGlzLm5vZGUodCx7a2luZDpULklOUFVUX09CSkVDVF9UWVBFX0VYVEVOU0lPTixuYW1lOm4sZGlyZWN0aXZlczppLGZpZWxkczpyfSl9cGFyc2VEaXJlY3RpdmVEZWZpbml0aW9uKCl7Y29uc3QgdD10aGlzLl9sZXhlci50b2tlbixuPXRoaXMucGFyc2VEZXNjcmlwdGlvbigpO3RoaXMuZXhwZWN0S2V5d29yZCgiZGlyZWN0aXZlIiksdGhpcy5leHBlY3RUb2tlbihsLkFUKTtjb25zdCBpPXRoaXMucGFyc2VOYW1lKCkscj10aGlzLnBhcnNlQXJndW1lbnREZWZzKCkscz10aGlzLmV4cGVjdE9wdGlvbmFsS2V5d29yZCgicmVwZWF0YWJsZSIpO3RoaXMuZXhwZWN0S2V5d29yZCgib24iKTtjb25zdCBvPXRoaXMucGFyc2VEaXJlY3RpdmVMb2NhdGlvbnMoKTtyZXR1cm4gdGhpcy5ub2RlKHQse2tpbmQ6VC5ESVJFQ1RJVkVfREVGSU5JVElPTixkZXNjcmlwdGlvbjpuLG5hbWU6aSxhcmd1bWVudHM6cixyZXBlYXRhYmxlOnMsbG9jYXRpb25zOm99KX1wYXJzZURpcmVjdGl2ZUxvY2F0aW9ucygpe3JldHVybiB0aGlzLmRlbGltaXRlZE1hbnkobC5QSVBFLHRoaXMucGFyc2VEaXJlY3RpdmVMb2NhdGlvbil9cGFyc2VEaXJlY3RpdmVMb2NhdGlvbigpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW4sbj10aGlzLnBhcnNlTmFtZSgpO2lmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChHZSxuLnZhbHVlKSlyZXR1cm4gbjt0aHJvdyB0aGlzLnVuZXhwZWN0ZWQodCl9bm9kZSh0LG4pe3JldHVybiB0aGlzLl9vcHRpb25zLm5vTG9jYXRpb24hPT0hMCYmKG4ubG9jPW5ldyBhbih0LHRoaXMuX2xleGVyLmxhc3RUb2tlbix0aGlzLl9sZXhlci5zb3VyY2UpKSxufXBlZWsodCl7cmV0dXJuIHRoaXMuX2xleGVyLnRva2VuLmtpbmQ9PT10fWV4cGVjdFRva2VuKHQpe2NvbnN0IG49dGhpcy5fbGV4ZXIudG9rZW47aWYobi5raW5kPT09dClyZXR1cm4gdGhpcy5hZHZhbmNlTGV4ZXIoKSxuO3Rocm93IEcodGhpcy5fbGV4ZXIuc291cmNlLG4uc3RhcnQsYEV4cGVjdGVkICR7U3QodCl9LCBmb3VuZCAke3dlKG4pfS5gKX1leHBlY3RPcHRpb25hbFRva2VuKHQpe3JldHVybiB0aGlzLl9sZXhlci50b2tlbi5raW5kPT09dD8odGhpcy5hZHZhbmNlTGV4ZXIoKSwhMCk6ITF9ZXhwZWN0S2V5d29yZCh0KXtjb25zdCBuPXRoaXMuX2xleGVyLnRva2VuO2lmKG4ua2luZD09PWwuTkFNRSYmbi52YWx1ZT09PXQpdGhpcy5hZHZhbmNlTGV4ZXIoKTtlbHNlIHRocm93IEcodGhpcy5fbGV4ZXIuc291cmNlLG4uc3RhcnQsYEV4cGVjdGVkICIke3R9IiwgZm91bmQgJHt3ZShuKX0uYCl9ZXhwZWN0T3B0aW9uYWxLZXl3b3JkKHQpe2NvbnN0IG49dGhpcy5fbGV4ZXIudG9rZW47cmV0dXJuIG4ua2luZD09PWwuTkFNRSYmbi52YWx1ZT09PXQ/KHRoaXMuYWR2YW5jZUxleGVyKCksITApOiExfXVuZXhwZWN0ZWQodCl7Y29uc3Qgbj10IT1udWxsP3Q6dGhpcy5fbGV4ZXIudG9rZW47cmV0dXJuIEcodGhpcy5fbGV4ZXIuc291cmNlLG4uc3RhcnQsYFVuZXhwZWN0ZWQgJHt3ZShuKX0uYCl9YW55KHQsbixpKXt0aGlzLmV4cGVjdFRva2VuKHQpO2NvbnN0IHI9W107Zm9yKDshdGhpcy5leHBlY3RPcHRpb25hbFRva2VuKGkpOylyLnB1c2gobi5jYWxsKHRoaXMpKTtyZXR1cm4gcn1vcHRpb25hbE1hbnkodCxuLGkpe2lmKHRoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbih0KSl7Y29uc3Qgcj1bXTtkbyByLnB1c2gobi5jYWxsKHRoaXMpKTt3aGlsZSghdGhpcy5leHBlY3RPcHRpb25hbFRva2VuKGkpKTtyZXR1cm4gcn1yZXR1cm5bXX1tYW55KHQsbixpKXt0aGlzLmV4cGVjdFRva2VuKHQpO2NvbnN0IHI9W107ZG8gci5wdXNoKG4uY2FsbCh0aGlzKSk7d2hpbGUoIXRoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbihpKSk7cmV0dXJuIHJ9ZGVsaW1pdGVkTWFueSh0LG4pe3RoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbih0KTtjb25zdCBpPVtdO2RvIGkucHVzaChuLmNhbGwodGhpcykpO3doaWxlKHRoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbih0KSk7cmV0dXJuIGl9YWR2YW5jZUxleGVyKCl7Y29uc3R7bWF4VG9rZW5zOnR9PXRoaXMuX29wdGlvbnMsbj10aGlzLl9sZXhlci5hZHZhbmNlKCk7aWYobi5raW5kIT09bC5FT0YmJigrK3RoaXMuX3Rva2VuQ291bnRlcix0IT09dm9pZCAwJiZ0aGlzLl90b2tlbkNvdW50ZXI+dCkpdGhyb3cgRyh0aGlzLl9sZXhlci5zb3VyY2Usbi5zdGFydCxgRG9jdW1lbnQgY29udGFpbnMgbW9yZSB0aGF0ICR7dH0gdG9rZW5zLiBQYXJzaW5nIGFib3J0ZWQuYCl9fWZ1bmN0aW9uIHdlKGUpe2NvbnN0IHQ9ZS52YWx1ZTtyZXR1cm4gU3QoZS5raW5kKSsodCE9bnVsbD9gICIke3R9ImA6IiIpfWZ1bmN0aW9uIFN0KGUpe3JldHVybiBwbihlKT9gIiR7ZX0iYDplfWZ1bmN0aW9uIFJuKGUpe3JldHVybmAiJHtlLnJlcGxhY2UoUG4sTG4pfSJgfWNvbnN0IFBuPS9bXHgwMC1ceDFmXHgyMlx4NWNceDdmLVx4OWZdL2c7ZnVuY3Rpb24gTG4oZSl7cmV0dXJuIEZuW2UuY2hhckNvZGVBdCgwKV19Y29uc3QgRm49WyJcXHUwMDAwIiwiXFx1MDAwMSIsIlxcdTAwMDIiLCJcXHUwMDAzIiwiXFx1MDAwNCIsIlxcdTAwMDUiLCJcXHUwMDA2IiwiXFx1MDAwNyIsIlxcYiIsIlxcdCIsIlxcbiIsIlxcdTAwMEIiLCJcXGYiLCJcXHIiLCJcXHUwMDBFIiwiXFx1MDAwRiIsIlxcdTAwMTAiLCJcXHUwMDExIiwiXFx1MDAxMiIsIlxcdTAwMTMiLCJcXHUwMDE0IiwiXFx1MDAxNSIsIlxcdTAwMTYiLCJcXHUwMDE3IiwiXFx1MDAxOCIsIlxcdTAwMTkiLCJcXHUwMDFBIiwiXFx1MDAxQiIsIlxcdTAwMUMiLCJcXHUwMDFEIiwiXFx1MDAxRSIsIlxcdTAwMUYiLCIiLCIiLCdcXCInLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCIiLCJcXFxcIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiXFx1MDA3RiIsIlxcdTAwODAiLCJcXHUwMDgxIiwiXFx1MDA4MiIsIlxcdTAwODMiLCJcXHUwMDg0IiwiXFx1MDA4NSIsIlxcdTAwODYiLCJcXHUwMDg3IiwiXFx1MDA4OCIsIlxcdTAwODkiLCJcXHUwMDhBIiwiXFx1MDA4QiIsIlxcdTAwOEMiLCJcXHUwMDhEIiwiXFx1MDA4RSIsIlxcdTAwOEYiLCJcXHUwMDkwIiwiXFx1MDA5MSIsIlxcdTAwOTIiLCJcXHUwMDkzIiwiXFx1MDA5NCIsIlxcdTAwOTUiLCJcXHUwMDk2IiwiXFx1MDA5NyIsIlxcdTAwOTgiLCJcXHUwMDk5IiwiXFx1MDA5QSIsIlxcdTAwOUIiLCJcXHUwMDlDIiwiXFx1MDA5RCIsIlxcdTAwOUUiLCJcXHUwMDlGIl0sTW49T2JqZWN0LmZyZWV6ZSh7fSk7ZnVuY3Rpb24gJG4oZSx0LG49Z3Qpe2NvbnN0IGk9bmV3IE1hcDtmb3IoY29uc3QgRSBvZiBPYmplY3QudmFsdWVzKFQpKWkuc2V0KEUsQm4odCxFKSk7bGV0IHIscz1BcnJheS5pc0FycmF5KGUpLG89W2VdLGM9LTEsZj1bXSxkPWUsdSx5O2NvbnN0IHY9W10sYj1bXTtkb3tjKys7Y29uc3QgRT1jPT09by5sZW5ndGgsQz1FJiZmLmxlbmd0aCE9PTA7aWYoRSl7aWYodT1iLmxlbmd0aD09PTA/dm9pZCAwOnZbdi5sZW5ndGgtMV0sZD15LHk9Yi5wb3AoKSxDKWlmKHMpe2Q9ZC5zbGljZSgpO2xldCBSPTA7Zm9yKGNvbnN0WyQscV1vZiBmKXtjb25zdCBCPSQtUjtxPT09bnVsbD8oZC5zcGxpY2UoQiwxKSxSKyspOmRbQl09cX19ZWxzZXtkPUQoe30sZCk7Zm9yKGNvbnN0W1IsJF1vZiBmKWRbUl09JH1jPXIuaW5kZXgsbz1yLmtleXMsZj1yLmVkaXRzLHM9ci5pbkFycmF5LHI9ci5wcmV2fWVsc2UgaWYoeSl7aWYodT1zP2M6b1tjXSxkPXlbdV0sZD09bnVsbCljb250aW51ZTt2LnB1c2godSl9bGV0IHc7aWYoIUFycmF5LmlzQXJyYXkoZCkpe3ZhciBtLE47dnQoZCl8fG9lKCExLGBJbnZhbGlkIEFTVCBOb2RlOiAke1llKGQpfS5gKTtjb25zdCBSPUU/KG09aS5nZXQoZC5raW5kKSk9PT1udWxsfHxtPT09dm9pZCAwP3ZvaWQgMDptLmxlYXZlOihOPWkuZ2V0KGQua2luZCkpPT09bnVsbHx8Tj09PXZvaWQgMD92b2lkIDA6Ti5lbnRlcjtpZih3PVI9PW51bGw/dm9pZCAwOlIuY2FsbCh0LGQsdSx5LHYsYiksdz09PU1uKWJyZWFrO2lmKHc9PT0hMSl7aWYoIUUpe3YucG9wKCk7Y29udGludWV9fWVsc2UgaWYodyE9PXZvaWQgMCYmKGYucHVzaChbdSx3XSksIUUpKWlmKHZ0KHcpKWQ9dztlbHNle3YucG9wKCk7Y29udGludWV9fWlmKHc9PT12b2lkIDAmJkMmJmYucHVzaChbdSxkXSksRSl2LnBvcCgpO2Vsc2V7dmFyIGc7cj17aW5BcnJheTpzLGluZGV4OmMsa2V5czpvLGVkaXRzOmYscHJldjpyfSxzPUFycmF5LmlzQXJyYXkoZCksbz1zP2Q6KGc9bltkLmtpbmRdKSE9PW51bGwmJmchPT12b2lkIDA/ZzpbXSxjPS0xLGY9W10seSYmYi5wdXNoKHkpLHk9ZH19d2hpbGUociE9PXZvaWQgMCk7cmV0dXJuIGYubGVuZ3RoIT09MD9mW2YubGVuZ3RoLTFdWzFdOmV9ZnVuY3Rpb24gQm4oZSx0KXtjb25zdCBuPWVbdF07cmV0dXJuIHR5cGVvZiBuPT0ib2JqZWN0Ij9uOnR5cGVvZiBuPT0iZnVuY3Rpb24iP3tlbnRlcjpuLGxlYXZlOnZvaWQgMH06e2VudGVyOmUuZW50ZXIsbGVhdmU6ZS5sZWF2ZX19ZnVuY3Rpb24gVW4oZSl7cmV0dXJuICRuKGUsam4pfWNvbnN0IFZuPTgwLGpuPXtOYW1lOntsZWF2ZTplPT5lLnZhbHVlfSxWYXJpYWJsZTp7bGVhdmU6ZT0+IiQiK2UubmFtZX0sRG9jdW1lbnQ6e2xlYXZlOmU9PnAoZS5kZWZpbml0aW9ucyxgCgpgKX0sT3BlcmF0aW9uRGVmaW5pdGlvbjp7bGVhdmUoZSl7Y29uc3QgdD1PKCIoIixwKGUudmFyaWFibGVEZWZpbml0aW9ucywiLCAiKSwiKSIpLG49cChbZS5vcGVyYXRpb24scChbZS5uYW1lLHRdKSxwKGUuZGlyZWN0aXZlcywiICIpXSwiICIpO3JldHVybihuPT09InF1ZXJ5Ij8iIjpuKyIgIikrZS5zZWxlY3Rpb25TZXR9fSxWYXJpYWJsZURlZmluaXRpb246e2xlYXZlOih7dmFyaWFibGU6ZSx0eXBlOnQsZGVmYXVsdFZhbHVlOm4sZGlyZWN0aXZlczppfSk9PmUrIjogIit0K08oIiA9ICIsbikrTygiICIscChpLCIgIikpfSxTZWxlY3Rpb25TZXQ6e2xlYXZlOih7c2VsZWN0aW9uczplfSk9PmVlKGUpfSxGaWVsZDp7bGVhdmUoe2FsaWFzOmUsbmFtZTp0LGFyZ3VtZW50czpuLGRpcmVjdGl2ZXM6aSxzZWxlY3Rpb25TZXQ6cn0pe2NvbnN0IHM9TygiIixlLCI6ICIpK3Q7bGV0IG89cytPKCIoIixwKG4sIiwgIiksIikiKTtyZXR1cm4gby5sZW5ndGg+Vm4mJihvPXMrTyhgKApgLERlKHAobixgCmApKSxgCilgKSkscChbbyxwKGksIiAiKSxyXSwiICIpfX0sQXJndW1lbnQ6e2xlYXZlOih7bmFtZTplLHZhbHVlOnR9KT0+ZSsiOiAiK3R9LEZyYWdtZW50U3ByZWFkOntsZWF2ZTooe25hbWU6ZSxkaXJlY3RpdmVzOnR9KT0+Ii4uLiIrZStPKCIgIixwKHQsIiAiKSl9LElubGluZUZyYWdtZW50OntsZWF2ZTooe3R5cGVDb25kaXRpb246ZSxkaXJlY3RpdmVzOnQsc2VsZWN0aW9uU2V0Om59KT0+cChbIi4uLiIsTygib24gIixlKSxwKHQsIiAiKSxuXSwiICIpfSxGcmFnbWVudERlZmluaXRpb246e2xlYXZlOih7bmFtZTplLHR5cGVDb25kaXRpb246dCx2YXJpYWJsZURlZmluaXRpb25zOm4sZGlyZWN0aXZlczppLHNlbGVjdGlvblNldDpyfSk9PmBmcmFnbWVudCAke2V9JHtPKCIoIixwKG4sIiwgIiksIikiKX0gb24gJHt0fSAke08oIiIscChpLCIgIiksIiAiKX1gK3J9LEludFZhbHVlOntsZWF2ZTooe3ZhbHVlOmV9KT0+ZX0sRmxvYXRWYWx1ZTp7bGVhdmU6KHt2YWx1ZTplfSk9PmV9LFN0cmluZ1ZhbHVlOntsZWF2ZTooe3ZhbHVlOmUsYmxvY2s6dH0pPT50P2huKGUpOlJuKGUpfSxCb29sZWFuVmFsdWU6e2xlYXZlOih7dmFsdWU6ZX0pPT5lPyJ0cnVlIjoiZmFsc2UifSxOdWxsVmFsdWU6e2xlYXZlOigpPT4ibnVsbCJ9LEVudW1WYWx1ZTp7bGVhdmU6KHt2YWx1ZTplfSk9PmV9LExpc3RWYWx1ZTp7bGVhdmU6KHt2YWx1ZXM6ZX0pPT4iWyIrcChlLCIsICIpKyJdIn0sT2JqZWN0VmFsdWU6e2xlYXZlOih7ZmllbGRzOmV9KT0+InsiK3AoZSwiLCAiKSsifSJ9LE9iamVjdEZpZWxkOntsZWF2ZTooe25hbWU6ZSx2YWx1ZTp0fSk9PmUrIjogIit0fSxEaXJlY3RpdmU6e2xlYXZlOih7bmFtZTplLGFyZ3VtZW50czp0fSk9PiJAIitlK08oIigiLHAodCwiLCAiKSwiKSIpfSxOYW1lZFR5cGU6e2xlYXZlOih7bmFtZTplfSk9PmV9LExpc3RUeXBlOntsZWF2ZTooe3R5cGU6ZX0pPT4iWyIrZSsiXSJ9LE5vbk51bGxUeXBlOntsZWF2ZTooe3R5cGU6ZX0pPT5lKyIhIn0sU2NoZW1hRGVmaW5pdGlvbjp7bGVhdmU6KHtkZXNjcmlwdGlvbjplLGRpcmVjdGl2ZXM6dCxvcGVyYXRpb25UeXBlczpufSk9Pk8oIiIsZSxgCmApK3AoWyJzY2hlbWEiLHAodCwiICIpLGVlKG4pXSwiICIpfSxPcGVyYXRpb25UeXBlRGVmaW5pdGlvbjp7bGVhdmU6KHtvcGVyYXRpb246ZSx0eXBlOnR9KT0+ZSsiOiAiK3R9LFNjYWxhclR5cGVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LGRpcmVjdGl2ZXM6bn0pPT5PKCIiLGUsYApgKStwKFsic2NhbGFyIix0LHAobiwiICIpXSwiICIpfSxPYmplY3RUeXBlRGVmaW5pdGlvbjp7bGVhdmU6KHtkZXNjcmlwdGlvbjplLG5hbWU6dCxpbnRlcmZhY2VzOm4sZGlyZWN0aXZlczppLGZpZWxkczpyfSk9Pk8oIiIsZSxgCmApK3AoWyJ0eXBlIix0LE8oImltcGxlbWVudHMgIixwKG4sIiAmICIpKSxwKGksIiAiKSxlZShyKV0sIiAiKX0sRmllbGREZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LGFyZ3VtZW50czpuLHR5cGU6aSxkaXJlY3RpdmVzOnJ9KT0+TygiIixlLGAKYCkrdCsoT3Qobik/TyhgKApgLERlKHAobixgCmApKSxgCilgKTpPKCIoIixwKG4sIiwgIiksIikiKSkrIjogIitpK08oIiAiLHAociwiICIpKX0sSW5wdXRWYWx1ZURlZmluaXRpb246e2xlYXZlOih7ZGVzY3JpcHRpb246ZSxuYW1lOnQsdHlwZTpuLGRlZmF1bHRWYWx1ZTppLGRpcmVjdGl2ZXM6cn0pPT5PKCIiLGUsYApgKStwKFt0KyI6ICIrbixPKCI9ICIsaSkscChyLCIgIildLCIgIil9LEludGVyZmFjZVR5cGVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LGludGVyZmFjZXM6bixkaXJlY3RpdmVzOmksZmllbGRzOnJ9KT0+TygiIixlLGAKYCkrcChbImludGVyZmFjZSIsdCxPKCJpbXBsZW1lbnRzICIscChuLCIgJiAiKSkscChpLCIgIiksZWUocildLCIgIil9LFVuaW9uVHlwZURlZmluaXRpb246e2xlYXZlOih7ZGVzY3JpcHRpb246ZSxuYW1lOnQsZGlyZWN0aXZlczpuLHR5cGVzOml9KT0+TygiIixlLGAKYCkrcChbInVuaW9uIix0LHAobiwiICIpLE8oIj0gIixwKGksIiB8ICIpKV0sIiAiKX0sRW51bVR5cGVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LGRpcmVjdGl2ZXM6bix2YWx1ZXM6aX0pPT5PKCIiLGUsYApgKStwKFsiZW51bSIsdCxwKG4sIiAiKSxlZShpKV0sIiAiKX0sRW51bVZhbHVlRGVmaW5pdGlvbjp7bGVhdmU6KHtkZXNjcmlwdGlvbjplLG5hbWU6dCxkaXJlY3RpdmVzOm59KT0+TygiIixlLGAKYCkrcChbdCxwKG4sIiAiKV0sIiAiKX0sSW5wdXRPYmplY3RUeXBlRGVmaW5pdGlvbjp7bGVhdmU6KHtkZXNjcmlwdGlvbjplLG5hbWU6dCxkaXJlY3RpdmVzOm4sZmllbGRzOml9KT0+TygiIixlLGAKYCkrcChbImlucHV0Iix0LHAobiwiICIpLGVlKGkpXSwiICIpfSxEaXJlY3RpdmVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LGFyZ3VtZW50czpuLHJlcGVhdGFibGU6aSxsb2NhdGlvbnM6cn0pPT5PKCIiLGUsYApgKSsiZGlyZWN0aXZlIEAiK3QrKE90KG4pP08oYCgKYCxEZShwKG4sYApgKSksYAopYCk6TygiKCIscChuLCIsICIpLCIpIikpKyhpPyIgcmVwZWF0YWJsZSI6IiIpKyIgb24gIitwKHIsIiB8ICIpfSxTY2hlbWFFeHRlbnNpb246e2xlYXZlOih7ZGlyZWN0aXZlczplLG9wZXJhdGlvblR5cGVzOnR9KT0+cChbImV4dGVuZCBzY2hlbWEiLHAoZSwiICIpLGVlKHQpXSwiICIpfSxTY2FsYXJUeXBlRXh0ZW5zaW9uOntsZWF2ZTooe25hbWU6ZSxkaXJlY3RpdmVzOnR9KT0+cChbImV4dGVuZCBzY2FsYXIiLGUscCh0LCIgIildLCIgIil9LE9iamVjdFR5cGVFeHRlbnNpb246e2xlYXZlOih7bmFtZTplLGludGVyZmFjZXM6dCxkaXJlY3RpdmVzOm4sZmllbGRzOml9KT0+cChbImV4dGVuZCB0eXBlIixlLE8oImltcGxlbWVudHMgIixwKHQsIiAmICIpKSxwKG4sIiAiKSxlZShpKV0sIiAiKX0sSW50ZXJmYWNlVHlwZUV4dGVuc2lvbjp7bGVhdmU6KHtuYW1lOmUsaW50ZXJmYWNlczp0LGRpcmVjdGl2ZXM6bixmaWVsZHM6aX0pPT5wKFsiZXh0ZW5kIGludGVyZmFjZSIsZSxPKCJpbXBsZW1lbnRzICIscCh0LCIgJiAiKSkscChuLCIgIiksZWUoaSldLCIgIil9LFVuaW9uVHlwZUV4dGVuc2lvbjp7bGVhdmU6KHtuYW1lOmUsZGlyZWN0aXZlczp0LHR5cGVzOm59KT0+cChbImV4dGVuZCB1bmlvbiIsZSxwKHQsIiAiKSxPKCI9ICIscChuLCIgfCAiKSldLCIgIil9LEVudW1UeXBlRXh0ZW5zaW9uOntsZWF2ZTooe25hbWU6ZSxkaXJlY3RpdmVzOnQsdmFsdWVzOm59KT0+cChbImV4dGVuZCBlbnVtIixlLHAodCwiICIpLGVlKG4pXSwiICIpfSxJbnB1dE9iamVjdFR5cGVFeHRlbnNpb246e2xlYXZlOih7bmFtZTplLGRpcmVjdGl2ZXM6dCxmaWVsZHM6bn0pPT5wKFsiZXh0ZW5kIGlucHV0IixlLHAodCwiICIpLGVlKG4pXSwiICIpfX07ZnVuY3Rpb24gcChlLHQ9IiIpe3ZhciBuO3JldHVybihuPWU9PW51bGw/dm9pZCAwOmUuZmlsdGVyKGk9PmkpLmpvaW4odCkpIT09bnVsbCYmbiE9PXZvaWQgMD9uOiIifWZ1bmN0aW9uIGVlKGUpe3JldHVybiBPKGB7CmAsRGUocChlLGAKYCkpLGAKfWApfWZ1bmN0aW9uIE8oZSx0LG49IiIpe3JldHVybiB0IT1udWxsJiZ0IT09IiI/ZSt0K246IiJ9ZnVuY3Rpb24gRGUoZSl7cmV0dXJuIE8oIiAgIixlLnJlcGxhY2UoL1xuL2csYAogIGApKX1mdW5jdGlvbiBPdChlKXt2YXIgdDtyZXR1cm4odD1lPT1udWxsP3ZvaWQgMDplLnNvbWUobj0+bi5pbmNsdWRlcyhgCmApKSkhPT1udWxsJiZ0IT09dm9pZCAwP3Q6ITF9Y29uc3Qgd3Q9ZT0+e3ZhciBpLHI7bGV0IHQ7Y29uc3Qgbj1lLmRlZmluaXRpb25zLmZpbHRlcihzPT5zLmtpbmQ9PT0iT3BlcmF0aW9uRGVmaW5pdGlvbiIpO3JldHVybiBuLmxlbmd0aD09PTEmJih0PShyPShpPW5bMF0pPT1udWxsP3ZvaWQgMDppLm5hbWUpPT1udWxsP3ZvaWQgMDpyLnZhbHVlKSx0fSxKZT1lPT57aWYodHlwZW9mIGU9PSJzdHJpbmciKXtsZXQgbjt0cnl7Y29uc3QgaT1JdChlKTtuPXd0KGkpfWNhdGNoKGkpe31yZXR1cm57cXVlcnk6ZSxvcGVyYXRpb25OYW1lOm59fWNvbnN0IHQ9d3QoZSk7cmV0dXJue3F1ZXJ5OlVuKGUpLG9wZXJhdGlvbk5hbWU6dH19O2NsYXNzIGRlIGV4dGVuZHMgRXJyb3J7Y29uc3RydWN0b3IodCxuKXtjb25zdCBpPWAke2RlLmV4dHJhY3RNZXNzYWdlKHQpfTogJHtKU09OLnN0cmluZ2lmeSh7cmVzcG9uc2U6dCxyZXF1ZXN0Om59KX1gO3N1cGVyKGkpLE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLGRlLnByb3RvdHlwZSksdGhpcy5yZXNwb25zZT10LHRoaXMucmVxdWVzdD1uLHR5cGVvZiBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZT09ImZ1bmN0aW9uIiYmRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcyxkZSl9c3RhdGljIGV4dHJhY3RNZXNzYWdlKHQpe3ZhciBuLGkscjtyZXR1cm4ocj0oaT0obj10LmVycm9ycyk9PW51bGw/dm9pZCAwOm5bMF0pPT1udWxsP3ZvaWQgMDppLm1lc3NhZ2UpIT1udWxsP3I6YEdyYXBoUUwgRXJyb3IgKENvZGU6ICR7dC5zdGF0dXN9KWB9fXZhciBxbj10eXBlb2YgZ2xvYmFsVGhpcyE9InVuZGVmaW5lZCI/Z2xvYmFsVGhpczp0eXBlb2Ygd2luZG93IT0idW5kZWZpbmVkIj93aW5kb3c6dHlwZW9mIGdsb2JhbCE9InVuZGVmaW5lZCI/Z2xvYmFsOnR5cGVvZiBzZWxmIT0idW5kZWZpbmVkIj9zZWxmOnt9O2Z1bmN0aW9uIER0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGUmJk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLCJkZWZhdWx0Iik/ZS5kZWZhdWx0OmV9dmFyIFFlPXtleHBvcnRzOnt9fTsoZnVuY3Rpb24oZSx0KXt2YXIgbj10eXBlb2Ygc2VsZiE9InVuZGVmaW5lZCI/c2VsZjpxbixpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gcygpe3RoaXMuZmV0Y2g9ITEsdGhpcy5ET01FeGNlcHRpb249bi5ET01FeGNlcHRpb259cmV0dXJuIHMucHJvdG90eXBlPW4sbmV3IHN9KCk7KGZ1bmN0aW9uKHMpeyhmdW5jdGlvbihvKXt2YXIgYz17c2VhcmNoUGFyYW1zOiJVUkxTZWFyY2hQYXJhbXMiaW4gcyxpdGVyYWJsZToiU3ltYm9sImluIHMmJiJpdGVyYXRvciJpbiBTeW1ib2wsYmxvYjoiRmlsZVJlYWRlciJpbiBzJiYiQmxvYiJpbiBzJiZmdW5jdGlvbigpe3RyeXtyZXR1cm4gbmV3IEJsb2IsITB9Y2F0Y2goYSl7cmV0dXJuITF9fSgpLGZvcm1EYXRhOiJGb3JtRGF0YSJpbiBzLGFycmF5QnVmZmVyOiJBcnJheUJ1ZmZlciJpbiBzfTtmdW5jdGlvbiBmKGEpe3JldHVybiBhJiZEYXRhVmlldy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihhKX1pZihjLmFycmF5QnVmZmVyKXZhciBkPVsiW29iamVjdCBJbnQ4QXJyYXldIiwiW29iamVjdCBVaW50OEFycmF5XSIsIltvYmplY3QgVWludDhDbGFtcGVkQXJyYXldIiwiW29iamVjdCBJbnQxNkFycmF5XSIsIltvYmplY3QgVWludDE2QXJyYXldIiwiW29iamVjdCBJbnQzMkFycmF5XSIsIltvYmplY3QgVWludDMyQXJyYXldIiwiW29iamVjdCBGbG9hdDMyQXJyYXldIiwiW29iamVjdCBGbG9hdDY0QXJyYXldIl0sdT1BcnJheUJ1ZmZlci5pc1ZpZXd8fGZ1bmN0aW9uKGEpe3JldHVybiBhJiZkLmluZGV4T2YoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpKT4tMX07ZnVuY3Rpb24geShhKXtpZih0eXBlb2YgYSE9InN0cmluZyImJihhPVN0cmluZyhhKSksL1teYS16MC05XC0jJCUmJyorLl5fYHx+XS9pLnRlc3QoYSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBjaGFyYWN0ZXIgaW4gaGVhZGVyIGZpZWxkIG5hbWUiKTtyZXR1cm4gYS50b0xvd2VyQ2FzZSgpfWZ1bmN0aW9uIHYoYSl7cmV0dXJuIHR5cGVvZiBhIT0ic3RyaW5nIiYmKGE9U3RyaW5nKGEpKSxhfWZ1bmN0aW9uIGIoYSl7dmFyIGg9e25leHQ6ZnVuY3Rpb24oKXt2YXIgXz1hLnNoaWZ0KCk7cmV0dXJue2RvbmU6Xz09PXZvaWQgMCx2YWx1ZTpffX19O3JldHVybiBjLml0ZXJhYmxlJiYoaFtTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIGh9KSxofWZ1bmN0aW9uIG0oYSl7dGhpcy5tYXA9e30sYSBpbnN0YW5jZW9mIG0/YS5mb3JFYWNoKGZ1bmN0aW9uKGgsXyl7dGhpcy5hcHBlbmQoXyxoKX0sdGhpcyk6QXJyYXkuaXNBcnJheShhKT9hLmZvckVhY2goZnVuY3Rpb24oaCl7dGhpcy5hcHBlbmQoaFswXSxoWzFdKX0sdGhpcyk6YSYmT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYSkuZm9yRWFjaChmdW5jdGlvbihoKXt0aGlzLmFwcGVuZChoLGFbaF0pfSx0aGlzKX1tLnByb3RvdHlwZS5hcHBlbmQ9ZnVuY3Rpb24oYSxoKXthPXkoYSksaD12KGgpO3ZhciBfPXRoaXMubWFwW2FdO3RoaXMubWFwW2FdPV8/XysiLCAiK2g6aH0sbS5wcm90b3R5cGUuZGVsZXRlPWZ1bmN0aW9uKGEpe2RlbGV0ZSB0aGlzLm1hcFt5KGEpXX0sbS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGEpe3JldHVybiBhPXkoYSksdGhpcy5oYXMoYSk/dGhpcy5tYXBbYV06bnVsbH0sbS5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm1hcC5oYXNPd25Qcm9wZXJ0eSh5KGEpKX0sbS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGEsaCl7dGhpcy5tYXBbeShhKV09dihoKX0sbS5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbihhLGgpe2Zvcih2YXIgXyBpbiB0aGlzLm1hcCl0aGlzLm1hcC5oYXNPd25Qcm9wZXJ0eShfKSYmYS5jYWxsKGgsdGhpcy5tYXBbX10sXyx0aGlzKX0sbS5wcm90b3R5cGUua2V5cz1mdW5jdGlvbigpe3ZhciBhPVtdO3JldHVybiB0aGlzLmZvckVhY2goZnVuY3Rpb24oaCxfKXthLnB1c2goXyl9KSxiKGEpfSxtLnByb3RvdHlwZS52YWx1ZXM9ZnVuY3Rpb24oKXt2YXIgYT1bXTtyZXR1cm4gdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKGgpe2EucHVzaChoKX0pLGIoYSl9LG0ucHJvdG90eXBlLmVudHJpZXM9ZnVuY3Rpb24oKXt2YXIgYT1bXTtyZXR1cm4gdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKGgsXyl7YS5wdXNoKFtfLGhdKX0pLGIoYSl9LGMuaXRlcmFibGUmJihtLnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdPW0ucHJvdG90eXBlLmVudHJpZXMpO2Z1bmN0aW9uIE4oYSl7aWYoYS5ib2R5VXNlZClyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IFR5cGVFcnJvcigiQWxyZWFkeSByZWFkIikpO2EuYm9keVVzZWQ9ITB9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oaCxfKXthLm9ubG9hZD1mdW5jdGlvbigpe2goYS5yZXN1bHQpfSxhLm9uZXJyb3I9ZnVuY3Rpb24oKXtfKGEuZXJyb3IpfX0pfWZ1bmN0aW9uIEUoYSl7dmFyIGg9bmV3IEZpbGVSZWFkZXIsXz1nKGgpO3JldHVybiBoLnJlYWRBc0FycmF5QnVmZmVyKGEpLF99ZnVuY3Rpb24gQyhhKXt2YXIgaD1uZXcgRmlsZVJlYWRlcixfPWcoaCk7cmV0dXJuIGgucmVhZEFzVGV4dChhKSxffWZ1bmN0aW9uIHcoYSl7Zm9yKHZhciBoPW5ldyBVaW50OEFycmF5KGEpLF89bmV3IEFycmF5KGgubGVuZ3RoKSxBPTA7QTxoLmxlbmd0aDtBKyspX1tBXT1TdHJpbmcuZnJvbUNoYXJDb2RlKGhbQV0pO3JldHVybiBfLmpvaW4oIiIpfWZ1bmN0aW9uIFIoYSl7aWYoYS5zbGljZSlyZXR1cm4gYS5zbGljZSgwKTt2YXIgaD1uZXcgVWludDhBcnJheShhLmJ5dGVMZW5ndGgpO3JldHVybiBoLnNldChuZXcgVWludDhBcnJheShhKSksaC5idWZmZXJ9ZnVuY3Rpb24gJCgpe3JldHVybiB0aGlzLmJvZHlVc2VkPSExLHRoaXMuX2luaXRCb2R5PWZ1bmN0aW9uKGEpe3RoaXMuX2JvZHlJbml0PWEsYT90eXBlb2YgYT09InN0cmluZyI/dGhpcy5fYm9keVRleHQ9YTpjLmJsb2ImJkJsb2IucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYSk/dGhpcy5fYm9keUJsb2I9YTpjLmZvcm1EYXRhJiZGb3JtRGF0YS5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihhKT90aGlzLl9ib2R5Rm9ybURhdGE9YTpjLnNlYXJjaFBhcmFtcyYmVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGEpP3RoaXMuX2JvZHlUZXh0PWEudG9TdHJpbmcoKTpjLmFycmF5QnVmZmVyJiZjLmJsb2ImJmYoYSk/KHRoaXMuX2JvZHlBcnJheUJ1ZmZlcj1SKGEuYnVmZmVyKSx0aGlzLl9ib2R5SW5pdD1uZXcgQmxvYihbdGhpcy5fYm9keUFycmF5QnVmZmVyXSkpOmMuYXJyYXlCdWZmZXImJihBcnJheUJ1ZmZlci5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihhKXx8dShhKSk/dGhpcy5fYm9keUFycmF5QnVmZmVyPVIoYSk6dGhpcy5fYm9keVRleHQ9YT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSk6dGhpcy5fYm9keVRleHQ9IiIsdGhpcy5oZWFkZXJzLmdldCgiY29udGVudC10eXBlIil8fCh0eXBlb2YgYT09InN0cmluZyI/dGhpcy5oZWFkZXJzLnNldCgiY29udGVudC10eXBlIiwidGV4dC9wbGFpbjtjaGFyc2V0PVVURi04Iik6dGhpcy5fYm9keUJsb2ImJnRoaXMuX2JvZHlCbG9iLnR5cGU/dGhpcy5oZWFkZXJzLnNldCgiY29udGVudC10eXBlIix0aGlzLl9ib2R5QmxvYi50eXBlKTpjLnNlYXJjaFBhcmFtcyYmVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGEpJiZ0aGlzLmhlYWRlcnMuc2V0KCJjb250ZW50LXR5cGUiLCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD1VVEYtOCIpKX0sYy5ibG9iJiYodGhpcy5ibG9iPWZ1bmN0aW9uKCl7dmFyIGE9Tih0aGlzKTtpZihhKXJldHVybiBhO2lmKHRoaXMuX2JvZHlCbG9iKXJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keUJsb2IpO2lmKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcilyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBCbG9iKFt0aGlzLl9ib2R5QXJyYXlCdWZmZXJdKSk7aWYodGhpcy5fYm9keUZvcm1EYXRhKXRocm93IG5ldyBFcnJvcigiY291bGQgbm90IHJlYWQgRm9ybURhdGEgYm9keSBhcyBibG9iIik7cmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQmxvYihbdGhpcy5fYm9keVRleHRdKSl9LHRoaXMuYXJyYXlCdWZmZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYm9keUFycmF5QnVmZmVyP04odGhpcyl8fFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpOnRoaXMuYmxvYigpLnRoZW4oRSl9KSx0aGlzLnRleHQ9ZnVuY3Rpb24oKXt2YXIgYT1OKHRoaXMpO2lmKGEpcmV0dXJuIGE7aWYodGhpcy5fYm9keUJsb2IpcmV0dXJuIEModGhpcy5fYm9keUJsb2IpO2lmKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcilyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHcodGhpcy5fYm9keUFycmF5QnVmZmVyKSk7aWYodGhpcy5fYm9keUZvcm1EYXRhKXRocm93IG5ldyBFcnJvcigiY291bGQgbm90IHJlYWQgRm9ybURhdGEgYm9keSBhcyB0ZXh0Iik7cmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5VGV4dCl9LGMuZm9ybURhdGEmJih0aGlzLmZvcm1EYXRhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oUyl9KSx0aGlzLmpzb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0KCkudGhlbihKU09OLnBhcnNlKX0sdGhpc312YXIgcT1bIkRFTEVURSIsIkdFVCIsIkhFQUQiLCJPUFRJT05TIiwiUE9TVCIsIlBVVCJdO2Z1bmN0aW9uIEIoYSl7dmFyIGg9YS50b1VwcGVyQ2FzZSgpO3JldHVybiBxLmluZGV4T2YoaCk+LTE/aDphfWZ1bmN0aW9uIEkoYSxoKXtoPWh8fHt9O3ZhciBfPWguYm9keTtpZihhIGluc3RhbmNlb2YgSSl7aWYoYS5ib2R5VXNlZCl0aHJvdyBuZXcgVHlwZUVycm9yKCJBbHJlYWR5IHJlYWQiKTt0aGlzLnVybD1hLnVybCx0aGlzLmNyZWRlbnRpYWxzPWEuY3JlZGVudGlhbHMsaC5oZWFkZXJzfHwodGhpcy5oZWFkZXJzPW5ldyBtKGEuaGVhZGVycykpLHRoaXMubWV0aG9kPWEubWV0aG9kLHRoaXMubW9kZT1hLm1vZGUsdGhpcy5zaWduYWw9YS5zaWduYWwsIV8mJmEuX2JvZHlJbml0IT1udWxsJiYoXz1hLl9ib2R5SW5pdCxhLmJvZHlVc2VkPSEwKX1lbHNlIHRoaXMudXJsPVN0cmluZyhhKTtpZih0aGlzLmNyZWRlbnRpYWxzPWguY3JlZGVudGlhbHN8fHRoaXMuY3JlZGVudGlhbHN8fCJzYW1lLW9yaWdpbiIsKGguaGVhZGVyc3x8IXRoaXMuaGVhZGVycykmJih0aGlzLmhlYWRlcnM9bmV3IG0oaC5oZWFkZXJzKSksdGhpcy5tZXRob2Q9QihoLm1ldGhvZHx8dGhpcy5tZXRob2R8fCJHRVQiKSx0aGlzLm1vZGU9aC5tb2RlfHx0aGlzLm1vZGV8fG51bGwsdGhpcy5zaWduYWw9aC5zaWduYWx8fHRoaXMuc2lnbmFsLHRoaXMucmVmZXJyZXI9bnVsbCwodGhpcy5tZXRob2Q9PT0iR0VUInx8dGhpcy5tZXRob2Q9PT0iSEVBRCIpJiZfKXRocm93IG5ldyBUeXBlRXJyb3IoIkJvZHkgbm90IGFsbG93ZWQgZm9yIEdFVCBvciBIRUFEIHJlcXVlc3RzIik7dGhpcy5faW5pdEJvZHkoXyl9SS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEkodGhpcyx7Ym9keTp0aGlzLl9ib2R5SW5pdH0pfTtmdW5jdGlvbiBTKGEpe3ZhciBoPW5ldyBGb3JtRGF0YTtyZXR1cm4gYS50cmltKCkuc3BsaXQoIiYiKS5mb3JFYWNoKGZ1bmN0aW9uKF8pe2lmKF8pe3ZhciBBPV8uc3BsaXQoIj0iKSxrPUEuc2hpZnQoKS5yZXBsYWNlKC9cKy9nLCIgIikseD1BLmpvaW4oIj0iKS5yZXBsYWNlKC9cKy9nLCIgIik7aC5hcHBlbmQoZGVjb2RlVVJJQ29tcG9uZW50KGspLGRlY29kZVVSSUNvbXBvbmVudCh4KSl9fSksaH1mdW5jdGlvbiBqKGEpe3ZhciBoPW5ldyBtLF89YS5yZXBsYWNlKC9ccj9cbltcdCBdKy9nLCIgIik7cmV0dXJuIF8uc3BsaXQoL1xyP1xuLykuZm9yRWFjaChmdW5jdGlvbihBKXt2YXIgaz1BLnNwbGl0KCI6IikseD1rLnNoaWZ0KCkudHJpbSgpO2lmKHgpe3ZhciBjZT1rLmpvaW4oIjoiKS50cmltKCk7aC5hcHBlbmQoeCxjZSl9fSksaH0kLmNhbGwoSS5wcm90b3R5cGUpO2Z1bmN0aW9uIFUoYSxoKXtofHwoaD17fSksdGhpcy50eXBlPSJkZWZhdWx0Iix0aGlzLnN0YXR1cz1oLnN0YXR1cz09PXZvaWQgMD8yMDA6aC5zdGF0dXMsdGhpcy5vaz10aGlzLnN0YXR1cz49MjAwJiZ0aGlzLnN0YXR1czwzMDAsdGhpcy5zdGF0dXNUZXh0PSJzdGF0dXNUZXh0ImluIGg/aC5zdGF0dXNUZXh0OiJPSyIsdGhpcy5oZWFkZXJzPW5ldyBtKGguaGVhZGVycyksdGhpcy51cmw9aC51cmx8fCIiLHRoaXMuX2luaXRCb2R5KGEpfSQuY2FsbChVLnByb3RvdHlwZSksVS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFUodGhpcy5fYm9keUluaXQse3N0YXR1czp0aGlzLnN0YXR1cyxzdGF0dXNUZXh0OnRoaXMuc3RhdHVzVGV4dCxoZWFkZXJzOm5ldyBtKHRoaXMuaGVhZGVycyksdXJsOnRoaXMudXJsfSl9LFUuZXJyb3I9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgVShudWxsLHtzdGF0dXM6MCxzdGF0dXNUZXh0OiIifSk7cmV0dXJuIGEudHlwZT0iZXJyb3IiLGF9O3ZhciB6PVszMDEsMzAyLDMwMywzMDcsMzA4XTtVLnJlZGlyZWN0PWZ1bmN0aW9uKGEsaCl7aWYoei5pbmRleE9mKGgpPT09LTEpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgc3RhdHVzIGNvZGUiKTtyZXR1cm4gbmV3IFUobnVsbCx7c3RhdHVzOmgsaGVhZGVyczp7bG9jYXRpb246YX19KX0sby5ET01FeGNlcHRpb249cy5ET01FeGNlcHRpb247dHJ5e25ldyBvLkRPTUV4Y2VwdGlvbn1jYXRjaChhKXtvLkRPTUV4Y2VwdGlvbj1mdW5jdGlvbihoLF8pe3RoaXMubWVzc2FnZT1oLHRoaXMubmFtZT1fO3ZhciBBPUVycm9yKGgpO3RoaXMuc3RhY2s9QS5zdGFja30sby5ET01FeGNlcHRpb24ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKSxvLkRPTUV4Y2VwdGlvbi5wcm90b3R5cGUuY29uc3RydWN0b3I9by5ET01FeGNlcHRpb259ZnVuY3Rpb24gSyhhLGgpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihfLEEpe3ZhciBrPW5ldyBJKGEsaCk7aWYoay5zaWduYWwmJmsuc2lnbmFsLmFib3J0ZWQpcmV0dXJuIEEobmV3IG8uRE9NRXhjZXB0aW9uKCJBYm9ydGVkIiwiQWJvcnRFcnJvciIpKTt2YXIgeD1uZXcgWE1MSHR0cFJlcXVlc3Q7ZnVuY3Rpb24gY2UoKXt4LmFib3J0KCl9eC5vbmxvYWQ9ZnVuY3Rpb24oKXt2YXIgSD17c3RhdHVzOnguc3RhdHVzLHN0YXR1c1RleHQ6eC5zdGF0dXNUZXh0LGhlYWRlcnM6aih4LmdldEFsbFJlc3BvbnNlSGVhZGVycygpfHwiIil9O0gudXJsPSJyZXNwb25zZVVSTCJpbiB4P3gucmVzcG9uc2VVUkw6SC5oZWFkZXJzLmdldCgiWC1SZXF1ZXN0LVVSTCIpO3ZhciBzZT0icmVzcG9uc2UiaW4geD94LnJlc3BvbnNlOngucmVzcG9uc2VUZXh0O18obmV3IFUoc2UsSCkpfSx4Lm9uZXJyb3I9ZnVuY3Rpb24oKXtBKG5ldyBUeXBlRXJyb3IoIk5ldHdvcmsgcmVxdWVzdCBmYWlsZWQiKSl9LHgub250aW1lb3V0PWZ1bmN0aW9uKCl7QShuZXcgVHlwZUVycm9yKCJOZXR3b3JrIHJlcXVlc3QgZmFpbGVkIikpfSx4Lm9uYWJvcnQ9ZnVuY3Rpb24oKXtBKG5ldyBvLkRPTUV4Y2VwdGlvbigiQWJvcnRlZCIsIkFib3J0RXJyb3IiKSl9LHgub3BlbihrLm1ldGhvZCxrLnVybCwhMCksay5jcmVkZW50aWFscz09PSJpbmNsdWRlIj94LndpdGhDcmVkZW50aWFscz0hMDprLmNyZWRlbnRpYWxzPT09Im9taXQiJiYoeC53aXRoQ3JlZGVudGlhbHM9ITEpLCJyZXNwb25zZVR5cGUiaW4geCYmYy5ibG9iJiYoeC5yZXNwb25zZVR5cGU9ImJsb2IiKSxrLmhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbihILHNlKXt4LnNldFJlcXVlc3RIZWFkZXIoc2UsSCl9KSxrLnNpZ25hbCYmKGsuc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoImFib3J0IixjZSkseC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXt4LnJlYWR5U3RhdGU9PT00JiZrLnNpZ25hbC5yZW1vdmVFdmVudExpc3RlbmVyKCJhYm9ydCIsY2UpfSkseC5zZW5kKHR5cGVvZiBrLl9ib2R5SW5pdD09InVuZGVmaW5lZCI/bnVsbDprLl9ib2R5SW5pdCl9KX1yZXR1cm4gSy5wb2x5ZmlsbD0hMCxzLmZldGNofHwocy5mZXRjaD1LLHMuSGVhZGVycz1tLHMuUmVxdWVzdD1JLHMuUmVzcG9uc2U9VSksby5IZWFkZXJzPW0sby5SZXF1ZXN0PUksby5SZXNwb25zZT1VLG8uZmV0Y2g9SyxPYmplY3QuZGVmaW5lUHJvcGVydHkobywiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksb30pKHt9KX0pKGkpLGkuZmV0Y2gucG9ueWZpbGw9ITAsZGVsZXRlIGkuZmV0Y2gucG9seWZpbGw7dmFyIHI9aTt0PXIuZmV0Y2gsdC5kZWZhdWx0PXIuZmV0Y2gsdC5mZXRjaD1yLmZldGNoLHQuSGVhZGVycz1yLkhlYWRlcnMsdC5SZXF1ZXN0PXIuUmVxdWVzdCx0LlJlc3BvbnNlPXIuUmVzcG9uc2UsZS5leHBvcnRzPXR9KShRZSxRZS5leHBvcnRzKTt2YXIgQ2U9UWUuZXhwb3J0cyxrZT1EdChDZSksR249Rih7X19wcm90b19fOm51bGwsZGVmYXVsdDprZX0sW0NlXSk7Y29uc3QgcGU9ZT0+e2xldCB0PXt9O3JldHVybiBlJiYodHlwZW9mIEhlYWRlcnMhPSJ1bmRlZmluZWQiJiZlIGluc3RhbmNlb2YgSGVhZGVyc3x8R24mJkNlLkhlYWRlcnMmJmUgaW5zdGFuY2VvZiBDZS5IZWFkZXJzP3Q9WChlKTpBcnJheS5pc0FycmF5KGUpP2UuZm9yRWFjaCgoW24saV0pPT57biYmaSE9PXZvaWQgMCYmKHRbbl09aSl9KTp0PWUpLHR9LEN0PWU9PmUucmVwbGFjZSgvKFtccyxdfCNbXlxuXHJdKykrL2csIiAiKS50cmltKCksem49ZT0+e2lmKCFBcnJheS5pc0FycmF5KGUucXVlcnkpKXtjb25zdCBpPWUscj1bYHF1ZXJ5PSR7ZW5jb2RlVVJJQ29tcG9uZW50KEN0KGkucXVlcnkpKX1gXTtyZXR1cm4gZS52YXJpYWJsZXMmJnIucHVzaChgdmFyaWFibGVzPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGkuanNvblNlcmlhbGl6ZXIuc3RyaW5naWZ5KGkudmFyaWFibGVzKSl9YCksaS5vcGVyYXRpb25OYW1lJiZyLnB1c2goYG9wZXJhdGlvbk5hbWU9JHtlbmNvZGVVUklDb21wb25lbnQoaS5vcGVyYXRpb25OYW1lKX1gKSxyLmpvaW4oIiYiKX1pZih0eXBlb2YgZS52YXJpYWJsZXMhPSJ1bmRlZmluZWQiJiYhQXJyYXkuaXNBcnJheShlLnZhcmlhYmxlcykpdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgY3JlYXRlIHF1ZXJ5IHdpdGggZ2l2ZW4gdmFyaWFibGUgdHlwZSwgYXJyYXkgZXhwZWN0ZWQiKTtjb25zdCB0PWUsbj1lLnF1ZXJ5LnJlZHVjZSgoaSxyLHMpPT4oaS5wdXNoKHtxdWVyeTpDdChyKSx2YXJpYWJsZXM6dC52YXJpYWJsZXM/dC5qc29uU2VyaWFsaXplci5zdHJpbmdpZnkodC52YXJpYWJsZXNbc10pOnZvaWQgMH0pLGkpLFtdKTtyZXR1cm5gcXVlcnk9JHtlbmNvZGVVUklDb21wb25lbnQodC5qc29uU2VyaWFsaXplci5zdHJpbmdpZnkobikpfWB9LEhuPWU9PnQ9PlEodGhpcyxudWxsLGZ1bmN0aW9uKigpe3ZhciBOO2NvbnN0e3VybDpuLHF1ZXJ5OmksdmFyaWFibGVzOnIsb3BlcmF0aW9uTmFtZTpzLGZldGNoOm8sZmV0Y2hPcHRpb25zOmMsbWlkZGxld2FyZTpmfT10LGQ9RCh7fSx0LmhlYWRlcnMpO2xldCB1PSIiLHk7ZT09PSJQT1NUIj8oeT1KbihpLHIscyxjLmpzb25TZXJpYWxpemVyKSx0eXBlb2YgeT09InN0cmluZyImJihkWyJDb250ZW50LVR5cGUiXT0iYXBwbGljYXRpb24vanNvbiIpKTp1PXpuKHtxdWVyeTppLHZhcmlhYmxlczpyLG9wZXJhdGlvbk5hbWU6cyxqc29uU2VyaWFsaXplcjooTj1jLmpzb25TZXJpYWxpemVyKSE9bnVsbD9OOlB9KTtjb25zdCB2PUQoe21ldGhvZDplLGhlYWRlcnM6ZCxib2R5Onl9LGMpO2xldCBiPW4sbT12O2lmKGYpe2NvbnN0IGc9eWllbGQgUHJvbWlzZS5yZXNvbHZlKGYoQmUoRCh7fSx2KSx7dXJsOm4sb3BlcmF0aW9uTmFtZTpzLHZhcmlhYmxlczpyfSkpKSx7dXJsOkN9PWcsdz12ZShnLFsidXJsIl0pO2I9QyxtPXd9cmV0dXJuIHUmJihiPWAke2J9PyR7dX1gKSx5aWVsZCBvKGIsbSl9KTtjbGFzcyBZbntjb25zdHJ1Y3Rvcih0LG49e30pe3RoaXMudXJsPXQsdGhpcy5yZXF1ZXN0Q29uZmlnPW4sdGhpcy5yYXdSZXF1ZXN0PSguLi5pKT0+USh0aGlzLG51bGwsZnVuY3Rpb24qKCl7Y29uc3RbcixzLG9dPWksYz1VZShyLHMsbyksZz10aGlzLnJlcXVlc3RDb25maWcse2hlYWRlcnM6ZixmZXRjaDpkPWtlLG1ldGhvZDp1PSJQT1NUIixyZXF1ZXN0TWlkZGxld2FyZTp5LHJlc3BvbnNlTWlkZGxld2FyZTp2fT1nLGI9dmUoZyxbImhlYWRlcnMiLCJmZXRjaCIsIm1ldGhvZCIsInJlcXVlc3RNaWRkbGV3YXJlIiwicmVzcG9uc2VNaWRkbGV3YXJlIl0pLHt1cmw6bX09dGhpcztjLnNpZ25hbCE9PXZvaWQgMCYmKGIuc2lnbmFsPWMuc2lnbmFsKTtjb25zdHtvcGVyYXRpb25OYW1lOk59PUplKGMucXVlcnkpO3JldHVybiBYZSh7dXJsOm0scXVlcnk6Yy5xdWVyeSx2YXJpYWJsZXM6Yy52YXJpYWJsZXMsaGVhZGVyczpEKEQoe30scGUoV2UoZikpKSxwZShjLnJlcXVlc3RIZWFkZXJzKSksb3BlcmF0aW9uTmFtZTpOLGZldGNoOmQsbWV0aG9kOnUsZmV0Y2hPcHRpb25zOmIsbWlkZGxld2FyZTp5fSkudGhlbihFPT4odiYmdihFKSxFKSkuY2F0Y2goRT0+e3Rocm93IHYmJnYoRSksRX0pfSl9cmVxdWVzdCh0LC4uLm4pe3JldHVybiBRKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtjb25zdFtpLHJdPW4scz1JZSh0LGksciksTj10aGlzLnJlcXVlc3RDb25maWcse2hlYWRlcnM6byxmZXRjaDpjPWtlLG1ldGhvZDpmPSJQT1NUIixyZXF1ZXN0TWlkZGxld2FyZTpkLHJlc3BvbnNlTWlkZGxld2FyZTp1fT1OLHk9dmUoTixbImhlYWRlcnMiLCJmZXRjaCIsIm1ldGhvZCIsInJlcXVlc3RNaWRkbGV3YXJlIiwicmVzcG9uc2VNaWRkbGV3YXJlIl0pLHt1cmw6dn09dGhpcztzLnNpZ25hbCE9PXZvaWQgMCYmKHkuc2lnbmFsPXMuc2lnbmFsKTtjb25zdHtxdWVyeTpiLG9wZXJhdGlvbk5hbWU6bX09SmUocy5kb2N1bWVudCk7cmV0dXJuIFhlKHt1cmw6dixxdWVyeTpiLHZhcmlhYmxlczpzLnZhcmlhYmxlcyxoZWFkZXJzOkQoRCh7fSxwZShXZShvKSkpLHBlKHMucmVxdWVzdEhlYWRlcnMpKSxvcGVyYXRpb25OYW1lOm0sZmV0Y2g6YyxtZXRob2Q6ZixmZXRjaE9wdGlvbnM6eSxtaWRkbGV3YXJlOmR9KS50aGVuKGc9Pih1JiZ1KGcpLGcuZGF0YSkpLmNhdGNoKGc9Pnt0aHJvdyB1JiZ1KGcpLGd9KX0pfWJhdGNoUmVxdWVzdHModCxuKXt2YXIgZDtjb25zdCBpPVZlKHQsbiksZj10aGlzLnJlcXVlc3RDb25maWcse2hlYWRlcnM6cn09ZixzPXZlKGYsWyJoZWFkZXJzIl0pO2kuc2lnbmFsIT09dm9pZCAwJiYocy5zaWduYWw9aS5zaWduYWwpO2NvbnN0IG89aS5kb2N1bWVudHMubWFwKCh7ZG9jdW1lbnQ6dX0pPT5KZSh1KS5xdWVyeSksYz1pLmRvY3VtZW50cy5tYXAoKHt2YXJpYWJsZXM6dX0pPT51KTtyZXR1cm4gWGUoe3VybDp0aGlzLnVybCxxdWVyeTpvLHZhcmlhYmxlczpjLGhlYWRlcnM6RChEKHt9LHBlKFdlKHIpKSkscGUoaS5yZXF1ZXN0SGVhZGVycykpLG9wZXJhdGlvbk5hbWU6dm9pZCAwLGZldGNoOihkPXRoaXMucmVxdWVzdENvbmZpZy5mZXRjaCkhPW51bGw/ZDprZSxtZXRob2Q6dGhpcy5yZXF1ZXN0Q29uZmlnLm1ldGhvZHx8IlBPU1QiLGZldGNoT3B0aW9uczpzLG1pZGRsZXdhcmU6dGhpcy5yZXF1ZXN0Q29uZmlnLnJlcXVlc3RNaWRkbGV3YXJlfSkudGhlbih1PT4odGhpcy5yZXF1ZXN0Q29uZmlnLnJlc3BvbnNlTWlkZGxld2FyZSYmdGhpcy5yZXF1ZXN0Q29uZmlnLnJlc3BvbnNlTWlkZGxld2FyZSh1KSx1LmRhdGEpKS5jYXRjaCh1PT57dGhyb3cgdGhpcy5yZXF1ZXN0Q29uZmlnLnJlc3BvbnNlTWlkZGxld2FyZSYmdGhpcy5yZXF1ZXN0Q29uZmlnLnJlc3BvbnNlTWlkZGxld2FyZSh1KSx1fSl9c2V0SGVhZGVycyh0KXtyZXR1cm4gdGhpcy5yZXF1ZXN0Q29uZmlnLmhlYWRlcnM9dCx0aGlzfXNldEhlYWRlcih0LG4pe2NvbnN0e2hlYWRlcnM6aX09dGhpcy5yZXF1ZXN0Q29uZmlnO3JldHVybiBpP2lbdF09bjp0aGlzLnJlcXVlc3RDb25maWcuaGVhZGVycz17W3RdOm59LHRoaXN9c2V0RW5kcG9pbnQodCl7cmV0dXJuIHRoaXMudXJsPXQsdGhpc319Y29uc3QgWGU9ZT0+USh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIHUseTtjb25zdHtxdWVyeTp0LHZhcmlhYmxlczpuLGZldGNoT3B0aW9uczppfT1lLHI9SG4oTSgodT1lLm1ldGhvZCkhPW51bGw/dToicG9zdCIpKSxzPUFycmF5LmlzQXJyYXkoZS5xdWVyeSksbz15aWVsZCByKGUpLGM9eWllbGQgUW4obywoeT1pLmpzb25TZXJpYWxpemVyKSE9bnVsbD95OlApLGY9QXJyYXkuaXNBcnJheShjKT8hYy5zb21lKCh7ZGF0YTpifSk9PiFiKTohIWMuZGF0YSxkPUFycmF5LmlzQXJyYXkoYyl8fCFjLmVycm9yc3x8QXJyYXkuaXNBcnJheShjLmVycm9ycykmJiFjLmVycm9ycy5sZW5ndGh8fGkuZXJyb3JQb2xpY3k9PT0iYWxsInx8aS5lcnJvclBvbGljeT09PSJpZ25vcmUiO2lmKG8ub2smJmQmJmYpe2NvbnN0IHY9KEFycmF5LmlzQXJyYXkoYyksYykse2Vycm9yczpifT12LG09dmUodixbImVycm9ycyJdKSxOPWkuZXJyb3JQb2xpY3k9PT0iaWdub3JlIj9tOmM7cmV0dXJuIEJlKEQoe30scz97ZGF0YTpOfTpOKSx7aGVhZGVyczpvLmhlYWRlcnMsc3RhdHVzOm8uc3RhdHVzfSl9ZWxzZXtjb25zdCBiPXR5cGVvZiBjPT0ic3RyaW5nIj97ZXJyb3I6Y306Yzt0aHJvdyBuZXcgZGUoQmUoRCh7fSxiKSx7c3RhdHVzOm8uc3RhdHVzLGhlYWRlcnM6by5oZWFkZXJzfSkse3F1ZXJ5OnQsdmFyaWFibGVzOm59KX19KSxKbj0oZSx0LG4saSk9Pntjb25zdCByPWkhPW51bGw/aTpQO2lmKCFBcnJheS5pc0FycmF5KGUpKXJldHVybiByLnN0cmluZ2lmeSh7cXVlcnk6ZSx2YXJpYWJsZXM6dCxvcGVyYXRpb25OYW1lOm59KTtpZih0eXBlb2YgdCE9InVuZGVmaW5lZCImJiFBcnJheS5pc0FycmF5KHQpKXRocm93IG5ldyBFcnJvcigiQ2Fubm90IGNyZWF0ZSByZXF1ZXN0IGJvZHkgd2l0aCBnaXZlbiB2YXJpYWJsZSB0eXBlLCBhcnJheSBleHBlY3RlZCIpO2NvbnN0IHM9ZS5yZWR1Y2UoKG8sYyxmKT0+KG8ucHVzaCh7cXVlcnk6Yyx2YXJpYWJsZXM6dD90W2ZdOnZvaWQgMH0pLG8pLFtdKTtyZXR1cm4gci5zdHJpbmdpZnkocyl9LFFuPShlLHQpPT5RKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtsZXQgbjtyZXR1cm4gZS5oZWFkZXJzLmZvckVhY2goKGkscik9PntyLnRvTG93ZXJDYXNlKCk9PT0iY29udGVudC10eXBlIiYmKG49aSl9KSxuJiYobi50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgoImFwcGxpY2F0aW9uL2pzb24iKXx8bi50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgoImFwcGxpY2F0aW9uL2dyYXBocWwranNvbiIpfHxuLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aCgiYXBwbGljYXRpb24vZ3JhcGhxbC1yZXNwb25zZStqc29uIikpP3QucGFyc2UoeWllbGQgZS50ZXh0KCkpOmUudGV4dCgpfSksV2U9ZT0+dHlwZW9mIGU9PSJmdW5jdGlvbiI/ZSgpOmU7dmFyIFplPXtleHBvcnRzOnt9fTsoZnVuY3Rpb24oZSx0KXt0PWUuZXhwb3J0cz1uLHQuZ2V0U2VyaWFsaXplPWk7ZnVuY3Rpb24gbihyLHMsbyxjKXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkocixpKHMsYyksbyl9ZnVuY3Rpb24gaShyLHMpe3ZhciBvPVtdLGM9W107cmV0dXJuIHM9PW51bGwmJihzPWZ1bmN0aW9uKGYsZCl7cmV0dXJuIG9bMF09PT1kPyJbQ2lyY3VsYXIgfl0iOiJbQ2lyY3VsYXIgfi4iK2Muc2xpY2UoMCxvLmluZGV4T2YoZCkpLmpvaW4oIi4iKSsiXSJ9KSxmdW5jdGlvbihmLGQpe2lmKG8ubGVuZ3RoPjApe3ZhciB1PW8uaW5kZXhPZih0aGlzKTt+dT9vLnNwbGljZSh1KzEpOm8ucHVzaCh0aGlzKSx+dT9jLnNwbGljZSh1LDEvMCxmKTpjLnB1c2goZiksfm8uaW5kZXhPZihkKSYmKGQ9cy5jYWxsKHRoaXMsZixkKSl9ZWxzZSBvLnB1c2goZCk7cmV0dXJuIHI9PW51bGw/ZDpyLmNhbGwodGhpcyxmLGQpfX19KShaZSxaZS5leHBvcnRzKTt2YXIgWG49WmUuZXhwb3J0cyxtZT1EdChYbik7Y29uc3Qga3Q9MWUzKjE1O3ZhciBSZT1mdW5jdGlvbigpe3JldHVybiBSZT1PYmplY3QuYXNzaWdufHxmdW5jdGlvbih0KXtmb3IodmFyIG4saT0xLHI9YXJndW1lbnRzLmxlbmd0aDtpPHI7aSsrKXtuPWFyZ3VtZW50c1tpXTtmb3IodmFyIHMgaW4gbilPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobixzKSYmKHRbc109bltzXSl9cmV0dXJuIHR9LFJlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07dHlwZW9mIFN1cHByZXNzZWRFcnJvcj09ImZ1bmN0aW9uIiYmU3VwcHJlc3NlZEVycm9yO3ZhciBQZT1uZXcgTWFwLEtlPW5ldyBNYXAsUnQ9ITAsTGU9ITE7ZnVuY3Rpb24gUHQoZSl7cmV0dXJuIGUucmVwbGFjZSgvW1xzLF0rL2csIiAiKS50cmltKCl9ZnVuY3Rpb24gV24oZSl7cmV0dXJuIFB0KGUuc291cmNlLmJvZHkuc3Vic3RyaW5nKGUuc3RhcnQsZS5lbmQpKX1mdW5jdGlvbiBabihlKXt2YXIgdD1uZXcgU2V0LG49W107cmV0dXJuIGUuZGVmaW5pdGlvbnMuZm9yRWFjaChmdW5jdGlvbihpKXtpZihpLmtpbmQ9PT0iRnJhZ21lbnREZWZpbml0aW9uIil7dmFyIHI9aS5uYW1lLnZhbHVlLHM9V24oaS5sb2MpLG89S2UuZ2V0KHIpO28mJiFvLmhhcyhzKT9SdCYmY29uc29sZS53YXJuKCJXYXJuaW5nOiBmcmFnbWVudCB3aXRoIG5hbWUgIityK2AgYWxyZWFkeSBleGlzdHMuCmdyYXBocWwtdGFnIGVuZm9yY2VzIGFsbCBmcmFnbWVudCBuYW1lcyBhY3Jvc3MgeW91ciBhcHBsaWNhdGlvbiB0byBiZSB1bmlxdWU7IHJlYWQgbW9yZSBhYm91dAp0aGlzIGluIHRoZSBkb2NzOiBodHRwOi8vZGV2LmFwb2xsb2RhdGEuY29tL2NvcmUvZnJhZ21lbnRzLmh0bWwjdW5pcXVlLW5hbWVzYCk6b3x8S2Uuc2V0KHIsbz1uZXcgU2V0KSxvLmFkZChzKSx0LmhhcyhzKXx8KHQuYWRkKHMpLG4ucHVzaChpKSl9ZWxzZSBuLnB1c2goaSl9KSxSZShSZSh7fSxlKSx7ZGVmaW5pdGlvbnM6bn0pfWZ1bmN0aW9uIEtuKGUpe3ZhciB0PW5ldyBTZXQoZS5kZWZpbml0aW9ucyk7dC5mb3JFYWNoKGZ1bmN0aW9uKGkpe2kubG9jJiZkZWxldGUgaS5sb2MsT2JqZWN0LmtleXMoaSkuZm9yRWFjaChmdW5jdGlvbihyKXt2YXIgcz1pW3JdO3MmJnR5cGVvZiBzPT0ib2JqZWN0IiYmdC5hZGQocyl9KX0pO3ZhciBuPWUubG9jO3JldHVybiBuJiYoZGVsZXRlIG4uc3RhcnRUb2tlbixkZWxldGUgbi5lbmRUb2tlbiksZX1mdW5jdGlvbiBlcihlKXt2YXIgdD1QdChlKTtpZighUGUuaGFzKHQpKXt2YXIgbj1JdChlLHtleHBlcmltZW50YWxGcmFnbWVudFZhcmlhYmxlczpMZSxhbGxvd0xlZ2FjeUZyYWdtZW50VmFyaWFibGVzOkxlfSk7aWYoIW58fG4ua2luZCE9PSJEb2N1bWVudCIpdGhyb3cgbmV3IEVycm9yKCJOb3QgYSB2YWxpZCBHcmFwaFFMIGRvY3VtZW50LiIpO1BlLnNldCh0LEtuKFpuKG4pKSl9cmV0dXJuIFBlLmdldCh0KX1mdW5jdGlvbiBKKGUpe2Zvcih2YXIgdD1bXSxuPTE7bjxhcmd1bWVudHMubGVuZ3RoO24rKyl0W24tMV09YXJndW1lbnRzW25dO3R5cGVvZiBlPT0ic3RyaW5nIiYmKGU9W2VdKTt2YXIgaT1lWzBdO3JldHVybiB0LmZvckVhY2goZnVuY3Rpb24ocixzKXtyJiZyLmtpbmQ9PT0iRG9jdW1lbnQiP2krPXIubG9jLnNvdXJjZS5ib2R5OmkrPXIsaSs9ZVtzKzFdfSksZXIoaSl9ZnVuY3Rpb24gdHIoKXtQZS5jbGVhcigpLEtlLmNsZWFyKCl9ZnVuY3Rpb24gbnIoKXtSdD0hMX1mdW5jdGlvbiBycigpe0xlPSEwfWZ1bmN0aW9uIGlyKCl7TGU9ITF9dmFyIGJlPXtncWw6SixyZXNldENhY2hlczp0cixkaXNhYmxlRnJhZ21lbnRXYXJuaW5nczpucixlbmFibGVFeHBlcmltZW50YWxGcmFnbWVudFZhcmlhYmxlczpycixkaXNhYmxlRXhwZXJpbWVudGFsRnJhZ21lbnRWYXJpYWJsZXM6aXJ9OyhmdW5jdGlvbihlKXtlLmdxbD1iZS5ncWwsZS5yZXNldENhY2hlcz1iZS5yZXNldENhY2hlcyxlLmRpc2FibGVGcmFnbWVudFdhcm5pbmdzPWJlLmRpc2FibGVGcmFnbWVudFdhcm5pbmdzLGUuZW5hYmxlRXhwZXJpbWVudGFsRnJhZ21lbnRWYXJpYWJsZXM9YmUuZW5hYmxlRXhwZXJpbWVudGFsRnJhZ21lbnRWYXJpYWJsZXMsZS5kaXNhYmxlRXhwZXJpbWVudGFsRnJhZ21lbnRWYXJpYWJsZXM9YmUuZGlzYWJsZUV4cGVyaW1lbnRhbEZyYWdtZW50VmFyaWFibGVzfSkoSnx8KEo9e30pKSxKLmRlZmF1bHQ9Sjtjb25zdCBMdD1KYAoJZnJhZ21lbnQgTWF0Y2hQYXJ0cyBvbiBNYXRjaENvbmZpZyB7CgkJcmVnZXhWYWx1ZQoJCW1hdGNoVmFsdWUKCX0KYCxzcj1KYAoJbXV0YXRpb24gUHVzaFBheWxvYWQoCgkJJHNlc3Npb25fc2VjdXJlX2lkOiBTdHJpbmchCgkJJHBheWxvYWRfaWQ6IElEIQoJCSRldmVudHM6IFJlcGxheUV2ZW50c0lucHV0IQoJCSRtZXNzYWdlczogU3RyaW5nIQoJCSRyZXNvdXJjZXM6IFN0cmluZyEKCQkkd2ViX3NvY2tldF9ldmVudHM6IFN0cmluZyEKCQkkZXJyb3JzOiBbRXJyb3JPYmplY3RJbnB1dF0hCgkJJGlzX2JlYWNvbjogQm9vbGVhbgoJCSRoYXNfc2Vzc2lvbl91bmxvYWRlZDogQm9vbGVhbgoJCSRoaWdobGlnaHRfbG9nczogU3RyaW5nCgkpIHsKCQlwdXNoUGF5bG9hZCgKCQkJc2Vzc2lvbl9zZWN1cmVfaWQ6ICRzZXNzaW9uX3NlY3VyZV9pZAoJCQlwYXlsb2FkX2lkOiAkcGF5bG9hZF9pZAoJCQlldmVudHM6ICRldmVudHMKCQkJbWVzc2FnZXM6ICRtZXNzYWdlcwoJCQlyZXNvdXJjZXM6ICRyZXNvdXJjZXMKCQkJd2ViX3NvY2tldF9ldmVudHM6ICR3ZWJfc29ja2V0X2V2ZW50cwoJCQllcnJvcnM6ICRlcnJvcnMKCQkJaXNfYmVhY29uOiAkaXNfYmVhY29uCgkJCWhhc19zZXNzaW9uX3VubG9hZGVkOiAkaGFzX3Nlc3Npb25fdW5sb2FkZWQKCQkJaGlnaGxpZ2h0X2xvZ3M6ICRoaWdobGlnaHRfbG9ncwoJCSkKCX0KYCxvcj1KYAoJbXV0YXRpb24gUHVzaFNlc3Npb25FdmVudHMoCgkJJHNlc3Npb25fc2VjdXJlX2lkOiBTdHJpbmchCgkJJHBheWxvYWRfaWQ6IEludDY0SUQhCgkJJGRhdGE6IFN0cmluZyEKCSkgewoJCXB1c2hTZXNzaW9uRXZlbnRzKAoJCQlzZXNzaW9uX3NlY3VyZV9pZDogJHNlc3Npb25fc2VjdXJlX2lkCgkJCXBheWxvYWRfaWQ6ICRwYXlsb2FkX2lkCgkJCWRhdGE6ICRkYXRhCgkJKQoJfQpgLGFyPUpgCgltdXRhdGlvbiBpZGVudGlmeVNlc3Npb24oCgkJJHNlc3Npb25fc2VjdXJlX2lkOiBTdHJpbmchCgkJJHVzZXJfaWRlbnRpZmllcjogU3RyaW5nIQoJCSR1c2VyX29iamVjdDogQW55CgkpIHsKCQlpZGVudGlmeVNlc3Npb24oCgkJCXNlc3Npb25fc2VjdXJlX2lkOiAkc2Vzc2lvbl9zZWN1cmVfaWQKCQkJdXNlcl9pZGVudGlmaWVyOiAkdXNlcl9pZGVudGlmaWVyCgkJCXVzZXJfb2JqZWN0OiAkdXNlcl9vYmplY3QKCQkpCgl9CmAsY3I9SmAKCW11dGF0aW9uIGFkZFNlc3Npb25Qcm9wZXJ0aWVzKAoJCSRzZXNzaW9uX3NlY3VyZV9pZDogU3RyaW5nIQoJCSRwcm9wZXJ0aWVzX29iamVjdDogQW55CgkpIHsKCQlhZGRTZXNzaW9uUHJvcGVydGllcygKCQkJc2Vzc2lvbl9zZWN1cmVfaWQ6ICRzZXNzaW9uX3NlY3VyZV9pZAoJCQlwcm9wZXJ0aWVzX29iamVjdDogJHByb3BlcnRpZXNfb2JqZWN0CgkJKQoJfQpgLHVyPUpgCgltdXRhdGlvbiBwdXNoTWV0cmljcygkbWV0cmljczogW01ldHJpY0lucHV0XSEpIHsKCQlwdXNoTWV0cmljcyhtZXRyaWNzOiAkbWV0cmljcykKCX0KYCxscj1KYAoJbXV0YXRpb24gYWRkU2Vzc2lvbkZlZWRiYWNrKAoJCSRzZXNzaW9uX3NlY3VyZV9pZDogU3RyaW5nIQoJCSR1c2VyX25hbWU6IFN0cmluZwoJCSR1c2VyX2VtYWlsOiBTdHJpbmcKCQkkdmVyYmF0aW06IFN0cmluZyEKCQkkdGltZXN0YW1wOiBUaW1lc3RhbXAhCgkpIHsKCQlhZGRTZXNzaW9uRmVlZGJhY2soCgkJCXNlc3Npb25fc2VjdXJlX2lkOiAkc2Vzc2lvbl9zZWN1cmVfaWQKCQkJdXNlcl9uYW1lOiAkdXNlcl9uYW1lCgkJCXVzZXJfZW1haWw6ICR1c2VyX2VtYWlsCgkJCXZlcmJhdGltOiAkdmVyYmF0aW0KCQkJdGltZXN0YW1wOiAkdGltZXN0YW1wCgkJKQoJfQpgLGZyPUpgCgltdXRhdGlvbiBpbml0aWFsaXplU2Vzc2lvbigKCQkkc2Vzc2lvbl9zZWN1cmVfaWQ6IFN0cmluZyEKCQkkc2Vzc2lvbl9rZXk6IFN0cmluZwoJCSRvcmdhbml6YXRpb25fdmVyYm9zZV9pZDogU3RyaW5nIQoJCSRlbmFibGVfc3RyaWN0X3ByaXZhY3k6IEJvb2xlYW4hCgkJJHByaXZhY3lfc2V0dGluZzogU3RyaW5nIQoJCSRlbmFibGVfcmVjb3JkaW5nX25ldHdvcmtfY29udGVudHM6IEJvb2xlYW4hCgkJJGNsaWVudFZlcnNpb246IFN0cmluZyEKCQkkZmlyc3Rsb2FkVmVyc2lvbjogU3RyaW5nIQoJCSRjbGllbnRDb25maWc6IFN0cmluZyEKCQkkZW52aXJvbm1lbnQ6IFN0cmluZyEKCQkkaWQ6IFN0cmluZyEKCQkkYXBwVmVyc2lvbjogU3RyaW5nCgkJJHNlcnZpY2VOYW1lOiBTdHJpbmchCgkJJGNsaWVudF9pZDogU3RyaW5nIQoJCSRuZXR3b3JrX3JlY29yZGluZ19kb21haW5zOiBbU3RyaW5nIV0KCQkkZGlzYWJsZV9zZXNzaW9uX3JlY29yZGluZzogQm9vbGVhbgoJKSB7CgkJaW5pdGlhbGl6ZVNlc3Npb24oCgkJCXNlc3Npb25fc2VjdXJlX2lkOiAkc2Vzc2lvbl9zZWN1cmVfaWQKCQkJc2Vzc2lvbl9rZXk6ICRzZXNzaW9uX2tleQoJCQlvcmdhbml6YXRpb25fdmVyYm9zZV9pZDogJG9yZ2FuaXphdGlvbl92ZXJib3NlX2lkCgkJCWVuYWJsZV9zdHJpY3RfcHJpdmFjeTogJGVuYWJsZV9zdHJpY3RfcHJpdmFjeQoJCQllbmFibGVfcmVjb3JkaW5nX25ldHdvcmtfY29udGVudHM6ICRlbmFibGVfcmVjb3JkaW5nX25ldHdvcmtfY29udGVudHMKCQkJY2xpZW50VmVyc2lvbjogJGNsaWVudFZlcnNpb24KCQkJZmlyc3Rsb2FkVmVyc2lvbjogJGZpcnN0bG9hZFZlcnNpb24KCQkJY2xpZW50Q29uZmlnOiAkY2xpZW50Q29uZmlnCgkJCWVudmlyb25tZW50OiAkZW52aXJvbm1lbnQKCQkJYXBwVmVyc2lvbjogJGFwcFZlcnNpb24KCQkJc2VydmljZU5hbWU6ICRzZXJ2aWNlTmFtZQoJCQlmaW5nZXJwcmludDogJGlkCgkJCWNsaWVudF9pZDogJGNsaWVudF9pZAoJCQluZXR3b3JrX3JlY29yZGluZ19kb21haW5zOiAkbmV0d29ya19yZWNvcmRpbmdfZG9tYWlucwoJCQlkaXNhYmxlX3Nlc3Npb25fcmVjb3JkaW5nOiAkZGlzYWJsZV9zZXNzaW9uX3JlY29yZGluZwoJCQlwcml2YWN5X3NldHRpbmc6ICRwcml2YWN5X3NldHRpbmcKCQkpIHsKCQkJc2VjdXJlX2lkCgkJCXByb2plY3RfaWQKCQkJc2FtcGxpbmcgewoJCQkJc3BhbnMgewoJCQkJCW5hbWUgewoJCQkJCQkuLi5NYXRjaFBhcnRzCgkJCQkJfQoJCQkJCWF0dHJpYnV0ZXMgewoJCQkJCQlrZXkgewoJCQkJCQkJLi4uTWF0Y2hQYXJ0cwoJCQkJCQl9CgkJCQkJCWF0dHJpYnV0ZSB7CgkJCQkJCQkuLi5NYXRjaFBhcnRzCgkJCQkJCX0KCQkJCQl9CgkJCQkJZXZlbnRzIHsKCQkJCQkJbmFtZSB7CgkJCQkJCQkuLi5NYXRjaFBhcnRzCgkJCQkJCX0KCQkJCQkJYXR0cmlidXRlcyB7CgkJCQkJCQlrZXkgewoJCQkJCQkJCS4uLk1hdGNoUGFydHMKCQkJCQkJCX0KCQkJCQkJCWF0dHJpYnV0ZSB7CgkJCQkJCQkJLi4uTWF0Y2hQYXJ0cwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJCXNhbXBsaW5nUmF0aW8KCQkJCX0KCQkJCWxvZ3MgewoJCQkJCW1lc3NhZ2UgewoJCQkJCQkuLi5NYXRjaFBhcnRzCgkJCQkJfQoJCQkJCXNldmVyaXR5VGV4dCB7CgkJCQkJCS4uLk1hdGNoUGFydHMKCQkJCQl9CgkJCQkJYXR0cmlidXRlcyB7CgkJCQkJCWtleSB7CgkJCQkJCQkuLi5NYXRjaFBhcnRzCgkJCQkJCX0KCQkJCQkJYXR0cmlidXRlIHsKCQkJCQkJCS4uLk1hdGNoUGFydHMKCQkJCQkJfQoJCQkJCX0KCQkJCQlzYW1wbGluZ1JhdGlvCgkJCQl9CgkJCX0KCQl9Cgl9Cgkke0x0fQpgLGhyPUpgCglxdWVyeSBJZ25vcmUoJGlkOiBJRCEpIHsKCQlpZ25vcmUoaWQ6ICRpZCkKCX0KYCxkcj1KYAoJcXVlcnkgR2V0U2FtcGxpbmdDb25maWcoJG9yZ2FuaXphdGlvbl92ZXJib3NlX2lkOiBTdHJpbmchKSB7CgkJc2FtcGxpbmcob3JnYW5pemF0aW9uX3ZlcmJvc2VfaWQ6ICRvcmdhbml6YXRpb25fdmVyYm9zZV9pZCkgewoJCQlzcGFucyB7CgkJCQluYW1lIHsKCQkJCQkuLi5NYXRjaFBhcnRzCgkJCQl9CgkJCQlhdHRyaWJ1dGVzIHsKCQkJCQlrZXkgewoJCQkJCQkuLi5NYXRjaFBhcnRzCgkJCQkJfQoJCQkJCWF0dHJpYnV0ZSB7CgkJCQkJCS4uLk1hdGNoUGFydHMKCQkJCQl9CgkJCQl9CgkJCQlldmVudHMgewoJCQkJCW5hbWUgewoJCQkJCQkuLi5NYXRjaFBhcnRzCgkJCQkJfQoJCQkJCWF0dHJpYnV0ZXMgewoJCQkJCQlrZXkgewoJCQkJCQkJLi4uTWF0Y2hQYXJ0cwoJCQkJCQl9CgkJCQkJCWF0dHJpYnV0ZSB7CgkJCQkJCQkuLi5NYXRjaFBhcnRzCgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCQlzYW1wbGluZ1JhdGlvCgkJCX0KCQkJbG9ncyB7CgkJCQltZXNzYWdlIHsKCQkJCQkuLi5NYXRjaFBhcnRzCgkJCQl9CgkJCQlzZXZlcml0eVRleHQgewoJCQkJCS4uLk1hdGNoUGFydHMKCQkJCX0KCQkJCWF0dHJpYnV0ZXMgewoJCQkJCWtleSB7CgkJCQkJCS4uLk1hdGNoUGFydHMKCQkJCQl9CgkJCQkJYXR0cmlidXRlIHsKCQkJCQkJLi4uTWF0Y2hQYXJ0cwoJCQkJCX0KCQkJCX0KCQkJCXNhbXBsaW5nUmF0aW8KCQkJfQoJCX0KCX0KCSR7THR9CmAscHI9KGUsdCxuLGkpPT5lKCk7ZnVuY3Rpb24gbXIoZSx0PXByKXtyZXR1cm57UHVzaFBheWxvYWQobixpKXtyZXR1cm4gdChyPT5lLnJlcXVlc3Qoc3IsbixEKEQoe30saSkscikpLCJQdXNoUGF5bG9hZCIsIm11dGF0aW9uIixuKX0sUHVzaFNlc3Npb25FdmVudHMobixpKXtyZXR1cm4gdChyPT5lLnJlcXVlc3Qob3IsbixEKEQoe30saSkscikpLCJQdXNoU2Vzc2lvbkV2ZW50cyIsIm11dGF0aW9uIixuKX0saWRlbnRpZnlTZXNzaW9uKG4saSl7cmV0dXJuIHQocj0+ZS5yZXF1ZXN0KGFyLG4sRChEKHt9LGkpLHIpKSwiaWRlbnRpZnlTZXNzaW9uIiwibXV0YXRpb24iLG4pfSxhZGRTZXNzaW9uUHJvcGVydGllcyhuLGkpe3JldHVybiB0KHI9PmUucmVxdWVzdChjcixuLEQoRCh7fSxpKSxyKSksImFkZFNlc3Npb25Qcm9wZXJ0aWVzIiwibXV0YXRpb24iLG4pfSxwdXNoTWV0cmljcyhuLGkpe3JldHVybiB0KHI9PmUucmVxdWVzdCh1cixuLEQoRCh7fSxpKSxyKSksInB1c2hNZXRyaWNzIiwibXV0YXRpb24iLG4pfSxhZGRTZXNzaW9uRmVlZGJhY2sobixpKXtyZXR1cm4gdChyPT5lLnJlcXVlc3QobHIsbixEKEQoe30saSkscikpLCJhZGRTZXNzaW9uRmVlZGJhY2siLCJtdXRhdGlvbiIsbil9LGluaXRpYWxpemVTZXNzaW9uKG4saSl7cmV0dXJuIHQocj0+ZS5yZXF1ZXN0KGZyLG4sRChEKHt9LGkpLHIpKSwiaW5pdGlhbGl6ZVNlc3Npb24iLCJtdXRhdGlvbiIsbil9LElnbm9yZShuLGkpe3JldHVybiB0KHI9PmUucmVxdWVzdChocixuLEQoRCh7fSxpKSxyKSksIklnbm9yZSIsInF1ZXJ5IixuKX0sR2V0U2FtcGxpbmdDb25maWcobixpKXtyZXR1cm4gdChyPT5lLnJlcXVlc3QoZHIsbixEKEQoe30saSkscikpLCJHZXRTYW1wbGluZ0NvbmZpZyIsInF1ZXJ5IixuKX19fXZhciBXPVVpbnQ4QXJyYXksWj1VaW50MTZBcnJheSxldD1JbnQzMkFycmF5LHR0PW5ldyBXKFswLDAsMCwwLDAsMCwwLDAsMSwxLDEsMSwyLDIsMiwyLDMsMywzLDMsNCw0LDQsNCw1LDUsNSw1LDAsMCwwLDBdKSxudD1uZXcgVyhbMCwwLDAsMCwxLDEsMiwyLDMsMyw0LDQsNSw1LDYsNiw3LDcsOCw4LDksOSwxMCwxMCwxMSwxMSwxMiwxMiwxMywxMywwLDBdKSxGdD1uZXcgVyhbMTYsMTcsMTgsMCw4LDcsOSw2LDEwLDUsMTEsNCwxMiwzLDEzLDIsMTQsMSwxNV0pLE10PWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPW5ldyBaKDMxKSxpPTA7aTwzMTsrK2kpbltpXT10Kz0xPDxlW2ktMV07Zm9yKHZhciByPW5ldyBldChuWzMwXSksaT0xO2k8MzA7KytpKWZvcih2YXIgcz1uW2ldO3M8bltpKzFdOysrcylyW3NdPXMtbltpXTw8NXxpO3JldHVybntiOm4scn19LCR0PU10KHR0LDIpLHlyPSR0LmIscnQ9JHQucjt5clsyOF09MjU4LHJ0WzI1OF09Mjg7Zm9yKHZhciBncj1NdChudCwwKSxCdD1nci5yLGl0PW5ldyBaKDMyNzY4KSxMPTA7TDwzMjc2ODsrK0wpe3ZhciBhZT0oTCY0MzY5MCk+PjF8KEwmMjE4NDUpPDwxO2FlPShhZSY1MjQyOCk+PjJ8KGFlJjEzMTA3KTw8MixhZT0oYWUmNjE2ODApPj40fChhZSYzODU1KTw8NCxpdFtMXT0oKGFlJjY1MjgwKT4+OHwoYWUmMjU1KTw8OCk+PjF9Zm9yKHZhciBOZT1mdW5jdGlvbihlLHQsbil7Zm9yKHZhciBpPWUubGVuZ3RoLHI9MCxzPW5ldyBaKHQpO3I8aTsrK3IpZVtyXSYmKytzW2Vbcl0tMV07dmFyIG89bmV3IFoodCk7Zm9yKHI9MTtyPHQ7KytyKW9bcl09b1tyLTFdK3Nbci0xXTw8MTt2YXIgYztpZihuKXtjPW5ldyBaKDE8PHQpO3ZhciBmPTE1LXQ7Zm9yKHI9MDtyPGk7KytyKWlmKGVbcl0pZm9yKHZhciBkPXI8PDR8ZVtyXSx1PXQtZVtyXSx5PW9bZVtyXS0xXSsrPDx1LHY9eXwoMTw8dSktMTt5PD12OysreSljW2l0W3ldPj5mXT1kfWVsc2UgZm9yKGM9bmV3IFooaSkscj0wO3I8aTsrK3IpZVtyXSYmKGNbcl09aXRbb1tlW3JdLTFdKytdPj4xNS1lW3JdKTtyZXR1cm4gY30sbGU9bmV3IFcoMjg4KSxMPTA7TDwxNDQ7KytMKWxlW0xdPTg7Zm9yKHZhciBMPTE0NDtMPDI1NjsrK0wpbGVbTF09OTtmb3IodmFyIEw9MjU2O0w8MjgwOysrTClsZVtMXT03O2Zvcih2YXIgTD0yODA7TDwyODg7KytMKWxlW0xdPTg7Zm9yKHZhciBGZT1uZXcgVygzMiksTD0wO0w8MzI7KytMKUZlW0xdPTU7dmFyIHZyPU5lKGxlLDksMCksRXI9TmUoRmUsNSwwKSxVdD1mdW5jdGlvbihlKXtyZXR1cm4oZSs3KS84fDB9LFZ0PWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4obj09bnVsbHx8bj5lLmxlbmd0aCkmJihuPWUubGVuZ3RoKSxuZXcgVyhlLnN1YmFycmF5KHQsbikpfSxpZT1mdW5jdGlvbihlLHQsbil7bjw8PXQmNzt2YXIgaT10Lzh8MDtlW2ldfD1uLGVbaSsxXXw9bj4+OH0seGU9ZnVuY3Rpb24oZSx0LG4pe248PD10Jjc7dmFyIGk9dC84fDA7ZVtpXXw9bixlW2krMV18PW4+PjgsZVtpKzJdfD1uPj4xNn0sc3Q9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49W10saT0wO2k8ZS5sZW5ndGg7KytpKWVbaV0mJm4ucHVzaCh7czppLGY6ZVtpXX0pO3ZhciByPW4ubGVuZ3RoLHM9bi5zbGljZSgpO2lmKCFyKXJldHVybnt0Onp0LGw6MH07aWYocj09MSl7dmFyIG89bmV3IFcoblswXS5zKzEpO3JldHVybiBvW25bMF0uc109MSx7dDpvLGw6MX19bi5zb3J0KGZ1bmN0aW9uKCQscSl7cmV0dXJuICQuZi1xLmZ9KSxuLnB1c2goe3M6LTEsZjoyNTAwMX0pO3ZhciBjPW5bMF0sZj1uWzFdLGQ9MCx1PTEseT0yO2ZvcihuWzBdPXtzOi0xLGY6Yy5mK2YuZixsOmMscjpmfTt1IT1yLTE7KWM9bltuW2RdLmY8blt5XS5mP2QrKzp5KytdLGY9bltkIT11JiZuW2RdLmY8blt5XS5mP2QrKzp5KytdLG5bdSsrXT17czotMSxmOmMuZitmLmYsbDpjLHI6Zn07Zm9yKHZhciB2PXNbMF0ucyxpPTE7aTxyOysraSlzW2ldLnM+diYmKHY9c1tpXS5zKTt2YXIgYj1uZXcgWih2KzEpLG09b3Qoblt1LTFdLGIsMCk7aWYobT50KXt2YXIgaT0wLE49MCxnPW0tdCxFPTE8PGc7Zm9yKHMuc29ydChmdW5jdGlvbihxLEIpe3JldHVybiBiW0Iuc10tYltxLnNdfHxxLmYtQi5mfSk7aTxyOysraSl7dmFyIEM9c1tpXS5zO2lmKGJbQ10+dClOKz1FLSgxPDxtLWJbQ10pLGJbQ109dDtlbHNlIGJyZWFrfWZvcihOPj49ZztOPjA7KXt2YXIgdz1zW2ldLnM7Ylt3XTx0P04tPTE8PHQtYlt3XSsrLTE6KytpfWZvcig7aT49MCYmTjstLWkpe3ZhciBSPXNbaV0ucztiW1JdPT10JiYoLS1iW1JdLCsrTil9bT10fXJldHVybnt0Om5ldyBXKGIpLGw6bX19LG90PWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZS5zPT0tMT9NYXRoLm1heChvdChlLmwsdCxuKzEpLG90KGUucix0LG4rMSkpOnRbZS5zXT1ufSxqdD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS5sZW5ndGg7dCYmIWVbLS10XTspO2Zvcih2YXIgbj1uZXcgWigrK3QpLGk9MCxyPWVbMF0scz0xLG89ZnVuY3Rpb24oZil7bltpKytdPWZ9LGM9MTtjPD10OysrYylpZihlW2NdPT1yJiZjIT10KSsrcztlbHNle2lmKCFyJiZzPjIpe2Zvcig7cz4xMzg7cy09MTM4KW8oMzI3NTQpO3M+MiYmKG8ocz4xMD9zLTExPDw1fDI4NjkwOnMtMzw8NXwxMjMwNSkscz0wKX1lbHNlIGlmKHM+Myl7Zm9yKG8ociksLS1zO3M+NjtzLT02KW8oODMwNCk7cz4yJiYobyhzLTM8PDV8ODIwOCkscz0wKX1mb3IoO3MtLTspbyhyKTtzPTEscj1lW2NdfXJldHVybntjOm4uc3ViYXJyYXkoMCxpKSxuOnR9fSxBZT1mdW5jdGlvbihlLHQpe2Zvcih2YXIgbj0wLGk9MDtpPHQubGVuZ3RoOysraSluKz1lW2ldKnRbaV07cmV0dXJuIG59LHF0PWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1uLmxlbmd0aCxyPVV0KHQrMik7ZVtyXT1pJjI1NSxlW3IrMV09aT4+OCxlW3IrMl09ZVtyXV4yNTUsZVtyKzNdPWVbcisxXV4yNTU7Zm9yKHZhciBzPTA7czxpOysrcyllW3Ircys0XT1uW3NdO3JldHVybihyKzQraSkqOH0sR3Q9ZnVuY3Rpb24oZSx0LG4saSxyLHMsbyxjLGYsZCx1KXtpZSh0LHUrKyxuKSwrK3JbMjU2XTtmb3IodmFyIHk9c3QociwxNSksdj15LnQsYj15LmwsbT1zdChzLDE1KSxOPW0udCxnPW0ubCxFPWp0KHYpLEM9RS5jLHc9RS5uLFI9anQoTiksJD1SLmMscT1SLm4sQj1uZXcgWigxOSksST0wO0k8Qy5sZW5ndGg7KytJKSsrQltDW0ldJjMxXTtmb3IodmFyIEk9MDtJPCQubGVuZ3RoOysrSSkrK0JbJFtJXSYzMV07Zm9yKHZhciBTPXN0KEIsNyksaj1TLnQsVT1TLmwsej0xOTt6PjQmJiFqW0Z0W3otMV1dOy0teik7dmFyIEs9ZCs1PDwzLGE9QWUocixsZSkrQWUocyxGZSkrbyxoPUFlKHIsdikrQWUocyxOKStvKzE0KzMqeitBZShCLGopKzIqQlsxNl0rMypCWzE3XSs3KkJbMThdO2lmKGY+PTAmJks8PWEmJks8PWgpcmV0dXJuIHF0KHQsdSxlLnN1YmFycmF5KGYsZitkKSk7dmFyIF8sQSxrLHg7aWYoaWUodCx1LDErKGg8YSkpLHUrPTIsaDxhKXtfPU5lKHYsYiwwKSxBPXYsaz1OZShOLGcsMCkseD1OO3ZhciBjZT1OZShqLFUsMCk7aWUodCx1LHctMjU3KSxpZSh0LHUrNSxxLTEpLGllKHQsdSsxMCx6LTQpLHUrPTE0O2Zvcih2YXIgST0wO0k8ejsrK0kpaWUodCx1KzMqSSxqW0Z0W0ldXSk7dSs9Myp6O2Zvcih2YXIgSD1bQywkXSxzZT0wO3NlPDI7KytzZSlmb3IodmFyIHllPUhbc2VdLEk9MDtJPHllLmxlbmd0aDsrK0kpe3ZhciBuZT15ZVtJXSYzMTtpZSh0LHUsY2VbbmVdKSx1Kz1qW25lXSxuZT4xNSYmKGllKHQsdSx5ZVtJXT4+NSYxMjcpLHUrPXllW0ldPj4xMil9fWVsc2UgXz12cixBPWxlLGs9RXIseD1GZTtmb3IodmFyIEk9MDtJPGM7KytJKXt2YXIgWT1pW0ldO2lmKFk+MjU1KXt2YXIgbmU9WT4+MTgmMzE7eGUodCx1LF9bbmUrMjU3XSksdSs9QVtuZSsyNTddLG5lPjcmJihpZSh0LHUsWT4+MjMmMzEpLHUrPXR0W25lXSk7dmFyIGdlPVkmMzE7eGUodCx1LGtbZ2VdKSx1Kz14W2dlXSxnZT4zJiYoeGUodCx1LFk+PjUmODE5MSksdSs9bnRbZ2VdKX1lbHNlIHhlKHQsdSxfW1ldKSx1Kz1BW1ldfXJldHVybiB4ZSh0LHUsX1syNTZdKSx1K0FbMjU2XX0sX3I9bmV3IGV0KFs2NTU0MCwxMzEwODAsMTMxMDg4LDEzMTEwNCwyNjIxNzYsMTA0ODcwNCwxMDQ4ODMyLDIxMTQ1NjAsMjExNzYzMl0pLHp0PW5ldyBXKDApLFRyPWZ1bmN0aW9uKGUsdCxuLGkscixzKXt2YXIgbz1zLnp8fGUubGVuZ3RoLGM9bmV3IFcoaStvKzUqKDErTWF0aC5jZWlsKG8vN2UzKSkrciksZj1jLnN1YmFycmF5KGksYy5sZW5ndGgtciksZD1zLmwsdT0ocy5yfHwwKSY3O2lmKHQpe3UmJihmWzBdPXMucj4+Myk7Zm9yKHZhciB5PV9yW3QtMV0sdj15Pj4xMyxiPXkmODE5MSxtPSgxPDxuKS0xLE49cy5wfHxuZXcgWigzMjc2OCksZz1zLmh8fG5ldyBaKG0rMSksRT1NYXRoLmNlaWwobi8zKSxDPTIqRSx3PWZ1bmN0aW9uKGx0KXtyZXR1cm4oZVtsdF1eZVtsdCsxXTw8RV5lW2x0KzJdPDxDKSZtfSxSPW5ldyBldCgyNWUzKSwkPW5ldyBaKDI4OCkscT1uZXcgWigzMiksQj0wLEk9MCxTPXMuaXx8MCxqPTAsVT1zLnd8fDAsej0wO1MrMjxvOysrUyl7dmFyIEs9dyhTKSxhPVMmMzI3NjcsaD1nW0tdO2lmKE5bYV09aCxnW0tdPWEsVTw9Uyl7dmFyIF89by1TO2lmKChCPjdlM3x8aj4yNDU3NikmJihfPjQyM3x8IWQpKXt1PUd0KGUsZiwwLFIsJCxxLEksaix6LFMteix1KSxqPUI9ST0wLHo9Uztmb3IodmFyIEE9MDtBPDI4NjsrK0EpJFtBXT0wO2Zvcih2YXIgQT0wO0E8MzA7KytBKXFbQV09MH12YXIgaz0yLHg9MCxjZT1iLEg9YS1oJjMyNzY3O2lmKF8+MiYmSz09dyhTLUgpKWZvcih2YXIgc2U9TWF0aC5taW4odixfKS0xLHllPU1hdGgubWluKDMyNzY3LFMpLG5lPU1hdGgubWluKDI1OCxfKTtIPD15ZSYmLS1jZSYmYSE9aDspe2lmKGVbUytrXT09ZVtTK2stSF0pe2Zvcih2YXIgWT0wO1k8bmUmJmVbUytZXT09ZVtTK1ktSF07KytZKTtpZihZPmspe2lmKGs9WSx4PUgsWT5zZSlicmVhaztmb3IodmFyIGdlPU1hdGgubWluKEgsWS0yKSxXdD0wLEE9MDtBPGdlOysrQSl7dmFyIGN0PVMtSCtBJjMyNzY3LFVyPU5bY3RdLFp0PWN0LVVyJjMyNzY3O1p0Pld0JiYoV3Q9WnQsaD1jdCl9fX1hPWgsaD1OW2FdLEgrPWEtaCYzMjc2N31pZih4KXtSW2orK109MjY4NDM1NDU2fHJ0W2tdPDwxOHxCdFt4XTt2YXIgS3Q9cnRba10mMzEsZW49QnRbeF0mMzE7SSs9dHRbS3RdK250W2VuXSwrKyRbMjU3K0t0XSwrK3FbZW5dLFU9UytrLCsrQn1lbHNlIFJbaisrXT1lW1NdLCsrJFtlW1NdXX19Zm9yKFM9TWF0aC5tYXgoUyxVKTtTPG87KytTKVJbaisrXT1lW1NdLCsrJFtlW1NdXTt1PUd0KGUsZixkLFIsJCxxLEksaix6LFMteix1KSxkfHwocy5yPXUmN3xmW3UvOHwwXTw8Myx1LT03LHMuaD1nLHMucD1OLHMuaT1TLHMudz1VKX1lbHNle2Zvcih2YXIgUz1zLnd8fDA7UzxvK2Q7Uys9NjU1MzUpe3ZhciB1dD1TKzY1NTM1O3V0Pj1vJiYoZlt1Lzh8MF09ZCx1dD1vKSx1PXF0KGYsdSsxLGUuc3ViYXJyYXkoUyx1dCkpfXMuaT1vfXJldHVybiBWdChjLDAsaStVdCh1KStyKX0sYnI9ZnVuY3Rpb24oKXtmb3IodmFyIGU9bmV3IEludDMyQXJyYXkoMjU2KSx0PTA7dDwyNTY7Kyt0KXtmb3IodmFyIG49dCxpPTk7LS1pOyluPShuJjEmJi0zMDY2NzQ5MTIpXm4+Pj4xO2VbdF09bn1yZXR1cm4gZX0oKSxOcj1mdW5jdGlvbigpe3ZhciBlPS0xO3JldHVybntwOmZ1bmN0aW9uKHQpe2Zvcih2YXIgbj1lLGk9MDtpPHQubGVuZ3RoOysraSluPWJyW24mMjU1XnRbaV1dXm4+Pj44O2U9bn0sZDpmdW5jdGlvbigpe3JldHVybn5lfX19LHhyPWZ1bmN0aW9uKGUsdCxuLGkscil7aWYoIXImJihyPXtsOjF9LHQuZGljdGlvbmFyeSkpe3ZhciBzPXQuZGljdGlvbmFyeS5zdWJhcnJheSgtMzI3NjgpLG89bmV3IFcocy5sZW5ndGgrZS5sZW5ndGgpO28uc2V0KHMpLG8uc2V0KGUscy5sZW5ndGgpLGU9byxyLnc9cy5sZW5ndGh9cmV0dXJuIFRyKGUsdC5sZXZlbD09bnVsbD82OnQubGV2ZWwsdC5tZW09PW51bGw/ci5sP01hdGguY2VpbChNYXRoLm1heCg4LE1hdGgubWluKDEzLE1hdGgubG9nKGUubGVuZ3RoKSkpKjEuNSk6MjA6MTIrdC5tZW0sbixpLHIpfSxhdD1mdW5jdGlvbihlLHQsbil7Zm9yKDtuOysrdCllW3RdPW4sbj4+Pj04fSxBcj1mdW5jdGlvbihlLHQpe3ZhciBuPXQuZmlsZW5hbWU7aWYoZVswXT0zMSxlWzFdPTEzOSxlWzJdPTgsZVs4XT10LmxldmVsPDI/NDp0LmxldmVsPT05PzI6MCxlWzldPTMsdC5tdGltZSE9MCYmYXQoZSw0LE1hdGguZmxvb3IobmV3IERhdGUodC5tdGltZXx8RGF0ZS5ub3coKSkvMWUzKSksbil7ZVszXT04O2Zvcih2YXIgaT0wO2k8PW4ubGVuZ3RoOysraSllW2krMTBdPW4uY2hhckNvZGVBdChpKX19LElyPWZ1bmN0aW9uKGUpe3JldHVybiAxMCsoZS5maWxlbmFtZT9lLmZpbGVuYW1lLmxlbmd0aCsxOjApfTtmdW5jdGlvbiBTcihlLHQpe3R8fCh0PXt9KTt2YXIgbj1OcigpLGk9ZS5sZW5ndGg7bi5wKGUpO3ZhciByPXhyKGUsdCxJcih0KSw4KSxzPXIubGVuZ3RoO3JldHVybiBBcihyLHQpLGF0KHIscy04LG4uZCgpKSxhdChyLHMtNCxpKSxyfXZhciBIdD10eXBlb2YgVGV4dEVuY29kZXIhPSJ1bmRlZmluZWQiJiZuZXcgVGV4dEVuY29kZXIsT3I9dHlwZW9mIFRleHREZWNvZGVyIT0idW5kZWZpbmVkIiYmbmV3IFRleHREZWNvZGVyLHdyPTA7dHJ5e09yLmRlY29kZSh6dCx7c3RyZWFtOiEwfSksd3I9MX1jYXRjaChlKXt9ZnVuY3Rpb24gRHIoZSx0KXt2YXIgbjtpZihIdClyZXR1cm4gSHQuZW5jb2RlKGUpO2Zvcih2YXIgaT1lLmxlbmd0aCxyPW5ldyBXKGUubGVuZ3RoKyhlLmxlbmd0aD4+MSkpLHM9MCxvPWZ1bmN0aW9uKGQpe3JbcysrXT1kfSxuPTA7bjxpOysrbil7aWYocys1PnIubGVuZ3RoKXt2YXIgYz1uZXcgVyhzKzgrKGktbjw8MSkpO2Muc2V0KHIpLHI9Y312YXIgZj1lLmNoYXJDb2RlQXQobik7ZjwxMjh8fHQ/byhmKTpmPDIwNDg/KG8oMTkyfGY+PjYpLG8oMTI4fGYmNjMpKTpmPjU1Mjk1JiZmPDU3MzQ0PyhmPTY1NTM2KyhmJjEwNDc1NTIpfGUuY2hhckNvZGVBdCgrK24pJjEwMjMsbygyNDB8Zj4+MTgpLG8oMTI4fGY+PjEyJjYzKSxvKDEyOHxmPj42JjYzKSxvKDEyOHxmJjYzKSk6KG8oMjI0fGY+PjEyKSxvKDEyOHxmPj42JjYzKSxvKDEyOHxmJjYzKSl9cmV0dXJuIFZ0KHIsMCxzKX1mdW5jdGlvbiBDcihlKXtyZXR1cm4gUSh0aGlzLG51bGwsZnVuY3Rpb24qKCl7Y29uc3QgdD1EcihKU09OLnN0cmluZ2lmeShlKSksbj1Tcih0KSxpPXlpZWxkIG5ldyBQcm9taXNlKHI9Pntjb25zdCBzPW5ldyBGaWxlUmVhZGVyO3Mub25sb2FkPSgpPT5yKHMucmVzdWx0KSxzLnJlYWRBc0RhdGFVUkwobmV3IEJsb2IoW25ldyBVaW50OEFycmF5KG4pXSkpfSk7cmV0dXJue2NvbXByZXNzZWRCYXNlNjQ6aS5zbGljZShpLmluZGV4T2YoIiwiKSsxKSxjb21wcmVzc2VkU2l6ZTpuLmxlbmd0aCxidWZmZXJMZW5ndGg6dC5sZW5ndGh9fSl9Y2xhc3Mga3J7Y29uc3RydWN0b3IodCxuKXtodCh0aGlzLCJkZWJ1ZyIpO2h0KHRoaXMsIm5hbWUiKTt0aGlzLmRlYnVnPXQsdGhpcy5uYW1lPW59bG9nKC4uLnQpe2lmKHRoaXMuZGVidWcpe2xldCBuPWBbJHtEYXRlLm5vdygpfV1gO3RoaXMubmFtZSYmKG4rPWAgLSAke3RoaXMubmFtZX1gKSxjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLFtuLC4uLnRdKX19d2FybiguLi50KXtsZXQgbj1gWyR7RGF0ZS5ub3coKX1dYDt0aGlzLm5hbWUmJihuKz1gIC0gJHt0aGlzLm5hbWV9YCksY29uc29sZS53YXJuLmFwcGx5KGNvbnNvbGUsW24sLi4udF0pfX12YXIgWXQ9KGU9PihlLkJpbGxpbmdRdW90YUV4Y2VlZGVkPSJCaWxsaW5nUXVvdGFFeGNlZWRlZCIsZSkpKFl0fHx7fSk7Y29uc3QgUnI9MyxQcj0xZTMsTHI9NTAwLEZyPVtZdC5CaWxsaW5nUXVvdGFFeGNlZWRlZC50b1N0cmluZygpXSxNcj1lPT57dmFyIG47cmV0dXJuKChuPWUucmVzcG9uc2UuZXJyb3JzKT09bnVsbD92b2lkIDA6bi5maW5kKGk9PkZyLmluY2x1ZGVzKGkubWVzc2FnZSkpKT09PXZvaWQgMH0sJHI9KCk9Pntjb25zdCBlPSh0LG4saSxyLHM9MCk9PlEodGhpcyxudWxsLGZ1bmN0aW9uKigpe3RyeXtyZXR1cm4geWllbGQgdCgpfWNhdGNoKG8pe2lmKG8gaW5zdGFuY2VvZiBkZSYmIU1yKG8pKXRocm93IG87aWYoczxScilyZXR1cm4geWllbGQgbmV3IFByb21pc2UoYz0+c2V0VGltZW91dChjLFByK0xyKk1hdGgucG93KDIscykpKSx5aWVsZCBlKHQsbixpLHIscysxKTt0aHJvdyBjb25zb2xlLmVycm9yKGBoaWdobGlnaHQuaW86IGRhdGEgcmVxdWVzdCBmYWlsZWQgYWZ0ZXIgJHtzfSByZXRyaWVzYCksb319KTtyZXR1cm4gZX0sSnQ9NSxRdD0yZTMsQnI9WyJudW1iZXIiLCJzdHJpbmciLCJib29sZWFuIl07dmFyIHRlPShlPT4oZVtlLkluaXRpYWxpemU9MF09IkluaXRpYWxpemUiLGVbZS5Bc3luY0V2ZW50cz0xXT0iQXN5bmNFdmVudHMiLGVbZS5JZGVudGlmeT0yXT0iSWRlbnRpZnkiLGVbZS5Qcm9wZXJ0aWVzPTNdPSJQcm9wZXJ0aWVzIixlW2UuTWV0cmljcz00XT0iTWV0cmljcyIsZVtlLkZlZWRiYWNrPTVdPSJGZWVkYmFjayIsZVtlLkN1c3RvbUV2ZW50PTZdPSJDdXN0b21FdmVudCIsZVtlLlN0b3A9N109IlN0b3AiLGUpKSh0ZXx8e30pO2NvbnN0IE1lPXNlbGY7ZnVuY3Rpb24gWHQoZSx0KXtjb25zdCBuPXt9LGk9W10scj1bXTtmb3IoY29uc3RbcyxvXW9mIE9iamVjdC5lbnRyaWVzKGUpKXtpZihvPT1udWxsKWNvbnRpbnVlO0JyLmluY2x1ZGVzKHR5cGVvZiBvKXx8aS5wdXNoKHtbc106b30pO2xldCBjO3R5cGVvZiBvPT0ic3RyaW5nIj9jPW86Yz1tZShvKSxjLmxlbmd0aD5RdCYmKHIucHVzaCh7W3NdOm99KSxjPWMuc3Vic3RyaW5nKDAsUXQpKSxuW3NdPWN9cmV0dXJuIHQhPT0ic2Vzc2lvbiImJihpLmxlbmd0aD4wJiZjb25zb2xlLndhcm4oYEhpZ2hsaWdodCB3YXMgcGFzc2VkIG9uZSBvciBtb3JlICR7dH0gcHJvcGVydGllcyBub3Qgb2YgdHlwZSBzdHJpbmcsIG51bWJlciwgb3IgYm9vbGVhbi5gLGkpLHIubGVuZ3RoPjAmJmNvbnNvbGUud2FybihgSGlnaGxpZ2h0IHdhcyBwYXNzZWQgb25lIG9yIG1vcmUgJHt0fSBwcm9wZXJ0aWVzIGV4Y2VlZGluZyAyMDAwIGNoYXJhY3RlcnMsIHdoaWNoIHdpbGwgYmUgdHJ1bmNhdGVkLmAscikpLG59e2xldCBlLHQsbixpPTAscj0wLHM9ITEsbz0wLGM9bmV3IGtyKCExLCJbd29ya2VyXSIpO2NvbnN0IGY9W10sZD0oKT0+byE9PTAmJmk8SnQmJiEhKG4hPW51bGwmJm4ubGVuZ3RoKSx1PShnLEUpPT57TWUucG9zdE1lc3NhZ2Uoe3Jlc3BvbnNlOnt0eXBlOnRlLkN1c3RvbUV2ZW50LHRhZzpnLHBheWxvYWQ6RX19KX0seT1nPT5RKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtjb25zdHtpZDpFLGV2ZW50czpDLG1lc3NhZ2VzOncsZXJyb3JzOlIscmVzb3VyY2VzU3RyaW5nOiQsd2ViU29ja2V0RXZlbnRzU3RyaW5nOnEsaGFzU2Vzc2lvblVubG9hZGVkOkIsaGlnaGxpZ2h0TG9nczpJfT1nLFM9bWUoe21lc3NhZ2VzOnd9KTtsZXQgaj17c2Vzc2lvbl9zZWN1cmVfaWQ6bixwYXlsb2FkX2lkOkUudG9TdHJpbmcoKSxldmVudHM6e2V2ZW50czpDfSxtZXNzYWdlczpTLHJlc291cmNlczokLHdlYl9zb2NrZXRfZXZlbnRzOnEsZXJyb3JzOlIsaXNfYmVhY29uOiExLGhhc19zZXNzaW9uX3VubG9hZGVkOkJ9O0kmJihqLmhpZ2hsaWdodF9sb2dzPUkpO2NvbnN0e2NvbXByZXNzZWRCYXNlNjQ6VSxidWZmZXJMZW5ndGg6eixjb21wcmVzc2VkU2l6ZTpLfT15aWVsZCBDcihqKSxhPXt0eXBlOnRlLkFzeW5jRXZlbnRzLGlkOkUsZXZlbnRzU2l6ZTp6LGNvbXByZXNzZWRTaXplOlUubGVuZ3RofTtjLmxvZyhgUHVzaGluZyBwYXlsb2FkOiAke0pTT04uc3RyaW5naWZ5KHtzZXNzaW9uU2VjdXJlSUQ6bixpZDpFLGZpcnN0U0lEOk1hdGgubWluKC4uLmouZXZlbnRzLmV2ZW50cy5tYXAoeD0+eD09bnVsbD92b2lkIDA6eC5fc2lkKS5maWx0ZXIoeD0+ISF4KSksZXZlbnRzTGVuZ3RoOmouZXZlbnRzLmV2ZW50cy5sZW5ndGgsbWVzc2FnZXNMZW5ndGg6dy5sZW5ndGgscmVzb3VyY2VzTGVuZ3RoOiQubGVuZ3RoLHdlYlNvY2tldExlbmd0aDpxLmxlbmd0aCxlcnJvcnNMZW5ndGg6Ui5sZW5ndGgsYnVmTGVuZ3RoOnosY29tcHJlc3NlZExlbmd0aDpLLGNvbXByZXNzZWRCYXNlNjRMZW5ndGg6VS5sZW5ndGh9LHZvaWQgMCwyKX1gKTtjb25zdCBoPWUuUHVzaFNlc3Npb25FdmVudHMoe3Nlc3Npb25fc2VjdXJlX2lkOm4scGF5bG9hZF9pZDpFLnRvU3RyaW5nKCksZGF0YTpVfSk7bGV0IF89UHJvbWlzZS5yZXNvbHZlKCk7Zi5sZW5ndGgmJihfPWUucHVzaE1ldHJpY3Moe21ldHJpY3M6Zn0pLGYuc3BsaWNlKDApKTtsZXQgQT1wZXJmb3JtYW5jZS5ub3coKTtjb25zdCBrPXNldEludGVydmFsKCgpPT57QSYmcGVyZm9ybWFuY2Uubm93KCktQT5rdCYmKGNvbnNvbGUud2FybihgVXBsb2FkaW5nIHB1c2hQYXlsb2FkIHRvb2sgdG9vIGxvbmcsIGZhaWx1cmUgbnVtYmVyICMke3J9LmApLHIrPTEsY2xlYXJJbnRlcnZhbChrKSxyPj1KdCYmKGNvbnNvbGUud2FybigiVXBsb2FkaW5nIHB1c2hQYXlsb2FkIHRvb2sgdG9vIGxvbmcsIHN0b3BwaW5nIHJlY29yZGluZyB0byBhdm9pZCBPT00uIiksTWUucG9zdE1lc3NhZ2Uoe3Jlc3BvbnNlOnt0eXBlOnRlLlN0b3AscmVxdWVzdFN0YXJ0OkEsYXN5bmNFdmVudHNSZXNwb25zZTphfX0pLGIoe3R5cGU6dGUuUHJvcGVydGllcyxwcm9wZXJ0aWVzT2JqZWN0OntzdG9wUmVhc29uOiJQdXNoIFBheWxvYWQgVGltZW91dCJ9LHByb3BlcnR5VHlwZTp7dHlwZToidHJhY2sifX0pKSl9LDEwMCk7dHJ5e3lpZWxkIFByb21pc2UuYWxsKFtoLF9dKSxyJiZwZXJmb3JtYW5jZS5ub3coKS1BPD1rdCYmKGNvbnNvbGUud2FybihgcHVzaFBheWxvYWQgc3VjY2VlZGVkIGFmdGVyICMke3J9IGZhaWx1cmVzLCByZXNldHRpbmcgc3RvcCBzd2l0Y2guYCkscj0wKX1maW5hbGx5e0E9MCxjbGVhckludGVydmFsKGspfU1lLnBvc3RNZXNzYWdlKHtyZXNwb25zZTphfSl9KSx2PWc9PlEodGhpcyxudWxsLGZ1bmN0aW9uKigpe2NvbnN0e3VzZXJPYmplY3Q6RSx1c2VySWRlbnRpZmllcjpDLHNvdXJjZTp3fT1nO3c9PT0ic2VnbWVudCI/dSgiU2VnbWVudCBJZGVudGlmeSIsbWUoRCh7dXNlcklkZW50aWZpZXI6Q30sRSkpKTp1KCJJZGVudGlmeSIsbWUoRCh7dXNlcklkZW50aWZpZXI6Q30sRSkpKSx5aWVsZCBlLmlkZW50aWZ5U2Vzc2lvbih7c2Vzc2lvbl9zZWN1cmVfaWQ6bix1c2VyX2lkZW50aWZpZXI6Qyx1c2VyX29iamVjdDpYdChFLCJ1c2VyIil9KTtjb25zdCBSPXc9PT0ic2VnbWVudCI/dzoiZGVmYXVsdCI7Yy5sb2coYElkZW50aWZ5ICgke0N9LCBzb3VyY2U6ICR7Un0pIHcvIG9iajogJHttZShFKX0gQCAke3R9YCl9KSxiPWc9PlEodGhpcyxudWxsLGZ1bmN0aW9uKigpe2NvbnN0e3Byb3BlcnRpZXNPYmplY3Q6RSxwcm9wZXJ0eVR5cGU6Q309ZztsZXQgdzsoQz09bnVsbD92b2lkIDA6Qy50eXBlKT09PSJzZXNzaW9uIj8odz0iU2Vzc2lvbiIseWllbGQgZS5hZGRTZXNzaW9uUHJvcGVydGllcyh7c2Vzc2lvbl9zZWN1cmVfaWQ6bixwcm9wZXJ0aWVzX29iamVjdDpYdChFLCJzZXNzaW9uIil9KSk6KEM9PW51bGw/dm9pZCAwOkMuc291cmNlKT09PSJzZWdtZW50Ij93PSJTZWdtZW50Ijp3PSJUcmFjayIsdyE9PSJTZXNzaW9uIiYmdSh3LG1lKEUpKSxjLmxvZyhgQWRkaW5nICR7d30gUHJvcGVydGllcyB0byBzZXNzaW9uICgke259KSB3LyBvYmo6ICR7SlNPTi5zdHJpbmdpZnkoRSl9IEAgJHt0fWApfSksbT1nPT5RKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtmLnB1c2goLi4uZy5tZXRyaWNzLm1hcChFPT4oe25hbWU6RS5uYW1lLHZhbHVlOkUudmFsdWUsc2Vzc2lvbl9zZWN1cmVfaWQ6bixjYXRlZ29yeTpFLmNhdGVnb3J5LGdyb3VwOkUuZ3JvdXAsdGltZXN0YW1wOkUudGltZXN0YW1wLnRvSVNPU3RyaW5nKCksdGFnczpFLnRhZ3N9KSkpfSksTj1nPT5RKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtjb25zdHt0aW1lc3RhbXA6RSx2ZXJiYXRpbTpDLHVzZXJFbWFpbDp3LHVzZXJOYW1lOlJ9PWc7eWllbGQgZS5hZGRTZXNzaW9uRmVlZGJhY2soe3Nlc3Npb25fc2VjdXJlX2lkOm4sdGltZXN0YW1wOkUsdmVyYmF0aW06Qyx1c2VyX2VtYWlsOncsdXNlcl9uYW1lOlJ9KX0pO01lLm9ubWVzc2FnZT1mdW5jdGlvbihnKXtyZXR1cm4gUSh0aGlzLG51bGwsZnVuY3Rpb24qKCl7aWYoZy5kYXRhLm1lc3NhZ2UudHlwZT09PXRlLkluaXRpYWxpemUpe3Q9Zy5kYXRhLm1lc3NhZ2UuYmFja2VuZCxuPWcuZGF0YS5tZXNzYWdlLnNlc3Npb25TZWN1cmVJRCxzPWcuZGF0YS5tZXNzYWdlLmRlYnVnLG89Zy5kYXRhLm1lc3NhZ2UucmVjb3JkaW5nU3RhcnRUaW1lLGMuZGVidWc9cyxlPW1yKG5ldyBZbih0LHtoZWFkZXJzOnt9fSksJHIoKSk7cmV0dXJufWlmKGQoKSl0cnl7Zy5kYXRhLm1lc3NhZ2UudHlwZT09PXRlLkFzeW5jRXZlbnRzP3lpZWxkIHkoZy5kYXRhLm1lc3NhZ2UpOmcuZGF0YS5tZXNzYWdlLnR5cGU9PT10ZS5JZGVudGlmeT95aWVsZCB2KGcuZGF0YS5tZXNzYWdlKTpnLmRhdGEubWVzc2FnZS50eXBlPT09dGUuUHJvcGVydGllcz95aWVsZCBiKGcuZGF0YS5tZXNzYWdlKTpnLmRhdGEubWVzc2FnZS50eXBlPT09dGUuTWV0cmljcz95aWVsZCBtKGcuZGF0YS5tZXNzYWdlKTpnLmRhdGEubWVzc2FnZS50eXBlPT09dGUuRmVlZGJhY2smJih5aWVsZCBOKGcuZGF0YS5tZXNzYWdlKSksaT0wfWNhdGNoKEUpe3MmJmNvbnNvbGUuZXJyb3IoRSksaSs9MX19KX19fSkoKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGlnaGxpZ2h0LWNsaWVudC13b3JrZXItQkRSd0N1OU8uanMubWFwCg==",QX=r=>Uint8Array.from(atob(r),e=>e.charCodeAt(0)),Ub=typeof self!="undefined"&&self.Blob&&new Blob([QX(Mb)],{type:"text/javascript;charset=utf-8"});function Fb(r){let e;try{if(e=Ub&&(self.URL||self.webkitURL).createObjectURL(Ub),!e)throw"";const t=new Worker(e,{name:r==null?void 0:r.name});return t.addEventListener("error",()=>{(self.URL||self.webkitURL).revokeObjectURL(e)}),t}catch(t){return new Worker("data:text/javascript;base64,"+Mb,{name:r==null?void 0:r.name})}finally{e&&(self.URL||self.webkitURL).revokeObjectURL(e)}}var Le=(r=>(r[r.Initialize=0]="Initialize",r[r.AsyncEvents=1]="AsyncEvents",r[r.Identify=2]="Identify",r[r.Properties=3]="Properties",r[r.Metrics=4]="Metrics",r[r.Feedback=5]="Feedback",r[r.CustomEvent=6]="CustomEvent",r[r.Stop=7]="Stop",r))(Le||{});function $X(r){return"regexValue"in r}function qX(r){return"matchValue"in r}function ek(r){const e=Math.trunc(r);return e===1?!0:e===0?!1:Math.floor(Math.random()*e)===0}class Db{constructor(e=ek){v(this,"regexCache",new Map);v(this,"config");this.sampler=e}setConfig(e){this.config=e}isSamplingEnabled(){var e,t,n,i;return!!((t=(e=this.config)==null?void 0:e.logs)!=null&&t.length||(i=(n=this.config)==null?void 0:n.spans)!=null&&i.length)}shouldSample(e){var t,n;return e.name===Iy?this.sampleLog((t=this.config)==null?void 0:t.logs,e):this.sampleSpan((n=this.config)==null?void 0:n.spans,e)}matchesValue(e,t){if(!e)return!1;if(qX(e))return e.matchValue===t;if($X(e)){const n=e.regexValue;if(n===null)return!1;this.regexCache.has(n)||this.regexCache.set(n,new RegExp(n));const i=this.regexCache.get(n);if(typeof t=="string")return i.test(t)}return!1}matchesAttributes(e,t){if(e)for(const n of e){let i=!1;for(const s of Object.keys(t))if(this.matchesValue(n.key,s)){const o=t[s];if(this.matchesValue(n.attribute,o)){i=!0;break}}if(!i)return!1}return!0}matchEvent(e,t){return!(e.name&&!this.matchesValue(e.name,t.name)||e.attributes&&(!t.attributes||!this.matchesAttributes(e.attributes,t.attributes)))}matchesEvents(e,t){if(e)for(const n of e){let i=!1;for(const s of t)if(this.matchEvent(n,s)){i=!0;break}if(!i)return!1}return!0}matchesSpanConfig(e,t){return!(e.name&&!this.matchesValue(e.name,t.name)||!this.matchesAttributes(e.attributes,t.attributes)||!this.matchesEvents(e.events,t.events))}matchesLogConfig(e,t){if(e.severityText){const n=t[Ly];if(!this.matchesValue(e.severityText,n))return!1}if(e.message){const n=t[Oy];if(!this.matchesValue(e.message,n))return!1}return!!this.matchesAttributes(e.attributes,t)}sampleSpan(e,t){if(e){for(const n of e)if(this.matchesSpanConfig(n,t))return{sample:this.sampler(n.samplingRatio),attributes:{[Cy]:n.samplingRatio}}}return{sample:!0}}sampleLog(e,t){if(e){for(const n of e)if(this.matchesLogConfig(n,t.attributes))return{sample:this.sampler(n.samplingRatio),attributes:{[Cy]:n.samplingRatio}}}return{sample:!0}}}const Ei=(r,e)=>{console.warn(`Highlight Warning: (${r}): `,{output:e})};class Ju{constructor(e,t){v(this,"options");v(this,"isRunningOnHighlight");v(this,"organizationID");v(this,"graphqlSDK");v(this,"events");v(this,"sessionData");v(this,"ready");v(this,"manualStopped");v(this,"state");v(this,"logger");v(this,"enableSegmentIntegration");v(this,"privacySetting");v(this,"enableCanvasRecording");v(this,"enablePerformanceRecording");v(this,"samplingStrategy");v(this,"inlineImages");v(this,"inlineVideos");v(this,"inlineStylesheet");v(this,"debugOptions");v(this,"listeners");v(this,"firstloadVersion");v(this,"environment");v(this,"sessionShortcut");v(this,"appVersion");v(this,"serviceName");v(this,"_worker");v(this,"_optionsInternal");v(this,"_backendUrl");v(this,"_recordingStartTime");v(this,"_isOnLocalHost");v(this,"_onToggleFeedbackFormVisibility");v(this,"_firstLoadListeners");v(this,"_isCrossOriginIframe");v(this,"_eventBytesSinceSnapshot");v(this,"_lastSnapshotTime");v(this,"_lastVisibilityChangeTime");v(this,"pushPayloadTimerId");v(this,"hasSessionUnloaded");v(this,"hasPushedData");v(this,"reloaded");v(this,"_hasPreviouslyInitialized");v(this,"_recordStop");v(this,"_gauges",new Map);v(this,"_counters",new Map);v(this,"_histograms",new Map);v(this,"_up_down_counters",new Map);v(this,"_integrations",[]);var i,s,o,a,l;e.sessionSecureID||(e.sessionSecureID=lt()),this.options=e,typeof((i=this.options)==null?void 0:i.debug)=="boolean"?this.debugOptions=this.options.debug?{clientInteractions:!0}:{}:this.debugOptions=(o=(s=this.options)==null?void 0:s.debug)!=null?o:{},this.logger=new du(this.debugOptions.clientInteractions),e.storageMode&&(this.logger.log(`initializing in ${e.storageMode} session mode`),tg(e.storageMode)),uo(!!(e!=null&&e.sessionCookie)),this._worker=new Fb,this._worker.onmessage=c=>{var u,d,h;((u=c.data.response)==null?void 0:u.type)===Le.AsyncEvents?(this._eventBytesSinceSnapshot+=c.data.response.eventsSize,this.logger.log(`Web worker sent payloadID ${c.data.response.id} size ${c.data.response.eventsSize} bytes, compression ratio ${c.data.response.eventsSize/c.data.response.compressedSize}.
                Total since snapshot: ${(this._eventBytesSinceSnapshot/1e6).toFixed(1)}MB`)):((d=c.data.response)==null?void 0:d.type)===Le.CustomEvent?this.addCustomEvent(c.data.response.tag,c.data.response.payload):((h=c.data.response)==null?void 0:h.type)===Le.Stop&&(Ei("Stopping recording due to worker failure",c.data.response),this.stopRecording(!1))};let n=kt();if(this.reloaded=!1,!((a=this.sessionData)!=null&&a.sessionSecureID)&&(n!=null&&n.sessionSecureID))this.sessionData=n,this.options.sessionSecureID=n.sessionSecureID,this.reloaded=!0,this.logger.log(`Tab reloaded, continuing previous session: ${this.sessionData.sessionSecureID}`);else{for(const c of Object.values(_e))on(c);this.sessionData={sessionSecureID:this.options.sessionSecureID,projectID:0,sessionStartTime:Date.now()}}this._hasPreviouslyInitialized=!1,this._firstLoadListeners=t||new Pt(this.options);try{window.parent.document&&(this._isCrossOriginIframe=!1)}catch(c){this._isCrossOriginIframe=(l=this.options.recordCrossOriginIframe)!=null?l:!0}this._initMembers(this.options)}static create(e){return new Ju(e)}_reset(n){return D(this,arguments,function*({forceNew:e,sessionKey:t}){this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0);let i,s;if(!e)try{i=xe(_e.USER_IDENTIFIER);const o=xe(_e.USER_OBJECT);o&&(s=JSON.parse(o))}catch(o){}for(const o of Object.values(_e))on(o);this.sessionData.sessionSecureID=t?lt(`${this.organizationID}-${t}`):lt(),this.sessionData.sessionKey=t,this.sessionData.sessionStartTime=Date.now(),this.options.sessionSecureID=this.sessionData.sessionSecureID,this.stopRecording(),this._firstLoadListeners=new Pt(this.options),yield this.initialize(),i&&s&&this.identify(i,s)})}_initMembers(e){var s,o,a,l,c,u,d,h,f,m;this.sessionShortcut=!1,this._recordingStartTime=0,this._isOnLocalHost=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname==="",this.ready=!1,this.state="NotRecording",this.manualStopped=!1,this.enableSegmentIntegration=!!e.enableSegmentIntegration,this.privacySetting=(s=e.privacySetting)!=null?s:"default",this.enableCanvasRecording=(o=e.enableCanvasRecording)!=null?o:!1,this.enablePerformanceRecording=(a=e.enablePerformanceRecording)!=null?a:!0,this.inlineImages=(l=e.inlineImages)!=null?l:this._isOnLocalHost,this.inlineVideos=(c=e.inlineVideos)!=null?c:this._isOnLocalHost,this.inlineStylesheet=(u=e.inlineStylesheet)!=null?u:this._isOnLocalHost,this.samplingStrategy=S({canvasFactor:.5,canvasMaxSnapshotDimension:360,canvasClearWebGLBuffer:!0,dataUrlOptions:mp()},(d=e.samplingStrategy)!=null?d:{canvas:2}),this._backendUrl=(h=e==null?void 0:e.backendUrl)!=null?h:"https://pub.highlight.io",this._backendUrl[0]==="/"&&(this._backendUrl=new URL(this._backendUrl,document.baseURI).href);const t=new $o(`${this._backendUrl}`,{headers:{}});this.graphqlSDK=El(t,cu()),this.environment=(f=e.environment)!=null?f:"production",this.appVersion=e.appVersion,this.serviceName=(m=e.serviceName)!=null?m:"",typeof e.organizationID=="string"?this.organizationID=e.organizationID:this.organizationID=e.organizationID.toString(),this.isRunningOnHighlight=this.organizationID==="1"||this.organizationID==="1jdkoe52",this.firstloadVersion=e.firstloadVersion||"unknown",this.sessionShortcut=e.sessionShortcut||!1,this._onToggleFeedbackFormVisibility=()=>{};const p=e,{firstloadVersion:n}=p,i=We(p,["firstloadVersion"]);this._optionsInternal=i,this.listeners=[],this.events=[],this.hasSessionUnloaded=!1,this.hasPushedData=!1,window.Intercom&&window.Intercom("onShow",()=>{window.Intercom("update",{highlightSessionURL:this.getCurrentSessionURLWithTimestamp()}),this.addProperties({event:"Intercom onShow"})}),this._eventBytesSinceSnapshot=0,this._lastSnapshotTime=new Date().getTime(),this._lastVisibilityChangeTime=new Date().getTime()}identify(e,t={},n){if(!e||e===""){console.warn("Highlight's identify() call was passed an empty identifier.",{user_identifier:e,user_object:t});return}this.sessionData.userIdentifier=e.toString(),this.sessionData.userObject=t,rt(_e.USER_IDENTIFIER,e.toString()),rt(_e.USER_OBJECT,JSON.stringify(t)),this._worker.postMessage({message:{type:Le.Identify,userIdentifier:e,userObject:t,source:n}});for(const i of this._integrations)i.identify(this.sessionData.sessionSecureID,e,t,n)}log(e,t,n){this._firstLoadListeners.messages.push(Tp(t,Sp,e,n))}pushCustomError(e,t){return this.consumeCustomError(new Error(e),void 0,t)}consumeCustomError(e,t,n){let i={};if(n)try{i=S(S({},JSON.parse(n)),i)}catch(s){}return this.consumeError(e,{message:t,payload:i})}consumeError(e,{message:t,payload:n,source:i,type:s}){var c,u,d,h;e.cause&&(n=W(S({},n),{"exception.cause":e.cause}));let o=t?t+":"+e.message:e.message;s==="React.ErrorBoundary"&&(o="ErrorBoundary: "+o);const a=Fn(e),l={event:o,type:s!=null?s:"custom",url:window.location.href,source:i!=null?i:"",lineNumber:(c=a[0])!=null&&c.lineNumber?(u=a[0])==null?void 0:u.lineNumber:0,columnNumber:(d=a[0])!=null&&d.columnNumber?(h=a[0])==null?void 0:h.columnNumber:0,stackTrace:a,timestamp:new Date().toISOString(),payload:JSON.stringify(n),id:Ps()};this._firstLoadListeners.errors.push(l);for(const f of this._integrations)f.error(this.sessionData.sessionSecureID,l)}addProperties(e={},t){const n=S({},e);Object.entries(n).forEach(([i,s])=>{try{structuredClone(s)}catch(o){delete n[i]}}),this._worker.postMessage({message:{type:Le.Properties,propertiesObject:n,propertyType:t}});for(const i of this._integrations)i.track(this.sessionData.sessionSecureID,S({sessionSecureID:this.sessionData.sessionSecureID,propertyType:t},e))}initialize(e){return D(this,null,function*(){var t,n,i,s,o,a,l,c,u,d,h,f,m,p,g,y,E,T,I,R,N,V,Z,w,L,A,P;if(navigator!=null&&navigator.webdriver&&!window.Cypress||(t=navigator==null?void 0:navigator.userAgent)!=null&&t.includes("Googlebot")||(n=navigator==null?void 0:navigator.userAgent)!=null&&n.includes("AdsBot")){(i=this._firstLoadListeners)==null||i.stopListening();return}try{if(e!=null&&e.forceNew){yield this._reset(e);return}if(e!=null&&e.sessionKey&&(e==null?void 0:e.sessionKey)!==this.sessionData.sessionKey){yield this._reset(W(S({},e),{forceNew:!0}));return}const Q=new Db;Zy({backendUrl:(o=(s=this.options)==null?void 0:s.backendUrl)!=null?o:"https://pub.highlight.io",otlpEndpoint:(l=(a=this.options)==null?void 0:a.otlpEndpoint)!=null?l:"https://otel.highlight.io",projectId:(c=this.options)==null?void 0:c.organizationID,sessionSecureId:(u=this.options)==null?void 0:u.sessionSecureID,environment:(h=(d=this.options)==null?void 0:d.environment)!=null?h:"production",networkRecordingOptions:typeof((f=this.options)==null?void 0:f.networkRecording)=="object"?this.options.networkRecording:void 0,tracingOrigins:(m=this.options)==null?void 0:m.tracingOrigins,serviceName:(g=(p=this.options)==null?void 0:p.serviceName)!=null?g:"highlight-browser",instrumentations:(E=(y=this.options)==null?void 0:y.otel)==null?void 0:E.instrumentations,eventNames:(I=(T=this.options)==null?void 0:T.otel)==null?void 0:I.eventNames,getIntegrations:()=>[...this._integrations]},Q),this._gauges.clear(),this._counters.clear(),this._histograms.clear(),this._up_down_counters.clear(),this.logger.log("Initializing...",e,this.sessionData,this.options),this.sessionData=(R=kt(this.sessionData.sessionSecureID))!=null?R:this.sessionData,(N=this.sessionData)!=null&&N.sessionStartTime?this._recordingStartTime=(V=this.sessionData)==null?void 0:V.sessionStartTime:(this._recordingStartTime=new Date().getTime(),this.sessionData.sessionStartTime=this._recordingStartTime),$t(""),nt(this.sessionData);let b=xe(ui.CLIENT_ID);b||(b=lt(),rt(ui.CLIENT_ID,b));let _;this.options.disableSessionRecording||this.options.disableNetworkRecording!==void 0||typeof this.options.networkRecording=="boolean"?_=!1:_=((Z=this.options.networkRecording)==null?void 0:Z.recordHeadersAndBody)||!1;let x=[];if(typeof this.options.networkRecording=="object"&&((w=this.options.networkRecording.destinationDomains)!=null&&w.length)&&(x=this.options.networkRecording.destinationDomains),this._isCrossOriginIframe)yield this._setupCrossOriginIframe();else{const le=yield this.graphqlSDK.initializeSession({organization_verbose_id:this.organizationID,enable_strict_privacy:this.privacySetting==="strict",privacy_setting:this.privacySetting,enable_recording_network_contents:_,clientVersion:this.firstloadVersion,firstloadVersion:this.firstloadVersion,clientConfig:JSON.stringify(this._optionsInternal),environment:this.environment,id:b,appVersion:this.appVersion,serviceName:this.serviceName,session_secure_id:this.sessionData.sessionSecureID,session_key:this.sessionData.sessionKey,client_id:b,network_recording_domains:x,disable_session_recording:this.options.disableSessionRecording});if(le.initializeSession.secure_id!==this.sessionData.sessionSecureID&&this.logger.log(`Unexpected secure id returned by initializeSession: ${le.initializeSession.secure_id}, expected ${this.sessionData.sessionSecureID}`),this.sessionData.sessionSecureID=le.initializeSession.secure_id,this.sessionData.projectID=parseInt(((L=le==null?void 0:le.initializeSession)==null?void 0:L.project_id)||"0"),Q.setConfig(le.initializeSession.sampling),!this.sessionData.projectID||!this.sessionData.sessionSecureID){console.error("Failed to initialize Highlight; an error occurred on our end.",this.sessionData);return}}this.logger.log(`Loaded Highlight
Remote: ${this._backendUrl}
Project ID: ${this.sessionData.projectID}
SessionSecureID: ${this.sessionData.sessionSecureID}`),this.options.sessionSecureID=this.sessionData.sessionSecureID,this._worker.postMessage({message:{type:Le.Initialize,sessionSecureID:this.sessionData.sessionSecureID,backend:this._backendUrl,debug:!!this.debugOptions.clientInteractions,recordingStartTime:this._recordingStartTime}});for(const le of this._integrations)le.init(this.sessionData.sessionSecureID);if(this.sessionData.userIdentifier&&this.identify(this.sessionData.userIdentifier,this.sessionData.userObject),this._firstLoadListeners.isListening()?this._firstLoadListeners.hasNetworkRecording||Pt.setupNetworkListener(this._firstLoadListeners,this.options):this._firstLoadListeners.startListening(),this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0),this._isCrossOriginIframe||(this.pushPayloadTimerId=setTimeout(()=>{this._save()},so)),this.options.disableSessionRecording){this.logger.log("Highlight is NOT RECORDING a session replay per H.init setting."),this.ready=!0,this.state="Recording",this.manualStopped=!1;return}const{getDeviceDetails:F}=Ib();F&&this.recordGauge({name:ze.DeviceMemory,value:F().deviceMemory,category:Se.Device,group:window.location.href});const J=(le,Oe)=>{Oe&&this.logger.log("received isCheckout emit",{event:le}),this.events.push(le)};J.bind(this);const M=!!this._recordStop;this._recordStop&&(this._recordStop(),this._recordStop=void 0);const[se,re]=Wy(this.privacySetting);this._recordStop=tt({ignoreClass:(A=this.options.ignoreClass)!=null?A:"highlight-ignore",ignoreSelector:this.options.ignoreSelector,blockClass:(P=this.options.blockClass)!=null?P:"highlight-block",blockSelector:this.options.blockSelector,emit:J,recordCrossOriginIframes:this.options.recordCrossOriginIframe,privacySetting:this.privacySetting,maskAllInputs:se,maskInputOptions:re,maskTextClass:this.options.maskTextClass,maskTextSelector:this.options.maskTextSelector,recordCanvas:this.enableCanvasRecording,sampling:{canvas:{fps:this.samplingStrategy.canvas,fpsManual:this.samplingStrategy.canvasManualSnapshot,resizeFactor:this.samplingStrategy.canvasFactor,clearWebGLBuffer:this.samplingStrategy.canvasClearWebGLBuffer,initialSnapshotDelay:this.samplingStrategy.canvasInitialSnapshotDelay,dataURLOptions:this.samplingStrategy.dataUrlOptions,maxSnapshotDimension:this.samplingStrategy.canvasMaxSnapshotDimension}},keepIframeSrcFn:le=>!this.options.recordCrossOriginIframe,inlineImages:this.inlineImages,inlineVideos:this.inlineVideos,collectFonts:this.inlineImages,inlineStylesheet:this.inlineStylesheet,plugins:[$e()],logger:typeof this.options.debug=="boolean"&&this.options.debug||typeof this.options.debug=="object"&&this.options.debug.domRecording?{debug:this.logger.log,warn:Ei}:void 0}),M||this.options.recordCrossOriginIframe&&this._setupCrossOriginIframeParent(),document.referrer&&(window&&document.referrer.includes(window.location.origin)||(this.addCustomEvent("Referrer",document.referrer),this.addProperties({referrer:document.referrer},{type:"session"}))),this.sessionData.sessionKey&&this.addProperties({sessionKey:this.sessionData.sessionKey},{type:"session"}),this._setupWindowListeners(),this.ready=!0,this.state="Recording",this.manualStopped=!1}catch(Q){this._isOnLocalHost&&(console.error(Q),Ei("initializeSession",Q))}})}_visibilityHandler(e){return D(this,null,function*(){if(this.manualStopped){this.logger.log("Ignoring visibility event due to manual stop.");return}new Date().getTime()-this._lastVisibilityChangeTime<qm||(this._lastVisibilityChangeTime=new Date().getTime(),this.logger.log(`Detected window ${e?"hidden":"visible"}.`),e?(this.addCustomEvent("TabHidden",!0),this.options.disableBackgroundRecording&&this.stopRecording()):(this.options.disableBackgroundRecording&&(yield this.initialize()),this.addCustomEvent("TabHidden",!1)))})}_setupCrossOriginIframe(){return D(this,null,function*(){this.logger.log("highlight in cross-origin iframe is waiting "),yield new Promise(e=>{const t=n=>{if(n.data.highlight===Xo){const i=n.data;this.logger.log("highlight got window message ",i),this.sessionData.projectID=i.projectID,this.sessionData.sessionSecureID=i.sessionSecureID,window.parent.postMessage({highlight:ko},"*"),window.removeEventListener("message",t),e()}};window.addEventListener("message",t)})})}_setupCrossOriginIframeParent(){this.logger.log("highlight setting up cross origin iframe parent notification"),setInterval(()=>{window.document.querySelectorAll("iframe").forEach(e=>{var t;(t=e.contentWindow)==null||t.postMessage({highlight:Xo,projectID:this.sessionData.projectID,sessionSecureID:this.sessionData.sessionSecureID},"*")})},so),window.addEventListener("message",e=>{e.data.highlight===ko&&this.logger.log("highlight got response from initialized iframe")})}_setupWindowListeners(){var n;try{const i=this;this.enableSegmentIntegration&&this.listeners.push($y(o=>{if(o.type==="track"){const a={};a["segment-event"]=o.event,i.addProperties(a,{type:"track",source:"segment"})}else if(o.type==="identify"){const a=o.userId.replace(/^"(.*)"$/,"$1");i.identify(a,o.traits,"segment")}})),this.listeners.push(ky(o=>{this.reloaded?(this.addCustomEvent("Reload",o),this.reloaded=!1,i.addProperties({reload:!0},{type:"session"})):this.addCustomEvent("Navigate",o)})),this.listeners.push(Ru(o=>{this.addCustomEvent("Viewport",o),this.submitViewportMetrics(o)})),this.listeners.push(Hy((o,a)=>{let l=null,c=null;if(a&&a.target){const u=a.target;l=bu(u),c=u.textContent,c&&c.length>2e3&&(c=c.substring(0,2e3))}this.addCustomEvent("Click",{clickTarget:o,clickTextContent:c,clickSelector:l})})),this.listeners.push(By(o=>{o&&this.addCustomEvent("Focus",o)})),this.listeners.push(Tb(o=>{const{name:a,value:l}=o;this.recordGauge({name:a,value:l,group:window.location.href,category:Se.WebVital})})),this.listeners.push(Eb(o=>{const a=[];o.saveData!==void 0&&a.push({name:"saveData",value:o.saveData.toString()}),o.effectiveType!==void 0&&a.push({name:"effectiveType",value:o.effectiveType.toString()}),o.type!==void 0&&a.push({name:"type",value:o.type.toString()}),Object.entries(o).forEach(([l,c])=>{gp(c)&&this.recordGauge({name:l,value:c,category:Se.Performance,group:window.location.href,tags:a})})},this._recordingStartTime)),this.sessionShortcut&&eb(this.sessionShortcut,()=>{window.open(this.getCurrentSessionURLWithTimestamp(),"_blank")}),this.enablePerformanceRecording&&(this.listeners.push(Qy(o=>{this.addCustomEvent("Performance",dt(o)),Object.entries(o).filter(([a])=>a!=="relativeTimestamp").forEach(([a,l])=>l&&this.recordGauge({name:a,value:l,category:Se.Performance,group:window.location.href}))},this._recordingStartTime)),this.listeners.push(Ky(o=>{this.addCustomEvent("Jank",dt(o)),this.recordGauge({name:"Jank",value:o.jankAmount,category:Se.WebVital,group:o.querySelector})},this._recordingStartTime))),this._hasPreviouslyInitialized||((n=window.electron)!=null&&n.ipcRenderer?(window.electron.ipcRenderer.on("highlight.run",({visible:o})=>{this._visibilityHandler(!o)}),this.logger.log("Set up Electron highlight.run events.")):(zy(o=>this._visibilityHandler(o)),this.logger.log("Set up document visibility listener.")),this._hasPreviouslyInitialized=!0);const s=()=>{this.hasSessionUnloaded=!0,this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0)};window.addEventListener("beforeunload",s),this.listeners.push(()=>window.removeEventListener("beforeunload",s))}catch(i){this._isOnLocalHost&&(console.error(i),Ei("initializeSession _setupWindowListeners",i))}const e=()=>{this.addCustomEvent("Page Unload",""),$t(this.sessionData.sessionSecureID),nt(this.sessionData)};if(window.addEventListener("beforeunload",e),this.listeners.push(()=>window.removeEventListener("beforeunload",e)),navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i)){const i=()=>{this.addCustomEvent("Page Unload",""),$t(this.sessionData.sessionSecureID),nt(this.sessionData)};window.addEventListener("pagehide",i),this.listeners.push(()=>window.removeEventListener("beforeunload",i))}}submitViewportMetrics({height:e,width:t,availHeight:n,availWidth:i}){this.recordGauge({name:ze.ViewportHeight,value:e,category:Se.Device,group:window.location.href}),this.recordGauge({name:ze.ViewportWidth,value:t,category:Se.Device,group:window.location.href}),this.recordGauge({name:ze.ScreenHeight,value:n,category:Se.Device,group:window.location.href}),this.recordGauge({name:ze.ScreenWidth,value:i,category:Se.Device,group:window.location.href}),this.recordGauge({name:ze.ViewportArea,value:e*t,category:Se.Device,group:window.location.href})}recordGauge(e){var n,i;let t=this._gauges.get(e.name);if(!t){if(t=(n=tr())==null?void 0:n.createGauge(e.name),!t)return;this._gauges.set(e.name,t)}t.record(e.value,W(S({},(i=e.tags)==null?void 0:i.reduce((s,o)=>W(S({},s),{[o.name]:o.value}),{})),{group:e.group,category:e.category,"highlight.session_id":this.sessionData.sessionSecureID}));for(const s of this._integrations)s.recordGauge(this.sessionData.sessionSecureID,e)}recordCount(e){var n,i;let t=this._counters.get(e.name);if(!t){if(t=(n=tr())==null?void 0:n.createCounter(e.name),!t)return;this._counters.set(e.name,t)}t.add(e.value,W(S({},(i=e.tags)==null?void 0:i.reduce((s,o)=>W(S({},s),{[o.name]:o.value}),{})),{group:e.group,category:e.category,"highlight.session_id":this.sessionData.sessionSecureID}))}recordIncr(e){this.recordCount(W(S({},e),{value:1}))}recordHistogram(e){var n,i;let t=this._histograms.get(e.name);if(!t){if(t=(n=tr())==null?void 0:n.createHistogram(e.name),!t)return;this._histograms.set(e.name,t)}t.record(e.value,W(S({},(i=e.tags)==null?void 0:i.reduce((s,o)=>W(S({},s),{[o.name]:o.value}),{})),{group:e.group,category:e.category,"highlight.session_id":this.sessionData.sessionSecureID}))}recordUpDownCounter(e){var n,i;let t=this._up_down_counters.get(e.name);if(!t){if(t=(n=tr())==null?void 0:n.createUpDownCounter(e.name),!t)return;this._up_down_counters.set(e.name,t)}t.add(e.value,W(S({},(i=e.tags)==null?void 0:i.reduce((s,o)=>W(S({},s),{[o.name]:o.value}),{})),{group:e.group,category:e.category,"highlight.session_id":this.sessionData.sessionSecureID}))}stopRecording(e){this.manualStopped=!!e,this.manualStopped&&this.addCustomEvent("Stop","H.stop() was called which stops Highlight from recording."),this.state="NotRecording",e&&this._recordStop&&(this._recordStop(),this._recordStop=void 0),this.listeners.forEach(t=>t()),this.listeners=[],gu()}getCurrentSessionTimestamp(){return this._recordingStartTime}getCurrentSessionURLWithTimestamp(){const e=new Date().getTime(),{projectID:t,sessionSecureID:n}=this.sessionData,i=(e-this._recordingStartTime)/1e3;return`https://${ci}/${t}/sessions/${n}?ts=${i}`}getCurrentSessionURL(){const e=this.sessionData.projectID,t=this.sessionData.sessionSecureID;return e&&t?`https://${ci}/${e}/sessions/${t}`:null}snapshot(e){return D(this,null,function*(){yield tt.snapshotCanvas(e)})}addSessionFeedback({timestamp:e,verbatim:t,user_email:n,user_name:i}){var s;this._worker.postMessage({message:{type:Le.Feedback,verbatim:t,timestamp:e,userName:i||this.sessionData.userIdentifier,userEmail:n||((s=this.sessionData.userObject)==null?void 0:s.name)}})}_save(){return D(this,null,function*(){var e;try{this.state==="Recording"&&this.listeners&&!this.sessionData.sessionKey&&this.sessionData.sessionStartTime&&Date.now()-this.sessionData.sessionStartTime>$m&&(this.logger.log("Resetting session",{start:this.sessionData.sessionStartTime}),yield this._reset({}));let t;((e=this.options)==null?void 0:e.sendMode)==="local"&&(t=n=>D(this,null,function*(){let i=new Blob([JSON.stringify({query:Bo(Tl),variables:n})],{type:"application/json"});return yield window.fetch(`${this._backendUrl}`,{method:"POST",body:i}),0})),yield this._sendPayload({sendFn:t}),this.hasPushedData=!0,this.sessionData.lastPushTime=Date.now(),nt(this.sessionData)}catch(t){this._isOnLocalHost&&(console.error(t),Ei("_save",t))}this.state==="Recording"&&(this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0),this.pushPayloadTimerId=setTimeout(()=>{this._save()},Qm))})}addCustomEvent(e,t){if(this.state==="NotRecording"){let n;const i=()=>{clearInterval(n),this.state==="Recording"&&this.events.length>0?Xs(e,t):n=setTimeout(i,500)};n=setTimeout(i,500)}else this.state==="Recording"&&(this.events.length>0||this.hasPushedData)&&Xs(e,t)}_sendPayload(t){return D(this,arguments,function*({sendFn:e}){const n=Pt.getRecordedNetworkResources(this._firstLoadListeners,this._recordingStartTime),i=Pt.getRecordedWebSocketEvents(this._firstLoadListeners),s=[...this.events],o=[...this._firstLoadListeners.messages],a=[...this._firstLoadListeners.errors],{bytes:l,time:c}=this.enableCanvasRecording?oo.canvas:oo.normal;this._eventBytesSinceSnapshot>=l&&new Date().getTime()-this._lastSnapshotTime>=c&&this.takeFullSnapshot(),this.logger.log(`Sending: ${s.length} events, ${o.length} messages, ${n.length} network resources, ${a.length} errors 
To: ${this._backendUrl}
Org: ${this.organizationID}
SessionSecureID: ${this.sessionData.sessionSecureID}`);const u=new Date().getTime(),d=wb();if(e){const h={session_secure_id:this.sessionData.sessionSecureID,payload_id:u.toString(),events:{events:s},messages:dt({messages:o}),resources:JSON.stringify({resources:n}),web_socket_events:JSON.stringify({webSocketEvents:i}),errors:a,is_beacon:!1,has_session_unloaded:this.hasSessionUnloaded,highlight_logs:d||void 0},{compressedBase64:f}=yield Pb(h);yield e({session_secure_id:this.sessionData.sessionSecureID,payload_id:new Date().getTime().toString(),data:f})}else this._worker.postMessage({message:{type:Le.AsyncEvents,id:u,events:s,messages:o,errors:a,resourcesString:JSON.stringify({resources:n}),webSocketEventsString:JSON.stringify({webSocketEvents:i}),hasSessionUnloaded:this.hasSessionUnloaded,highlightLogs:d}});nt(this.sessionData),Pt.clearRecordedNetworkResources(this._firstLoadListeners),this.events=this.events.slice(s.length),this._firstLoadListeners.messages=this._firstLoadListeners.messages.slice(o.length),this._firstLoadListeners.errors=this._firstLoadListeners.errors.slice(a.length),Rb(d)})}takeFullSnapshot(){if(!this._recordStop){this.logger.log("skipping full snapshot as rrweb is not running");return}this.logger.log("taking full snapshot",{bytesSinceSnapshot:this._eventBytesSinceSnapshot,lastSnapshotTime:this._lastSnapshotTime}),tt.takeFullSnapshot(),this._eventBytesSinceSnapshot=0,this._lastSnapshotTime=new Date().getTime()}registerLD(e){this._integrations.length||this._integrations.push(new wo(e))}}const Jb=({apiKey:r})=>{(function(e,t){var n=e.amplitude||{_q:[],_iq:{}},i=t.createElement("script");i.type="text/javascript",i.integrity="sha384-+EO59vL/X7v6VE2s6/F4HxfHlK0nDUVWKVg8K9oUlvffAeeaShVBmbORTC2D3UF+",i.crossOrigin="anonymous",i.async=!0,i.src="https://cdn.amplitude.com/libs/amplitude-8.17.0-min.gz.js",i.onload=function(){e.amplitude.runQueuedFunctions||console.log("[Amplitude] Error: could not load SDK"),amplitude.getInstance().init(r)};var s=t.getElementsByTagName("script")[0];s.parentNode.insertBefore(i,s);function o(p,g){p.prototype[g]=function(){return this._q.push([g].concat(Array.prototype.slice.call(arguments,0))),this}}for(var a=function(){return this._q=[],this},l=["add","append","clearAll","prepend","set","setOnce","unset","preInsert","postInsert","remove"],c=0;c<l.length;c++)o(a,l[c]);n.Identify=a;for(var u=function(){return this._q=[],this},d=["setProductId","setQuantity","setPrice","setRevenueType","setEventProperties"],h=0;h<d.length;h++)o(u,d[h]);n.Revenue=u;var f=["init","logEvent","logRevenue","setUserId","setUserProperties","setOptOut","setVersionName","setDomain","setDeviceId","enableTracking","setGlobalUserProperties","identify","clearUserProperties","setGroup","logRevenueV2","regenerateDeviceId","groupIdentify","onInit","logEventWithTimestamp","logEventWithGroups","setSessionId","resetSessionId"];function m(p){function g(E){p[E]=function(){p._q.push([E].concat(Array.prototype.slice.call(arguments,0)))}}for(var y=0;y<f.length;y++)g(f[y])}m(n),n.getInstance=function(p){return p=(!p||p.length===0?"$default_instance":p).toLowerCase(),Object.prototype.hasOwnProperty.call(n._iq,p)||(n._iq[p]={_q:[]},m(n._iq[p])),n._iq[p]},e.amplitude=n})(window,document)},Yb=({projectToken:r})=>{if(window.mixpanel)return;(function(t,n){if(!n.__SV){var i,s;window.mixpanel=n,n._i=[],n.init=function(o,a,l){function c(h,f){var m=f.split(".");m.length==2&&(h=h[m[0]],f=m[1]),h[f]=function(){h.push([f].concat(Array.prototype.slice.call(arguments,0)))}}var u=n;for(typeof l!="undefined"?u=n[l]=[]:l="mixpanel",u.people=u.people||[],u.toString=function(h){var f="mixpanel";return l!=="mixpanel"&&(f+="."+l),h||(f+=" (stub)"),f},u.people.toString=function(){return u.toString(1)+".people (stub)"},i="disable time_event track track_pageview track_links track_forms track_with_groups add_group set_group remove_group register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking start_batch_senders people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user people.remove".split(" "),s=0;s<i.length;s++)c(u,i[s]);var d="set set_once union unset remove delete".split(" ");u.get_group=function(){function h(g){f[g]=function(){call2_args=arguments,call2=[g].concat(Array.prototype.slice.call(call2_args,0)),u.push([m,call2])}}for(var f={},m=["get_group"].concat(Array.prototype.slice.call(arguments,0)),p=0;p<d.length;p++)h(d[p]);return f},n._i.push([o,a,l])},n.__SV=1.2}})(document,window.mixpanel||[]);const e=document.createElement("script");e.src=tk,document.head.appendChild(e),e.addEventListener("load",()=>{var t;(t=window.mixpanel)==null||t.init(r)})},tk="https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js",rk=()=>{var r,e;typeof chrome!="undefined"&&((r=chrome==null?void 0:chrome.runtime)!=null&&r.onMessage)&&((e=chrome==null?void 0:chrome.runtime)==null||e.onMessage.addListener((t,n,i)=>{const s=t.action;switch(console.log(`[highlight] received '${s}' event from extension.`),s){case"init":{ae.init(1,{debug:!0}),ae.getSessionURL().then(o=>{i({url:o})});break}case"stop":{ae.stop(),i({success:!0});break}}return!0}))};function nk(r){var e;r.on&&((e=r.webContents)!=null&&e.send)&&(r.on("focus",()=>{r.webContents.send("highlight.run",{visible:!0})}),r.on("blur",()=>{r.webContents.send("highlight.run",{visible:!1})}),r.on("close",()=>{r.webContents.send("highlight.run",{visible:!1})}))}const ik=({next:r,payload:e})=>{if(typeof window!="undefined"&&typeof document!="undefined"&&"H"in window){if(e.obj.type==="track"){const t=e.obj.event,n=e.obj.properties;window.H.track(t,n)}else if(e.obj.type==="identify"){const t=e.obj.userId;if(t!=null&&t.length){const n=e.obj.traits;window.H.identify(t,n)}}}r(e)},Hb=()=>{if(typeof window!="undefined"){if(typeof window._highlightFetchPatch!="undefined")return;window._originalFetch=window.fetch,window._fetchProxy=(r,e)=>window._originalFetch(r,e),window._highlightFetchPatch=(r,e)=>window._fetchProxy.call(window||global,r,e),window.fetch=window._highlightFetchPatch}},Bb=()=>null,Kb=()=>{if(typeof window!="undefined"){if(typeof window._highlightWebSocketRequestCallback!="undefined")return;window._highlightWebSocketRequestCallback=Bb,window._highlightWebSocketEventCallback=Bb;const r=new Proxy(window.WebSocket,{construct(e,t){const[,n]=Pc(),i=new e(...t),s=u=>{window._highlightWebSocketRequestCallback({socketId:n,initiatorType:"websocket",type:"open",name:i.url,startTimeAbs:performance.timeOrigin+u.timeStamp})},o=u=>{window._highlightWebSocketRequestCallback({socketId:n,initiatorType:"websocket",type:"close",name:i.url,responseEndAbs:performance.timeOrigin+u.timeStamp}),i.removeEventListener("open",s),i.removeEventListener("error",l),i.removeEventListener("message",a),i.removeEventListener("close",o)},a=u=>{const{data:d}=u,h=typeof d=="string"?u.data:void 0;let f;typeof d=="string"?f=d.length:d instanceof Blob?f=d.size:f=d.byteLength||0,window._highlightWebSocketEventCallback({socketId:n,type:"received",name:i.url,timeStamp:performance.timeOrigin+u.timeStamp,size:f,message:h})},l=u=>{window._highlightWebSocketEventCallback({socketId:n,type:"error",name:i.url,timeStamp:performance.timeOrigin+u.timeStamp,size:0})};i.addEventListener("open",s),i.addEventListener("error",l),i.addEventListener("message",a),i.addEventListener("close",o);const c=new Proxy(i.send,{apply:function(u,d,h){const f=h[0],m=typeof f=="string"?f:void 0;let p;typeof f=="string"?p=f.length:f instanceof Blob?p=f.size:p=f.byteLength||0,window._highlightWebSocketEventCallback({socketId:n,type:"sent",name:i.url,timeStamp:performance.timeOrigin+performance.now(),size:p,message:m}),u.apply(d,h)}});return i.send=c,i}});window.WebSocket=r}},Ao=()=>{const r={end:()=>{},spanContext:()=>({traceId:"",spanId:"",traceFlags:0}),setAttribute:(e,t)=>r,setAttributes:e=>r,addEvent:(e,t,n)=>r,addLinks:e=>r,setStatus:e=>r,recordException:()=>{},addLink:()=>r,updateName:()=>r,isRecording:()=>!1};return r},sk="exception",ok=function(r,e,t){if(!r)return;const n=S({},t);typeof e=="string"?n[wc]=e:e&&(e.code?n[Rc]=e.code.toString():e.name&&(n[Rc]=e.name),e.message&&(n[wc]=e.message),e.stack&&(n[sZ]=e.stack)),n[Rc]||n[wc]?r.addEvent(sk,n):Qt("otel","recordException","warn",`Failed to record an exception ${e}`)};class ak{constructor(e){v(this,"organizationID");v(this,"_options");v(this,"_integrations",[]);v(this,"_gauges",new Map);v(this,"_counters",new Map);v(this,"_histograms",new Map);v(this,"_up_down_counters",new Map);v(this,"sampler",new Db);v(this,"_started",!1);v(this,"graphqlSDK");this._options=e,this.organizationID=e.projectId}start(){return D(this,null,function*(){var t,n,i,s,o,a,l,c,u,d,h,f,m,p,g,y,E;if(this._started)return;this._started=!0,Zy({backendUrl:(n=(t=this._options)==null?void 0:t.backendUrl)!=null?n:"https://pub.observability.app.launchdarkly.com",otlpEndpoint:(o=(s=(i=this._options)==null?void 0:i.otel)==null?void 0:s.otlpEndpoint)!=null?o:"https://otel.observability.app.launchdarkly.com",projectId:this._options.projectId,sessionSecureId:this._options.sessionSecureId,environment:(l=(a=this._options)==null?void 0:a.environment)!=null?l:"production",networkRecordingOptions:typeof((c=this._options)==null?void 0:c.networkRecording)=="object"?this._options.networkRecording:void 0,tracingOrigins:(u=this._options)==null?void 0:u.tracingOrigins,serviceName:(h=(d=this._options)==null?void 0:d.serviceName)!=null?h:"browser",serviceVersion:(f=this._options)==null?void 0:f.version,instrumentations:(p=(m=this._options)==null?void 0:m.otel)==null?void 0:p.instrumentations,eventNames:(y=(g=this._options)==null?void 0:g.otel)==null?void 0:y.eventNames,getIntegrations:()=>this._integrations},this.sampler),this._gauges.clear(),this._counters.clear(),this._histograms.clear(),this._up_down_counters.clear();const e=new $o((E=this._options.backendUrl)!=null?E:"https://pub.observability.app.launchdarkly.com",{headers:{}});this.graphqlSDK=El(e,cu()),yield this.configureSampling(),this.setupListeners()})}stop(){return D(this,null,function*(){this._started&&(this._started=!1,yield gu())})}configureSampling(){return D(this,null,function*(){try{const e=yield this.graphqlSDK.GetSamplingConfig({organization_verbose_id:`${this.organizationID}`});this.sampler.setConfig(e.sampling)}catch(e){Ve("sampling","warn",`LaunchDarkly Observability: Failed to configure sampling: ${e}`)}})}_recordLog(e,t,n,i){this.startSpan(Iy,s=>{const o=typeof e=="string"?e:dt(e),a=i?dt(i.map(l=>l.toString())):void 0;if(s==null||s.addEvent("log",S({[Ly]:t,[Oy]:o,"code.stacktrace":a},n)),this._options.reportConsoleErrors&&t==="error"){s==null||s.recordException(new Error(o)),s==null||s.setStatus({code:Ds.ERROR,message:o});const l=new Error(o);i&&(l.stack=a),this.recordError(l)}})}_recordErrorMessage(e,t){try{e.payload&&(t=S(S({},JSON.parse(e.payload)),t||{}))}catch(o){}this.startSpan("highlight.exception",o=>{var a;ok(o,(a=e.error)!=null?a:new Error(e.event),{[U1]:e.id}),o==null||o.setAttributes(S({event:e.event,type:e.type,url:e.url,source:e.source,lineNumber:e.lineNumber,columnNumber:e.columnNumber},t))});const s=e,{payload:n}=s,i=We(s,["payload"]);for(const o of this._integrations)o.error(Xt(),W(S({},i),{payload:JSON.stringify(t)}))}recordError(e,t,n,i,s){var c,u,d,h;e=e||new Error("Unknown error"),e instanceof Error&&e.cause&&(n=W(S({},n),{"exception.cause":JSON.stringify(e.cause)}));let o=t?t+":"+e.message:e.message;s==="React.ErrorBoundary"&&(o="ErrorBoundary: "+o);const a=Fn(e),l={error:e,event:o,type:s!=null?s:"custom",url:window.location.href,source:i!=null?i:"frontend",lineNumber:(c=a[0])!=null&&c.lineNumber?(u=a[0])==null?void 0:u.lineNumber:0,columnNumber:(d=a[0])!=null&&d.columnNumber?(h=a[0])==null?void 0:h.columnNumber:0,stackTrace:a,timestamp:new Date().toISOString(),id:Ps()};this._recordErrorMessage(l,n)}recordCount(e){var n;let t=this._counters.get(e.name);if(!t){if(t=(n=tr())==null?void 0:n.createCounter(e.name),!t)return;this._counters.set(e.name,t)}t.add(e.value,W(S({},e.attributes),{"highlight.session_id":Xt()}))}recordGauge(e){var i,s,o,a;let t=this._gauges.get(e.name);if(!t){if(t=(i=tr())==null?void 0:i.createGauge(e.name),!t)return;this._gauges.set(e.name,t)}t.record(e.value,W(S({},e.attributes),{"highlight.session_id":Xt()}));const n={name:e.name,value:e.value,category:(s=e.attributes)==null?void 0:s.category,group:(a=(o=e.attributes)==null?void 0:o.group)==null?void 0:a.toString(),tags:e.attributes?Object.entries(e.attributes).map(([l,c])=>{var u;return{name:l!=null?l:"",value:(u=c==null?void 0:c.toString())!=null?u:""}}):[]};for(const l of this._integrations)l.recordGauge(Xt(),n)}recordIncr(e){this.recordCount(W(S({},e),{value:1}))}recordHistogram(e){var n;let t=this._histograms.get(e.name);if(!t){if(t=(n=tr())==null?void 0:n.createHistogram(e.name),!t)return;this._histograms.set(e.name,t)}t.record(e.value,W(S({},e.attributes),{"highlight.session_id":Xt()}))}recordUpDownCounter(e){var n;let t=this._up_down_counters.get(e.name);if(!t){if(t=(n=tr())==null?void 0:n.createUpDownCounter(e.name),!t)return;this._up_down_counters.set(e.name,t)}t.add(e.value,W(S({},e.attributes),{"highlight.session_id":Xt()}))}startSpan(e,t,n,i){const s=Io();if(!s){const a=Ao();return i===void 0&&n===void 0?t(a):i===void 0?n(a):i(a)}const o=(a,l)=>{const c=l(a);return c instanceof Promise?c.finally(()=>a.end()):(a.end(),c)};return i===void 0&&n===void 0?s.startActiveSpan(e,a=>o(a,t)):i===void 0?s.startActiveSpan(e,t,a=>o(a,n)):s.startActiveSpan(e,t,n,a=>o(a,i))}startManualSpan(e,t,n,i){const s=Io();if(!s){const o=Ao();return i===void 0&&n===void 0?t(o):i===void 0?n(o):i(o)}return i===void 0&&n===void 0?s.startActiveSpan(e,t):i===void 0?s.startActiveSpan(e,t,n):s.startActiveSpan(e,t,n,i)}register(e,t){this._integrations.push(new wo(e,t))}getHooks(e){return this._integrations.flatMap(t=>{var n,i;return(i=(n=t.getHooks)==null?void 0:n.call(t,e))!=null?i:[]})}submitViewportMetrics({height:e,width:t,availHeight:n,availWidth:i}){this.recordGauge({name:ze.ViewportHeight,value:e,attributes:{category:Se.Device,group:window.location.href}}),this.recordGauge({name:ze.ViewportWidth,value:t,attributes:{category:Se.Device,group:window.location.href}}),this.recordGauge({name:ze.ScreenHeight,value:n,attributes:{category:Se.Device,group:window.location.href}}),this.recordGauge({name:ze.ScreenWidth,value:i,attributes:{category:Se.Device,group:window.location.href}}),this.recordGauge({name:ze.ViewportArea,value:e*t,attributes:{category:Se.Device,group:window.location.href}})}setupListeners(){var t;this._options.disableConsoleRecording||_p(n=>{var i;this._recordLog((i=n.value)==null?void 0:i.join(" "),n.type,n.attributes?JSON.parse(n.attributes):{},n.trace)},{level:(t=this._options.consoleMethodsToRecord)!=null?t:[...wl],logger:"console",stringifyOptions:{depthOfLimit:10,numOfKeysLimit:100,stringLengthLimit:1e3}}),this._options.enablePerformanceRecording!==!1&&(Qy(n=>{Object.entries(n).filter(([i])=>i!=="relativeTimestamp").forEach(([i,s])=>s&&this.recordGauge({name:i,value:s,attributes:{category:Se.Performance,group:window.location.href}}))},0),Ky(n=>{this.recordGauge({name:"Jank",value:n.jankAmount,attributes:{category:Se.WebVital,group:n.querySelector}})},0)),Ep(n=>{var o;if(Nl.includes(n.event)||Gl.some(a=>n.event.includes(a)))return;const i=new Error(n.event);i.stack=dt(n.stackTrace.map(a=>a.toString()));let s={};try{n.payload&&(s=JSON.parse(n.payload))}catch(a){}this._recordErrorMessage(W(S({},n),{error:(o=n.error)!=null?o:i}),s)},{enablePromisePatch:!!this._options.enablePromisePatch}),Tb(n=>{const{name:i,value:s}=n;this.recordGauge({name:i,value:s,attributes:{group:window.location.href,category:Se.WebVital}})}),Ru(n=>{this.submitViewportMetrics(n)}),Eb(n=>{const i={category:Se.Performance,group:window.location.href};n.saveData!==void 0&&(i.saveData=n.saveData.toString()),n.effectiveType!==void 0&&(i.effectiveType=n.effectiveType.toString()),n.type!==void 0&&(i.type=n.type.toString()),Object.entries(n).filter(([s])=>s!=="relativeTimestamp").forEach(([s,o])=>{gp(o)&&this.recordGauge({name:s,value:o,attributes:i})})},new Date().getTime());const{getDeviceDetails:e}=Ib();e&&this.recordGauge({name:ze.DeviceMemory,value:e().deviceMemory,attributes:{category:Se.Device,group:window.location.href}})}recordLog(e,t,n){return this._recordLog(e,t,n)}}class zb extends hu{start(){return this._sdk.start()}stop(){return this._sdk.stop()}recordGauge(e){return this._bufferCall("recordGauge",[e])}recordCount(e){return this._bufferCall("recordCount",[e])}recordIncr(e){return this._bufferCall("recordIncr",[e])}recordHistogram(e){return this._bufferCall("recordHistogram",[e])}recordUpDownCounter(e){return this._bufferCall("recordUpDownCounter",[e])}startSpan(e,t,n,i){return this._bufferCall("startSpan",[e,t,n,i])}startManualSpan(e,t,n,i){return this._bufferCall("startManualSpan",[e,t,n,i])}register(e,t){return this._bufferCall("register",[e,t])}recordLog(e,t,n){return this._bufferCall("recordLog",[e,t,n])}recordError(e,t,n,i,s){return this._bufferCall("recordError",[e,t,n,i,s])}}k.LDObserve=void 0,typeof globalThis!="undefined"?globalThis.LDObserve?k.LDObserve=globalThis.LDObserve:(k.LDObserve=new zb,globalThis.LDObserve=k.LDObserve):k.LDObserve=new zb;const lk=Object.freeze(Object.defineProperty({__proto__:null,get LDObserve(){return k.LDObserve}},Symbol.toStringTag,{value:"Module"}));class jb{constructor(e){v(this,"sessionSecureID");try{e!=null&&e.storageMode&&tg(e==null?void 0:e.storageMode),uo(!!(e!=null&&e.sessionCookie)),e!=null&&e.sessionCookie?ng():uo(!1)}catch(t){Ve("Error initializing @launchdarkly observability plugin","error",t)}}configureSession(e,t){try{const n=Xt();let i=kt(n);i!=null&&i.sessionSecureID?this.sessionSecureID=i.sessionSecureID:(t!=null&&t.sessionKey?this.sessionSecureID=lt(`${e}-${t.sessionKey}`):this.sessionSecureID=lt(),$t(this.sessionSecureID),nt({sessionSecureID:this.sessionSecureID,sessionKey:t==null?void 0:t.sessionKey,projectID:0,sessionStartTime:Date.now(),lastPushTime:Date.now()}))}catch(n){Ve("Error configuring session in @launchdarkly observability plugin","error",n)}}}class ck extends jb{constructor(t){super(t);v(this,"observe");v(this,"options");this.options=t}initialize(t,n){try{if(typeof window=="undefined"||typeof document=="undefined"){console.warn("@launchdarkly/observability is not initializing because it is not supported in this environment.");return}if(!t){console.warn("@launchdarkly/observability is not initializing because the SDK credential is undefined.");return}this.configureSession(t,n),this.observe=new ak(W(S({},n),{projectId:t,sessionSecureId:this.sessionSecureID})),n!=null&&n.manualStart||this.observe.start(),k.LDObserve.load(this.observe)}catch(i){Ve("Error initializing @launchdarkly/observability SDK","error",i)}}getMetadata(){return{name:"@launchdarkly/observability"}}register(t,n){var i;(i=this.observe)==null||i.register(t,n)}getHooks(t){var i,s,o,a;const n=S(S({[Wm]:t.sdk.name,[Am]:t.sdk.version,[my]:t.clientSideId,[pu]:"LaunchDarkly"},(i=t.application)!=null&&i.id?{[_y]:t.application.id}:{}),(s=t.application)!=null&&s.version?{[Ty]:t.application.version}:{});return this.initialize((a=(o=t.sdkKey)!=null?o:t.mobileKey)!=null?a:t.clientSideId,this.options),[{getMetadata:()=>({name:"@launchdarkly/observability/hooks"}),afterIdentify:(l,c,u)=>{var d,h,f,m,p,g,y,E;for(const T of(f=(h=(d=this.observe)==null?void 0:d.getHooks)==null?void 0:h.call(d,t))!=null?f:[])(m=T.afterIdentify)==null||m.call(T,l,c,u);if(u.status==="completed"){const T=W(S({},mi(l.context)),{key:(y=(g=(p=this.options)==null?void 0:p.contextFriendlyName)==null?void 0:g.call(p,l.context))!=null?y:Rr(l.context),timeout:l.timeout,canonicalKey:Rr(l.context),[W1]:u.status});(E=this.observe)==null||E.recordLog("LD.identify","info",S(S({},n),T))}return c},afterEvaluation:(l,c,u)=>{var f,m,p,g,y;for(const E of(p=(m=(f=this.observe)==null?void 0:f.getHooks)==null?void 0:m.call(f,t))!=null?p:[])(g=E.afterEvaluation)==null||g.call(E,l,c,u);const d=S({[gy]:l.flagKey,[vy]:JSON.stringify(u.value)},u.variationIndex?{[Sy]:u.variationIndex}:{});if(u.reason)for(const E in Eo){const T=E,I=u.reason[T];I&&(d[Eo[T]]=I)}l.context&&(d[yy]=JSON.stringify(mi(l.context)),d[by]=Rr(l.context));const h=S(S({},n),d);return(y=this.observe)==null||y.startSpan(fu,E=>{E&&E.addEvent(Xe,h)}),c},afterTrack:l=>{var c,u,d,h,f;for(const m of(d=(u=(c=this.observe)==null?void 0:c.getHooks)==null?void 0:u.call(c,t))!=null?d:[])(h=m.afterTrack)==null||h.call(m,l);(f=this.observe)==null||f.recordLog("LD.track","info",S(W(S({},n),{key:l.key,value:l.metricValue}),typeof l.data=="object"?l.data:{}))}}]}}class uk{constructor(e){v(this,"options");v(this,"isRunningOnHighlight");v(this,"organizationID");v(this,"graphqlSDK");v(this,"events");v(this,"sessionData");v(this,"ready");v(this,"manualStopped");v(this,"state");v(this,"logger");v(this,"enableSegmentIntegration");v(this,"privacySetting");v(this,"enableCanvasRecording");v(this,"samplingStrategy");v(this,"inlineImages");v(this,"inlineVideos");v(this,"inlineStylesheet");v(this,"debugOptions");v(this,"listeners");v(this,"firstloadVersion");v(this,"environment");v(this,"sessionShortcut");v(this,"appVersion");v(this,"serviceName");v(this,"_worker");v(this,"_optionsInternal");v(this,"_backendUrl");v(this,"_recordingStartTime");v(this,"_isOnLocalHost");v(this,"_onToggleFeedbackFormVisibility");v(this,"_isCrossOriginIframe");v(this,"_eventBytesSinceSnapshot");v(this,"_lastSnapshotTime");v(this,"_lastVisibilityChangeTime");v(this,"pushPayloadTimerId");v(this,"hasSessionUnloaded");v(this,"hasPushedData");v(this,"reloaded");v(this,"_hasPreviouslyInitialized");v(this,"_recordStop");v(this,"_integrations",[]);var n,i,s,o,a;this.options=e,typeof((n=this.options)==null?void 0:n.debug)=="boolean"?this.debugOptions=this.options.debug?{clientInteractions:!0}:{}:this.debugOptions=(s=(i=this.options)==null?void 0:i.debug)!=null?s:{},this.logger=new du(this.debugOptions.clientInteractions),this._worker=new Fb,this._worker.onmessage=l=>{var c,u,d;((c=l.data.response)==null?void 0:c.type)===Le.AsyncEvents?(this._eventBytesSinceSnapshot+=l.data.response.eventsSize,this.logger.log(`Web worker sent payloadID ${l.data.response.id} size ${l.data.response.eventsSize} bytes, compression ratio ${l.data.response.eventsSize/l.data.response.compressedSize}.
                Total since snapshot: ${(this._eventBytesSinceSnapshot/1e6).toFixed(1)}MB`)):((u=l.data.response)==null?void 0:u.type)===Le.CustomEvent?this.addCustomEvent(l.data.response.tag,l.data.response.payload):((d=l.data.response)==null?void 0:d.type)===Le.Stop&&(Ve("worker.onmessage","warn","Stopping recording due to worker failure",l.data.response),this.stop(!1))};let t=kt();if(this.reloaded=!1,!((o=this.sessionData)!=null&&o.sessionSecureID)&&(t!=null&&t.sessionSecureID))this.sessionData=t,this.options.sessionSecureID=t.sessionSecureID,this.reloaded=!0,this.logger.log(`Tab reloaded, continuing previous session: ${this.sessionData.sessionSecureID}`);else{for(const l of Object.values(_e))on(l);this.sessionData={sessionSecureID:this.options.sessionSecureID,projectID:0,sessionStartTime:Date.now()}}this._hasPreviouslyInitialized=!1;try{window.parent.document&&(this._isCrossOriginIframe=!1)}catch(l){this._isCrossOriginIframe=(a=this.options.recordCrossOriginIframe)!=null?a:!0}this._initMembers(this.options)}_reset(n){return D(this,arguments,function*({forceNew:e,sessionKey:t}){this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0);let i,s;if(!e)try{i=xe(_e.USER_IDENTIFIER);const o=xe(_e.USER_OBJECT);o&&(s=JSON.parse(o))}catch(o){}for(const o of Object.values(_e))on(o);this.sessionData.sessionSecureID=t?lt(`${this.organizationID}-${t}`):lt(),this.sessionData.sessionKey=t,this.sessionData.sessionStartTime=Date.now(),this.options.sessionSecureID=this.sessionData.sessionSecureID,this.stop(),yield this.start(),i&&s&&this.identify(i,s)})}_initMembers(e){var s,o,a,l,c,u,d,h,f;this.sessionShortcut=!1,this._recordingStartTime=0,this._isOnLocalHost=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname==="",this.ready=!1,this.state="NotRecording",this.manualStopped=!1,this.enableSegmentIntegration=!!e.enableSegmentIntegration,this.privacySetting=(s=e.privacySetting)!=null?s:"default",this.enableCanvasRecording=(o=e.enableCanvasRecording)!=null?o:!1,this.inlineImages=(a=e.inlineImages)!=null?a:this._isOnLocalHost,this.inlineVideos=(l=e.inlineVideos)!=null?l:this._isOnLocalHost,this.inlineStylesheet=(c=e.inlineStylesheet)!=null?c:this._isOnLocalHost,this.samplingStrategy=S({canvasFactor:.5,canvasMaxSnapshotDimension:360,canvasClearWebGLBuffer:!0,dataUrlOptions:mp()},(u=e.samplingStrategy)!=null?u:{canvas:2}),this._backendUrl=(d=e==null?void 0:e.backendUrl)!=null?d:"https://pub.observability.app.launchdarkly.com",this._backendUrl[0]==="/"&&(this._backendUrl=new URL(this._backendUrl,document.baseURI).href);const t=new $o(`${this._backendUrl}`,{headers:{}});this.graphqlSDK=El(t,cu()),this.environment=(h=e.environment)!=null?h:"production",this.appVersion=e.appVersion,this.serviceName=(f=e.serviceName)!=null?f:"browser",typeof e.organizationID=="string"?this.organizationID=e.organizationID:this.organizationID=e.organizationID.toString(),this.isRunningOnHighlight=this.organizationID==="1"||this.organizationID==="1jdkoe52",this.firstloadVersion=e.firstloadVersion||"unknown",this.sessionShortcut=e.sessionShortcut||!1,this._onToggleFeedbackFormVisibility=()=>{};const m=e,{firstloadVersion:n}=m,i=We(m,["firstloadVersion"]);this._optionsInternal=i,this.listeners=[],this.events=[],this.hasSessionUnloaded=!1,this.hasPushedData=!1,window.Intercom&&window.Intercom("onShow",()=>{window.Intercom("update",{highlightSessionURL:this.getCurrentSessionURLWithTimestamp()}),this.addProperties({event:"Intercom onShow"})}),this._eventBytesSinceSnapshot=0,this._lastSnapshotTime=new Date().getTime(),this._lastVisibilityChangeTime=new Date().getTime()}identify(e,t={},n){if(!e||e===""){Ve("identify","warn","Highlight's identify() call was passed an empty identifier.",{user_identifier:e,user_object:t});return}this.sessionData.userIdentifier=e.toString(),this.sessionData.userObject=t,rt(_e.USER_IDENTIFIER,e.toString()),rt(_e.USER_OBJECT,JSON.stringify(t)),this._worker.postMessage({message:{type:Le.Identify,userIdentifier:e,userObject:t,source:n}})}track(e,t){this.addProperties(W(S({},t),{event:e}))}addProperties(e={},t){const n=S({},e);Object.entries(n).forEach(([i,s])=>{try{structuredClone(s)}catch(o){delete n[i]}}),this._worker.postMessage({message:{type:Le.Properties,propertiesObject:n,propertyType:t}})}addSessionProperties(e){this.addProperties(e,{type:"session"})}start(e){return D(this,null,function*(){var t,n,i,s,o,a,l,c,u,d;if(!((t=navigator==null?void 0:navigator.userAgent)!=null&&t.includes("Googlebot")||(n=navigator==null?void 0:navigator.userAgent)!=null&&n.includes("AdsBot")))try{if(e!=null&&e.forceNew){yield this._reset(e);return}if(e!=null&&e.sessionKey&&(e==null?void 0:e.sessionKey)!==this.sessionData.sessionKey){yield this._reset(W(S({},e),{forceNew:!0}));return}this.logger.log("Initializing...",e,this.sessionData,this.options),this.sessionData=(i=kt(this.sessionData.sessionSecureID))!=null?i:this.sessionData,(s=this.sessionData)!=null&&s.sessionStartTime?this._recordingStartTime=(o=this.sessionData)==null?void 0:o.sessionStartTime:(this._recordingStartTime=new Date().getTime(),this.sessionData.sessionStartTime=this._recordingStartTime);let h=xe(ui.CLIENT_ID);h||(h=lt(),rt(ui.CLIENT_ID,h));let f;this.options.disableSessionRecording||this.options.disableNetworkRecording!==void 0||typeof this.options.networkRecording=="boolean"?f=!1:f=((a=this.options.networkRecording)==null?void 0:a.recordHeadersAndBody)||!1;let m=[];if(typeof this.options.networkRecording=="object"&&((l=this.options.networkRecording.destinationDomains)!=null&&l.length)&&(m=this.options.networkRecording.destinationDomains),this._isCrossOriginIframe)yield this._setupCrossOriginIframe();else{const T=yield this.graphqlSDK.initializeSession({organization_verbose_id:this.organizationID,enable_strict_privacy:this.privacySetting==="strict",privacy_setting:this.privacySetting,enable_recording_network_contents:f,clientVersion:this.firstloadVersion,firstloadVersion:this.firstloadVersion,clientConfig:JSON.stringify(this._optionsInternal),environment:this.environment,id:h,appVersion:this.appVersion,serviceName:this.serviceName,session_secure_id:this.sessionData.sessionSecureID,session_key:this.sessionData.sessionKey,client_id:h,network_recording_domains:m,disable_session_recording:this.options.disableSessionRecording});if(T.initializeSession.secure_id!==this.sessionData.sessionSecureID&&this.logger.log(`Unexpected secure id returned by initializeSession: ${T.initializeSession.secure_id}, expected ${this.sessionData.sessionSecureID}`),this.sessionData.sessionSecureID=T.initializeSession.secure_id,this.sessionData.projectID=parseInt(((c=T==null?void 0:T.initializeSession)==null?void 0:c.project_id)||"0"),!this.sessionData.projectID||!this.sessionData.sessionSecureID){console.error("Failed to initialize Highlight; an error occurred on our end.",this.sessionData);return}}$t(""),nt(this.sessionData),this.logger.log(`Loaded Highlight
Remote: ${this._backendUrl}
Project ID: ${this.sessionData.projectID}
SessionSecureID: ${this.sessionData.sessionSecureID}`),this.options.sessionSecureID=this.sessionData.sessionSecureID,this._worker.postMessage({message:{type:Le.Initialize,sessionSecureID:this.sessionData.sessionSecureID,backend:this._backendUrl,debug:!!this.debugOptions.clientInteractions,recordingStartTime:this._recordingStartTime}});for(const T of this._integrations)T.init(this.sessionData.sessionSecureID);if(this.sessionData.userIdentifier&&this.identify(this.sessionData.userIdentifier,this.sessionData.userObject),this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0),this._isCrossOriginIframe||(this.pushPayloadTimerId=setTimeout(()=>{this._save()},so)),this.options.disableSessionRecording){this.logger.log("Highlight is NOT RECORDING a session replay per H.init setting."),this.ready=!0,this.state="Recording",this.manualStopped=!1;return}const p=(T,I)=>{I&&this.logger.log("received isCheckout emit",{event:T}),this.events.push(T)};p.bind(this);const g=!!this._recordStop;this._recordStop&&(this._recordStop(),this._recordStop=void 0);const[y,E]=Wy(this.privacySetting);this._recordStop=tt({ignoreClass:(u=this.options.ignoreClass)!=null?u:"highlight-ignore",ignoreSelector:this.options.ignoreSelector,blockClass:(d=this.options.blockClass)!=null?d:"highlight-block",blockSelector:this.options.blockSelector,emit:p,recordCrossOriginIframes:this.options.recordCrossOriginIframe,privacySetting:this.privacySetting,maskAllInputs:y,maskInputOptions:E,maskTextClass:this.options.maskTextClass,maskTextSelector:this.options.maskTextSelector,recordCanvas:this.enableCanvasRecording,sampling:{canvas:{fps:this.samplingStrategy.canvas,fpsManual:this.samplingStrategy.canvasManualSnapshot,resizeFactor:this.samplingStrategy.canvasFactor,clearWebGLBuffer:this.samplingStrategy.canvasClearWebGLBuffer,initialSnapshotDelay:this.samplingStrategy.canvasInitialSnapshotDelay,dataURLOptions:this.samplingStrategy.dataUrlOptions,maxSnapshotDimension:this.samplingStrategy.canvasMaxSnapshotDimension}},keepIframeSrcFn:T=>!this.options.recordCrossOriginIframe,inlineImages:this.inlineImages,inlineVideos:this.inlineVideos,collectFonts:this.inlineImages,inlineStylesheet:this.inlineStylesheet,plugins:[$e()],logger:typeof this.options.debug=="boolean"&&this.options.debug||typeof this.options.debug=="object"&&this.options.debug.domRecording?{debug:this.logger.log,warn:Ve.bind("RecordSDK","warn")}:void 0}),g||this.options.recordCrossOriginIframe&&this._setupCrossOriginIframeParent(),document.referrer&&(window&&document.referrer.includes(window.location.origin)||(this.addCustomEvent("Referrer",document.referrer),this.addProperties({referrer:document.referrer},{type:"session"}))),this.sessionData.sessionKey&&this.addProperties({sessionKey:this.sessionData.sessionKey},{type:"session"}),this._setupWindowListeners(),this.ready=!0,this.state="Recording",this.manualStopped=!1}catch(h){Ve("initializeSession _setupWindowListeners","warn",h)}})}_visibilityHandler(e){return D(this,null,function*(){if(this.manualStopped){this.logger.log("Ignoring visibility event due to manual stop.");return}new Date().getTime()-this._lastVisibilityChangeTime<qm||(this._lastVisibilityChangeTime=new Date().getTime(),this.logger.log(`Detected window ${e?"hidden":"visible"}.`),e?(this.addCustomEvent("TabHidden",!0),this.options.disableBackgroundRecording&&this.stop()):(this.options.disableBackgroundRecording&&(yield this.start()),this.addCustomEvent("TabHidden",!1)))})}_setupCrossOriginIframe(){return D(this,null,function*(){this.logger.log("highlight in cross-origin iframe is waiting "),yield new Promise(e=>{const t=n=>{if(n.data.highlight===Xo){const i=n.data;this.logger.log("highlight got window message ",i),this.sessionData.projectID=i.projectID,this.sessionData.sessionSecureID=i.sessionSecureID,window.parent.postMessage({highlight:ko},"*"),window.removeEventListener("message",t),e()}};window.addEventListener("message",t)})})}_setupCrossOriginIframeParent(){this.logger.log("highlight setting up cross origin iframe parent notification"),setInterval(()=>{window.document.querySelectorAll("iframe").forEach(e=>{var t;(t=e.contentWindow)==null||t.postMessage({highlight:Xo,projectID:this.sessionData.projectID,sessionSecureID:this.sessionData.sessionSecureID},"*")})},so),window.addEventListener("message",e=>{e.data.highlight===ko&&this.logger.log("highlight got response from initialized iframe")})}_setupWindowListeners(){var n;try{const i=this;this.enableSegmentIntegration&&this.listeners.push($y(o=>{if(o.type==="track"){const a={};a["segment-event"]=o.event,i.addProperties(a,{type:"track",source:"segment"})}else if(o.type==="identify"){const a=o.userId.replace(/^"(.*)"$/,"$1");i.identify(a,o.traits,"segment")}})),this.listeners.push(ky(o=>{this.reloaded?(this.addCustomEvent("Reload",o),this.reloaded=!1,i.addProperties({reload:!0},{type:"session"})):this.addCustomEvent("Navigate",o)})),this.listeners.push(Ru(o=>{this.addCustomEvent("Viewport",o)})),this.listeners.push(Hy((o,a)=>{let l=null,c=null;if(a&&a.target){const u=a.target;l=bu(u),c=u.textContent,c&&c.length>2e3&&(c=c.substring(0,2e3))}this.addCustomEvent("Click",{clickTarget:o,clickTextContent:c,clickSelector:l})})),this.listeners.push(By(o=>{o&&this.addCustomEvent("Focus",o)})),this.sessionShortcut&&eb(this.sessionShortcut,()=>{window.open(this.getCurrentSessionURLWithTimestamp(),"_blank")}),this._hasPreviouslyInitialized||((n=window.electron)!=null&&n.ipcRenderer?(window.electron.ipcRenderer.on("highlight.run",({visible:o})=>{this._visibilityHandler(!o)}),this.logger.log("Set up Electron highlight.run events.")):(zy(o=>this._visibilityHandler(o)),this.logger.log("Set up document visibility listener.")),this._hasPreviouslyInitialized=!0);const s=()=>{this.hasSessionUnloaded=!0,this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0)};window.addEventListener("beforeunload",s),this.listeners.push(()=>window.removeEventListener("beforeunload",s))}catch(i){Ve("initializeSession _setupWindowListeners","warn",i)}const e=()=>{this.addCustomEvent("Page Unload",""),$t(this.sessionData.sessionSecureID),nt(this.sessionData)};if(window.addEventListener("beforeunload",e),this.listeners.push(()=>window.removeEventListener("beforeunload",e)),navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i)){const i=()=>{this.addCustomEvent("Page Unload",""),$t(this.sessionData.sessionSecureID),nt(this.sessionData)};window.addEventListener("pagehide",i),this.listeners.push(()=>window.removeEventListener("beforeunload",i))}}stop(e){this.manualStopped=!!e,this.manualStopped&&this.addCustomEvent("Stop","H.stop() was called which stops Highlight from recording."),this.state="NotRecording",e&&this._recordStop&&(this._recordStop(),this._recordStop=void 0),this.listeners.forEach(t=>t()),this.listeners=[]}getCurrentSessionURLWithTimestamp(){const e=new Date().getTime(),{projectID:t,sessionSecureID:n}=this.sessionData,i=(e-this._recordingStartTime)/1e3;return`https://${ci}/${t}/sessions/${n}?ts=${i}`}getCurrentSessionURL(){const e=this.sessionData.projectID,t=this.sessionData.sessionSecureID;return e&&t?`https://${ci}/${e}/sessions/${t}`:null}snapshot(e){return D(this,null,function*(){yield tt.snapshotCanvas(e)})}addSessionFeedback({timestamp:e,verbatim:t,user_email:n,user_name:i}){var s;this._worker.postMessage({message:{type:Le.Feedback,verbatim:t,timestamp:e,userName:i||this.sessionData.userIdentifier,userEmail:n||((s=this.sessionData.userObject)==null?void 0:s.name)}})}_save(){return D(this,null,function*(){var e;try{this.state==="Recording"&&this.listeners&&!this.sessionData.sessionKey&&this.sessionData.sessionStartTime&&Date.now()-this.sessionData.sessionStartTime>$m&&(this.logger.log("Resetting session",{start:this.sessionData.sessionStartTime}),yield this._reset({}));let t;((e=this.options)==null?void 0:e.sendMode)==="local"&&(t=n=>D(this,null,function*(){let i=new Blob([JSON.stringify({query:Bo(Tl),variables:n})],{type:"application/json"});return yield window.fetch(`${this._backendUrl}`,{method:"POST",body:i}),0})),yield this._sendPayload({sendFn:t}),this.hasPushedData=!0,this.sessionData.lastPushTime=Date.now(),nt(this.sessionData)}catch(t){Ve("_save","warn",t)}this.state==="Recording"&&(this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0),this.pushPayloadTimerId=setTimeout(()=>{this._save()},Qm))})}addCustomEvent(e,t){if(this.state==="NotRecording"){let n;const i=()=>{clearInterval(n),this.state==="Recording"&&this.events.length>0?Xs(e,t):n=setTimeout(i,500)};n=setTimeout(i,500)}else this.state==="Recording"&&(this.events.length>0||this.hasPushedData)&&Xs(e,t)}_sendPayload(t){return D(this,arguments,function*({sendFn:e}){const n=[...this.events],{bytes:i,time:s}=this.enableCanvasRecording?oo.canvas:oo.normal;this._eventBytesSinceSnapshot>=i&&new Date().getTime()-this._lastSnapshotTime>=s&&this.takeFullSnapshot(),this.logger.log(`Sending: ${n.length} events, 
To: ${this._backendUrl}
Org: ${this.organizationID}
SessionSecureID: ${this.sessionData.sessionSecureID}`);const o=new Date().getTime(),a=wb();if(e){const l={session_secure_id:this.sessionData.sessionSecureID,payload_id:o.toString(),events:{events:n},messages:dt({messages:[]}),resources:JSON.stringify({resources:[]}),web_socket_events:JSON.stringify({webSocketEvents:[]}),errors:[],is_beacon:!1,has_session_unloaded:this.hasSessionUnloaded,highlight_logs:a||void 0},{compressedBase64:c}=yield Pb(l);yield e({session_secure_id:this.sessionData.sessionSecureID,payload_id:o.toString(),data:c})}else this._worker.postMessage({message:{type:Le.AsyncEvents,id:o,events:n,messages:[],errors:[],resourcesString:JSON.stringify({resources:[]}),webSocketEventsString:JSON.stringify({webSocketEvents:[]}),hasSessionUnloaded:this.hasSessionUnloaded,highlightLogs:a}});nt(this.sessionData),this.events=this.events.slice(n.length),Rb(a)})}takeFullSnapshot(){if(!this._recordStop){this.logger.log("skipping full snapshot as rrweb is not running");return}this.logger.log("taking full snapshot",{bytesSinceSnapshot:this._eventBytesSinceSnapshot,lastSnapshotTime:this._lastSnapshotTime}),tt.takeFullSnapshot(),this._eventBytesSinceSnapshot=0,this._lastSnapshotTime=new Date().getTime()}register(e,t){this._integrations.push(new wo(e,t))}getHooks(e){return this._integrations.flatMap(t=>{var n,i;return(i=(n=t.getHooks)==null?void 0:n.call(t,e))!=null?i:[]})}getRecordingState(){var e;return(e=this==null?void 0:this.state)!=null?e:"NotRecording"}getSession(){const e=this.sessionData.sessionSecureID,t=kt(e);if(!t)return null;const n=`${this.getFrontendUrl()}/sessions/${e}`;if(!n||!(t==null?void 0:t.sessionStartTime))return null;const s=new Date().getTime();let o;try{o=new URL(n)}catch(c){return Ve("identify","warn",`failed to construct session url from ${n}`,c),null}const a=new URL(o),l=(s-this._recordingStartTime)/1e3;return a.searchParams.set("ts",l.toString()),{url:o.toString(),urlWithTimestamp:a.toString(),sessionSecureID:e}}getFrontendUrl(){var t,n;const e=this._backendUrl.match(UN);if(e&&((t=e==null?void 0:e.groups)!=null&&t.domain)){const i=(n=e.groups.domain)!=null?n:"";return`https://${PN[i]}${MN}`}return AN}}class Qb extends hu{getSession(){return this._isLoaded?this._bufferCall("getSession",[]):null}start(e){return D(this,null,function*(){return this._sdk.start(e)})}stop(){return this._sdk.stop()}addSessionProperties(e){return this._bufferCall("addSessionProperties",[e])}getRecordingState(){return this._isLoaded?this._bufferCall("getRecordingState",[]):"NotRecording"}snapshot(e){return this._isLoaded?this._bufferCall("snapshot",[e]):Promise.resolve(void 0)}register(e,t){return this._bufferCall("register",[e,t])}}k.LDRecord=void 0,typeof globalThis!="undefined"?globalThis.LDRecord?k.LDRecord=globalThis.LDRecord:(k.LDRecord=new Qb,globalThis.LDRecord=k.LDRecord):k.LDRecord=new Qb;class dk extends jb{constructor(t){super(t);v(this,"record");v(this,"options");this.options=t}initialize(t,n){var i,s,o,a,l,c,u,d,h;try{if(typeof window=="undefined"||typeof document=="undefined"){console.warn("@launchdarkly/session-replay is not initializing because it is not supported in this environment.");return}if(typeof Worker=="undefined"){console.warn("@launchdarkly/session-replay is not initializing because Worker is not supported.");return}if(!t){console.warn("@launchdarkly/session-replay is not initializing because the SDK credential is undefined.");return}this.configureSession(t,n);const f=W(S({},n),{organizationID:t,firstloadVersion:mu,environment:(n==null?void 0:n.environment)||"production",appVersion:n==null?void 0:n.version,sessionSecureID:this.sessionSecureID,privacySetting:(i=n==null?void 0:n.privacySetting)!=null?i:"strict"});this.record=new uk(f),n!=null&&n.manualStart||this.record.start(),k.LDRecord.load(this.record),!((o=(s=n==null?void 0:n.integrations)==null?void 0:s.mixpanel)!=null&&o.disabled)&&((l=(a=n==null?void 0:n.integrations)==null?void 0:a.mixpanel)!=null&&l.projectToken)&&Yb(n.integrations.mixpanel),!((u=(c=n==null?void 0:n.integrations)==null?void 0:c.amplitude)!=null&&u.disabled)&&((h=(d=n==null?void 0:n.integrations)==null?void 0:d.amplitude)!=null&&h.apiKey)&&Jb(n.integrations.amplitude)}catch(f){Ve("Error initializing @launchdarkly/session-replay SDK","error",f)}}getMetadata(){return{name:"@launchdarkly/session-replay"}}register(t,n){var i;(i=this.record)==null||i.register(t,n)}getHooks(t){var i,s,o,a;const n=S(S({[Wm]:t.sdk.name,[Am]:t.sdk.version,[my]:t.clientSideId,[pu]:"LaunchDarkly"},(i=t.application)!=null&&i.id?{[_y]:t.application.id}:{}),(s=t.application)!=null&&s.version?{[Ty]:t.application.version}:{});return this.initialize((a=(o=t.sdkKey)!=null?o:t.mobileKey)!=null?a:t.clientSideId,this.options),[{getMetadata:()=>({name:"@launchdarkly/session-replay/hooks"}),afterIdentify:(l,c,u)=>{var d,h,f,m,p,g,y,E;for(const T of(f=(h=(d=this.record)==null?void 0:d.getHooks)==null?void 0:h.call(d,t))!=null?f:[])(m=T.afterIdentify)==null||m.call(T,l,c,u);if(u.status==="completed"){const T=W(S({},mi(l.context)),{key:(y=(g=(p=this.options)==null?void 0:p.contextFriendlyName)==null?void 0:g.call(p,l.context))!=null?y:Rr(l.context),canonicalKey:Rr(l.context)});(E=this.record)==null||E.identify(T.key,S(S({},n),T),"LaunchDarkly")}return c},afterEvaluation:(l,c,u)=>{var d,h,f,m;for(const p of(f=(h=(d=this.record)==null?void 0:d.getHooks)==null?void 0:h.call(d,t))!=null?f:[])(m=p.afterEvaluation)==null||m.call(p,l,c,u);return c},afterTrack:l=>{var c,u,d,h,f;for(const m of(d=(u=(c=this.record)==null?void 0:c.getHooks)==null?void 0:u.call(c,t))!=null?d:[])(h=m.afterTrack)==null||h.call(m,l);(f=this.record)==null||f.track(l.key,{data:l.data,value:l.metricValue})}}]}}var $b=(r=>(r.Device="Device",r.WebVital="WebVital",r.Frontend="Frontend",r.Backend="Backend",r))($b||{});const Be=(r,e)=>{console.warn(`highlight.run warning: (${r}): `,e)},hk=200;let wi=[],Po,H,Ri,qb=[],Yu=!1;const ae={options:void 0,init:(r,e)=>{var t,n,i,s,o,a,l,c;try{if(ae.options=e,typeof window=="undefined"||typeof document=="undefined")return;if(!r){console.info("Highlight is not initializing because projectID was passed undefined.");return}e!=null&&e.sessionCookie?ng():uo(!1);const u=kt();let d=lt();if(e!=null&&e.sessionKey?d=lt(`${r}-${e.sessionKey}`):u!=null&&u.sessionSecureID&&(d=u.sessionSecureID),Yu)return{sessionSecureID:d};Yu=!0,Hb(),Kb();const h=W(S({},e),{organizationID:r,firstloadVersion:mu,environment:(e==null?void 0:e.environment)||"production",appVersion:e==null?void 0:e.version,sessionSecureID:d});return H=H!=null?H:new Ju(h,Ri),e!=null&&e.manualStart||H.initialize(),Ri=new Pt(h),e!=null&&e.manualStart||Ri.startListening(),!((n=(t=e==null?void 0:e.integrations)==null?void 0:t.mixpanel)!=null&&n.disabled)&&((s=(i=e==null?void 0:e.integrations)==null?void 0:i.mixpanel)!=null&&s.projectToken)&&Yb(e.integrations.mixpanel),!((a=(o=e==null?void 0:e.integrations)==null?void 0:o.amplitude)!=null&&a.disabled)&&((c=(l=e==null?void 0:e.integrations)==null?void 0:l.amplitude)!=null&&c.apiKey)&&Jb(e.integrations.amplitude),{sessionSecureID:d}}catch(u){Be("init",u)}},snapshot:r=>D(this,null,function*(){try{if(H&&H.ready)return yield H.snapshot(r)}catch(e){Be("snapshot",e)}}),addSessionFeedback:({verbatim:r,userName:e,userEmail:t,timestampOverride:n})=>{try{ae.onHighlightReady(()=>H.addSessionFeedback({verbatim:r,timestamp:n||new Date().toISOString(),user_email:t,user_name:e}))}catch(i){Be("error",i)}},consumeError:(r,e,t)=>{try{ae.onHighlightReady(()=>H.consumeCustomError(r,e,JSON.stringify(t)))}catch(n){Be("error",n)}},consume:(r,e)=>{try{ae.onHighlightReady(()=>H.consumeError(r,e))}catch(t){Be("error",t)}},error:(r,e)=>{try{ae.onHighlightReady(()=>H.pushCustomError(r,JSON.stringify(e)))}catch(t){Be("error",t)}},track:(r,e={})=>{var t,n,i,s,o,a,l,c,u,d,h;try{ae.onHighlightReady(()=>{H.addProperties(W(S({},e),{event:r})),H.log("H.track","INFO",W(S({},e!=null?e:{}),{event:r}))});const f=H==null?void 0:H.getCurrentSessionURL();(i=(n=(t=ae.options)==null?void 0:t.integrations)==null?void 0:n.mixpanel)!=null&&i.disabled||(s=window.mixpanel)!=null&&s.track&&window.mixpanel.track(r,W(S({},e),{highlightSessionURL:f})),(l=(a=(o=ae.options)==null?void 0:o.integrations)==null?void 0:a.amplitude)!=null&&l.disabled||(c=window.amplitude)!=null&&c.getInstance&&window.amplitude.getInstance().logEvent(r,W(S({},e),{highlightSessionURL:f})),(h=(d=(u=ae.options)==null?void 0:u.integrations)==null?void 0:d.intercom)!=null&&h.disabled||window.Intercom&&window.Intercom("trackEvent",r,e)}catch(f){Be("track",f)}},log:(r,e,t)=>{try{ae.onHighlightReady(()=>H.log(r,e,t!=null?t:{}))}catch(n){Be("log",n)}},start:r=>{(H==null?void 0:H.state)==="Recording"&&!(r!=null&&r.forceNew)?r!=null&&r.silent||console.warn("Highlight is already recording. Please `H.stop()` the current session before starting a new one."):(Ri.startListening(),ae.onHighlightReady(()=>D(this,null,function*(){yield H.initialize(r)}),{waitForReady:!1}))},stop:r=>{(H==null?void 0:H.state)!=="Recording"?r!=null&&r.silent||console.warn("Highlight is already stopped. Please call `H.start()`."):ae.onHighlightReady(()=>H.stopRecording(!0))},identify:(r,e={},t)=>{var n,i,s,o,a,l,c,u;try{ae.onHighlightReady(()=>H.identify(r,e,t))}catch(d){Be("identify",d)}if((s=(i=(n=ae.options)==null?void 0:n.integrations)==null?void 0:i.mixpanel)!=null&&s.disabled||(o=window.mixpanel)!=null&&o.identify&&(window.mixpanel.identify(typeof(e==null?void 0:e.email)=="string"?e==null?void 0:e.email:r),e&&(window.mixpanel.track("identify",e),window.mixpanel.people.set(e))),!((c=(l=(a=ae.options)==null?void 0:a.integrations)==null?void 0:l.amplitude)!=null&&c.disabled)&&(u=window.amplitude)!=null&&u.getInstance&&(window.amplitude.getInstance().setUserId(r),Object.keys(e).length>0)){const d=Object.keys(e).reduce((h,f)=>(h.set(f,e[f]),h),new window.amplitude.Identify);window.amplitude.getInstance().identify(d)}},metrics:r=>{try{for(const e of r)ae.recordMetric(e)}catch(e){Be("metrics",e)}},recordMetric:r=>{try{ae.onHighlightReady(()=>{var e;H.recordGauge(W(S({},r),{tags:(e=r.tags)!=null?e:[],group:window.location.href,category:"Frontend"}))})}catch(e){Be("recordMetric",e)}},recordCount:r=>{try{ae.onHighlightReady(()=>{H.recordCount(r)})}catch(e){Be("recordCount",e)}},recordIncr:r=>{try{ae.onHighlightReady(()=>{H.recordIncr(r)})}catch(e){Be("recordIncr",e)}},recordHistogram:r=>{try{ae.onHighlightReady(()=>{H.recordHistogram(r)})}catch(e){Be("recordHistogram",e)}},recordUpDownCounter:r=>{try{ae.onHighlightReady(()=>{H.recordUpDownCounter(r)})}catch(e){Be("recordUpDownCounter",e)}},startSpan:(r,e,t,n)=>{const i=Io();if(!i){const o=Ao();return n===void 0&&t===void 0?e(o):n===void 0?t(o):n(o)}const s=(o,a)=>{const l=a(o);return l instanceof Promise?l.finally(()=>o.end()):(o.end(),l)};return n===void 0&&t===void 0?i.startActiveSpan(r,o=>s(o,e)):n===void 0?i.startActiveSpan(r,e,o=>s(o,t)):i.startActiveSpan(r,e,t,o=>s(o,n))},startManualSpan:(r,e,t,n)=>{const i=Io();if(!i){const s=Ao();return n===void 0&&t===void 0?e(s):n===void 0?t(s):n(s)}return n===void 0&&t===void 0?i.startActiveSpan(r,e):n===void 0?i.startActiveSpan(r,e,t):i.startActiveSpan(r,e,t,n)},getSessionURL:()=>new Promise((r,e)=>{ae.onHighlightReady(()=>{const t=H.sessionData.sessionSecureID,n=kt(t);n?r(`https://${ci}/${n.projectID}/sessions/${t}`):e(new Error(`Unable to get session URL: ${t}`))})}),getSessionDetails:()=>new Promise((r,e)=>{ae.onHighlightReady(()=>D(this,null,function*(){try{const t=yield ae.getSessionURL();if(!t)throw new Error("Could not get session URL");const n=H.sessionData.sessionSecureID,i=kt(n),s=i==null?void 0:i.sessionStartTime;if(!s)throw new Error("Could not get session start timestamp");const o=new Date().getTime(),a=new URL(t),l=new URL(t);l.searchParams.set("ts",((o-s)/1e3).toString()),r({url:a.toString(),urlWithTimestamp:l.toString(),sessionSecureID:n})}catch(t){e(t)}}))}),getRecordingState:()=>{var r;return(r=H==null?void 0:H.state)!=null?r:"NotRecording"},onHighlightReady:(r,e)=>{if(H&&H.ready){r();return}if(wi.push({options:e,func:r}),Po!==void 0)return;const t=()=>{wi=wi.filter(i=>{var s;return!H||((s=i.options)==null?void 0:s.waitForReady)!==!1&&!H.ready?!0:(i.func(),!1)}),Po=void 0,wi.length>0&&(Po=setTimeout(t,hk))};t()},registerLD(r){qb.length||(ae.onHighlightReady(()=>{H.registerLD(r)}),A1(this,r,ae.options),qb.push(new wo(r)))}};typeof window!="undefined"&&(window.H=ae),rk(),Hb(),Kb();const fk={reset:()=>{Yu=!1,H=void 0,wi=[],Po=void 0,Ri=void 0},setHighlightObj:r=>{H=r}};k.GenerateSecureID=lt,k.H=ae,k.HighlightSegmentMiddleware=ik,k.MetricCategory=$b,k.Observe=ck,k.Record=dk,k.__testing=fk,k.configureElectronHighlight=nk,Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=index.umd.js.map
