{"version":3,"file":"LDRecord.js","sources":["../src/sdk/LDRecord.ts"],"sourcesContent":["import type { Record } from '../api/record'\nimport type { SessionDetails } from '../client'\nimport type { LDClient } from '../integrations/launchdarkly'\nimport type { StartOptions } from '../client/types/types'\nimport type { LDPluginEnvironmentMetadata } from '../plugins/plugin'\nimport { BufferedClass } from './buffer'\n\nclass _LDRecord extends BufferedClass<Record> implements Record {\n\tgetSession(): SessionDetails | null {\n\t\treturn this._isLoaded ? this._bufferCall('getSession', []) : null\n\t}\n\n\tasync start(options?: StartOptions) {\n\t\t// avoid buffering the start call\n\t\treturn this._sdk.start(options)\n\t}\n\n\tstop() {\n\t\t// avoid buffering the stop call\n\t\treturn this._sdk.stop()\n\t}\n\n\taddSessionProperties(properties: { [key: string]: any }) {\n\t\treturn this._bufferCall('addSessionProperties', [properties])\n\t}\n\n\tgetRecordingState() {\n\t\treturn this._isLoaded\n\t\t\t? this._bufferCall('getRecordingState', [])\n\t\t\t: ('NotRecording' as const)\n\t}\n\n\tsnapshot(element: HTMLCanvasElement) {\n\t\treturn this._isLoaded\n\t\t\t? this._bufferCall('snapshot', [element])\n\t\t\t: Promise.resolve(undefined)\n\t}\n\n\tregister(\n\t\tclient: LDClient,\n\t\tenvironmentMetadata: LDPluginEnvironmentMetadata,\n\t) {\n\t\treturn this._bufferCall('register', [client, environmentMetadata])\n\t}\n}\n\ninterface GlobalThis {\n\tLDRecord?: _LDRecord\n}\ndeclare var globalThis: GlobalThis\n\nexport let LDRecord!: _LDRecord\nif (typeof globalThis !== 'undefined') {\n\tif (globalThis.LDRecord) {\n\t\tLDRecord = globalThis.LDRecord\n\t} else {\n\t\tLDRecord = new _LDRecord()\n\t\tglobalThis.LDRecord = LDRecord\n\t}\n} else {\n\tLDRecord = new _LDRecord()\n}\n"],"names":["_LDRecord","BufferedClass","options","__async","properties","element","client","environmentMetadata","LDRecord"],"mappings":";;;;;;;;;;;;;;;;;AAOA,MAAMA,UAAkBC,EAAwC;AAAA,EAC/D,aAAoC;AACnC,WAAO,KAAK,YAAY,KAAK,YAAY,cAAc,CAAA,CAAE,IAAI;AAAA,EAC9D;AAAA,EAEM,MAAMC,GAAwB;AAAA,WAAAC,EAAA;AAEnC,aAAO,KAAK,KAAK,MAAMD,CAAO;AAAA,IAC/B;AAAA;AAAA,EAEA,OAAO;AAEN,WAAO,KAAK,KAAK,KAAA;AAAA,EAClB;AAAA,EAEA,qBAAqBE,GAAoC;AACxD,WAAO,KAAK,YAAY,wBAAwB,CAACA,CAAU,CAAC;AAAA,EAC7D;AAAA,EAEA,oBAAoB;AACnB,WAAO,KAAK,YACT,KAAK,YAAY,qBAAqB,CAAA,CAAE,IACvC;AAAA,EACL;AAAA,EAEA,SAASC,GAA4B;AACpC,WAAO,KAAK,YACT,KAAK,YAAY,YAAY,CAACA,CAAO,CAAC,IACtC,QAAQ,QAAQ,MAAS;AAAA,EAC7B;AAAA,EAEA,SACCC,GACAC,GACC;AACD,WAAO,KAAK,YAAY,YAAY,CAACD,GAAQC,CAAmB,CAAC;AAAA,EAClE;AACD;AAOO,IAAIC;AACP,OAAO,cAAe,cACrB,WAAW,WACdA,IAAW,WAAW,YAEtBA,IAAW,IAAIR,EAAA,GACf,WAAW,WAAWQ,KAGvBA,IAAW,IAAIR,EAAA;"}