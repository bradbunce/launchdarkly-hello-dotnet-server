var cc = Object.defineProperty, lc = (t, e, r) => e in t ? cc(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r, mt = (t, e, r) => lc(t, typeof e != "symbol" ? e + "" : e, r), pc = (t, e, r) => new Promise((n, i) => {
  var o = (c) => {
    try {
      u(r.next(c));
    } catch (s) {
      i(s);
    }
  }, a = (c) => {
    try {
      u(r.throw(c));
    } catch (s) {
      i(s);
    }
  }, u = (c) => c.done ? n(c.value) : Promise.resolve(c.value).then(o, a);
  u((r = r.apply(t, e)).next());
});
const so = /* @__PURE__ */ Object.create(null), Lt = (t, e, ...r) => {
  const n = `[@launchdarkly plugins]: (${t}): `;
  console[e].apply(console, [n, ...r]), fc(n, ...r);
}, Rt = (t, e, r, ...n) => {
  so[`${t}-${e}`] || (so[`${t}-${e}`] = !0, Lt(t, r, ...n));
}, fc = (t, ...e) => pc(void 0, null, function* () {
  try {
    const { LDObserve: r } = yield Promise.resolve().then(() => Pp);
    r.recordLog(`${t}${e}`, "warn");
  } catch {
  }
});
class hc {
  constructor(e, r) {
    mt(this, "debug"), mt(this, "name"), this.debug = e, this.name = r;
  }
  log(...e) {
    if (this.debug) {
      let r = `[${Date.now()}]`;
      this.name && (r += ` - ${this.name}`), console.log.apply(console, [r, ...e]);
    }
  }
  warn(...e) {
    let r = `[${Date.now()}]`;
    this.name && (r += ` - ${this.name}`), console.warn.apply(console, [r, ...e]);
  }
}
let Wa = class {
  constructor() {
    mt(this, "_sdk"), mt(this, "_isLoaded", !1), mt(this, "_callBuffer", []), mt(this, "_capacity", 1e5), mt(this, "_droppedEvents", 0), mt(this, "_exceededCapacity", !1), mt(this, "_logger", new hc());
  }
  _bufferCall(e, r) {
    if (this._isLoaded)
      try {
        return this._sdk[e](...r);
      } catch (n) {
        Lt(
          `Error executing buffered call to ${e}:`,
          "error",
          n
        );
      }
    else {
      this._enqueue({ method: e, args: r });
      return;
    }
  }
  _enqueue(e) {
    this._callBuffer.length < this._capacity ? (this._callBuffer.push(e), this._exceededCapacity = !1) : (this._exceededCapacity || (this._exceededCapacity = !0, Lt(
      "Exceeded event queue capacity. Increase capacity to avoid dropping events.",
      "warn"
    )), this._droppedEvents += 1);
  }
  load(e) {
    this._sdk = e, this._isLoaded = !0;
    for (const { method: r, args: n } of this._callBuffer)
      try {
        this._sdk[r](...n);
      } catch (i) {
        Lt(
          `Error executing buffered call to ${r}:`,
          "error",
          i
        );
      }
    this._callBuffer = [];
  }
};
var dc = Object.defineProperty, vc = Object.defineProperties, mc = Object.getOwnPropertyDescriptors, gr = Object.getOwnPropertySymbols, Ya = Object.prototype.hasOwnProperty, Ja = Object.prototype.propertyIsEnumerable, Wn = (t, e, r) => e in t ? dc(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r, C = (t, e) => {
  for (var r in e || (e = {}))
    Ya.call(e, r) && Wn(t, r, e[r]);
  if (gr)
    for (var r of gr(e))
      Ja.call(e, r) && Wn(t, r, e[r]);
  return t;
}, Er = (t, e) => vc(t, mc(e)), we = (t, e) => {
  var r = {};
  for (var n in t)
    Ya.call(t, n) && e.indexOf(n) < 0 && (r[n] = t[n]);
  if (t != null && gr)
    for (var n of gr(t))
      e.indexOf(n) < 0 && Ja.call(t, n) && (r[n] = t[n]);
  return r;
}, xe = (t, e, r) => Wn(t, typeof e != "symbol" ? e + "" : e, r), se = (t, e, r) => new Promise((n, i) => {
  var o = (c) => {
    try {
      u(r.next(c));
    } catch (s) {
      i(s);
    }
  }, a = (c) => {
    try {
      u(r.throw(c));
    } catch (s) {
      i(s);
    }
  }, u = (c) => c.done ? n(c.value) : Promise.resolve(c.value).then(o, a);
  u((r = r.apply(t, e)).next());
});
function yc(t, e) {
  for (var r = 0; r < e.length; r++) {
    const n = e[r];
    if (typeof n != "string" && !Array.isArray(n)) {
      for (const i in n)
        if (i !== "default" && !(i in t)) {
          const o = Object.getOwnPropertyDescriptor(n, i);
          o && Object.defineProperty(t, i, o.get ? o : {
            enumerable: !0,
            get: () => n[i]
          });
        }
    }
  }
  return Object.freeze(Object.defineProperty(t, Symbol.toStringTag, { value: "Module" }));
}
function cr(t, e) {
  throw new Error(e);
}
function _c(t) {
  return typeof t == "object" && t !== null;
}
function gc(t, e) {
  throw new Error(
    "Unexpected invariant triggered."
  );
}
const Ec = /\r\n|[\n\r]/g;
function Yn(t, e) {
  let r = 0, n = 1;
  for (const i of t.body.matchAll(Ec)) {
    if (typeof i.index == "number" || gc(), i.index >= e)
      break;
    r = i.index + i[0].length, n += 1;
  }
  return {
    line: n,
    column: e + 1 - r
  };
}
function Tc(t) {
  return Qa(
    t.source,
    Yn(t.source, t.start)
  );
}
function Qa(t, e) {
  const r = t.locationOffset.column - 1, n = "".padStart(r) + t.body, i = e.line - 1, o = t.locationOffset.line - 1, a = e.line + o, u = e.line === 1 ? r : 0, c = e.column + u, s = `${t.name}:${a}:${c}
`, l = n.split(/\r\n|[\n\r]/g), p = l[i];
  if (p.length > 120) {
    const f = Math.floor(c / 80), m = c % 80, v = [];
    for (let y = 0; y < p.length; y += 80)
      v.push(p.slice(y, y + 80));
    return s + uo([
      [`${a} |`, v[0]],
      ...v.slice(1, f + 1).map((y) => ["|", y]),
      ["|", "^".padStart(m)],
      ["|", v[f + 1]]
    ]);
  }
  return s + uo([
    // Lines specified like this: ["prefix", "string"],
    [`${a - 1} |`, l[i - 1]],
    [`${a} |`, p],
    ["|", "^".padStart(c)],
    [`${a + 1} |`, l[i + 1]]
  ]);
}
function uo(t) {
  const e = t.filter(([n, i]) => i !== void 0), r = Math.max(...e.map(([n]) => n.length));
  return e.map(([n, i]) => n.padStart(r) + (i ? " " + i : "")).join(`
`);
}
function bc(t) {
  const e = t[0];
  return e == null || "kind" in e || "length" in e ? {
    nodes: e,
    source: t[1],
    positions: t[2],
    path: t[3],
    originalError: t[4],
    extensions: t[5]
  } : e;
}
let Oc = class Za extends Error {
  /**
   * An array of `{ line, column }` locations within the source GraphQL document
   * which correspond to this error.
   *
   * Errors during validation often contain multiple locations, for example to
   * point out two things with the same name. Errors during execution include a
   * single location, the field which produced the error.
   *
   * Enumerable, and appears in the result of JSON.stringify().
   */
  /**
   * An array describing the JSON-path into the execution response which
   * corresponds to this error. Only included for errors during execution.
   *
   * Enumerable, and appears in the result of JSON.stringify().
   */
  /**
   * An array of GraphQL AST Nodes corresponding to this error.
   */
  /**
   * The source GraphQL document for the first location of this error.
   *
   * Note that if this Error represents more than one node, the source may not
   * represent nodes after the first node.
   */
  /**
   * An array of character offsets within the source GraphQL document
   * which correspond to this error.
   */
  /**
   * The original error thrown from a field resolver during execution.
   */
  /**
   * Extension fields to add to the formatted error.
   */
  /**
   * @deprecated Please use the `GraphQLErrorOptions` constructor overload instead.
   */
  constructor(e, ...r) {
    var n, i, o;
    const { nodes: a, source: u, positions: c, path: s, originalError: l, extensions: p } = bc(r);
    super(e), this.name = "GraphQLError", this.path = s ?? void 0, this.originalError = l ?? void 0, this.nodes = co(
      Array.isArray(a) ? a : a ? [a] : void 0
    );
    const f = co(
      (n = this.nodes) === null || n === void 0 ? void 0 : n.map((v) => v.loc).filter((v) => v != null)
    );
    this.source = u ?? (f == null || (i = f[0]) === null || i === void 0 ? void 0 : i.source), this.positions = c ?? f?.map((v) => v.start), this.locations = c && u ? c.map((v) => Yn(u, v)) : f?.map((v) => Yn(v.source, v.start));
    const m = _c(
      l?.extensions
    ) ? l?.extensions : void 0;
    this.extensions = (o = p ?? m) !== null && o !== void 0 ? o : /* @__PURE__ */ Object.create(null), Object.defineProperties(this, {
      message: {
        writable: !0,
        enumerable: !0
      },
      name: {
        enumerable: !1
      },
      nodes: {
        enumerable: !1
      },
      source: {
        enumerable: !1
      },
      positions: {
        enumerable: !1
      },
      originalError: {
        enumerable: !1
      }
    }), l != null && l.stack ? Object.defineProperty(this, "stack", {
      value: l.stack,
      writable: !0,
      configurable: !0
    }) : Error.captureStackTrace ? Error.captureStackTrace(this, Za) : Object.defineProperty(this, "stack", {
      value: Error().stack,
      writable: !0,
      configurable: !0
    });
  }
  get [Symbol.toStringTag]() {
    return "GraphQLError";
  }
  toString() {
    let e = this.message;
    if (this.nodes)
      for (const r of this.nodes)
        r.loc && (e += `

` + Tc(r.loc));
    else if (this.source && this.locations)
      for (const r of this.locations)
        e += `

` + Qa(this.source, r);
    return e;
  }
  toJSON() {
    const e = {
      message: this.message
    };
    return this.locations != null && (e.locations = this.locations), this.path != null && (e.path = this.path), this.extensions != null && Object.keys(this.extensions).length > 0 && (e.extensions = this.extensions), e;
  }
};
function co(t) {
  return t === void 0 || t.length === 0 ? void 0 : t;
}
function G(t, e, r) {
  return new Oc(`Syntax Error: ${r}`, {
    source: t,
    positions: [e]
  });
}
let Sc = class {
  /**
   * The character offset at which this Node begins.
   */
  /**
   * The character offset at which this Node ends.
   */
  /**
   * The Token at which this Node begins.
   */
  /**
   * The Token at which this Node ends.
   */
  /**
   * The Source document the AST represents.
   */
  constructor(e, r, n) {
    this.start = e.start, this.end = r.end, this.startToken = e, this.endToken = r, this.source = n;
  }
  get [Symbol.toStringTag]() {
    return "Location";
  }
  toJSON() {
    return {
      start: this.start,
      end: this.end
    };
  }
}, ts = class {
  /**
   * The kind of Token.
   */
  /**
   * The character offset at which this Node begins.
   */
  /**
   * The character offset at which this Node ends.
   */
  /**
   * The 1-indexed line number on which this Token appears.
   */
  /**
   * The 1-indexed column number at which this Token begins.
   */
  /**
   * For non-punctuation tokens, represents the interpreted value of the token.
   *
   * Note: is undefined for punctuation tokens, but typed as string for
   * convenience in the parser.
   */
  /**
   * Tokens exist as nodes in a double-linked-list amongst all tokens
   * including ignored tokens. <SOF> is always the first node and <EOF>
   * the last.
   */
  constructor(e, r, n, i, o, a) {
    this.kind = e, this.start = r, this.end = n, this.line = i, this.column = o, this.value = a, this.prev = null, this.next = null;
  }
  get [Symbol.toStringTag]() {
    return "Token";
  }
  toJSON() {
    return {
      kind: this.kind,
      value: this.value,
      line: this.line,
      column: this.column
    };
  }
};
const es = {
  Name: [],
  Document: ["definitions"],
  OperationDefinition: [
    "name",
    "variableDefinitions",
    "directives",
    "selectionSet"
  ],
  VariableDefinition: ["variable", "type", "defaultValue", "directives"],
  Variable: ["name"],
  SelectionSet: ["selections"],
  Field: ["alias", "name", "arguments", "directives", "selectionSet"],
  Argument: ["name", "value"],
  FragmentSpread: ["name", "directives"],
  InlineFragment: ["typeCondition", "directives", "selectionSet"],
  FragmentDefinition: [
    "name",
    // Note: fragment variable definitions are deprecated and will removed in v17.0.0
    "variableDefinitions",
    "typeCondition",
    "directives",
    "selectionSet"
  ],
  IntValue: [],
  FloatValue: [],
  StringValue: [],
  BooleanValue: [],
  NullValue: [],
  EnumValue: [],
  ListValue: ["values"],
  ObjectValue: ["fields"],
  ObjectField: ["name", "value"],
  Directive: ["name", "arguments"],
  NamedType: ["name"],
  ListType: ["type"],
  NonNullType: ["type"],
  SchemaDefinition: ["description", "directives", "operationTypes"],
  OperationTypeDefinition: ["type"],
  ScalarTypeDefinition: ["description", "name", "directives"],
  ObjectTypeDefinition: [
    "description",
    "name",
    "interfaces",
    "directives",
    "fields"
  ],
  FieldDefinition: ["description", "name", "arguments", "type", "directives"],
  InputValueDefinition: [
    "description",
    "name",
    "type",
    "defaultValue",
    "directives"
  ],
  InterfaceTypeDefinition: [
    "description",
    "name",
    "interfaces",
    "directives",
    "fields"
  ],
  UnionTypeDefinition: ["description", "name", "directives", "types"],
  EnumTypeDefinition: ["description", "name", "directives", "values"],
  EnumValueDefinition: ["description", "name", "directives"],
  InputObjectTypeDefinition: ["description", "name", "directives", "fields"],
  DirectiveDefinition: ["description", "name", "arguments", "locations"],
  SchemaExtension: ["directives", "operationTypes"],
  ScalarTypeExtension: ["name", "directives"],
  ObjectTypeExtension: ["name", "interfaces", "directives", "fields"],
  InterfaceTypeExtension: ["name", "interfaces", "directives", "fields"],
  UnionTypeExtension: ["name", "directives", "types"],
  EnumTypeExtension: ["name", "directives", "values"],
  InputObjectTypeExtension: ["name", "directives", "fields"]
}, wc = new Set(Object.keys(es));
function lo(t) {
  const e = t?.kind;
  return typeof e == "string" && wc.has(e);
}
var ee;
(function(t) {
  t.QUERY = "query", t.MUTATION = "mutation", t.SUBSCRIPTION = "subscription";
})(ee || (ee = {}));
var Jn;
(function(t) {
  t.QUERY = "QUERY", t.MUTATION = "MUTATION", t.SUBSCRIPTION = "SUBSCRIPTION", t.FIELD = "FIELD", t.FRAGMENT_DEFINITION = "FRAGMENT_DEFINITION", t.FRAGMENT_SPREAD = "FRAGMENT_SPREAD", t.INLINE_FRAGMENT = "INLINE_FRAGMENT", t.VARIABLE_DEFINITION = "VARIABLE_DEFINITION", t.SCHEMA = "SCHEMA", t.SCALAR = "SCALAR", t.OBJECT = "OBJECT", t.FIELD_DEFINITION = "FIELD_DEFINITION", t.ARGUMENT_DEFINITION = "ARGUMENT_DEFINITION", t.INTERFACE = "INTERFACE", t.UNION = "UNION", t.ENUM = "ENUM", t.ENUM_VALUE = "ENUM_VALUE", t.INPUT_OBJECT = "INPUT_OBJECT", t.INPUT_FIELD_DEFINITION = "INPUT_FIELD_DEFINITION";
})(Jn || (Jn = {}));
var O;
(function(t) {
  t.NAME = "Name", t.DOCUMENT = "Document", t.OPERATION_DEFINITION = "OperationDefinition", t.VARIABLE_DEFINITION = "VariableDefinition", t.SELECTION_SET = "SelectionSet", t.FIELD = "Field", t.ARGUMENT = "Argument", t.FRAGMENT_SPREAD = "FragmentSpread", t.INLINE_FRAGMENT = "InlineFragment", t.FRAGMENT_DEFINITION = "FragmentDefinition", t.VARIABLE = "Variable", t.INT = "IntValue", t.FLOAT = "FloatValue", t.STRING = "StringValue", t.BOOLEAN = "BooleanValue", t.NULL = "NullValue", t.ENUM = "EnumValue", t.LIST = "ListValue", t.OBJECT = "ObjectValue", t.OBJECT_FIELD = "ObjectField", t.DIRECTIVE = "Directive", t.NAMED_TYPE = "NamedType", t.LIST_TYPE = "ListType", t.NON_NULL_TYPE = "NonNullType", t.SCHEMA_DEFINITION = "SchemaDefinition", t.OPERATION_TYPE_DEFINITION = "OperationTypeDefinition", t.SCALAR_TYPE_DEFINITION = "ScalarTypeDefinition", t.OBJECT_TYPE_DEFINITION = "ObjectTypeDefinition", t.FIELD_DEFINITION = "FieldDefinition", t.INPUT_VALUE_DEFINITION = "InputValueDefinition", t.INTERFACE_TYPE_DEFINITION = "InterfaceTypeDefinition", t.UNION_TYPE_DEFINITION = "UnionTypeDefinition", t.ENUM_TYPE_DEFINITION = "EnumTypeDefinition", t.ENUM_VALUE_DEFINITION = "EnumValueDefinition", t.INPUT_OBJECT_TYPE_DEFINITION = "InputObjectTypeDefinition", t.DIRECTIVE_DEFINITION = "DirectiveDefinition", t.SCHEMA_EXTENSION = "SchemaExtension", t.SCALAR_TYPE_EXTENSION = "ScalarTypeExtension", t.OBJECT_TYPE_EXTENSION = "ObjectTypeExtension", t.INTERFACE_TYPE_EXTENSION = "InterfaceTypeExtension", t.UNION_TYPE_EXTENSION = "UnionTypeExtension", t.ENUM_TYPE_EXTENSION = "EnumTypeExtension", t.INPUT_OBJECT_TYPE_EXTENSION = "InputObjectTypeExtension";
})(O || (O = {}));
function Qn(t) {
  return t === 9 || t === 32;
}
function Pe(t) {
  return t >= 48 && t <= 57;
}
function rs(t) {
  return t >= 97 && t <= 122 || // A-Z
  t >= 65 && t <= 90;
}
function ns(t) {
  return rs(t) || t === 95;
}
function Ac(t) {
  return rs(t) || Pe(t) || t === 95;
}
function Lc(t) {
  var e;
  let r = Number.MAX_SAFE_INTEGER, n = null, i = -1;
  for (let a = 0; a < t.length; ++a) {
    var o;
    const u = t[a], c = Rc(u);
    c !== u.length && (n = (o = n) !== null && o !== void 0 ? o : a, i = a, a !== 0 && c < r && (r = c));
  }
  return t.map((a, u) => u === 0 ? a : a.slice(r)).slice(
    (e = n) !== null && e !== void 0 ? e : 0,
    i + 1
  );
}
function Rc(t) {
  let e = 0;
  for (; e < t.length && Qn(t.charCodeAt(e)); )
    ++e;
  return e;
}
function Nc(t, e) {
  const r = t.replace(/"""/g, '\\"""'), n = r.split(/\r\n|[\n\r]/g), i = n.length === 1, o = n.length > 1 && n.slice(1).every((m) => m.length === 0 || Qn(m.charCodeAt(0))), a = r.endsWith('\\"""'), u = t.endsWith('"') && !a, c = t.endsWith("\\"), s = u || c, l = (
    // add leading and trailing new lines only if it improves readability
    !i || t.length > 70 || s || o || a
  );
  let p = "";
  const f = i && Qn(t.charCodeAt(0));
  return (l && !f || o) && (p += `
`), p += r, (l || s) && (p += `
`), '"""' + p + '"""';
}
var d;
(function(t) {
  t.SOF = "<SOF>", t.EOF = "<EOF>", t.BANG = "!", t.DOLLAR = "$", t.AMP = "&", t.PAREN_L = "(", t.PAREN_R = ")", t.SPREAD = "...", t.COLON = ":", t.EQUALS = "=", t.AT = "@", t.BRACKET_L = "[", t.BRACKET_R = "]", t.BRACE_L = "{", t.PIPE = "|", t.BRACE_R = "}", t.NAME = "Name", t.INT = "Int", t.FLOAT = "Float", t.STRING = "String", t.BLOCK_STRING = "BlockString", t.COMMENT = "Comment";
})(d || (d = {}));
let Cc = class {
  /**
   * The previously focused non-ignored token.
   */
  /**
   * The currently focused non-ignored token.
   */
  /**
   * The (1-indexed) line containing the current token.
   */
  /**
   * The character offset at which the current line begins.
   */
  constructor(e) {
    const r = new ts(d.SOF, 0, 0, 0, 0);
    this.source = e, this.lastToken = r, this.token = r, this.line = 1, this.lineStart = 0;
  }
  get [Symbol.toStringTag]() {
    return "Lexer";
  }
  /**
   * Advances the token stream to the next non-ignored token.
   */
  advance() {
    return this.lastToken = this.token, this.token = this.lookahead();
  }
  /**
   * Looks ahead and returns the next non-ignored token, but does not change
   * the state of Lexer.
   */
  lookahead() {
    let e = this.token;
    if (e.kind !== d.EOF)
      do
        if (e.next)
          e = e.next;
        else {
          const r = Pc(this, e.end);
          e.next = r, r.prev = e, e = r;
        }
      while (e.kind === d.COMMENT);
    return e;
  }
};
function xc(t) {
  return t === d.BANG || t === d.DOLLAR || t === d.AMP || t === d.PAREN_L || t === d.PAREN_R || t === d.SPREAD || t === d.COLON || t === d.EQUALS || t === d.AT || t === d.BRACKET_L || t === d.BRACKET_R || t === d.BRACE_L || t === d.PIPE || t === d.BRACE_R;
}
function pe(t) {
  return t >= 0 && t <= 55295 || t >= 57344 && t <= 1114111;
}
function Br(t, e) {
  return is(t.charCodeAt(e)) && os(t.charCodeAt(e + 1));
}
function is(t) {
  return t >= 55296 && t <= 56319;
}
function os(t) {
  return t >= 56320 && t <= 57343;
}
function Bt(t, e) {
  const r = t.source.body.codePointAt(e);
  if (r === void 0)
    return d.EOF;
  if (r >= 32 && r <= 126) {
    const n = String.fromCodePoint(r);
    return n === '"' ? `'"'` : `"${n}"`;
  }
  return "U+" + r.toString(16).toUpperCase().padStart(4, "0");
}
function $(t, e, r, n, i) {
  const o = t.line, a = 1 + r - t.lineStart;
  return new ts(e, r, n, o, a, i);
}
function Pc(t, e) {
  const r = t.source.body, n = r.length;
  let i = e;
  for (; i < n; ) {
    const o = r.charCodeAt(i);
    switch (o) {
      case 65279:
      case 9:
      case 32:
      case 44:
        ++i;
        continue;
      case 10:
        ++i, ++t.line, t.lineStart = i;
        continue;
      case 13:
        r.charCodeAt(i + 1) === 10 ? i += 2 : ++i, ++t.line, t.lineStart = i;
        continue;
      case 35:
        return Ic(t, i);
      case 33:
        return $(t, d.BANG, i, i + 1);
      case 36:
        return $(t, d.DOLLAR, i, i + 1);
      case 38:
        return $(t, d.AMP, i, i + 1);
      case 40:
        return $(t, d.PAREN_L, i, i + 1);
      case 41:
        return $(t, d.PAREN_R, i, i + 1);
      case 46:
        if (r.charCodeAt(i + 1) === 46 && r.charCodeAt(i + 2) === 46)
          return $(t, d.SPREAD, i, i + 3);
        break;
      case 58:
        return $(t, d.COLON, i, i + 1);
      case 61:
        return $(t, d.EQUALS, i, i + 1);
      case 64:
        return $(t, d.AT, i, i + 1);
      case 91:
        return $(t, d.BRACKET_L, i, i + 1);
      case 93:
        return $(t, d.BRACKET_R, i, i + 1);
      case 123:
        return $(t, d.BRACE_L, i, i + 1);
      case 124:
        return $(t, d.PIPE, i, i + 1);
      case 125:
        return $(t, d.BRACE_R, i, i + 1);
      case 34:
        return r.charCodeAt(i + 1) === 34 && r.charCodeAt(i + 2) === 34 ? Bc(t, i) : kc(t, i);
    }
    if (Pe(o) || o === 45)
      return Mc(t, i, o);
    if (ns(o))
      return $c(t, i);
    throw G(
      t.source,
      i,
      o === 39 ? `Unexpected single quote character ('), did you mean to use a double quote (")?` : pe(o) || Br(r, i) ? `Unexpected character: ${Bt(t, i)}.` : `Invalid character: ${Bt(t, i)}.`
    );
  }
  return $(t, d.EOF, n, n);
}
function Ic(t, e) {
  const r = t.source.body, n = r.length;
  let i = e + 1;
  for (; i < n; ) {
    const o = r.charCodeAt(i);
    if (o === 10 || o === 13)
      break;
    if (pe(o))
      ++i;
    else if (Br(r, i))
      i += 2;
    else
      break;
  }
  return $(
    t,
    d.COMMENT,
    e,
    i,
    r.slice(e + 1, i)
  );
}
function Mc(t, e, r) {
  const n = t.source.body;
  let i = e, o = r, a = !1;
  if (o === 45 && (o = n.charCodeAt(++i)), o === 48) {
    if (o = n.charCodeAt(++i), Pe(o))
      throw G(
        t.source,
        i,
        `Invalid number, unexpected digit after 0: ${Bt(
          t,
          i
        )}.`
      );
  } else
    i = Qr(t, i, o), o = n.charCodeAt(i);
  if (o === 46 && (a = !0, o = n.charCodeAt(++i), i = Qr(t, i, o), o = n.charCodeAt(i)), (o === 69 || o === 101) && (a = !0, o = n.charCodeAt(++i), (o === 43 || o === 45) && (o = n.charCodeAt(++i)), i = Qr(t, i, o), o = n.charCodeAt(i)), o === 46 || ns(o))
    throw G(
      t.source,
      i,
      `Invalid number, expected digit but got: ${Bt(
        t,
        i
      )}.`
    );
  return $(
    t,
    a ? d.FLOAT : d.INT,
    e,
    i,
    n.slice(e, i)
  );
}
function Qr(t, e, r) {
  if (!Pe(r))
    throw G(
      t.source,
      e,
      `Invalid number, expected digit but got: ${Bt(
        t,
        e
      )}.`
    );
  const n = t.source.body;
  let i = e + 1;
  for (; Pe(n.charCodeAt(i)); )
    ++i;
  return i;
}
function kc(t, e) {
  const r = t.source.body, n = r.length;
  let i = e + 1, o = i, a = "";
  for (; i < n; ) {
    const u = r.charCodeAt(i);
    if (u === 34)
      return a += r.slice(o, i), $(t, d.STRING, e, i + 1, a);
    if (u === 92) {
      a += r.slice(o, i);
      const c = r.charCodeAt(i + 1) === 117 ? r.charCodeAt(i + 2) === 123 ? Dc(t, i) : Uc(t, i) : jc(t, i);
      a += c.value, i += c.size, o = i;
      continue;
    }
    if (u === 10 || u === 13)
      break;
    if (pe(u))
      ++i;
    else if (Br(r, i))
      i += 2;
    else
      throw G(
        t.source,
        i,
        `Invalid character within String: ${Bt(
          t,
          i
        )}.`
      );
  }
  throw G(t.source, i, "Unterminated string.");
}
function Dc(t, e) {
  const r = t.source.body;
  let n = 0, i = 3;
  for (; i < 12; ) {
    const o = r.charCodeAt(e + i++);
    if (o === 125) {
      if (i < 5 || !pe(n))
        break;
      return {
        value: String.fromCodePoint(n),
        size: i
      };
    }
    if (n = n << 4 | Oe(o), n < 0)
      break;
  }
  throw G(
    t.source,
    e,
    `Invalid Unicode escape sequence: "${r.slice(
      e,
      e + i
    )}".`
  );
}
function Uc(t, e) {
  const r = t.source.body, n = po(r, e + 2);
  if (pe(n))
    return {
      value: String.fromCodePoint(n),
      size: 6
    };
  if (is(n) && r.charCodeAt(e + 6) === 92 && r.charCodeAt(e + 7) === 117) {
    const i = po(r, e + 8);
    if (os(i))
      return {
        value: String.fromCodePoint(n, i),
        size: 12
      };
  }
  throw G(
    t.source,
    e,
    `Invalid Unicode escape sequence: "${r.slice(e, e + 6)}".`
  );
}
function po(t, e) {
  return Oe(t.charCodeAt(e)) << 12 | Oe(t.charCodeAt(e + 1)) << 8 | Oe(t.charCodeAt(e + 2)) << 4 | Oe(t.charCodeAt(e + 3));
}
function Oe(t) {
  return t >= 48 && t <= 57 ? t - 48 : t >= 65 && t <= 70 ? t - 55 : t >= 97 && t <= 102 ? t - 87 : -1;
}
function jc(t, e) {
  const r = t.source.body;
  switch (r.charCodeAt(e + 1)) {
    case 34:
      return {
        value: '"',
        size: 2
      };
    case 92:
      return {
        value: "\\",
        size: 2
      };
    case 47:
      return {
        value: "/",
        size: 2
      };
    case 98:
      return {
        value: "\b",
        size: 2
      };
    case 102:
      return {
        value: "\f",
        size: 2
      };
    case 110:
      return {
        value: `
`,
        size: 2
      };
    case 114:
      return {
        value: "\r",
        size: 2
      };
    case 116:
      return {
        value: "	",
        size: 2
      };
  }
  throw G(
    t.source,
    e,
    `Invalid character escape sequence: "${r.slice(
      e,
      e + 2
    )}".`
  );
}
function Bc(t, e) {
  const r = t.source.body, n = r.length;
  let i = t.lineStart, o = e + 3, a = o, u = "";
  const c = [];
  for (; o < n; ) {
    const s = r.charCodeAt(o);
    if (s === 34 && r.charCodeAt(o + 1) === 34 && r.charCodeAt(o + 2) === 34) {
      u += r.slice(a, o), c.push(u);
      const l = $(
        t,
        d.BLOCK_STRING,
        e,
        o + 3,
        // Return a string of the lines joined with U+000A.
        Lc(c).join(`
`)
      );
      return t.line += c.length - 1, t.lineStart = i, l;
    }
    if (s === 92 && r.charCodeAt(o + 1) === 34 && r.charCodeAt(o + 2) === 34 && r.charCodeAt(o + 3) === 34) {
      u += r.slice(a, o), a = o + 1, o += 4;
      continue;
    }
    if (s === 10 || s === 13) {
      u += r.slice(a, o), c.push(u), s === 13 && r.charCodeAt(o + 1) === 10 ? o += 2 : ++o, u = "", a = o, i = o;
      continue;
    }
    if (pe(s))
      ++o;
    else if (Br(r, o))
      o += 2;
    else
      throw G(
        t.source,
        o,
        `Invalid character within String: ${Bt(
          t,
          o
        )}.`
      );
  }
  throw G(t.source, o, "Unterminated string.");
}
function $c(t, e) {
  const r = t.source.body, n = r.length;
  let i = e + 1;
  for (; i < n; ) {
    const o = r.charCodeAt(i);
    if (Ac(o))
      ++i;
    else
      break;
  }
  return $(
    t,
    d.NAME,
    e,
    i,
    r.slice(e, i)
  );
}
const Fc = 10, as = 2;
function Ui(t) {
  return $r(t, []);
}
function $r(t, e) {
  switch (typeof t) {
    case "string":
      return JSON.stringify(t);
    case "function":
      return t.name ? `[function ${t.name}]` : "[function]";
    case "object":
      return Vc(t, e);
    default:
      return String(t);
  }
}
function Vc(t, e) {
  if (t === null)
    return "null";
  if (e.includes(t))
    return "[Circular]";
  const r = [...e, t];
  if (Gc(t)) {
    const n = t.toJSON();
    if (n !== t)
      return typeof n == "string" ? n : $r(n, r);
  } else if (Array.isArray(t))
    return zc(t, r);
  return Hc(t, r);
}
function Gc(t) {
  return typeof t.toJSON == "function";
}
function Hc(t, e) {
  const r = Object.entries(t);
  return r.length === 0 ? "{}" : e.length > as ? "[" + Xc(t) + "]" : "{ " + r.map(
    ([n, i]) => n + ": " + $r(i, e)
  ).join(", ") + " }";
}
function zc(t, e) {
  if (t.length === 0)
    return "[]";
  if (e.length > as)
    return "[Array]";
  const r = Math.min(Fc, t.length), n = t.length - r, i = [];
  for (let o = 0; o < r; ++o)
    i.push($r(t[o], e));
  return n === 1 ? i.push("... 1 more item") : n > 1 && i.push(`... ${n} more items`), "[" + i.join(", ") + "]";
}
function Xc(t) {
  const e = Object.prototype.toString.call(t).replace(/^\[object /, "").replace(/]$/, "");
  if (e === "Object" && typeof t.constructor == "function") {
    const r = t.constructor.name;
    if (typeof r == "string" && r !== "")
      return r;
  }
  return e;
}
const qc = globalThis.process && // eslint-disable-next-line no-undef
process.env.NODE_ENV === "production", Kc = (
  /* c8 ignore next 6 */
  // FIXME: https://github.com/graphql/graphql-js/issues/2317
  qc ? function(t, e) {
    return t instanceof e;
  } : function(t, e) {
    if (t instanceof e)
      return !0;
    if (typeof t == "object" && t !== null) {
      var r;
      const n = e.prototype[Symbol.toStringTag], i = (
        // We still need to support constructor's name to detect conflicts with older versions of this library.
        Symbol.toStringTag in t ? t[Symbol.toStringTag] : (r = t.constructor) === null || r === void 0 ? void 0 : r.name
      );
      if (n === i) {
        const o = Ui(t);
        throw new Error(`Cannot use ${n} "${o}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`);
      }
    }
    return !1;
  }
);
let ss = class {
  constructor(e, r = "GraphQL request", n = {
    line: 1,
    column: 1
  }) {
    typeof e == "string" || cr(!1, `Body must be a string. Received: ${Ui(e)}.`), this.body = e, this.name = r, this.locationOffset = n, this.locationOffset.line > 0 || cr(
      !1,
      "line in locationOffset is 1-indexed and must be positive."
    ), this.locationOffset.column > 0 || cr(
      !1,
      "column in locationOffset is 1-indexed and must be positive."
    );
  }
  get [Symbol.toStringTag]() {
    return "Source";
  }
};
function Wc(t) {
  return Kc(t, ss);
}
function us(t, e) {
  const r = new Yc(t, e), n = r.parseDocument();
  return Object.defineProperty(n, "tokenCount", {
    enumerable: !1,
    value: r.tokenCount
  }), n;
}
let Yc = class {
  constructor(e, r = {}) {
    const n = Wc(e) ? e : new ss(e);
    this._lexer = new Cc(n), this._options = r, this._tokenCounter = 0;
  }
  get tokenCount() {
    return this._tokenCounter;
  }
  /**
   * Converts a name lex token into a name parse node.
   */
  parseName() {
    const e = this.expectToken(d.NAME);
    return this.node(e, {
      kind: O.NAME,
      value: e.value
    });
  }
  // Implements the parsing rules in the Document section.
  /**
   * Document : Definition+
   */
  parseDocument() {
    return this.node(this._lexer.token, {
      kind: O.DOCUMENT,
      definitions: this.many(
        d.SOF,
        this.parseDefinition,
        d.EOF
      )
    });
  }
  /**
   * Definition :
   *   - ExecutableDefinition
   *   - TypeSystemDefinition
   *   - TypeSystemExtension
   *
   * ExecutableDefinition :
   *   - OperationDefinition
   *   - FragmentDefinition
   *
   * TypeSystemDefinition :
   *   - SchemaDefinition
   *   - TypeDefinition
   *   - DirectiveDefinition
   *
   * TypeDefinition :
   *   - ScalarTypeDefinition
   *   - ObjectTypeDefinition
   *   - InterfaceTypeDefinition
   *   - UnionTypeDefinition
   *   - EnumTypeDefinition
   *   - InputObjectTypeDefinition
   */
  parseDefinition() {
    if (this.peek(d.BRACE_L))
      return this.parseOperationDefinition();
    const e = this.peekDescription(), r = e ? this._lexer.lookahead() : this._lexer.token;
    if (r.kind === d.NAME) {
      switch (r.value) {
        case "schema":
          return this.parseSchemaDefinition();
        case "scalar":
          return this.parseScalarTypeDefinition();
        case "type":
          return this.parseObjectTypeDefinition();
        case "interface":
          return this.parseInterfaceTypeDefinition();
        case "union":
          return this.parseUnionTypeDefinition();
        case "enum":
          return this.parseEnumTypeDefinition();
        case "input":
          return this.parseInputObjectTypeDefinition();
        case "directive":
          return this.parseDirectiveDefinition();
      }
      if (e)
        throw G(
          this._lexer.source,
          this._lexer.token.start,
          "Unexpected description, descriptions are supported only on type definitions."
        );
      switch (r.value) {
        case "query":
        case "mutation":
        case "subscription":
          return this.parseOperationDefinition();
        case "fragment":
          return this.parseFragmentDefinition();
        case "extend":
          return this.parseTypeSystemExtension();
      }
    }
    throw this.unexpected(r);
  }
  // Implements the parsing rules in the Operations section.
  /**
   * OperationDefinition :
   *  - SelectionSet
   *  - OperationType Name? VariableDefinitions? Directives? SelectionSet
   */
  parseOperationDefinition() {
    const e = this._lexer.token;
    if (this.peek(d.BRACE_L))
      return this.node(e, {
        kind: O.OPERATION_DEFINITION,
        operation: ee.QUERY,
        name: void 0,
        variableDefinitions: [],
        directives: [],
        selectionSet: this.parseSelectionSet()
      });
    const r = this.parseOperationType();
    let n;
    return this.peek(d.NAME) && (n = this.parseName()), this.node(e, {
      kind: O.OPERATION_DEFINITION,
      operation: r,
      name: n,
      variableDefinitions: this.parseVariableDefinitions(),
      directives: this.parseDirectives(!1),
      selectionSet: this.parseSelectionSet()
    });
  }
  /**
   * OperationType : one of query mutation subscription
   */
  parseOperationType() {
    const e = this.expectToken(d.NAME);
    switch (e.value) {
      case "query":
        return ee.QUERY;
      case "mutation":
        return ee.MUTATION;
      case "subscription":
        return ee.SUBSCRIPTION;
    }
    throw this.unexpected(e);
  }
  /**
   * VariableDefinitions : ( VariableDefinition+ )
   */
  parseVariableDefinitions() {
    return this.optionalMany(
      d.PAREN_L,
      this.parseVariableDefinition,
      d.PAREN_R
    );
  }
  /**
   * VariableDefinition : Variable : Type DefaultValue? Directives[Const]?
   */
  parseVariableDefinition() {
    return this.node(this._lexer.token, {
      kind: O.VARIABLE_DEFINITION,
      variable: this.parseVariable(),
      type: (this.expectToken(d.COLON), this.parseTypeReference()),
      defaultValue: this.expectOptionalToken(d.EQUALS) ? this.parseConstValueLiteral() : void 0,
      directives: this.parseConstDirectives()
    });
  }
  /**
   * Variable : $ Name
   */
  parseVariable() {
    const e = this._lexer.token;
    return this.expectToken(d.DOLLAR), this.node(e, {
      kind: O.VARIABLE,
      name: this.parseName()
    });
  }
  /**
   * ```
   * SelectionSet : { Selection+ }
   * ```
   */
  parseSelectionSet() {
    return this.node(this._lexer.token, {
      kind: O.SELECTION_SET,
      selections: this.many(
        d.BRACE_L,
        this.parseSelection,
        d.BRACE_R
      )
    });
  }
  /**
   * Selection :
   *   - Field
   *   - FragmentSpread
   *   - InlineFragment
   */
  parseSelection() {
    return this.peek(d.SPREAD) ? this.parseFragment() : this.parseField();
  }
  /**
   * Field : Alias? Name Arguments? Directives? SelectionSet?
   *
   * Alias : Name :
   */
  parseField() {
    const e = this._lexer.token, r = this.parseName();
    let n, i;
    return this.expectOptionalToken(d.COLON) ? (n = r, i = this.parseName()) : i = r, this.node(e, {
      kind: O.FIELD,
      alias: n,
      name: i,
      arguments: this.parseArguments(!1),
      directives: this.parseDirectives(!1),
      selectionSet: this.peek(d.BRACE_L) ? this.parseSelectionSet() : void 0
    });
  }
  /**
   * Arguments[Const] : ( Argument[?Const]+ )
   */
  parseArguments(e) {
    const r = e ? this.parseConstArgument : this.parseArgument;
    return this.optionalMany(d.PAREN_L, r, d.PAREN_R);
  }
  /**
   * Argument[Const] : Name : Value[?Const]
   */
  parseArgument(e = !1) {
    const r = this._lexer.token, n = this.parseName();
    return this.expectToken(d.COLON), this.node(r, {
      kind: O.ARGUMENT,
      name: n,
      value: this.parseValueLiteral(e)
    });
  }
  parseConstArgument() {
    return this.parseArgument(!0);
  }
  // Implements the parsing rules in the Fragments section.
  /**
   * Corresponds to both FragmentSpread and InlineFragment in the spec.
   *
   * FragmentSpread : ... FragmentName Directives?
   *
   * InlineFragment : ... TypeCondition? Directives? SelectionSet
   */
  parseFragment() {
    const e = this._lexer.token;
    this.expectToken(d.SPREAD);
    const r = this.expectOptionalKeyword("on");
    return !r && this.peek(d.NAME) ? this.node(e, {
      kind: O.FRAGMENT_SPREAD,
      name: this.parseFragmentName(),
      directives: this.parseDirectives(!1)
    }) : this.node(e, {
      kind: O.INLINE_FRAGMENT,
      typeCondition: r ? this.parseNamedType() : void 0,
      directives: this.parseDirectives(!1),
      selectionSet: this.parseSelectionSet()
    });
  }
  /**
   * FragmentDefinition :
   *   - fragment FragmentName on TypeCondition Directives? SelectionSet
   *
   * TypeCondition : NamedType
   */
  parseFragmentDefinition() {
    const e = this._lexer.token;
    return this.expectKeyword("fragment"), this._options.allowLegacyFragmentVariables === !0 ? this.node(e, {
      kind: O.FRAGMENT_DEFINITION,
      name: this.parseFragmentName(),
      variableDefinitions: this.parseVariableDefinitions(),
      typeCondition: (this.expectKeyword("on"), this.parseNamedType()),
      directives: this.parseDirectives(!1),
      selectionSet: this.parseSelectionSet()
    }) : this.node(e, {
      kind: O.FRAGMENT_DEFINITION,
      name: this.parseFragmentName(),
      typeCondition: (this.expectKeyword("on"), this.parseNamedType()),
      directives: this.parseDirectives(!1),
      selectionSet: this.parseSelectionSet()
    });
  }
  /**
   * FragmentName : Name but not `on`
   */
  parseFragmentName() {
    if (this._lexer.token.value === "on")
      throw this.unexpected();
    return this.parseName();
  }
  // Implements the parsing rules in the Values section.
  /**
   * Value[Const] :
   *   - [~Const] Variable
   *   - IntValue
   *   - FloatValue
   *   - StringValue
   *   - BooleanValue
   *   - NullValue
   *   - EnumValue
   *   - ListValue[?Const]
   *   - ObjectValue[?Const]
   *
   * BooleanValue : one of `true` `false`
   *
   * NullValue : `null`
   *
   * EnumValue : Name but not `true`, `false` or `null`
   */
  parseValueLiteral(e) {
    const r = this._lexer.token;
    switch (r.kind) {
      case d.BRACKET_L:
        return this.parseList(e);
      case d.BRACE_L:
        return this.parseObject(e);
      case d.INT:
        return this.advanceLexer(), this.node(r, {
          kind: O.INT,
          value: r.value
        });
      case d.FLOAT:
        return this.advanceLexer(), this.node(r, {
          kind: O.FLOAT,
          value: r.value
        });
      case d.STRING:
      case d.BLOCK_STRING:
        return this.parseStringLiteral();
      case d.NAME:
        switch (this.advanceLexer(), r.value) {
          case "true":
            return this.node(r, {
              kind: O.BOOLEAN,
              value: !0
            });
          case "false":
            return this.node(r, {
              kind: O.BOOLEAN,
              value: !1
            });
          case "null":
            return this.node(r, {
              kind: O.NULL
            });
          default:
            return this.node(r, {
              kind: O.ENUM,
              value: r.value
            });
        }
      case d.DOLLAR:
        if (e)
          if (this.expectToken(d.DOLLAR), this._lexer.token.kind === d.NAME) {
            const n = this._lexer.token.value;
            throw G(
              this._lexer.source,
              r.start,
              `Unexpected variable "$${n}" in constant value.`
            );
          } else
            throw this.unexpected(r);
        return this.parseVariable();
      default:
        throw this.unexpected();
    }
  }
  parseConstValueLiteral() {
    return this.parseValueLiteral(!0);
  }
  parseStringLiteral() {
    const e = this._lexer.token;
    return this.advanceLexer(), this.node(e, {
      kind: O.STRING,
      value: e.value,
      block: e.kind === d.BLOCK_STRING
    });
  }
  /**
   * ListValue[Const] :
   *   - [ ]
   *   - [ Value[?Const]+ ]
   */
  parseList(e) {
    const r = () => this.parseValueLiteral(e);
    return this.node(this._lexer.token, {
      kind: O.LIST,
      values: this.any(d.BRACKET_L, r, d.BRACKET_R)
    });
  }
  /**
   * ```
   * ObjectValue[Const] :
   *   - { }
   *   - { ObjectField[?Const]+ }
   * ```
   */
  parseObject(e) {
    const r = () => this.parseObjectField(e);
    return this.node(this._lexer.token, {
      kind: O.OBJECT,
      fields: this.any(d.BRACE_L, r, d.BRACE_R)
    });
  }
  /**
   * ObjectField[Const] : Name : Value[?Const]
   */
  parseObjectField(e) {
    const r = this._lexer.token, n = this.parseName();
    return this.expectToken(d.COLON), this.node(r, {
      kind: O.OBJECT_FIELD,
      name: n,
      value: this.parseValueLiteral(e)
    });
  }
  // Implements the parsing rules in the Directives section.
  /**
   * Directives[Const] : Directive[?Const]+
   */
  parseDirectives(e) {
    const r = [];
    for (; this.peek(d.AT); )
      r.push(this.parseDirective(e));
    return r;
  }
  parseConstDirectives() {
    return this.parseDirectives(!0);
  }
  /**
   * ```
   * Directive[Const] : @ Name Arguments[?Const]?
   * ```
   */
  parseDirective(e) {
    const r = this._lexer.token;
    return this.expectToken(d.AT), this.node(r, {
      kind: O.DIRECTIVE,
      name: this.parseName(),
      arguments: this.parseArguments(e)
    });
  }
  // Implements the parsing rules in the Types section.
  /**
   * Type :
   *   - NamedType
   *   - ListType
   *   - NonNullType
   */
  parseTypeReference() {
    const e = this._lexer.token;
    let r;
    if (this.expectOptionalToken(d.BRACKET_L)) {
      const n = this.parseTypeReference();
      this.expectToken(d.BRACKET_R), r = this.node(e, {
        kind: O.LIST_TYPE,
        type: n
      });
    } else
      r = this.parseNamedType();
    return this.expectOptionalToken(d.BANG) ? this.node(e, {
      kind: O.NON_NULL_TYPE,
      type: r
    }) : r;
  }
  /**
   * NamedType : Name
   */
  parseNamedType() {
    return this.node(this._lexer.token, {
      kind: O.NAMED_TYPE,
      name: this.parseName()
    });
  }
  // Implements the parsing rules in the Type Definition section.
  peekDescription() {
    return this.peek(d.STRING) || this.peek(d.BLOCK_STRING);
  }
  /**
   * Description : StringValue
   */
  parseDescription() {
    if (this.peekDescription())
      return this.parseStringLiteral();
  }
  /**
   * ```
   * SchemaDefinition : Description? schema Directives[Const]? { OperationTypeDefinition+ }
   * ```
   */
  parseSchemaDefinition() {
    const e = this._lexer.token, r = this.parseDescription();
    this.expectKeyword("schema");
    const n = this.parseConstDirectives(), i = this.many(
      d.BRACE_L,
      this.parseOperationTypeDefinition,
      d.BRACE_R
    );
    return this.node(e, {
      kind: O.SCHEMA_DEFINITION,
      description: r,
      directives: n,
      operationTypes: i
    });
  }
  /**
   * OperationTypeDefinition : OperationType : NamedType
   */
  parseOperationTypeDefinition() {
    const e = this._lexer.token, r = this.parseOperationType();
    this.expectToken(d.COLON);
    const n = this.parseNamedType();
    return this.node(e, {
      kind: O.OPERATION_TYPE_DEFINITION,
      operation: r,
      type: n
    });
  }
  /**
   * ScalarTypeDefinition : Description? scalar Name Directives[Const]?
   */
  parseScalarTypeDefinition() {
    const e = this._lexer.token, r = this.parseDescription();
    this.expectKeyword("scalar");
    const n = this.parseName(), i = this.parseConstDirectives();
    return this.node(e, {
      kind: O.SCALAR_TYPE_DEFINITION,
      description: r,
      name: n,
      directives: i
    });
  }
  /**
   * ObjectTypeDefinition :
   *   Description?
   *   type Name ImplementsInterfaces? Directives[Const]? FieldsDefinition?
   */
  parseObjectTypeDefinition() {
    const e = this._lexer.token, r = this.parseDescription();
    this.expectKeyword("type");
    const n = this.parseName(), i = this.parseImplementsInterfaces(), o = this.parseConstDirectives(), a = this.parseFieldsDefinition();
    return this.node(e, {
      kind: O.OBJECT_TYPE_DEFINITION,
      description: r,
      name: n,
      interfaces: i,
      directives: o,
      fields: a
    });
  }
  /**
   * ImplementsInterfaces :
   *   - implements `&`? NamedType
   *   - ImplementsInterfaces & NamedType
   */
  parseImplementsInterfaces() {
    return this.expectOptionalKeyword("implements") ? this.delimitedMany(d.AMP, this.parseNamedType) : [];
  }
  /**
   * ```
   * FieldsDefinition : { FieldDefinition+ }
   * ```
   */
  parseFieldsDefinition() {
    return this.optionalMany(
      d.BRACE_L,
      this.parseFieldDefinition,
      d.BRACE_R
    );
  }
  /**
   * FieldDefinition :
   *   - Description? Name ArgumentsDefinition? : Type Directives[Const]?
   */
  parseFieldDefinition() {
    const e = this._lexer.token, r = this.parseDescription(), n = this.parseName(), i = this.parseArgumentDefs();
    this.expectToken(d.COLON);
    const o = this.parseTypeReference(), a = this.parseConstDirectives();
    return this.node(e, {
      kind: O.FIELD_DEFINITION,
      description: r,
      name: n,
      arguments: i,
      type: o,
      directives: a
    });
  }
  /**
   * ArgumentsDefinition : ( InputValueDefinition+ )
   */
  parseArgumentDefs() {
    return this.optionalMany(
      d.PAREN_L,
      this.parseInputValueDef,
      d.PAREN_R
    );
  }
  /**
   * InputValueDefinition :
   *   - Description? Name : Type DefaultValue? Directives[Const]?
   */
  parseInputValueDef() {
    const e = this._lexer.token, r = this.parseDescription(), n = this.parseName();
    this.expectToken(d.COLON);
    const i = this.parseTypeReference();
    let o;
    this.expectOptionalToken(d.EQUALS) && (o = this.parseConstValueLiteral());
    const a = this.parseConstDirectives();
    return this.node(e, {
      kind: O.INPUT_VALUE_DEFINITION,
      description: r,
      name: n,
      type: i,
      defaultValue: o,
      directives: a
    });
  }
  /**
   * InterfaceTypeDefinition :
   *   - Description? interface Name Directives[Const]? FieldsDefinition?
   */
  parseInterfaceTypeDefinition() {
    const e = this._lexer.token, r = this.parseDescription();
    this.expectKeyword("interface");
    const n = this.parseName(), i = this.parseImplementsInterfaces(), o = this.parseConstDirectives(), a = this.parseFieldsDefinition();
    return this.node(e, {
      kind: O.INTERFACE_TYPE_DEFINITION,
      description: r,
      name: n,
      interfaces: i,
      directives: o,
      fields: a
    });
  }
  /**
   * UnionTypeDefinition :
   *   - Description? union Name Directives[Const]? UnionMemberTypes?
   */
  parseUnionTypeDefinition() {
    const e = this._lexer.token, r = this.parseDescription();
    this.expectKeyword("union");
    const n = this.parseName(), i = this.parseConstDirectives(), o = this.parseUnionMemberTypes();
    return this.node(e, {
      kind: O.UNION_TYPE_DEFINITION,
      description: r,
      name: n,
      directives: i,
      types: o
    });
  }
  /**
   * UnionMemberTypes :
   *   - = `|`? NamedType
   *   - UnionMemberTypes | NamedType
   */
  parseUnionMemberTypes() {
    return this.expectOptionalToken(d.EQUALS) ? this.delimitedMany(d.PIPE, this.parseNamedType) : [];
  }
  /**
   * EnumTypeDefinition :
   *   - Description? enum Name Directives[Const]? EnumValuesDefinition?
   */
  parseEnumTypeDefinition() {
    const e = this._lexer.token, r = this.parseDescription();
    this.expectKeyword("enum");
    const n = this.parseName(), i = this.parseConstDirectives(), o = this.parseEnumValuesDefinition();
    return this.node(e, {
      kind: O.ENUM_TYPE_DEFINITION,
      description: r,
      name: n,
      directives: i,
      values: o
    });
  }
  /**
   * ```
   * EnumValuesDefinition : { EnumValueDefinition+ }
   * ```
   */
  parseEnumValuesDefinition() {
    return this.optionalMany(
      d.BRACE_L,
      this.parseEnumValueDefinition,
      d.BRACE_R
    );
  }
  /**
   * EnumValueDefinition : Description? EnumValue Directives[Const]?
   */
  parseEnumValueDefinition() {
    const e = this._lexer.token, r = this.parseDescription(), n = this.parseEnumValueName(), i = this.parseConstDirectives();
    return this.node(e, {
      kind: O.ENUM_VALUE_DEFINITION,
      description: r,
      name: n,
      directives: i
    });
  }
  /**
   * EnumValue : Name but not `true`, `false` or `null`
   */
  parseEnumValueName() {
    if (this._lexer.token.value === "true" || this._lexer.token.value === "false" || this._lexer.token.value === "null")
      throw G(
        this._lexer.source,
        this._lexer.token.start,
        `${Ye(
          this._lexer.token
        )} is reserved and cannot be used for an enum value.`
      );
    return this.parseName();
  }
  /**
   * InputObjectTypeDefinition :
   *   - Description? input Name Directives[Const]? InputFieldsDefinition?
   */
  parseInputObjectTypeDefinition() {
    const e = this._lexer.token, r = this.parseDescription();
    this.expectKeyword("input");
    const n = this.parseName(), i = this.parseConstDirectives(), o = this.parseInputFieldsDefinition();
    return this.node(e, {
      kind: O.INPUT_OBJECT_TYPE_DEFINITION,
      description: r,
      name: n,
      directives: i,
      fields: o
    });
  }
  /**
   * ```
   * InputFieldsDefinition : { InputValueDefinition+ }
   * ```
   */
  parseInputFieldsDefinition() {
    return this.optionalMany(
      d.BRACE_L,
      this.parseInputValueDef,
      d.BRACE_R
    );
  }
  /**
   * TypeSystemExtension :
   *   - SchemaExtension
   *   - TypeExtension
   *
   * TypeExtension :
   *   - ScalarTypeExtension
   *   - ObjectTypeExtension
   *   - InterfaceTypeExtension
   *   - UnionTypeExtension
   *   - EnumTypeExtension
   *   - InputObjectTypeDefinition
   */
  parseTypeSystemExtension() {
    const e = this._lexer.lookahead();
    if (e.kind === d.NAME)
      switch (e.value) {
        case "schema":
          return this.parseSchemaExtension();
        case "scalar":
          return this.parseScalarTypeExtension();
        case "type":
          return this.parseObjectTypeExtension();
        case "interface":
          return this.parseInterfaceTypeExtension();
        case "union":
          return this.parseUnionTypeExtension();
        case "enum":
          return this.parseEnumTypeExtension();
        case "input":
          return this.parseInputObjectTypeExtension();
      }
    throw this.unexpected(e);
  }
  /**
   * ```
   * SchemaExtension :
   *  - extend schema Directives[Const]? { OperationTypeDefinition+ }
   *  - extend schema Directives[Const]
   * ```
   */
  parseSchemaExtension() {
    const e = this._lexer.token;
    this.expectKeyword("extend"), this.expectKeyword("schema");
    const r = this.parseConstDirectives(), n = this.optionalMany(
      d.BRACE_L,
      this.parseOperationTypeDefinition,
      d.BRACE_R
    );
    if (r.length === 0 && n.length === 0)
      throw this.unexpected();
    return this.node(e, {
      kind: O.SCHEMA_EXTENSION,
      directives: r,
      operationTypes: n
    });
  }
  /**
   * ScalarTypeExtension :
   *   - extend scalar Name Directives[Const]
   */
  parseScalarTypeExtension() {
    const e = this._lexer.token;
    this.expectKeyword("extend"), this.expectKeyword("scalar");
    const r = this.parseName(), n = this.parseConstDirectives();
    if (n.length === 0)
      throw this.unexpected();
    return this.node(e, {
      kind: O.SCALAR_TYPE_EXTENSION,
      name: r,
      directives: n
    });
  }
  /**
   * ObjectTypeExtension :
   *  - extend type Name ImplementsInterfaces? Directives[Const]? FieldsDefinition
   *  - extend type Name ImplementsInterfaces? Directives[Const]
   *  - extend type Name ImplementsInterfaces
   */
  parseObjectTypeExtension() {
    const e = this._lexer.token;
    this.expectKeyword("extend"), this.expectKeyword("type");
    const r = this.parseName(), n = this.parseImplementsInterfaces(), i = this.parseConstDirectives(), o = this.parseFieldsDefinition();
    if (n.length === 0 && i.length === 0 && o.length === 0)
      throw this.unexpected();
    return this.node(e, {
      kind: O.OBJECT_TYPE_EXTENSION,
      name: r,
      interfaces: n,
      directives: i,
      fields: o
    });
  }
  /**
   * InterfaceTypeExtension :
   *  - extend interface Name ImplementsInterfaces? Directives[Const]? FieldsDefinition
   *  - extend interface Name ImplementsInterfaces? Directives[Const]
   *  - extend interface Name ImplementsInterfaces
   */
  parseInterfaceTypeExtension() {
    const e = this._lexer.token;
    this.expectKeyword("extend"), this.expectKeyword("interface");
    const r = this.parseName(), n = this.parseImplementsInterfaces(), i = this.parseConstDirectives(), o = this.parseFieldsDefinition();
    if (n.length === 0 && i.length === 0 && o.length === 0)
      throw this.unexpected();
    return this.node(e, {
      kind: O.INTERFACE_TYPE_EXTENSION,
      name: r,
      interfaces: n,
      directives: i,
      fields: o
    });
  }
  /**
   * UnionTypeExtension :
   *   - extend union Name Directives[Const]? UnionMemberTypes
   *   - extend union Name Directives[Const]
   */
  parseUnionTypeExtension() {
    const e = this._lexer.token;
    this.expectKeyword("extend"), this.expectKeyword("union");
    const r = this.parseName(), n = this.parseConstDirectives(), i = this.parseUnionMemberTypes();
    if (n.length === 0 && i.length === 0)
      throw this.unexpected();
    return this.node(e, {
      kind: O.UNION_TYPE_EXTENSION,
      name: r,
      directives: n,
      types: i
    });
  }
  /**
   * EnumTypeExtension :
   *   - extend enum Name Directives[Const]? EnumValuesDefinition
   *   - extend enum Name Directives[Const]
   */
  parseEnumTypeExtension() {
    const e = this._lexer.token;
    this.expectKeyword("extend"), this.expectKeyword("enum");
    const r = this.parseName(), n = this.parseConstDirectives(), i = this.parseEnumValuesDefinition();
    if (n.length === 0 && i.length === 0)
      throw this.unexpected();
    return this.node(e, {
      kind: O.ENUM_TYPE_EXTENSION,
      name: r,
      directives: n,
      values: i
    });
  }
  /**
   * InputObjectTypeExtension :
   *   - extend input Name Directives[Const]? InputFieldsDefinition
   *   - extend input Name Directives[Const]
   */
  parseInputObjectTypeExtension() {
    const e = this._lexer.token;
    this.expectKeyword("extend"), this.expectKeyword("input");
    const r = this.parseName(), n = this.parseConstDirectives(), i = this.parseInputFieldsDefinition();
    if (n.length === 0 && i.length === 0)
      throw this.unexpected();
    return this.node(e, {
      kind: O.INPUT_OBJECT_TYPE_EXTENSION,
      name: r,
      directives: n,
      fields: i
    });
  }
  /**
   * ```
   * DirectiveDefinition :
   *   - Description? directive @ Name ArgumentsDefinition? `repeatable`? on DirectiveLocations
   * ```
   */
  parseDirectiveDefinition() {
    const e = this._lexer.token, r = this.parseDescription();
    this.expectKeyword("directive"), this.expectToken(d.AT);
    const n = this.parseName(), i = this.parseArgumentDefs(), o = this.expectOptionalKeyword("repeatable");
    this.expectKeyword("on");
    const a = this.parseDirectiveLocations();
    return this.node(e, {
      kind: O.DIRECTIVE_DEFINITION,
      description: r,
      name: n,
      arguments: i,
      repeatable: o,
      locations: a
    });
  }
  /**
   * DirectiveLocations :
   *   - `|`? DirectiveLocation
   *   - DirectiveLocations | DirectiveLocation
   */
  parseDirectiveLocations() {
    return this.delimitedMany(d.PIPE, this.parseDirectiveLocation);
  }
  /*
   * DirectiveLocation :
   *   - ExecutableDirectiveLocation
   *   - TypeSystemDirectiveLocation
   *
   * ExecutableDirectiveLocation : one of
   *   `QUERY`
   *   `MUTATION`
   *   `SUBSCRIPTION`
   *   `FIELD`
   *   `FRAGMENT_DEFINITION`
   *   `FRAGMENT_SPREAD`
   *   `INLINE_FRAGMENT`
   *
   * TypeSystemDirectiveLocation : one of
   *   `SCHEMA`
   *   `SCALAR`
   *   `OBJECT`
   *   `FIELD_DEFINITION`
   *   `ARGUMENT_DEFINITION`
   *   `INTERFACE`
   *   `UNION`
   *   `ENUM`
   *   `ENUM_VALUE`
   *   `INPUT_OBJECT`
   *   `INPUT_FIELD_DEFINITION`
   */
  parseDirectiveLocation() {
    const e = this._lexer.token, r = this.parseName();
    if (Object.prototype.hasOwnProperty.call(Jn, r.value))
      return r;
    throw this.unexpected(e);
  }
  // Core parsing utility functions
  /**
   * Returns a node that, if configured to do so, sets a "loc" field as a
   * location object, used to identify the place in the source that created a
   * given parsed object.
   */
  node(e, r) {
    return this._options.noLocation !== !0 && (r.loc = new Sc(
      e,
      this._lexer.lastToken,
      this._lexer.source
    )), r;
  }
  /**
   * Determines if the next token is of a given kind
   */
  peek(e) {
    return this._lexer.token.kind === e;
  }
  /**
   * If the next token is of the given kind, return that token after advancing the lexer.
   * Otherwise, do not change the parser state and throw an error.
   */
  expectToken(e) {
    const r = this._lexer.token;
    if (r.kind === e)
      return this.advanceLexer(), r;
    throw G(
      this._lexer.source,
      r.start,
      `Expected ${cs(e)}, found ${Ye(r)}.`
    );
  }
  /**
   * If the next token is of the given kind, return "true" after advancing the lexer.
   * Otherwise, do not change the parser state and return "false".
   */
  expectOptionalToken(e) {
    return this._lexer.token.kind === e ? (this.advanceLexer(), !0) : !1;
  }
  /**
   * If the next token is a given keyword, advance the lexer.
   * Otherwise, do not change the parser state and throw an error.
   */
  expectKeyword(e) {
    const r = this._lexer.token;
    if (r.kind === d.NAME && r.value === e)
      this.advanceLexer();
    else
      throw G(
        this._lexer.source,
        r.start,
        `Expected "${e}", found ${Ye(r)}.`
      );
  }
  /**
   * If the next token is a given keyword, return "true" after advancing the lexer.
   * Otherwise, do not change the parser state and return "false".
   */
  expectOptionalKeyword(e) {
    const r = this._lexer.token;
    return r.kind === d.NAME && r.value === e ? (this.advanceLexer(), !0) : !1;
  }
  /**
   * Helper function for creating an error when an unexpected lexed token is encountered.
   */
  unexpected(e) {
    const r = e ?? this._lexer.token;
    return G(
      this._lexer.source,
      r.start,
      `Unexpected ${Ye(r)}.`
    );
  }
  /**
   * Returns a possibly empty list of parse nodes, determined by the parseFn.
   * This list begins with a lex token of openKind and ends with a lex token of closeKind.
   * Advances the parser to the next lex token after the closing token.
   */
  any(e, r, n) {
    this.expectToken(e);
    const i = [];
    for (; !this.expectOptionalToken(n); )
      i.push(r.call(this));
    return i;
  }
  /**
   * Returns a list of parse nodes, determined by the parseFn.
   * It can be empty only if open token is missing otherwise it will always return non-empty list
   * that begins with a lex token of openKind and ends with a lex token of closeKind.
   * Advances the parser to the next lex token after the closing token.
   */
  optionalMany(e, r, n) {
    if (this.expectOptionalToken(e)) {
      const i = [];
      do
        i.push(r.call(this));
      while (!this.expectOptionalToken(n));
      return i;
    }
    return [];
  }
  /**
   * Returns a non-empty list of parse nodes, determined by the parseFn.
   * This list begins with a lex token of openKind and ends with a lex token of closeKind.
   * Advances the parser to the next lex token after the closing token.
   */
  many(e, r, n) {
    this.expectToken(e);
    const i = [];
    do
      i.push(r.call(this));
    while (!this.expectOptionalToken(n));
    return i;
  }
  /**
   * Returns a non-empty list of parse nodes, determined by the parseFn.
   * This list may begin with a lex token of delimiterKind followed by items separated by lex tokens of tokenKind.
   * Advances the parser to the next lex token after last item in the list.
   */
  delimitedMany(e, r) {
    this.expectOptionalToken(e);
    const n = [];
    do
      n.push(r.call(this));
    while (this.expectOptionalToken(e));
    return n;
  }
  advanceLexer() {
    const { maxTokens: e } = this._options, r = this._lexer.advance();
    if (r.kind !== d.EOF && (++this._tokenCounter, e !== void 0 && this._tokenCounter > e))
      throw G(
        this._lexer.source,
        r.start,
        `Document contains more that ${e} tokens. Parsing aborted.`
      );
  }
};
function Ye(t) {
  const e = t.value;
  return cs(t.kind) + (e != null ? ` "${e}"` : "");
}
function cs(t) {
  return xc(t) ? `"${t}"` : t;
}
function Jc(t) {
  return `"${t.replace(Qc, Zc)}"`;
}
const Qc = /[\x00-\x1f\x22\x5c\x7f-\x9f]/g;
function Zc(t) {
  return tl[t.charCodeAt(0)];
}
const tl = [
  "\\u0000",
  "\\u0001",
  "\\u0002",
  "\\u0003",
  "\\u0004",
  "\\u0005",
  "\\u0006",
  "\\u0007",
  "\\b",
  "\\t",
  "\\n",
  "\\u000B",
  "\\f",
  "\\r",
  "\\u000E",
  "\\u000F",
  "\\u0010",
  "\\u0011",
  "\\u0012",
  "\\u0013",
  "\\u0014",
  "\\u0015",
  "\\u0016",
  "\\u0017",
  "\\u0018",
  "\\u0019",
  "\\u001A",
  "\\u001B",
  "\\u001C",
  "\\u001D",
  "\\u001E",
  "\\u001F",
  "",
  "",
  '\\"',
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  // 2F
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  // 3F
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  // 4F
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "\\\\",
  "",
  "",
  "",
  // 5F
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  // 6F
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "\\u007F",
  "\\u0080",
  "\\u0081",
  "\\u0082",
  "\\u0083",
  "\\u0084",
  "\\u0085",
  "\\u0086",
  "\\u0087",
  "\\u0088",
  "\\u0089",
  "\\u008A",
  "\\u008B",
  "\\u008C",
  "\\u008D",
  "\\u008E",
  "\\u008F",
  "\\u0090",
  "\\u0091",
  "\\u0092",
  "\\u0093",
  "\\u0094",
  "\\u0095",
  "\\u0096",
  "\\u0097",
  "\\u0098",
  "\\u0099",
  "\\u009A",
  "\\u009B",
  "\\u009C",
  "\\u009D",
  "\\u009E",
  "\\u009F"
], el = Object.freeze({});
function rl(t, e, r = es) {
  const n = /* @__PURE__ */ new Map();
  for (const E of Object.values(O))
    n.set(E, nl(e, E));
  let i, o = Array.isArray(t), a = [t], u = -1, c = [], s = t, l, p;
  const f = [], m = [];
  do {
    u++;
    const E = u === a.length, L = E && c.length !== 0;
    if (E) {
      if (l = m.length === 0 ? void 0 : f[f.length - 1], s = p, p = m.pop(), L)
        if (o) {
          s = s.slice();
          let D = 0;
          for (const [F, j] of c) {
            const tt = F - D;
            j === null ? (s.splice(tt, 1), D++) : s[tt] = j;
          }
        } else {
          s = C({}, s);
          for (const [D, F] of c)
            s[D] = F;
        }
      u = i.index, a = i.keys, c = i.edits, o = i.inArray, i = i.prev;
    } else if (p) {
      if (l = o ? u : a[u], s = p[l], s == null)
        continue;
      f.push(l);
    }
    let U;
    if (!Array.isArray(s)) {
      var v, y;
      lo(s) || cr(!1, `Invalid AST Node: ${Ui(s)}.`);
      const D = E ? (v = n.get(s.kind)) === null || v === void 0 ? void 0 : v.leave : (y = n.get(s.kind)) === null || y === void 0 ? void 0 : y.enter;
      if (U = D?.call(e, s, l, p, f, m), U === el)
        break;
      if (U === !1) {
        if (!E) {
          f.pop();
          continue;
        }
      } else if (U !== void 0 && (c.push([l, U]), !E))
        if (lo(U))
          s = U;
        else {
          f.pop();
          continue;
        }
    }
    if (U === void 0 && L && c.push([l, s]), E)
      f.pop();
    else {
      var _;
      i = {
        inArray: o,
        index: u,
        keys: a,
        edits: c,
        prev: i
      }, o = Array.isArray(s), a = o ? s : (_ = r[s.kind]) !== null && _ !== void 0 ? _ : [], u = -1, c = [], p && m.push(p), p = s;
    }
  } while (i !== void 0);
  return c.length !== 0 ? c[c.length - 1][1] : t;
}
function nl(t, e) {
  const r = t[e];
  return typeof r == "object" ? r : typeof r == "function" ? {
    enter: r,
    leave: void 0
  } : {
    enter: t.enter,
    leave: t.leave
  };
}
function il(t) {
  return rl(t, al);
}
const ol = 80, al = {
  Name: {
    leave: (t) => t.value
  },
  Variable: {
    leave: (t) => "$" + t.name
  },
  // Document
  Document: {
    leave: (t) => b(t.definitions, `

`)
  },
  OperationDefinition: {
    leave(t) {
      const e = R("(", b(t.variableDefinitions, ", "), ")"), r = b(
        [
          t.operation,
          b([t.name, e]),
          b(t.directives, " ")
        ],
        " "
      );
      return (r === "query" ? "" : r + " ") + t.selectionSet;
    }
  },
  VariableDefinition: {
    leave: ({ variable: t, type: e, defaultValue: r, directives: n }) => t + ": " + e + R(" = ", r) + R(" ", b(n, " "))
  },
  SelectionSet: {
    leave: ({ selections: t }) => at(t)
  },
  Field: {
    leave({ alias: t, name: e, arguments: r, directives: n, selectionSet: i }) {
      const o = R("", t, ": ") + e;
      let a = o + R("(", b(r, ", "), ")");
      return a.length > ol && (a = o + R(`(
`, lr(b(r, `
`)), `
)`)), b([a, b(n, " "), i], " ");
    }
  },
  Argument: {
    leave: ({ name: t, value: e }) => t + ": " + e
  },
  // Fragments
  FragmentSpread: {
    leave: ({ name: t, directives: e }) => "..." + t + R(" ", b(e, " "))
  },
  InlineFragment: {
    leave: ({ typeCondition: t, directives: e, selectionSet: r }) => b(
      [
        "...",
        R("on ", t),
        b(e, " "),
        r
      ],
      " "
    )
  },
  FragmentDefinition: {
    leave: ({ name: t, typeCondition: e, variableDefinitions: r, directives: n, selectionSet: i }) => (
      // or removed in the future.
      `fragment ${t}${R("(", b(r, ", "), ")")} on ${e} ${R("", b(n, " "), " ")}` + i
    )
  },
  // Value
  IntValue: {
    leave: ({ value: t }) => t
  },
  FloatValue: {
    leave: ({ value: t }) => t
  },
  StringValue: {
    leave: ({ value: t, block: e }) => e ? Nc(t) : Jc(t)
  },
  BooleanValue: {
    leave: ({ value: t }) => t ? "true" : "false"
  },
  NullValue: {
    leave: () => "null"
  },
  EnumValue: {
    leave: ({ value: t }) => t
  },
  ListValue: {
    leave: ({ values: t }) => "[" + b(t, ", ") + "]"
  },
  ObjectValue: {
    leave: ({ fields: t }) => "{" + b(t, ", ") + "}"
  },
  ObjectField: {
    leave: ({ name: t, value: e }) => t + ": " + e
  },
  // Directive
  Directive: {
    leave: ({ name: t, arguments: e }) => "@" + t + R("(", b(e, ", "), ")")
  },
  // Type
  NamedType: {
    leave: ({ name: t }) => t
  },
  ListType: {
    leave: ({ type: t }) => "[" + t + "]"
  },
  NonNullType: {
    leave: ({ type: t }) => t + "!"
  },
  // Type System Definitions
  SchemaDefinition: {
    leave: ({ description: t, directives: e, operationTypes: r }) => R("", t, `
`) + b(["schema", b(e, " "), at(r)], " ")
  },
  OperationTypeDefinition: {
    leave: ({ operation: t, type: e }) => t + ": " + e
  },
  ScalarTypeDefinition: {
    leave: ({ description: t, name: e, directives: r }) => R("", t, `
`) + b(["scalar", e, b(r, " ")], " ")
  },
  ObjectTypeDefinition: {
    leave: ({ description: t, name: e, interfaces: r, directives: n, fields: i }) => R("", t, `
`) + b(
      [
        "type",
        e,
        R("implements ", b(r, " & ")),
        b(n, " "),
        at(i)
      ],
      " "
    )
  },
  FieldDefinition: {
    leave: ({ description: t, name: e, arguments: r, type: n, directives: i }) => R("", t, `
`) + e + (fo(r) ? R(`(
`, lr(b(r, `
`)), `
)`) : R("(", b(r, ", "), ")")) + ": " + n + R(" ", b(i, " "))
  },
  InputValueDefinition: {
    leave: ({ description: t, name: e, type: r, defaultValue: n, directives: i }) => R("", t, `
`) + b(
      [e + ": " + r, R("= ", n), b(i, " ")],
      " "
    )
  },
  InterfaceTypeDefinition: {
    leave: ({ description: t, name: e, interfaces: r, directives: n, fields: i }) => R("", t, `
`) + b(
      [
        "interface",
        e,
        R("implements ", b(r, " & ")),
        b(n, " "),
        at(i)
      ],
      " "
    )
  },
  UnionTypeDefinition: {
    leave: ({ description: t, name: e, directives: r, types: n }) => R("", t, `
`) + b(
      ["union", e, b(r, " "), R("= ", b(n, " | "))],
      " "
    )
  },
  EnumTypeDefinition: {
    leave: ({ description: t, name: e, directives: r, values: n }) => R("", t, `
`) + b(["enum", e, b(r, " "), at(n)], " ")
  },
  EnumValueDefinition: {
    leave: ({ description: t, name: e, directives: r }) => R("", t, `
`) + b([e, b(r, " ")], " ")
  },
  InputObjectTypeDefinition: {
    leave: ({ description: t, name: e, directives: r, fields: n }) => R("", t, `
`) + b(["input", e, b(r, " "), at(n)], " ")
  },
  DirectiveDefinition: {
    leave: ({ description: t, name: e, arguments: r, repeatable: n, locations: i }) => R("", t, `
`) + "directive @" + e + (fo(r) ? R(`(
`, lr(b(r, `
`)), `
)`) : R("(", b(r, ", "), ")")) + (n ? " repeatable" : "") + " on " + b(i, " | ")
  },
  SchemaExtension: {
    leave: ({ directives: t, operationTypes: e }) => b(
      ["extend schema", b(t, " "), at(e)],
      " "
    )
  },
  ScalarTypeExtension: {
    leave: ({ name: t, directives: e }) => b(["extend scalar", t, b(e, " ")], " ")
  },
  ObjectTypeExtension: {
    leave: ({ name: t, interfaces: e, directives: r, fields: n }) => b(
      [
        "extend type",
        t,
        R("implements ", b(e, " & ")),
        b(r, " "),
        at(n)
      ],
      " "
    )
  },
  InterfaceTypeExtension: {
    leave: ({ name: t, interfaces: e, directives: r, fields: n }) => b(
      [
        "extend interface",
        t,
        R("implements ", b(e, " & ")),
        b(r, " "),
        at(n)
      ],
      " "
    )
  },
  UnionTypeExtension: {
    leave: ({ name: t, directives: e, types: r }) => b(
      [
        "extend union",
        t,
        b(e, " "),
        R("= ", b(r, " | "))
      ],
      " "
    )
  },
  EnumTypeExtension: {
    leave: ({ name: t, directives: e, values: r }) => b(["extend enum", t, b(e, " "), at(r)], " ")
  },
  InputObjectTypeExtension: {
    leave: ({ name: t, directives: e, fields: r }) => b(["extend input", t, b(e, " "), at(r)], " ")
  }
};
function b(t, e = "") {
  var r;
  return (r = t?.filter((n) => n).join(e)) !== null && r !== void 0 ? r : "";
}
function at(t) {
  return R(`{
`, lr(b(t, `
`)), `
}`);
}
function R(t, e, r = "") {
  return e != null && e !== "" ? t + e + r : "";
}
function lr(t) {
  return R("  ", t.replace(/\n/g, `
  `));
}
function fo(t) {
  var e;
  return (e = t?.some((r) => r.includes(`
`))) !== null && e !== void 0 ? e : !1;
}
const ji = JSON, sl = (t) => t.toUpperCase(), ul = (t) => {
  const e = {};
  return t.forEach((r, n) => {
    e[n] = r;
  }), e;
}, cl = (t, e, r) => t.document ? t : {
  document: t,
  variables: e,
  requestHeaders: r,
  signal: void 0
}, ll = (t, e, r) => t.query ? t : {
  query: t,
  variables: e,
  requestHeaders: r,
  signal: void 0
}, pl = (t, e) => t.documents ? t : {
  documents: t,
  requestHeaders: e,
  signal: void 0
}, ho = (t) => {
  var e, r;
  let n;
  const i = t.definitions.filter((o) => o.kind === "OperationDefinition");
  return i.length === 1 && (n = (r = (e = i[0]) == null ? void 0 : e.name) == null ? void 0 : r.value), n;
}, Zr = (t) => {
  if (typeof t == "string") {
    let r;
    try {
      const n = us(t);
      r = ho(n);
    } catch {
    }
    return { query: t, operationName: r };
  }
  const e = ho(t);
  return { query: il(t), operationName: e };
};
let ls = class pr extends Error {
  constructor(e, r) {
    const n = `${pr.extractMessage(e)}: ${JSON.stringify({
      response: e,
      request: r
    })}`;
    super(n), Object.setPrototypeOf(this, pr.prototype), this.response = e, this.request = r, typeof Error.captureStackTrace == "function" && Error.captureStackTrace(this, pr);
  }
  static extractMessage(e) {
    var r, n, i;
    return (i = (n = (r = e.errors) == null ? void 0 : r[0]) == null ? void 0 : n.message) != null ? i : `GraphQL Error (Code: ${e.status})`;
  }
};
var Bi = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function Fr(t) {
  return t && t.__esModule && Object.prototype.hasOwnProperty.call(t, "default") ? t.default : t;
}
var Zn = { exports: {} };
(function(t, e) {
  var r = typeof self < "u" ? self : Bi, n = function() {
    function o() {
      this.fetch = !1, this.DOMException = r.DOMException;
    }
    return o.prototype = r, new o();
  }();
  (function(o) {
    (function(a) {
      var u = {
        searchParams: "URLSearchParams" in o,
        iterable: "Symbol" in o && "iterator" in Symbol,
        blob: "FileReader" in o && "Blob" in o && function() {
          try {
            return new Blob(), !0;
          } catch {
            return !1;
          }
        }(),
        formData: "FormData" in o,
        arrayBuffer: "ArrayBuffer" in o
      };
      function c(h) {
        return h && DataView.prototype.isPrototypeOf(h);
      }
      if (u.arrayBuffer)
        var s = [
          "[object Int8Array]",
          "[object Uint8Array]",
          "[object Uint8ClampedArray]",
          "[object Int16Array]",
          "[object Uint16Array]",
          "[object Int32Array]",
          "[object Uint32Array]",
          "[object Float32Array]",
          "[object Float64Array]"
        ], l = ArrayBuffer.isView || function(h) {
          return h && s.indexOf(Object.prototype.toString.call(h)) > -1;
        };
      function p(h) {
        if (typeof h != "string" && (h = String(h)), /[^a-z0-9\-#$%&'*+.^_`|~]/i.test(h))
          throw new TypeError("Invalid character in header field name");
        return h.toLowerCase();
      }
      function f(h) {
        return typeof h != "string" && (h = String(h)), h;
      }
      function m(h) {
        var g = {
          next: function() {
            var A = h.shift();
            return { done: A === void 0, value: A };
          }
        };
        return u.iterable && (g[Symbol.iterator] = function() {
          return g;
        }), g;
      }
      function v(h) {
        this.map = {}, h instanceof v ? h.forEach(function(g, A) {
          this.append(A, g);
        }, this) : Array.isArray(h) ? h.forEach(function(g) {
          this.append(g[0], g[1]);
        }, this) : h && Object.getOwnPropertyNames(h).forEach(function(g) {
          this.append(g, h[g]);
        }, this);
      }
      v.prototype.append = function(h, g) {
        h = p(h), g = f(g);
        var A = this.map[h];
        this.map[h] = A ? A + ", " + g : g;
      }, v.prototype.delete = function(h) {
        delete this.map[p(h)];
      }, v.prototype.get = function(h) {
        return h = p(h), this.has(h) ? this.map[h] : null;
      }, v.prototype.has = function(h) {
        return this.map.hasOwnProperty(p(h));
      }, v.prototype.set = function(h, g) {
        this.map[p(h)] = f(g);
      }, v.prototype.forEach = function(h, g) {
        for (var A in this.map)
          this.map.hasOwnProperty(A) && h.call(g, this.map[A], A, this);
      }, v.prototype.keys = function() {
        var h = [];
        return this.forEach(function(g, A) {
          h.push(A);
        }), m(h);
      }, v.prototype.values = function() {
        var h = [];
        return this.forEach(function(g) {
          h.push(g);
        }), m(h);
      }, v.prototype.entries = function() {
        var h = [];
        return this.forEach(function(g, A) {
          h.push([A, g]);
        }), m(h);
      }, u.iterable && (v.prototype[Symbol.iterator] = v.prototype.entries);
      function y(h) {
        if (h.bodyUsed)
          return Promise.reject(new TypeError("Already read"));
        h.bodyUsed = !0;
      }
      function _(h) {
        return new Promise(function(g, A) {
          h.onload = function() {
            g(h.result);
          }, h.onerror = function() {
            A(h.error);
          };
        });
      }
      function E(h) {
        var g = new FileReader(), A = _(g);
        return g.readAsArrayBuffer(h), A;
      }
      function L(h) {
        var g = new FileReader(), A = _(g);
        return g.readAsText(h), A;
      }
      function U(h) {
        for (var g = new Uint8Array(h), A = new Array(g.length), z = 0; z < g.length; z++)
          A[z] = String.fromCharCode(g[z]);
        return A.join("");
      }
      function D(h) {
        if (h.slice)
          return h.slice(0);
        var g = new Uint8Array(h.byteLength);
        return g.set(new Uint8Array(h)), g.buffer;
      }
      function F() {
        return this.bodyUsed = !1, this._initBody = function(h) {
          this._bodyInit = h, h ? typeof h == "string" ? this._bodyText = h : u.blob && Blob.prototype.isPrototypeOf(h) ? this._bodyBlob = h : u.formData && FormData.prototype.isPrototypeOf(h) ? this._bodyFormData = h : u.searchParams && URLSearchParams.prototype.isPrototypeOf(h) ? this._bodyText = h.toString() : u.arrayBuffer && u.blob && c(h) ? (this._bodyArrayBuffer = D(h.buffer), this._bodyInit = new Blob([this._bodyArrayBuffer])) : u.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(h) || l(h)) ? this._bodyArrayBuffer = D(h) : this._bodyText = h = Object.prototype.toString.call(h) : this._bodyText = "", this.headers.get("content-type") || (typeof h == "string" ? this.headers.set("content-type", "text/plain;charset=UTF-8") : this._bodyBlob && this._bodyBlob.type ? this.headers.set("content-type", this._bodyBlob.type) : u.searchParams && URLSearchParams.prototype.isPrototypeOf(h) && this.headers.set("content-type", "application/x-www-form-urlencoded;charset=UTF-8"));
        }, u.blob && (this.blob = function() {
          var h = y(this);
          if (h)
            return h;
          if (this._bodyBlob)
            return Promise.resolve(this._bodyBlob);
          if (this._bodyArrayBuffer)
            return Promise.resolve(new Blob([this._bodyArrayBuffer]));
          if (this._bodyFormData)
            throw new Error("could not read FormData body as blob");
          return Promise.resolve(new Blob([this._bodyText]));
        }, this.arrayBuffer = function() {
          return this._bodyArrayBuffer ? y(this) || Promise.resolve(this._bodyArrayBuffer) : this.blob().then(E);
        }), this.text = function() {
          var h = y(this);
          if (h)
            return h;
          if (this._bodyBlob)
            return L(this._bodyBlob);
          if (this._bodyArrayBuffer)
            return Promise.resolve(U(this._bodyArrayBuffer));
          if (this._bodyFormData)
            throw new Error("could not read FormData body as text");
          return Promise.resolve(this._bodyText);
        }, u.formData && (this.formData = function() {
          return this.text().then(dt);
        }), this.json = function() {
          return this.text().then(JSON.parse);
        }, this;
      }
      var j = ["DELETE", "GET", "HEAD", "OPTIONS", "POST", "PUT"];
      function tt(h) {
        var g = h.toUpperCase();
        return j.indexOf(g) > -1 ? g : h;
      }
      function B(h, g) {
        g = g || {};
        var A = g.body;
        if (h instanceof B) {
          if (h.bodyUsed)
            throw new TypeError("Already read");
          this.url = h.url, this.credentials = h.credentials, g.headers || (this.headers = new v(h.headers)), this.method = h.method, this.mode = h.mode, this.signal = h.signal, !A && h._bodyInit != null && (A = h._bodyInit, h.bodyUsed = !0);
        } else
          this.url = String(h);
        if (this.credentials = g.credentials || this.credentials || "same-origin", (g.headers || !this.headers) && (this.headers = new v(g.headers)), this.method = tt(g.method || this.method || "GET"), this.mode = g.mode || this.mode || null, this.signal = g.signal || this.signal, this.referrer = null, (this.method === "GET" || this.method === "HEAD") && A)
          throw new TypeError("Body not allowed for GET or HEAD requests");
        this._initBody(A);
      }
      B.prototype.clone = function() {
        return new B(this, { body: this._bodyInit });
      };
      function dt(h) {
        var g = new FormData();
        return h.trim().split("&").forEach(function(A) {
          if (A) {
            var z = A.split("="), H = z.shift().replace(/\+/g, " "), M = z.join("=").replace(/\+/g, " ");
            g.append(decodeURIComponent(H), decodeURIComponent(M));
          }
        }), g;
      }
      function vt(h) {
        var g = new v(), A = h.replace(/\r?\n[\t ]+/g, " ");
        return A.split(/\r?\n/).forEach(function(z) {
          var H = z.split(":"), M = H.shift().trim();
          if (M) {
            var We = H.join(":").trim();
            g.append(M, We);
          }
        }), g;
      }
      F.call(B.prototype);
      function et(h, g) {
        g || (g = {}), this.type = "default", this.status = g.status === void 0 ? 200 : g.status, this.ok = this.status >= 200 && this.status < 300, this.statusText = "statusText" in g ? g.statusText : "OK", this.headers = new v(g.headers), this.url = g.url || "", this._initBody(h);
      }
      F.call(et.prototype), et.prototype.clone = function() {
        return new et(this._bodyInit, {
          status: this.status,
          statusText: this.statusText,
          headers: new v(this.headers),
          url: this.url
        });
      }, et.error = function() {
        var h = new et(null, { status: 0, statusText: "" });
        return h.type = "error", h;
      };
      var uc = [301, 302, 303, 307, 308];
      et.redirect = function(h, g) {
        if (uc.indexOf(g) === -1)
          throw new RangeError("Invalid status code");
        return new et(null, { status: g, headers: { location: h } });
      }, a.DOMException = o.DOMException;
      try {
        new a.DOMException();
      } catch {
        a.DOMException = function(g, A) {
          this.message = g, this.name = A;
          var z = Error(g);
          this.stack = z.stack;
        }, a.DOMException.prototype = Object.create(Error.prototype), a.DOMException.prototype.constructor = a.DOMException;
      }
      function Yr(h, g) {
        return new Promise(function(A, z) {
          var H = new B(h, g);
          if (H.signal && H.signal.aborted)
            return z(new a.DOMException("Aborted", "AbortError"));
          var M = new XMLHttpRequest();
          function We() {
            M.abort();
          }
          M.onload = function() {
            var ve = {
              status: M.status,
              statusText: M.statusText,
              headers: vt(M.getAllResponseHeaders() || "")
            };
            ve.url = "responseURL" in M ? M.responseURL : ve.headers.get("X-Request-URL");
            var Jr = "response" in M ? M.response : M.responseText;
            A(new et(Jr, ve));
          }, M.onerror = function() {
            z(new TypeError("Network request failed"));
          }, M.ontimeout = function() {
            z(new TypeError("Network request failed"));
          }, M.onabort = function() {
            z(new a.DOMException("Aborted", "AbortError"));
          }, M.open(H.method, H.url, !0), H.credentials === "include" ? M.withCredentials = !0 : H.credentials === "omit" && (M.withCredentials = !1), "responseType" in M && u.blob && (M.responseType = "blob"), H.headers.forEach(function(ve, Jr) {
            M.setRequestHeader(Jr, ve);
          }), H.signal && (H.signal.addEventListener("abort", We), M.onreadystatechange = function() {
            M.readyState === 4 && H.signal.removeEventListener("abort", We);
          }), M.send(typeof H._bodyInit > "u" ? null : H._bodyInit);
        });
      }
      return Yr.polyfill = !0, o.fetch || (o.fetch = Yr, o.Headers = v, o.Request = B, o.Response = et), a.Headers = v, a.Request = B, a.Response = et, a.fetch = Yr, Object.defineProperty(a, "__esModule", { value: !0 }), a;
    })({});
  })(n), n.fetch.ponyfill = !0, delete n.fetch.polyfill;
  var i = n;
  e = i.fetch, e.default = i.fetch, e.fetch = i.fetch, e.Headers = i.Headers, e.Request = i.Request, e.Response = i.Response, t.exports = e;
})(Zn, Zn.exports);
var Tr = Zn.exports;
const fr = /* @__PURE__ */ Fr(Tr), fl = /* @__PURE__ */ yc({
  __proto__: null,
  default: fr
}, [Tr]), Kt = (t) => {
  let e = {};
  return t && (typeof Headers < "u" && t instanceof Headers || fl && Tr.Headers && t instanceof Tr.Headers ? e = ul(t) : Array.isArray(t) ? t.forEach(([r, n]) => {
    r && n !== void 0 && (e[r] = n);
  }) : e = t), e;
}, vo = (t) => t.replace(/([\s,]|#[^\n\r]+)+/g, " ").trim(), hl = (t) => {
  if (!Array.isArray(t.query)) {
    const n = t, i = [`query=${encodeURIComponent(vo(n.query))}`];
    return t.variables && i.push(`variables=${encodeURIComponent(n.jsonSerializer.stringify(n.variables))}`), n.operationName && i.push(`operationName=${encodeURIComponent(n.operationName)}`), i.join("&");
  }
  if (typeof t.variables < "u" && !Array.isArray(t.variables))
    throw new Error("Cannot create query with given variable type, array expected");
  const e = t, r = t.query.reduce((n, i, o) => (n.push({
    query: vo(i),
    variables: e.variables ? e.jsonSerializer.stringify(e.variables[o]) : void 0
  }), n), []);
  return `query=${encodeURIComponent(e.jsonSerializer.stringify(r))}`;
}, dl = (t) => (e) => se(void 0, null, function* () {
  var r;
  const { url: n, query: i, variables: o, operationName: a, fetch: u, fetchOptions: c, middleware: s } = e, l = C({}, e.headers);
  let p = "", f;
  t === "POST" ? (f = ml(i, o, a, c.jsonSerializer), typeof f == "string" && (l["Content-Type"] = "application/json")) : p = hl({
    query: i,
    variables: o,
    operationName: a,
    jsonSerializer: (r = c.jsonSerializer) != null ? r : ji
  });
  const m = C({
    method: t,
    headers: l,
    body: f
  }, c);
  let v = n, y = m;
  if (s) {
    const _ = yield Promise.resolve(s(Er(C({}, m), { url: n, operationName: a, variables: o }))), { url: E } = _, L = we(_, ["url"]);
    v = E, y = L;
  }
  return p && (v = `${v}?${p}`), yield u(v, y);
});
let vl = class {
  constructor(e, r = {}) {
    this.url = e, this.requestConfig = r, this.rawRequest = (...n) => se(this, null, function* () {
      const [i, o, a] = n, u = ll(i, o, a), c = this.requestConfig, { headers: s, fetch: l = fr, method: p = "POST", requestMiddleware: f, responseMiddleware: m } = c, v = we(c, ["headers", "fetch", "method", "requestMiddleware", "responseMiddleware"]), { url: y } = this;
      u.signal !== void 0 && (v.signal = u.signal);
      const { operationName: _ } = Zr(u.query);
      return tn({
        url: y,
        query: u.query,
        variables: u.variables,
        headers: C(C({}, Kt(en(s))), Kt(u.requestHeaders)),
        operationName: _,
        fetch: l,
        method: p,
        fetchOptions: v,
        middleware: f
      }).then((E) => (m && m(E), E)).catch((E) => {
        throw m && m(E), E;
      });
    });
  }
  request(e, ...r) {
    return se(this, null, function* () {
      const [n, i] = r, o = cl(e, n, i), a = this.requestConfig, { headers: u, fetch: c = fr, method: s = "POST", requestMiddleware: l, responseMiddleware: p } = a, f = we(a, ["headers", "fetch", "method", "requestMiddleware", "responseMiddleware"]), { url: m } = this;
      o.signal !== void 0 && (f.signal = o.signal);
      const { query: v, operationName: y } = Zr(o.document);
      return tn({
        url: m,
        query: v,
        variables: o.variables,
        headers: C(C({}, Kt(en(u))), Kt(o.requestHeaders)),
        operationName: y,
        fetch: c,
        method: s,
        fetchOptions: f,
        middleware: l
      }).then((_) => (p && p(_), _.data)).catch((_) => {
        throw p && p(_), _;
      });
    });
  }
  // prettier-ignore
  batchRequests(e, r) {
    var n;
    const i = pl(e, r), o = this.requestConfig, { headers: a } = o, u = we(o, ["headers"]);
    i.signal !== void 0 && (u.signal = i.signal);
    const c = i.documents.map(({ document: l }) => Zr(l).query), s = i.documents.map(({ variables: l }) => l);
    return tn({
      url: this.url,
      query: c,
      // @ts-expect-error TODO reconcile batch variables into system.
      variables: s,
      headers: C(C({}, Kt(en(a))), Kt(i.requestHeaders)),
      operationName: void 0,
      fetch: (n = this.requestConfig.fetch) != null ? n : fr,
      method: this.requestConfig.method || "POST",
      fetchOptions: u,
      middleware: this.requestConfig.requestMiddleware
    }).then((l) => (this.requestConfig.responseMiddleware && this.requestConfig.responseMiddleware(l), l.data)).catch((l) => {
      throw this.requestConfig.responseMiddleware && this.requestConfig.responseMiddleware(l), l;
    });
  }
  setHeaders(e) {
    return this.requestConfig.headers = e, this;
  }
  /**
   * Attach a header to the client. All subsequent requests will have this header.
   */
  setHeader(e, r) {
    const { headers: n } = this.requestConfig;
    return n ? n[e] = r : this.requestConfig.headers = { [e]: r }, this;
  }
  /**
   * Change the client endpoint. All subsequent requests will send to this endpoint.
   */
  setEndpoint(e) {
    return this.url = e, this;
  }
};
const tn = (t) => se(void 0, null, function* () {
  var e, r;
  const { query: n, variables: i, fetchOptions: o } = t, a = dl(sl((e = t.method) != null ? e : "post")), u = Array.isArray(t.query), c = yield a(t), s = yield yl(c, (r = o.jsonSerializer) != null ? r : ji), l = Array.isArray(s) ? !s.some(({ data: f }) => !f) : !!s.data, p = Array.isArray(s) || !s.errors || Array.isArray(s.errors) && !s.errors.length || o.errorPolicy === "all" || o.errorPolicy === "ignore";
  if (c.ok && p && l) {
    const f = s, m = we(f, ["errors"]), v = o.errorPolicy === "ignore" ? m : s;
    return Er(C({}, u ? { data: v } : v), {
      headers: c.headers,
      status: c.status
    });
  } else {
    const f = typeof s == "string" ? {
      error: s
    } : s;
    throw new ls(
      // @ts-expect-error TODO
      Er(C({}, f), { status: c.status, headers: c.headers }),
      { query: n, variables: i }
    );
  }
}), ml = (t, e, r, n) => {
  const i = n ?? ji;
  if (!Array.isArray(t))
    return i.stringify({ query: t, variables: e, operationName: r });
  if (typeof e < "u" && !Array.isArray(e))
    throw new Error("Cannot create request body with given variable type, array expected");
  const o = t.reduce((a, u, c) => (a.push({ query: u, variables: e ? e[c] : void 0 }), a), []);
  return i.stringify(o);
}, yl = (t, e) => se(void 0, null, function* () {
  let r;
  return t.headers.forEach((n, i) => {
    i.toLowerCase() === "content-type" && (r = n);
  }), r && (r.toLowerCase().startsWith("application/json") || r.toLowerCase().startsWith("application/graphql+json") || r.toLowerCase().startsWith("application/graphql-response+json")) ? e.parse(yield t.text()) : t.text();
}), en = (t) => typeof t == "function" ? t() : t;
var ti = { exports: {} };
(function(t, e) {
  e = t.exports = r, e.getSerialize = n;
  function r(i, o, a, u) {
    return JSON.stringify(i, n(o, u), a);
  }
  function n(i, o) {
    var a = [], u = [];
    return o == null && (o = function(c, s) {
      return a[0] === s ? "[Circular ~]" : "[Circular ~." + u.slice(0, a.indexOf(s)).join(".") + "]";
    }), function(c, s) {
      if (a.length > 0) {
        var l = a.indexOf(this);
        ~l ? a.splice(l + 1) : a.push(this), ~l ? u.splice(l, 1 / 0, c) : u.push(c), ~a.indexOf(s) && (s = o.call(this, c, s));
      } else a.push(s);
      return i == null ? s : i.call(this, c, s);
    };
  }
})(ti, ti.exports);
var _l = ti.exports;
const Ae = /* @__PURE__ */ Fr(_l);
var br = function() {
  return br = Object.assign || function(t) {
    for (var e, r = 1, n = arguments.length; r < n; r++) {
      e = arguments[r];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, br.apply(this, arguments);
}, hr = /* @__PURE__ */ new Map(), ei = /* @__PURE__ */ new Map(), ps = !0, Or = !1;
function fs(t) {
  return t.replace(/[\s,]+/g, " ").trim();
}
function gl(t) {
  return fs(t.source.body.substring(t.start, t.end));
}
function El(t) {
  var e = /* @__PURE__ */ new Set(), r = [];
  return t.definitions.forEach(function(n) {
    if (n.kind === "FragmentDefinition") {
      var i = n.name.value, o = gl(n.loc), a = ei.get(i);
      a && !a.has(o) ? ps && console.warn("Warning: fragment with name " + i + ` already exists.
graphql-tag enforces all fragment names across your application to be unique; read more about
this in the docs: http://dev.apollodata.com/core/fragments.html#unique-names`) : a || ei.set(i, a = /* @__PURE__ */ new Set()), a.add(o), e.has(o) || (e.add(o), r.push(n));
    } else
      r.push(n);
  }), br(br({}, t), { definitions: r });
}
function Tl(t) {
  var e = new Set(t.definitions);
  e.forEach(function(n) {
    n.loc && delete n.loc, Object.keys(n).forEach(function(i) {
      var o = n[i];
      o && typeof o == "object" && e.add(o);
    });
  });
  var r = t.loc;
  return r && (delete r.startToken, delete r.endToken), t;
}
function bl(t) {
  var e = fs(t);
  if (!hr.has(e)) {
    var r = us(t, {
      experimentalFragmentVariables: Or,
      allowLegacyFragmentVariables: Or
    });
    if (!r || r.kind !== "Document")
      throw new Error("Not a valid GraphQL document.");
    hr.set(e, Tl(El(r)));
  }
  return hr.get(e);
}
function Z(t) {
  for (var e = [], r = 1; r < arguments.length; r++)
    e[r - 1] = arguments[r];
  typeof t == "string" && (t = [t]);
  var n = t[0];
  return e.forEach(function(i, o) {
    i && i.kind === "Document" ? n += i.loc.source.body : n += i, n += t[o + 1];
  }), bl(n);
}
function Ol() {
  hr.clear(), ei.clear();
}
function Sl() {
  ps = !1;
}
function wl() {
  Or = !0;
}
function Al() {
  Or = !1;
}
var me = {
  gql: Z,
  resetCaches: Ol,
  disableFragmentWarnings: Sl,
  enableExperimentalFragmentVariables: wl,
  disableExperimentalFragmentVariables: Al
};
(function(t) {
  t.gql = me.gql, t.resetCaches = me.resetCaches, t.disableFragmentWarnings = me.disableFragmentWarnings, t.enableExperimentalFragmentVariables = me.enableExperimentalFragmentVariables, t.disableExperimentalFragmentVariables = me.disableExperimentalFragmentVariables;
})(Z || (Z = {}));
Z.default = Z;
const hs = Z`
	fragment MatchParts on MatchConfig {
		regexValue
		matchValue
	}
`, Ll = Z`
	mutation PushPayload(
		$session_secure_id: String!
		$payload_id: ID!
		$events: ReplayEventsInput!
		$messages: String!
		$resources: String!
		$web_socket_events: String!
		$errors: [ErrorObjectInput]!
		$is_beacon: Boolean
		$has_session_unloaded: Boolean
		$highlight_logs: String
	) {
		pushPayload(
			session_secure_id: $session_secure_id
			payload_id: $payload_id
			events: $events
			messages: $messages
			resources: $resources
			web_socket_events: $web_socket_events
			errors: $errors
			is_beacon: $is_beacon
			has_session_unloaded: $has_session_unloaded
			highlight_logs: $highlight_logs
		)
	}
`, Rl = Z`
	mutation PushSessionEvents(
		$session_secure_id: String!
		$payload_id: Int64ID!
		$data: String!
	) {
		pushSessionEvents(
			session_secure_id: $session_secure_id
			payload_id: $payload_id
			data: $data
		)
	}
`, Nl = Z`
	mutation identifySession(
		$session_secure_id: String!
		$user_identifier: String!
		$user_object: Any
	) {
		identifySession(
			session_secure_id: $session_secure_id
			user_identifier: $user_identifier
			user_object: $user_object
		)
	}
`, Cl = Z`
	mutation addSessionProperties(
		$session_secure_id: String!
		$properties_object: Any
	) {
		addSessionProperties(
			session_secure_id: $session_secure_id
			properties_object: $properties_object
		)
	}
`, xl = Z`
	mutation pushMetrics($metrics: [MetricInput]!) {
		pushMetrics(metrics: $metrics)
	}
`, Pl = Z`
	mutation addSessionFeedback(
		$session_secure_id: String!
		$user_name: String
		$user_email: String
		$verbatim: String!
		$timestamp: Timestamp!
	) {
		addSessionFeedback(
			session_secure_id: $session_secure_id
			user_name: $user_name
			user_email: $user_email
			verbatim: $verbatim
			timestamp: $timestamp
		)
	}
`, Il = Z`
	mutation initializeSession(
		$session_secure_id: String!
		$session_key: String
		$organization_verbose_id: String!
		$enable_strict_privacy: Boolean!
		$privacy_setting: String!
		$enable_recording_network_contents: Boolean!
		$clientVersion: String!
		$firstloadVersion: String!
		$clientConfig: String!
		$environment: String!
		$id: String!
		$appVersion: String
		$serviceName: String!
		$client_id: String!
		$network_recording_domains: [String!]
		$disable_session_recording: Boolean
	) {
		initializeSession(
			session_secure_id: $session_secure_id
			session_key: $session_key
			organization_verbose_id: $organization_verbose_id
			enable_strict_privacy: $enable_strict_privacy
			enable_recording_network_contents: $enable_recording_network_contents
			clientVersion: $clientVersion
			firstloadVersion: $firstloadVersion
			clientConfig: $clientConfig
			environment: $environment
			appVersion: $appVersion
			serviceName: $serviceName
			fingerprint: $id
			client_id: $client_id
			network_recording_domains: $network_recording_domains
			disable_session_recording: $disable_session_recording
			privacy_setting: $privacy_setting
		) {
			secure_id
			project_id
			sampling {
				spans {
					name {
						...MatchParts
					}
					attributes {
						key {
							...MatchParts
						}
						attribute {
							...MatchParts
						}
					}
					events {
						name {
							...MatchParts
						}
						attributes {
							key {
								...MatchParts
							}
							attribute {
								...MatchParts
							}
						}
					}
					samplingRatio
				}
				logs {
					message {
						...MatchParts
					}
					severityText {
						...MatchParts
					}
					attributes {
						key {
							...MatchParts
						}
						attribute {
							...MatchParts
						}
					}
					samplingRatio
				}
			}
		}
	}
	${hs}
`, Ml = Z`
	query Ignore($id: ID!) {
		ignore(id: $id)
	}
`, kl = Z`
	query GetSamplingConfig($organization_verbose_id: String!) {
		sampling(organization_verbose_id: $organization_verbose_id) {
			spans {
				name {
					...MatchParts
				}
				attributes {
					key {
						...MatchParts
					}
					attribute {
						...MatchParts
					}
				}
				events {
					name {
						...MatchParts
					}
					attributes {
						key {
							...MatchParts
						}
						attribute {
							...MatchParts
						}
					}
				}
				samplingRatio
			}
			logs {
				message {
					...MatchParts
				}
				severityText {
					...MatchParts
				}
				attributes {
					key {
						...MatchParts
					}
					attribute {
						...MatchParts
					}
				}
				samplingRatio
			}
		}
	}
	${hs}
`, Dl = (t, e, r, n) => t();
function Ul(t, e = Dl) {
  return {
    PushPayload(r, n) {
      return e(
        (i) => t.request(
          Ll,
          r,
          C(C({}, n), i)
        ),
        "PushPayload",
        "mutation",
        r
      );
    },
    PushSessionEvents(r, n) {
      return e(
        (i) => t.request(
          Rl,
          r,
          C(C({}, n), i)
        ),
        "PushSessionEvents",
        "mutation",
        r
      );
    },
    identifySession(r, n) {
      return e(
        (i) => t.request(
          Nl,
          r,
          C(C({}, n), i)
        ),
        "identifySession",
        "mutation",
        r
      );
    },
    addSessionProperties(r, n) {
      return e(
        (i) => t.request(
          Cl,
          r,
          C(C({}, n), i)
        ),
        "addSessionProperties",
        "mutation",
        r
      );
    },
    pushMetrics(r, n) {
      return e(
        (i) => t.request(
          xl,
          r,
          C(C({}, n), i)
        ),
        "pushMetrics",
        "mutation",
        r
      );
    },
    addSessionFeedback(r, n) {
      return e(
        (i) => t.request(
          Pl,
          r,
          C(C({}, n), i)
        ),
        "addSessionFeedback",
        "mutation",
        r
      );
    },
    initializeSession(r, n) {
      return e(
        (i) => t.request(
          Il,
          r,
          C(C({}, n), i)
        ),
        "initializeSession",
        "mutation",
        r
      );
    },
    Ignore(r, n) {
      return e(
        (i) => t.request(Ml, r, C(C({}, n), i)),
        "Ignore",
        "query",
        r
      );
    },
    GetSamplingConfig(r, n) {
      return e(
        (i) => t.request(
          kl,
          r,
          C(C({}, n), i)
        ),
        "GetSamplingConfig",
        "query",
        r
      );
    }
  };
}
function jl(t, e, r) {
  try {
    if (!(e in t))
      return () => {
      };
    const n = t[e], i = r(n);
    return typeof i == "function" && (i.prototype = i.prototype || {}, Object.defineProperties(i, {
      __rrweb_original__: {
        enumerable: !1,
        value: n
      }
    })), t[e] = i, () => {
      t[e] = n;
    };
  } catch {
    return () => {
    };
  }
}
function Bl(t) {
  if (!t || !t.outerHTML)
    return "";
  let e = "";
  for (; t.parentElement; ) {
    let r = t.localName;
    if (!r)
      break;
    r = r.toLowerCase();
    let n = t.parentElement, i = [];
    if (n.children && n.children.length > 0)
      for (let o = 0; o < n.children.length; o++) {
        let a = n.children[o];
        a.localName && a.localName.toLowerCase && a.localName.toLowerCase() === r && i.push(a);
      }
    i.length > 1 && (r += ":eq(" + i.indexOf(t) + ")"), e = r + (e ? ">" + e : ""), t = n;
  }
  return e;
}
function ri(t) {
  return Object.prototype.toString.call(t) === "[object Object]";
}
function ds(t, e) {
  if (e === 0)
    return !0;
  const r = Object.keys(t);
  for (const n of r)
    if (ri(t[n]) && ds(t[n], e - 1))
      return !0;
  return !1;
}
function ni(t, e) {
  const r = {
    numOfKeysLimit: 50,
    depthOfLimit: 4
  };
  Object.assign(r, e);
  const n = [], i = [];
  return JSON.stringify(t, function(u, c) {
    if (n.length > 0) {
      const s = n.indexOf(this);
      ~s ? n.splice(s + 1) : n.push(this), ~s ? i.splice(s, 1 / 0, u) : i.push(u), ~n.indexOf(c) && (n[0] === c ? c = "[Circular ~]" : c = "[Circular ~." + i.slice(0, n.indexOf(c)).join(".") + "]");
    } else
      n.push(c);
    if (c == null)
      return c;
    if (o(c))
      return a(c);
    if (c instanceof Event) {
      const s = {};
      for (const l in c) {
        const p = c[l];
        Array.isArray(p) ? s[l] = Bl(
          p.length ? p[0] : null
        ) : s[l] = p;
      }
      return s;
    } else {
      if (c instanceof Node)
        return c instanceof HTMLElement ? c ? c.outerHTML : "" : c.nodeName;
      if (c instanceof Error)
        return c.name + ": " + c.message;
    }
    return c;
  });
  function o(u) {
    return ri(u) && Object.keys(u).length > r.numOfKeysLimit || typeof u == "function" ? !0 : u instanceof Event && u.isTrusted === !1 ? Object.keys(u).length === 1 : !!(ri(u) && ds(u, r.depthOfLimit));
  }
  function a(u) {
    let c = u.toString();
    return r.stringLengthLimit && c.length > r.stringLengthLimit && (c = `${c.slice(0, r.stringLengthLimit)}...`), c;
  }
}
function $l(t) {
  return typeof t == "number" && !isNaN(t) && isFinite(t);
}
const rn = "exception.message", Fl = "exception.stacktrace", nn = "exception.type", Vl = "service.name", Gl = "service.version", Hl = "telemetry.sdk.name", zl = "telemetry.sdk.version", Xl = "url.full", ql = "url.path", Kl = "url.query", Wl = "user_agent.original", $i = 15 * 60 * 1e3;
/*! js-cookie v3.0.5 | MIT */
function Je(t) {
  for (var e = 1; e < arguments.length; e++) {
    var r = arguments[e];
    for (var n in r)
      t[n] = r[n];
  }
  return t;
}
var Yl = {
  read: function(t) {
    return t[0] === '"' && (t = t.slice(1, -1)), t.replace(/(%[\dA-F]{2})+/gi, decodeURIComponent);
  },
  write: function(t) {
    return encodeURIComponent(t).replace(
      /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,
      decodeURIComponent
    );
  }
};
function ii(t, e) {
  function r(i, o, a) {
    if (typeof document < "u") {
      a = Je({}, e, a), typeof a.expires == "number" && (a.expires = new Date(Date.now() + a.expires * 864e5)), a.expires && (a.expires = a.expires.toUTCString()), i = encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent).replace(/[()]/g, escape);
      var u = "";
      for (var c in a)
        a[c] && (u += "; " + c, a[c] !== !0 && (u += "=" + a[c].split(";")[0]));
      return document.cookie = i + "=" + t.write(o, i) + u;
    }
  }
  function n(i) {
    if (!(typeof document > "u" || arguments.length && !i)) {
      for (var o = document.cookie ? document.cookie.split("; ") : [], a = {}, u = 0; u < o.length; u++) {
        var c = o[u].split("="), s = c.slice(1).join("=");
        try {
          var l = decodeURIComponent(c[0]);
          if (a[l] = t.read(s, l), i === l)
            break;
        } catch {
        }
      }
      return i ? a[i] : a;
    }
  }
  return Object.create(
    {
      set: r,
      get: n,
      remove: function(i, o) {
        r(
          i,
          "",
          Je({}, o, {
            expires: -1
          })
        );
      },
      withAttributes: function(i) {
        return ii(this.converter, Je({}, this.attributes, i));
      },
      withConverter: function(i) {
        return ii(Je({}, this.converter, i), this.attributes);
      }
    },
    {
      attributes: { value: Object.freeze(e) },
      converter: { value: Object.freeze(t) }
    }
  );
}
var on = ii(Yl, { path: "/" });
let oi = "localStorage", ai = !0, Jl = class {
  constructor() {
    xe(this, "storage", {});
  }
  get length() {
    return Object.keys(this.storage).length;
  }
  key(e) {
    var r;
    return (r = Object.keys(this.storage)[e]) != null ? r : null;
  }
  getItem(e) {
    var r;
    return (r = this.storage[e]) != null ? r : "";
  }
  setItem(e, r) {
    this.storage[e] = r;
  }
  removeItem(e) {
    delete this.storage[e];
  }
}, Ql = class {
  getItem(e) {
    var r;
    return (r = on.get(e)) != null ? r : "";
  }
  setItem(e, r) {
    if (!ai)
      return;
    const n = /* @__PURE__ */ new Date();
    n.setTime(n.getTime() + $i), on.set(e, r, { expires: n });
  }
  removeItem(e) {
    ai && on.remove(e);
  }
};
const ie = new Jl(), Sr = new Ql(), Ie = () => {
  let t = null;
  if (typeof window > "u")
    return ie;
  try {
    switch (oi) {
      case "localStorage":
        t = window.localStorage;
        break;
      case "sessionStorage":
        t = window.sessionStorage;
        break;
    }
    t || (Rt(
      "storage",
      "getPersistentStorage",
      "debug",
      `persistent storage was not found for mode ${oi}; using global storage`
    ), t = ie);
  } catch (e) {
    Rt(
      "storage",
      "getPersistentStorage",
      "debug",
      "failed to get persistent storage; using global storage",
      e
    ), t = ie;
  }
  return t;
}, Zl = (t) => {
  oi = t;
}, mo = (t) => {
  ai = t;
}, Fi = (t) => {
  try {
    return Ie().getItem(t);
  } catch (e) {
    return Rt(
      "storage",
      "getItem",
      "debug",
      `failed to get item ${t}; using global storage`,
      e
    ), ie.getItem(t);
  }
}, vs = (t, e) => {
  Sr.setItem(t, e);
  try {
    return Ie().setItem(t, e);
  } catch (r) {
    return Rt(
      "storage",
      "setItem",
      "debug",
      `failed to set item ${t}; using global storage`,
      r
    ), ie.setItem(t, e);
  }
}, ms = (t) => {
  Sr.removeItem(t);
  try {
    return Ie().removeItem(t);
  } catch (e) {
    return Rt(
      "storage",
      "removeItem",
      "debug",
      `failed to remove item ${t}; using global storage`,
      e
    ), ie.removeItem(t);
  }
};
var fe = /* @__PURE__ */ ((t) => (t.SEGMENT_LAST_SENT_HASH_KEY = "HIGHLIGHT_SEGMENT_LAST_SENT_HASH_KEY", t.SESSION_ID = "sessionID", t.SESSION_DATA = "sessionData", t.USER_IDENTIFIER = "highlightIdentifier", t.USER_OBJECT = "highlightUserObject", t))(fe || {});
const Vr = (t) => `${fe.SESSION_DATA}_${t}`, bt = () => {
  var t;
  return typeof globalThis < "u" && (t = globalThis.persistentSessionSecureID) != null && t.length ? globalThis.persistentSessionSecureID : ys();
}, tp = (t) => {
  typeof globalThis < "u" && t != null && t.length && (globalThis.persistentSessionSecureID = t);
}, ys = () => {
  var t;
  return (t = Fi(fe.SESSION_ID)) != null ? t : "";
}, _s = (t) => {
  vs(fe.SESSION_ID, t);
}, ep = (t) => {
  const e = Vr(t);
  return JSON.parse(Fi(e) || "{}");
}, rp = (t) => {
  t || (t = ys());
  let e = ep(t);
  if (e && e.lastPushTime && Date.now() - e.lastPushTime < $i)
    return e;
  ms(Vr(t));
}, gs = function(t) {
  if (!(t != null && t.sessionSecureID)) return;
  const e = t.sessionSecureID;
  tp(e);
  const r = Vr(e);
  vs(r, JSON.stringify(t)), ip(r);
}, np = function() {
  const t = Sr.getItem(
    fe.SESSION_ID
  );
  _s(t);
  const e = Vr(t), r = Sr.getItem(e);
  try {
    gs(JSON.parse(r));
  } catch {
  }
};
function ip(t) {
  const e = `${fe.SESSION_DATA}_`;
  for (let r = Ie().length - 1; r >= 0; r--) {
    const n = Ie().key(r);
    if (n && n.startsWith(e) && n !== t)
      try {
        const i = JSON.parse(
          Fi(n) || "{}"
        );
        i.lastPushTime !== void 0 && Date.now() - i.lastPushTime >= $i && (Rt(
          "highlightSession",
          "pruneSessionData",
          "debug",
          `removing session data for stale key ${n}`
        ), ms(n));
      } catch (i) {
        Rt(
          "highlightSession",
          "pruneSessionData",
          "error",
          `failed to parse session data for key ${n}`,
          i
        );
      }
  }
}
var Es = /* @__PURE__ */ ((t) => (t.BillingQuotaExceeded = "BillingQuotaExceeded", t))(Es || {});
const Vi = 3, Gi = 1e3, Hi = 500, op = [Es.BillingQuotaExceeded.toString()], ap = (t) => {
  var e;
  return ((e = t.response.errors) == null ? void 0 : e.find(
    (r) => op.includes(r.message)
  )) === void 0;
}, sp = () => {
  const t = (e, r, n, i, o = 0) => se(void 0, null, function* () {
    try {
      return yield e();
    } catch (a) {
      if (a instanceof ls && !ap(a))
        throw a;
      if (o < Vi)
        return yield new Promise(
          (u) => setTimeout(
            u,
            Gi + Hi * Math.pow(2, o)
          )
        ), yield t(
          e,
          r,
          n,
          i,
          o + 1
        );
      throw console.error(
        `highlight.io: data request failed after ${o} retries`
      ), a;
    }
  });
  return t;
}, W = "feature_flag", Ts = "launchdarkly", up = "evaluation", cp = `${W}.set.id`, lp = `${W}.key`, pp = `${W}.contextKeys`, fp = `${W}.context.id`, hp = `${W}.result.value`, dp = `${W}.provider.name`, yo = {
  kind: `${W}.result.reason.kind`,
  errorKind: `${W}.result.reason.errorKind`,
  ruleIndex: `${W}.result.reason.ruleIndex`,
  ruleId: `${W}.result.reason.ruleId`,
  prerequisiteKey: `${W}.result.reason.prerequisiteKey`,
  inExperiment: `${W}.result.reason.inExperiment`,
  bigSegmentsStatus: `${W}.result.reason.bigSegmentsStatus`
}, vp = `${W}.result.variationIndex`, mp = `${Ts}.application.id`, yp = `${Ts}.application.version`, _p = "$ld:telemetry:session:init", _o = "$ld:telemetry:track", gp = "document_load", Ep = "result.status";
function go(t) {
  return t.includes("%") || t.includes(":") ? t.replace(/%/g, "%25").replace(/:/g, "%3A") : t;
}
function bs(t) {
  return t.kind === "multi";
}
function an(t) {
  return bs(t) ? Object.keys(t).sort().filter((e) => e !== "kind").map((e) => `${e}:${go(t[e].key)}`).join(":") : "kind" in t && t.kind === "user" ? t.key : "kind" in t ? `${t.kind}:${go(t.key)}` : t.key;
}
function Eo(t) {
  return bs(t) ? Object.keys(t).sort().filter((e) => e !== "kind").map((e) => ({
    [e]: t[e].key
  })).reduce((e, r) => C(C({}, e), r), {}) : "kind" in t ? {
    [t.kind]: t.key
  } : {
    user: t.key
  };
}
let Tp = class {
  constructor(e, r) {
    xe(this, "client"), xe(this, "metadata"), this.client = e, this.metadata = r;
  }
  getHooks(e) {
    return [];
  }
  init(e) {
    this.client.track(_p, {
      sessionID: e
    });
  }
  recordGauge(e, r) {
  }
  identify(e, r, n = {}, i) {
  }
  error(e, r) {
  }
  track(e, r) {
    const n = r.event;
    this.client.track(
      n ? `${_o}:${n}` : _o,
      Er(C({}, r), {
        sessionID: e
      })
    );
  }
}, bp = class extends Wa {
  constructor(e, r) {
    super(), xe(this, "client"), this.client = new Tp(e, r);
  }
  getHooks(e) {
    return [
      {
        getMetadata: () => ({
          name: "highlight.run/ld"
        }),
        afterIdentify: (r, n, i) => (this.load(this.client), n)
      }
    ];
  }
  init(e) {
    return this._bufferCall("init", [e]);
  }
  recordGauge(e, r) {
    return this._bufferCall("recordGauge", [e, r]);
  }
  identify(e, r, n = {}, i) {
    return this._bufferCall("identify", [
      e,
      r,
      n,
      i
    ]);
  }
  error(e, r) {
    return this._bufferCall("error", [e, r]);
  }
  track(e, r) {
    return this._bufferCall("track", [e, r]);
  }
};
const Op = "9.23.0", Sp = {
  version: Op
}, wp = Sp.version;
function Ap(t) {
  if (t.id.length)
    return `#${t.id}`;
  if (t.classList.length) {
    let e = [];
    for (const r of t.classList)
      e.push(`.${r}`);
    return `${t.nodeName.toLowerCase()}${e.join(",")}`;
  }
  return t.nodeName.toLowerCase();
}
const Lp = (t) => {
  let e;
  const r = () => {
    clearTimeout(e), e = setTimeout(() => {
      var n, i;
      t({
        height: window.innerHeight,
        width: window.innerWidth,
        availHeight: window.screen.availHeight,
        availWidth: window.screen.availWidth,
        colorDepth: window.screen.colorDepth,
        pixelDepth: window.screen.pixelDepth,
        orientation: (i = (n = window.screen.orientation) == null ? void 0 : n.angle) != null ? i : 0
      });
    }, 500);
  };
  return window.addEventListener("resize", r), r(), () => window.removeEventListener("resize", r);
};
var Os = { exports: {} };
/**
 * @preserve
 * JS Implementation of incremental MurmurHash3 (r150) (as of May 10, 2013)
 *
 * @author <a href="mailto:jensyt@gmail.com">Jens Taylor</a>
 * @see http://github.com/homebrewing/brauhaus-diff
 * @author <a href="mailto:gary.court@gmail.com">Gary Court</a>
 * @see http://github.com/garycourt/murmurhash-js
 * @author <a href="mailto:aappleby@gmail.com">Austin Appleby</a>
 * @see http://sites.google.com/site/murmurhash/
 */
(function(t) {
  (function() {
    var e;
    function r(n, i) {
      var o = this instanceof r ? this : e;
      if (o.reset(i), typeof n == "string" && n.length > 0 && o.hash(n), o !== this)
        return o;
    }
    r.prototype.hash = function(n) {
      var i, o, a, u, c;
      switch (c = n.length, this.len += c, o = this.k1, a = 0, this.rem) {
        case 0:
          o ^= c > a ? n.charCodeAt(a++) & 65535 : 0;
        case 1:
          o ^= c > a ? (n.charCodeAt(a++) & 65535) << 8 : 0;
        case 2:
          o ^= c > a ? (n.charCodeAt(a++) & 65535) << 16 : 0;
        case 3:
          o ^= c > a ? (n.charCodeAt(a) & 255) << 24 : 0, o ^= c > a ? (n.charCodeAt(a++) & 65280) >> 8 : 0;
      }
      if (this.rem = c + this.rem & 3, c -= this.rem, c > 0) {
        for (i = this.h1; o = o * 11601 + (o & 65535) * 3432906752 & 4294967295, o = o << 15 | o >>> 17, o = o * 13715 + (o & 65535) * 461832192 & 4294967295, i ^= o, i = i << 13 | i >>> 19, i = i * 5 + 3864292196 & 4294967295, !(a >= c); )
          o = n.charCodeAt(a++) & 65535 ^ (n.charCodeAt(a++) & 65535) << 8 ^ (n.charCodeAt(a++) & 65535) << 16, u = n.charCodeAt(a++), o ^= (u & 255) << 24 ^ (u & 65280) >> 8;
        switch (o = 0, this.rem) {
          case 3:
            o ^= (n.charCodeAt(a + 2) & 65535) << 16;
          case 2:
            o ^= (n.charCodeAt(a + 1) & 65535) << 8;
          case 1:
            o ^= n.charCodeAt(a) & 65535;
        }
        this.h1 = i;
      }
      return this.k1 = o, this;
    }, r.prototype.result = function() {
      var n, i;
      return n = this.k1, i = this.h1, n > 0 && (n = n * 11601 + (n & 65535) * 3432906752 & 4294967295, n = n << 15 | n >>> 17, n = n * 13715 + (n & 65535) * 461832192 & 4294967295, i ^= n), i ^= this.len, i ^= i >>> 16, i = i * 51819 + (i & 65535) * 2246770688 & 4294967295, i ^= i >>> 13, i = i * 44597 + (i & 65535) * 3266445312 & 4294967295, i ^= i >>> 16, i >>> 0;
    }, r.prototype.reset = function(n) {
      return this.h1 = typeof n == "number" ? n : 0, this.rem = this.k1 = this.len = 0, this;
    }, e = new r(), t.exports = r;
  })();
})(Os);
var Rp = Os.exports;
const Np = /* @__PURE__ */ Fr(Rp), sn = 28, Wt = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789", Cp = 2246822507, To = (t) => {
  var e, r = "";
  if (t) {
    const n = Np(t).result();
    for (let i = 0; i < sn; i++) {
      const o = ((n ^ i * Cp) >>> 0) % Wt.length;
      r += Wt.charAt(o);
    }
  } else {
    const n = typeof window < "u" && ((e = window.crypto) == null ? void 0 : e.getRandomValues), i = new Uint32Array(sn);
    n && window.crypto.getRandomValues(i);
    for (let o = 0; o < sn; o++)
      n ? r += Wt.charAt(
        i[o] % Wt.length
      ) : r += Wt.charAt(
        Math.floor(Math.random() * Wt.length)
      );
  }
  return r;
};
let xp = class {
  constructor(e) {
    xe(this, "sessionSecureID");
    try {
      e != null && e.storageMode && Zl(e?.storageMode), mo(!!(e != null && e.sessionCookie)), e != null && e.sessionCookie ? np() : mo(!1);
    } catch (r) {
      Lt(
        "Error initializing @launchdarkly observability plugin",
        "error",
        r
      );
    }
  }
  configureSession(e, r) {
    try {
      const n = bt();
      let i = rp(
        n
      );
      i != null && i.sessionSecureID ? this.sessionSecureID = i.sessionSecureID : (r != null && r.sessionKey ? this.sessionSecureID = To(
        `${e}-${r.sessionKey}`
      ) : this.sessionSecureID = To(), _s(this.sessionSecureID), gs({
        sessionSecureID: this.sessionSecureID,
        sessionKey: r?.sessionKey,
        projectID: 0,
        sessionStartTime: Date.now(),
        lastPushTime: Date.now()
      }));
    } catch (n) {
      Lt(
        "Error configuring session in @launchdarkly observability plugin",
        "error",
        n
      );
    }
  }
};
class bo extends Wa {
  start() {
    return this._sdk.start();
  }
  stop() {
    return this._sdk.stop();
  }
  recordGauge(e) {
    return this._bufferCall("recordGauge", [e]);
  }
  recordCount(e) {
    return this._bufferCall("recordCount", [e]);
  }
  recordIncr(e) {
    return this._bufferCall("recordIncr", [e]);
  }
  recordHistogram(e) {
    return this._bufferCall("recordHistogram", [e]);
  }
  recordUpDownCounter(e) {
    return this._bufferCall("recordUpDownCounter", [e]);
  }
  // TODO: Ask @vkorolik about using this method before initialization. Doesn't
  // this cause problems if someone tries to work with the returned span?
  startSpan(e, r, n, i) {
    return this._bufferCall("startSpan", [e, r, n, i]);
  }
  startManualSpan(e, r, n, i) {
    return this._bufferCall("startManualSpan", [e, r, n, i]);
  }
  register(e, r) {
    return this._bufferCall("register", [e, r]);
  }
  recordLog(e, r, n) {
    return this._bufferCall("recordLog", [e, r, n]);
  }
  recordError(e, r, n, i, o) {
    return this._bufferCall("recordError", [
      e,
      r,
      n,
      i,
      o
    ]);
  }
}
let re;
typeof globalThis < "u" ? globalThis.LDObserve ? re = globalThis.LDObserve : (re = new bo(), globalThis.LDObserve = re) : re = new bo();
const Pp = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  get LDObserve() {
    return re;
  }
}, Symbol.toStringTag, { value: "Module" }));
var Ip = Object.defineProperty, Mp = Object.defineProperties, kp = Object.getOwnPropertyDescriptors, wr = Object.getOwnPropertySymbols, Ss = Object.prototype.hasOwnProperty, ws = Object.prototype.propertyIsEnumerable, si = (t, e, r) => e in t ? Ip(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r, P = (t, e) => {
  for (var r in e || (e = {}))
    Ss.call(e, r) && si(t, r, e[r]);
  if (wr)
    for (var r of wr(e))
      ws.call(e, r) && si(t, r, e[r]);
  return t;
}, rt = (t, e) => Mp(t, kp(e)), Dp = (t, e) => {
  var r = {};
  for (var n in t)
    Ss.call(t, n) && e.indexOf(n) < 0 && (r[n] = t[n]);
  if (t != null && wr)
    for (var n of wr(t))
      e.indexOf(n) < 0 && ws.call(t, n) && (r[n] = t[n]);
  return r;
}, k = (t, e, r) => si(t, typeof e != "symbol" ? e + "" : e, r), gt = (t, e, r) => new Promise((n, i) => {
  var o = (c) => {
    try {
      u(r.next(c));
    } catch (s) {
      i(s);
    }
  }, a = (c) => {
    try {
      u(r.throw(c));
    } catch (s) {
      i(s);
    }
  }, u = (c) => c.done ? n(c.value) : Promise.resolve(c.value).then(o, a);
  u((r = r.apply(t, e)).next());
});
const Up = [
  "assert",
  "count",
  "countReset",
  "debug",
  "dir",
  "dirxml",
  "error",
  "group",
  "groupCollapsed",
  "groupEnd",
  "info",
  "log",
  "table",
  "time",
  "timeEnd",
  "timeLog",
  "trace",
  "warn"
];
var xt = /* @__PURE__ */ ((t) => (t.DeviceMemory = "DeviceMemory", t.ViewportHeight = "ViewportHeight", t.ViewportWidth = "ViewportWidth", t.ScreenHeight = "ScreenHeight", t.ScreenWidth = "ScreenWidth", t.ViewportArea = "ViewportArea", t))(xt || {}), st = /* @__PURE__ */ ((t) => (t.Device = "Device", t.WebVital = "WebVital", t.Performance = "Performance", t.Frontend = "Frontend", t.Backend = "Backend", t))(st || {}), As = { exports: {} }, Oo = { exports: {} }, So;
function jp() {
  return So || (So = 1, function(t, e) {
    (function(r, n) {
      t.exports = n();
    })(Bi, function() {
      function r(y) {
        return !isNaN(parseFloat(y)) && isFinite(y);
      }
      function n(y) {
        return y.charAt(0).toUpperCase() + y.substring(1);
      }
      function i(y) {
        return function() {
          return this[y];
        };
      }
      var o = ["isConstructor", "isEval", "isNative", "isToplevel"], a = ["columnNumber", "lineNumber"], u = ["fileName", "functionName", "source"], c = ["args"], s = ["evalOrigin"], l = o.concat(a, u, c, s);
      function p(y) {
        if (y)
          for (var _ = 0; _ < l.length; _++)
            y[l[_]] !== void 0 && this["set" + n(l[_])](y[l[_]]);
      }
      p.prototype = {
        getArgs: function() {
          return this.args;
        },
        setArgs: function(y) {
          if (Object.prototype.toString.call(y) !== "[object Array]")
            throw new TypeError("Args must be an Array");
          this.args = y;
        },
        getEvalOrigin: function() {
          return this.evalOrigin;
        },
        setEvalOrigin: function(y) {
          if (y instanceof p)
            this.evalOrigin = y;
          else if (y instanceof Object)
            this.evalOrigin = new p(y);
          else
            throw new TypeError("Eval Origin must be an Object or StackFrame");
        },
        toString: function() {
          var y = this.getFileName() || "", _ = this.getLineNumber() || "", E = this.getColumnNumber() || "", L = this.getFunctionName() || "";
          return this.getIsEval() ? y ? "[eval] (" + y + ":" + _ + ":" + E + ")" : "[eval]:" + _ + ":" + E : L ? L + " (" + y + ":" + _ + ":" + E + ")" : y + ":" + _ + ":" + E;
        }
      }, p.fromString = function(y) {
        var _ = y.indexOf("("), E = y.lastIndexOf(")"), L = y.substring(0, _), U = y.substring(_ + 1, E).split(","), D = y.substring(E + 1);
        if (D.indexOf("@") === 0)
          var F = /@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(D, ""), j = F[1], tt = F[2], B = F[3];
        return new p({
          functionName: L,
          args: U || void 0,
          fileName: j,
          lineNumber: tt || void 0,
          columnNumber: B || void 0
        });
      };
      for (var f = 0; f < o.length; f++)
        p.prototype["get" + n(o[f])] = i(o[f]), p.prototype["set" + n(o[f])] = /* @__PURE__ */ function(y) {
          return function(_) {
            this[y] = !!_;
          };
        }(o[f]);
      for (var m = 0; m < a.length; m++)
        p.prototype["get" + n(a[m])] = i(a[m]), p.prototype["set" + n(a[m])] = /* @__PURE__ */ function(y) {
          return function(_) {
            if (!r(_))
              throw new TypeError(y + " must be a Number");
            this[y] = Number(_);
          };
        }(a[m]);
      for (var v = 0; v < u.length; v++)
        p.prototype["get" + n(u[v])] = i(u[v]), p.prototype["set" + n(u[v])] = /* @__PURE__ */ function(y) {
          return function(_) {
            this[y] = String(_);
          };
        }(u[v]);
      return p;
    });
  }(Oo)), Oo.exports;
}
(function(t, e) {
  (function(r, n) {
    t.exports = n(jp());
  })(Bi, function(r) {
    var n = /(^|@)\S+:\d+/, i = /^\s*at .*(\S+:\d+|\(native\))/m, o = /^(eval@)?(\[native code])?$/;
    return {
      /**
       * Given an Error object, extract the most information from it.
       *
       * @param {Error} error object
       * @return {Array} of StackFrames
       */
      parse: function(a) {
        if (typeof a.stacktrace < "u" || typeof a["opera#sourceloc"] < "u")
          return this.parseOpera(a);
        if (a.stack && a.stack.match(i))
          return this.parseV8OrIE(a);
        if (a.stack)
          return this.parseFFOrSafari(a);
        throw new Error("Cannot parse given Error object");
      },
      // Separate line and column numbers from a string of the form: (URI:Line:Column)
      extractLocation: function(a) {
        if (a.indexOf(":") === -1)
          return [a];
        var u = /(.+?)(?::(\d+))?(?::(\d+))?$/, c = u.exec(a.replace(/[()]/g, ""));
        return [c[1], c[2] || void 0, c[3] || void 0];
      },
      parseV8OrIE: function(a) {
        var u = a.stack.split(`
`).filter(function(c) {
          return !!c.match(i);
        }, this);
        return u.map(function(c) {
          c.indexOf("(eval ") > -1 && (c = c.replace(/eval code/g, "eval").replace(/(\(eval at [^()]*)|(\),.*$)/g, ""));
          var s = c.replace(/^\s+/, "").replace(/\(eval code/g, "("), l = s.match(/ (\((.+):(\d+):(\d+)\)$)/);
          s = l ? s.replace(l[0], "") : s;
          var p = s.split(/\s+/).slice(1), f = this.extractLocation(l ? l[1] : p.pop()), m = p.join(" ") || void 0, v = ["eval", "<anonymous>"].indexOf(f[0]) > -1 ? void 0 : f[0];
          return new r({
            functionName: m,
            fileName: v,
            lineNumber: f[1],
            columnNumber: f[2],
            source: c
          });
        }, this);
      },
      parseFFOrSafari: function(a) {
        var u = a.stack.split(`
`).filter(function(c) {
          return !c.match(o);
        }, this);
        return u.map(function(c) {
          if (c.indexOf(" > eval") > -1 && (c = c.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g, ":$1")), c.indexOf("@") === -1 && c.indexOf(":") === -1)
            return new r({
              functionName: c
            });
          var s = /((.*".+"[^@]*)?[^@]*)(?:@)/, l = c.match(s), p = l && l[1] ? l[1] : void 0, f = this.extractLocation(c.replace(s, ""));
          return new r({
            functionName: p,
            fileName: f[0],
            lineNumber: f[1],
            columnNumber: f[2],
            source: c
          });
        }, this);
      },
      parseOpera: function(a) {
        return !a.stacktrace || a.message.indexOf(`
`) > -1 && a.message.split(`
`).length > a.stacktrace.split(`
`).length ? this.parseOpera9(a) : a.stack ? this.parseOpera11(a) : this.parseOpera10(a);
      },
      parseOpera9: function(a) {
        for (var u = /Line (\d+).*script (?:in )?(\S+)/i, c = a.message.split(`
`), s = [], l = 2, p = c.length; l < p; l += 2) {
          var f = u.exec(c[l]);
          f && s.push(new r({
            fileName: f[2],
            lineNumber: f[1],
            source: c[l]
          }));
        }
        return s;
      },
      parseOpera10: function(a) {
        for (var u = /Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i, c = a.stacktrace.split(`
`), s = [], l = 0, p = c.length; l < p; l += 2) {
          var f = u.exec(c[l]);
          f && s.push(
            new r({
              functionName: f[3] || void 0,
              fileName: f[2],
              lineNumber: f[1],
              source: c[l]
            })
          );
        }
        return s;
      },
      // Opera 10.65+ Error.stack very similar to FF/Safari
      parseOpera11: function(a) {
        var u = a.stack.split(`
`).filter(function(c) {
          return !!c.match(n) && !c.match(/^Error created at/);
        }, this);
        return u.map(function(c) {
          var s = c.split("@"), l = this.extractLocation(s.pop()), p = s.shift() || "", f = p.replace(/<anonymous function(: (\w+))?>/, "$2").replace(/\([^)]*\)/g, "") || void 0, m;
          p.match(/\(([^)]*)\)/) && (m = p.replace(/^[^(]+\(([^)]*)\)$/, "$1"));
          var v = m === void 0 || m === "[arguments not available]" ? void 0 : m.split(",");
          return new r({
            functionName: f,
            args: v,
            fileName: l[0],
            lineNumber: l[1],
            columnNumber: l[2],
            source: c
          });
        }, this);
      }
    };
  });
})(As);
var Bp = As.exports;
const wo = /* @__PURE__ */ Fr(Bp);
function Gr(t) {
  try {
    return wo.parse(t);
  } catch (e) {
    try {
      return wo.parse(new Error());
    } catch (r) {
      return console.warn("Highlight Warning: failed to parse error", {
        originalError: e,
        secondaryError: r
      }), [];
    }
  }
}
function $p(t, e) {
  const r = e.logger;
  let n;
  n = window[r];
  const i = [];
  if (e.level.includes("error") && window) {
    const a = (u) => {
      const { message: c, error: s } = u;
      let l = [];
      s && (l = Gr(s));
      const p = [
        ni(c, e.stringifyOptions)
      ];
      t({
        type: "Error",
        trace: l,
        time: Date.now(),
        value: p
      });
    };
    window.addEventListener("error", a), i.push(() => {
      window && window.removeEventListener("error", a);
    });
  }
  for (const a of e.level)
    i.push(o(n, a));
  return () => {
    i.forEach((a) => a());
  };
  function o(a, u) {
    return a[u] ? jl(a, u, (c) => (...s) => {
      c.apply(this, s);
      try {
        t(Fp(u, e, ...s));
      } catch (l) {
        c("highlight logger error:", l, ...s);
      }
    }) : () => {
    };
  }
}
function Fp(t, e, ...r) {
  const n = Gr(new Error()), i = e.serializeConsoleAttributes ? r.map(
    (o) => typeof o == "object" ? ni(o, e.stringifyOptions) : o
  ) : r.filter((o) => typeof o != "object").map((o) => `${o}`);
  return {
    type: t,
    trace: n,
    value: i,
    attributes: ni(
      r.filter((o) => typeof o == "object").reduce((o, a) => P(P({}, o), a), {}),
      e.stringifyOptions
    ),
    time: Date.now()
  };
}
const Vp = {
  start: 0,
  end: 3
}, Gp = {
  start: 4,
  end: 5
}, un = {
  start: 6,
  end: 7
}, cn = {
  start: 8,
  end: 8
}, Hp = {
  start: 9,
  end: 9
}, zp = {
  start: 10,
  end: 15
};
function Xp() {
  if (crypto && crypto.getRandomValues) {
    const e = new Uint8Array(16);
    return crypto.getRandomValues(e), [...e.values()];
  }
  const t = [];
  for (let e = 0; e < 16; e += 1)
    t.push(Math.floor(Math.random() * 256));
  return t;
}
function Yt(t, e) {
  let r = "";
  for (let n = e.start; n <= e.end; n += 1)
    r += t[n].toString(16).padStart(2, "0");
  return r;
}
function qp(t) {
  return t[cn.start] = (t[cn.start] | 128) & 191, t[un.start] = t[un.start] & 15 | 64, `${Yt(t, Vp)}-${Yt(t, Gp)}-${Yt(t, un)}-${Yt(t, cn)}${Yt(t, Hp)}-${Yt(t, zp)}`;
}
function Kp() {
  const t = Xp();
  return qp(t);
}
function Ls() {
  return typeof crypto < "u" && typeof crypto.randomUUID == "function" ? crypto.randomUUID() : Kp();
}
function ln(t, e, r, n) {
  var i, o, a, u;
  let c = n ?? e, s = Gr(c), l = {};
  e instanceof Error && (e = e.message, e.cause && (l = { "exception.cause": e.cause }));
  const p = Yp(s);
  t({
    error: c,
    event: Ae(e),
    type: "window.onerror",
    url: window.location.href,
    source: r ?? "",
    lineNumber: (i = p[0]) != null && i.lineNumber ? (o = p[0]) == null ? void 0 : o.lineNumber : 0,
    columnNumber: (a = p[0]) != null && a.columnNumber ? (u = p[0]) == null ? void 0 : u.columnNumber : 0,
    stackTrace: p,
    timestamp: (/* @__PURE__ */ new Date()).toISOString(),
    payload: l ? Ae(l) : void 0,
    id: Ls()
  });
}
const Wp = (t, { enablePromisePatch: e }) => {
  if (typeof window > "u") return () => {
  };
  const r = window.onerror = (a, u, c, s, l) => {
    ln(t, a, u, l);
  }, n = window.onunhandledrejection = (a) => {
    if (a.reason) {
      const u = a.promise;
      u.getStack ? ln(
        t,
        a.reason,
        a.type,
        u.getStack()
      ) : ln(t, a.reason, a.type);
    }
  }, i = window.Promise, o = class extends i {
    constructor(a) {
      super(a), k(this, "promiseCreationError"), this.promiseCreationError = new Error();
    }
    getStack() {
      return this.promiseCreationError;
    }
    static shouldPatch() {
      const a = typeof window.Zone > "u";
      return e && a;
    }
  };
  return o.shouldPatch() && (window.Promise = o), () => {
    window.Promise = i, window.onunhandledrejection = n, window.onerror = r;
  };
}, Yp = (t) => {
  var e, r;
  if (t.length === 0)
    return t;
  const n = t[0];
  return (e = n.fileName) != null && e.includes("highlight.run") || (r = n.fileName) != null && r.includes("highlight.io") || n.functionName === "new highlightPromise" ? t.slice(1) : t;
}, Jp = [
  '["\\"Script error.\\""]',
  '"Script error."',
  '["\\"Load failed.\\""]',
  '"Load failed."',
  '["\\"Network request failed.\\""]',
  '"Network request failed."',
  '["\\"Document is not focused.\\""]',
  '"Document is not focused."',
  '["\\"Failed to fetch\\""]',
  '"Failed to fetch"',
  '[{"isTrusted":true}]',
  '{"isTrusted":true}',
  '["{}"]',
  '"{}"',
  '[""]',
  '""',
  '["\\"\\""]',
  '""'
], Qp = [
  "websocket error",
  '\\"ResizeObserver loop'
];
var Zp = typeof globalThis == "object" ? globalThis : typeof self == "object" ? self : typeof window == "object" ? window : typeof global == "object" ? global : {}, Ut = "1.9.0", Ao = /^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;
function tf(t) {
  var e = /* @__PURE__ */ new Set([t]), r = /* @__PURE__ */ new Set(), n = t.match(Ao);
  if (!n)
    return function() {
      return !1;
    };
  var i = {
    major: +n[1],
    minor: +n[2],
    patch: +n[3],
    prerelease: n[4]
  };
  if (i.prerelease != null)
    return function(u) {
      return u === t;
    };
  function o(u) {
    return r.add(u), !1;
  }
  function a(u) {
    return e.add(u), !0;
  }
  return function(u) {
    if (e.has(u))
      return !0;
    if (r.has(u))
      return !1;
    var c = u.match(Ao);
    if (!c)
      return o(u);
    var s = {
      major: +c[1],
      minor: +c[2],
      patch: +c[3],
      prerelease: c[4]
    };
    return s.prerelease != null || i.major !== s.major ? o(u) : i.major === 0 ? i.minor === s.minor && i.patch <= s.patch ? a(u) : o(u) : i.minor <= s.minor ? a(u) : o(u);
  };
}
var ef = tf(Ut), rf = Ut.split(".")[0], Me = Symbol.for("opentelemetry.js.api." + rf), ke = Zp;
function Ve(t, e, r, n) {
  var i;
  n === void 0 && (n = !1);
  var o = ke[Me] = (i = ke[Me]) !== null && i !== void 0 ? i : {
    version: Ut
  };
  if (!n && o[t]) {
    var a = new Error("@opentelemetry/api: Attempted duplicate registration of API: " + t);
    return r.error(a.stack || a.message), !1;
  }
  if (o.version !== Ut) {
    var a = new Error("@opentelemetry/api: Registration of version v" + o.version + " for " + t + " does not match previously registered API v" + Ut);
    return r.error(a.stack || a.message), !1;
  }
  return o[t] = e, r.debug("@opentelemetry/api: Registered a global for " + t + " v" + Ut + "."), !0;
}
function $t(t) {
  var e, r, n = (e = ke[Me]) === null || e === void 0 ? void 0 : e.version;
  if (!(!n || !ef(n)))
    return (r = ke[Me]) === null || r === void 0 ? void 0 : r[t];
}
function Ge(t, e) {
  e.debug("@opentelemetry/api: Unregistering a global for " + t + " v" + Ut + ".");
  var r = ke[Me];
  r && delete r[t];
}
var nf = function(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, o = [], a;
  try {
    for (; !(i = n.next()).done; ) o.push(i.value);
  } catch (u) {
    a = { error: u };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, of = function(t, e, r) {
  if (arguments.length === 2) for (var n = 0, i = e.length, o; n < i; n++)
    (o || !(n in e)) && (o || (o = Array.prototype.slice.call(e, 0, n)), o[n] = e[n]);
  return t.concat(o || Array.prototype.slice.call(e));
}, af = (
  /** @class */
  function() {
    function t(e) {
      this._namespace = e.namespace || "DiagComponentLogger";
    }
    return t.prototype.debug = function() {
      for (var e = [], r = 0; r < arguments.length; r++)
        e[r] = arguments[r];
      return ye("debug", this._namespace, e);
    }, t.prototype.error = function() {
      for (var e = [], r = 0; r < arguments.length; r++)
        e[r] = arguments[r];
      return ye("error", this._namespace, e);
    }, t.prototype.info = function() {
      for (var e = [], r = 0; r < arguments.length; r++)
        e[r] = arguments[r];
      return ye("info", this._namespace, e);
    }, t.prototype.warn = function() {
      for (var e = [], r = 0; r < arguments.length; r++)
        e[r] = arguments[r];
      return ye("warn", this._namespace, e);
    }, t.prototype.verbose = function() {
      for (var e = [], r = 0; r < arguments.length; r++)
        e[r] = arguments[r];
      return ye("verbose", this._namespace, e);
    }, t;
  }()
);
function ye(t, e, r) {
  var n = $t("diag");
  if (n)
    return r.unshift(e), n[t].apply(n, of([], nf(r), !1));
}
var I;
(function(t) {
  t[t.NONE = 0] = "NONE", t[t.ERROR = 30] = "ERROR", t[t.WARN = 50] = "WARN", t[t.INFO = 60] = "INFO", t[t.DEBUG = 70] = "DEBUG", t[t.VERBOSE = 80] = "VERBOSE", t[t.ALL = 9999] = "ALL";
})(I || (I = {}));
function sf(t, e) {
  t < I.NONE ? t = I.NONE : t > I.ALL && (t = I.ALL), e = e || {};
  function r(n, i) {
    var o = e[n];
    return typeof o == "function" && t >= i ? o.bind(e) : function() {
    };
  }
  return {
    error: r("error", I.ERROR),
    warn: r("warn", I.WARN),
    info: r("info", I.INFO),
    debug: r("debug", I.DEBUG),
    verbose: r("verbose", I.VERBOSE)
  };
}
var uf = function(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, o = [], a;
  try {
    for (; !(i = n.next()).done; ) o.push(i.value);
  } catch (u) {
    a = { error: u };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, cf = function(t, e, r) {
  if (arguments.length === 2) for (var n = 0, i = e.length, o; n < i; n++)
    (o || !(n in e)) && (o || (o = Array.prototype.slice.call(e, 0, n)), o[n] = e[n]);
  return t.concat(o || Array.prototype.slice.call(e));
}, lf = "diag", ft = (
  /** @class */
  function() {
    function t() {
      function e(i) {
        return function() {
          for (var o = [], a = 0; a < arguments.length; a++)
            o[a] = arguments[a];
          var u = $t("diag");
          if (u)
            return u[i].apply(u, cf([], uf(o), !1));
        };
      }
      var r = this, n = function(i, o) {
        var a, u, c;
        if (o === void 0 && (o = { logLevel: I.INFO }), i === r) {
          var s = new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");
          return r.error((a = s.stack) !== null && a !== void 0 ? a : s.message), !1;
        }
        typeof o == "number" && (o = {
          logLevel: o
        });
        var l = $t("diag"), p = sf((u = o.logLevel) !== null && u !== void 0 ? u : I.INFO, i);
        if (l && !o.suppressOverrideMessage) {
          var f = (c = new Error().stack) !== null && c !== void 0 ? c : "<failed to generate stacktrace>";
          l.warn("Current logger will be overwritten from " + f), p.warn("Current logger will overwrite one already registered from " + f);
        }
        return Ve("diag", p, r, !0);
      };
      r.setLogger = n, r.disable = function() {
        Ge(lf, r);
      }, r.createComponentLogger = function(i) {
        return new af(i);
      }, r.verbose = e("verbose"), r.debug = e("debug"), r.info = e("info"), r.warn = e("warn"), r.error = e("error");
    }
    return t.instance = function() {
      return this._instance || (this._instance = new t()), this._instance;
    }, t;
  }()
), pf = function(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = n.next()).done; ) o.push(i.value);
  } catch (u) {
    a = { error: u };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, ff = function(t) {
  var e = typeof Symbol == "function" && Symbol.iterator, r = e && t[e], n = 0;
  if (r) return r.call(t);
  if (t && typeof t.length == "number") return {
    next: function() {
      return t && n >= t.length && (t = void 0), { value: t && t[n++], done: !t };
    }
  };
  throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.");
}, hf = (
  /** @class */
  function() {
    function t(e) {
      this._entries = e ? new Map(e) : /* @__PURE__ */ new Map();
    }
    return t.prototype.getEntry = function(e) {
      var r = this._entries.get(e);
      if (r)
        return Object.assign({}, r);
    }, t.prototype.getAllEntries = function() {
      return Array.from(this._entries.entries()).map(function(e) {
        var r = pf(e, 2), n = r[0], i = r[1];
        return [n, i];
      });
    }, t.prototype.setEntry = function(e, r) {
      var n = new t(this._entries);
      return n._entries.set(e, r), n;
    }, t.prototype.removeEntry = function(e) {
      var r = new t(this._entries);
      return r._entries.delete(e), r;
    }, t.prototype.removeEntries = function() {
      for (var e, r, n = [], i = 0; i < arguments.length; i++)
        n[i] = arguments[i];
      var o = new t(this._entries);
      try {
        for (var a = ff(n), u = a.next(); !u.done; u = a.next()) {
          var c = u.value;
          o._entries.delete(c);
        }
      } catch (s) {
        e = { error: s };
      } finally {
        try {
          u && !u.done && (r = a.return) && r.call(a);
        } finally {
          if (e) throw e.error;
        }
      }
      return o;
    }, t.prototype.clear = function() {
      return new t();
    }, t;
  }()
), df = Symbol("BaggageEntryMetadata"), vf = ft.instance();
function mf(t) {
  return t === void 0 && (t = {}), new hf(new Map(Object.entries(t)));
}
function Rs(t) {
  return typeof t != "string" && (vf.error("Cannot create baggage metadata from unknown type: " + typeof t), t = ""), {
    __TYPE__: df,
    toString: function() {
      return t;
    }
  };
}
function He(t) {
  return Symbol.for(t);
}
var yf = (
  /** @class */
  /* @__PURE__ */ function() {
    function t(e) {
      var r = this;
      r._currentContext = e ? new Map(e) : /* @__PURE__ */ new Map(), r.getValue = function(n) {
        return r._currentContext.get(n);
      }, r.setValue = function(n, i) {
        var o = new t(r._currentContext);
        return o._currentContext.set(n, i), o;
      }, r.deleteValue = function(n) {
        var i = new t(r._currentContext);
        return i._currentContext.delete(n), i;
      };
    }
    return t;
  }()
), It = new yf(), Gt = /* @__PURE__ */ function() {
  var t = function(e, r) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (n[o] = i[o]);
    }, t(e, r);
  };
  return function(e, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    t(e, r);
    function n() {
      this.constructor = e;
    }
    e.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}(), _f = (
  /** @class */
  function() {
    function t() {
    }
    return t.prototype.createGauge = function(e, r) {
      return Lf;
    }, t.prototype.createHistogram = function(e, r) {
      return Rf;
    }, t.prototype.createCounter = function(e, r) {
      return Af;
    }, t.prototype.createUpDownCounter = function(e, r) {
      return Nf;
    }, t.prototype.createObservableGauge = function(e, r) {
      return xf;
    }, t.prototype.createObservableCounter = function(e, r) {
      return Cf;
    }, t.prototype.createObservableUpDownCounter = function(e, r) {
      return Pf;
    }, t.prototype.addBatchObservableCallback = function(e, r) {
    }, t.prototype.removeBatchObservableCallback = function(e) {
    }, t;
  }()
), Hr = (
  /** @class */
  /* @__PURE__ */ function() {
    function t() {
    }
    return t;
  }()
), gf = (
  /** @class */
  function(t) {
    Gt(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.add = function(r, n) {
    }, e;
  }(Hr)
), Ef = (
  /** @class */
  function(t) {
    Gt(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.add = function(r, n) {
    }, e;
  }(Hr)
), Tf = (
  /** @class */
  function(t) {
    Gt(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.record = function(r, n) {
    }, e;
  }(Hr)
), bf = (
  /** @class */
  function(t) {
    Gt(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.record = function(r, n) {
    }, e;
  }(Hr)
), zi = (
  /** @class */
  function() {
    function t() {
    }
    return t.prototype.addCallback = function(e) {
    }, t.prototype.removeCallback = function(e) {
    }, t;
  }()
), Of = (
  /** @class */
  function(t) {
    Gt(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e;
  }(zi)
), Sf = (
  /** @class */
  function(t) {
    Gt(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e;
  }(zi)
), wf = (
  /** @class */
  function(t) {
    Gt(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e;
  }(zi)
), Ns = new _f(), Af = new gf(), Lf = new Tf(), Rf = new bf(), Nf = new Ef(), Cf = new Of(), xf = new Sf(), Pf = new wf();
function If() {
  return Ns;
}
var Nt;
(function(t) {
  t[t.INT = 0] = "INT", t[t.DOUBLE = 1] = "DOUBLE";
})(Nt || (Nt = {}));
var Mf = {
  get: function(t, e) {
    if (t != null)
      return t[e];
  },
  keys: function(t) {
    return t == null ? [] : Object.keys(t);
  }
}, kf = {
  set: function(t, e, r) {
    t != null && (t[e] = r);
  }
}, Df = function(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, o = [], a;
  try {
    for (; !(i = n.next()).done; ) o.push(i.value);
  } catch (u) {
    a = { error: u };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Uf = function(t, e, r) {
  if (arguments.length === 2) for (var n = 0, i = e.length, o; n < i; n++)
    (o || !(n in e)) && (o || (o = Array.prototype.slice.call(e, 0, n)), o[n] = e[n]);
  return t.concat(o || Array.prototype.slice.call(e));
}, jf = (
  /** @class */
  function() {
    function t() {
    }
    return t.prototype.active = function() {
      return It;
    }, t.prototype.with = function(e, r, n) {
      for (var i = [], o = 3; o < arguments.length; o++)
        i[o - 3] = arguments[o];
      return r.call.apply(r, Uf([n], Df(i), !1));
    }, t.prototype.bind = function(e, r) {
      return r;
    }, t.prototype.enable = function() {
      return this;
    }, t.prototype.disable = function() {
      return this;
    }, t;
  }()
), Bf = function(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, o = [], a;
  try {
    for (; !(i = n.next()).done; ) o.push(i.value);
  } catch (u) {
    a = { error: u };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, $f = function(t, e, r) {
  if (arguments.length === 2) for (var n = 0, i = e.length, o; n < i; n++)
    (o || !(n in e)) && (o || (o = Array.prototype.slice.call(e, 0, n)), o[n] = e[n]);
  return t.concat(o || Array.prototype.slice.call(e));
}, pn = "context", Ff = new jf(), zr = (
  /** @class */
  function() {
    function t() {
    }
    return t.getInstance = function() {
      return this._instance || (this._instance = new t()), this._instance;
    }, t.prototype.setGlobalContextManager = function(e) {
      return Ve(pn, e, ft.instance());
    }, t.prototype.active = function() {
      return this._getContextManager().active();
    }, t.prototype.with = function(e, r, n) {
      for (var i, o = [], a = 3; a < arguments.length; a++)
        o[a - 3] = arguments[a];
      return (i = this._getContextManager()).with.apply(i, $f([e, r, n], Bf(o), !1));
    }, t.prototype.bind = function(e, r) {
      return this._getContextManager().bind(e, r);
    }, t.prototype._getContextManager = function() {
      return $t(pn) || Ff;
    }, t.prototype.disable = function() {
      this._getContextManager().disable(), Ge(pn, ft.instance());
    }, t;
  }()
), ht;
(function(t) {
  t[t.NONE = 0] = "NONE", t[t.SAMPLED = 1] = "SAMPLED";
})(ht || (ht = {}));
var Cs = "0000000000000000", xs = "00000000000000000000000000000000", Ps = {
  traceId: xs,
  spanId: Cs,
  traceFlags: ht.NONE
}, Le = (
  /** @class */
  function() {
    function t(e) {
      e === void 0 && (e = Ps), this._spanContext = e;
    }
    return t.prototype.spanContext = function() {
      return this._spanContext;
    }, t.prototype.setAttribute = function(e, r) {
      return this;
    }, t.prototype.setAttributes = function(e) {
      return this;
    }, t.prototype.addEvent = function(e, r) {
      return this;
    }, t.prototype.addLink = function(e) {
      return this;
    }, t.prototype.addLinks = function(e) {
      return this;
    }, t.prototype.setStatus = function(e) {
      return this;
    }, t.prototype.updateName = function(e) {
      return this;
    }, t.prototype.end = function(e) {
    }, t.prototype.isRecording = function() {
      return !1;
    }, t.prototype.recordException = function(e, r) {
    }, t;
  }()
), Xi = He("OpenTelemetry Context Key SPAN");
function qi(t) {
  return t.getValue(Xi) || void 0;
}
function Vf() {
  return qi(zr.getInstance().active());
}
function Ki(t, e) {
  return t.setValue(Xi, e);
}
function Gf(t) {
  return t.deleteValue(Xi);
}
function Hf(t, e) {
  return Ki(t, new Le(e));
}
function Is(t) {
  var e;
  return (e = qi(t)) === null || e === void 0 ? void 0 : e.spanContext();
}
var zf = /^([0-9a-f]{32})$/i, Xf = /^[0-9a-f]{16}$/i;
function Ms(t) {
  return zf.test(t) && t !== xs;
}
function qf(t) {
  return Xf.test(t) && t !== Cs;
}
function ze(t) {
  return Ms(t.traceId) && qf(t.spanId);
}
function Kf(t) {
  return new Le(t);
}
var fn = zr.getInstance(), ks = (
  /** @class */
  function() {
    function t() {
    }
    return t.prototype.startSpan = function(e, r, n) {
      n === void 0 && (n = fn.active());
      var i = !!(r != null && r.root);
      if (i)
        return new Le();
      var o = n && Is(n);
      return Wf(o) && ze(o) ? new Le(o) : new Le();
    }, t.prototype.startActiveSpan = function(e, r, n, i) {
      var o, a, u;
      if (!(arguments.length < 2)) {
        arguments.length === 2 ? u = r : arguments.length === 3 ? (o = r, u = n) : (o = r, a = n, u = i);
        var c = a ?? fn.active(), s = this.startSpan(e, o, c), l = Ki(c, s);
        return fn.with(l, u, void 0, s);
      }
    }, t;
  }()
);
function Wf(t) {
  return typeof t == "object" && typeof t.spanId == "string" && typeof t.traceId == "string" && typeof t.traceFlags == "number";
}
var Yf = new ks(), Jf = (
  /** @class */
  function() {
    function t(e, r, n, i) {
      this._provider = e, this.name = r, this.version = n, this.options = i;
    }
    return t.prototype.startSpan = function(e, r, n) {
      return this._getTracer().startSpan(e, r, n);
    }, t.prototype.startActiveSpan = function(e, r, n, i) {
      var o = this._getTracer();
      return Reflect.apply(o.startActiveSpan, o, arguments);
    }, t.prototype._getTracer = function() {
      if (this._delegate)
        return this._delegate;
      var e = this._provider.getDelegateTracer(this.name, this.version, this.options);
      return e ? (this._delegate = e, this._delegate) : Yf;
    }, t;
  }()
), Qf = (
  /** @class */
  function() {
    function t() {
    }
    return t.prototype.getTracer = function(e, r, n) {
      return new ks();
    }, t;
  }()
), Zf = new Qf(), Lo = (
  /** @class */
  function() {
    function t() {
    }
    return t.prototype.getTracer = function(e, r, n) {
      var i;
      return (i = this.getDelegateTracer(e, r, n)) !== null && i !== void 0 ? i : new Jf(this, e, r, n);
    }, t.prototype.getDelegate = function() {
      var e;
      return (e = this._delegate) !== null && e !== void 0 ? e : Zf;
    }, t.prototype.setDelegate = function(e) {
      this._delegate = e;
    }, t.prototype.getDelegateTracer = function(e, r, n) {
      var i;
      return (i = this._delegate) === null || i === void 0 ? void 0 : i.getTracer(e, r, n);
    }, t;
  }()
), Ar;
(function(t) {
  t[t.NOT_RECORD = 0] = "NOT_RECORD", t[t.RECORD = 1] = "RECORD", t[t.RECORD_AND_SAMPLED = 2] = "RECORD_AND_SAMPLED";
})(Ar || (Ar = {}));
var De;
(function(t) {
  t[t.INTERNAL = 0] = "INTERNAL", t[t.SERVER = 1] = "SERVER", t[t.CLIENT = 2] = "CLIENT", t[t.PRODUCER = 3] = "PRODUCER", t[t.CONSUMER = 4] = "CONSUMER";
})(De || (De = {}));
var Lr;
(function(t) {
  t[t.UNSET = 0] = "UNSET", t[t.OK = 1] = "OK", t[t.ERROR = 2] = "ERROR";
})(Lr || (Lr = {}));
var N = zr.getInstance(), T = ft.instance(), th = (
  /** @class */
  function() {
    function t() {
    }
    return t.prototype.getMeter = function(e, r, n) {
      return Ns;
    }, t;
  }()
), eh = new th(), hn = "metrics", rh = (
  /** @class */
  function() {
    function t() {
    }
    return t.getInstance = function() {
      return this._instance || (this._instance = new t()), this._instance;
    }, t.prototype.setGlobalMeterProvider = function(e) {
      return Ve(hn, e, ft.instance());
    }, t.prototype.getMeterProvider = function() {
      return $t(hn) || eh;
    }, t.prototype.getMeter = function(e, r, n) {
      return this.getMeterProvider().getMeter(e, r, n);
    }, t.prototype.disable = function() {
      Ge(hn, ft.instance());
    }, t;
  }()
), he = rh.getInstance(), nh = (
  /** @class */
  function() {
    function t() {
    }
    return t.prototype.inject = function(e, r) {
    }, t.prototype.extract = function(e, r) {
      return e;
    }, t.prototype.fields = function() {
      return [];
    }, t;
  }()
), Wi = He("OpenTelemetry Baggage Key");
function Ds(t) {
  return t.getValue(Wi) || void 0;
}
function ih() {
  return Ds(zr.getInstance().active());
}
function oh(t, e) {
  return t.setValue(Wi, e);
}
function ah(t) {
  return t.deleteValue(Wi);
}
var dn = "propagation", sh = new nh(), uh = (
  /** @class */
  function() {
    function t() {
      this.createBaggage = mf, this.getBaggage = Ds, this.getActiveBaggage = ih, this.setBaggage = oh, this.deleteBaggage = ah;
    }
    return t.getInstance = function() {
      return this._instance || (this._instance = new t()), this._instance;
    }, t.prototype.setGlobalPropagator = function(e) {
      return Ve(dn, e, ft.instance());
    }, t.prototype.inject = function(e, r, n) {
      return n === void 0 && (n = kf), this._getGlobalPropagator().inject(e, r, n);
    }, t.prototype.extract = function(e, r, n) {
      return n === void 0 && (n = Mf), this._getGlobalPropagator().extract(e, r, n);
    }, t.prototype.fields = function() {
      return this._getGlobalPropagator().fields();
    }, t.prototype.disable = function() {
      Ge(dn, ft.instance());
    }, t.prototype._getGlobalPropagator = function() {
      return $t(dn) || sh;
    }, t;
  }()
), J = uh.getInstance(), vn = "trace", ch = (
  /** @class */
  function() {
    function t() {
      this._proxyTracerProvider = new Lo(), this.wrapSpanContext = Kf, this.isSpanContextValid = ze, this.deleteSpan = Gf, this.getSpan = qi, this.getActiveSpan = Vf, this.getSpanContext = Is, this.setSpan = Ki, this.setSpanContext = Hf;
    }
    return t.getInstance = function() {
      return this._instance || (this._instance = new t()), this._instance;
    }, t.prototype.setGlobalTracerProvider = function(e) {
      var r = Ve(vn, this._proxyTracerProvider, ft.instance());
      return r && this._proxyTracerProvider.setDelegate(e), r;
    }, t.prototype.getTracerProvider = function() {
      return $t(vn) || this._proxyTracerProvider;
    }, t.prototype.getTracer = function(e, r) {
      return this.getTracerProvider().getTracer(e, r);
    }, t.prototype.disable = function() {
      Ge(vn, ft.instance()), this._proxyTracerProvider = new Lo();
    }, t;
  }()
), x = ch.getInstance(), lh = He("OpenTelemetry SDK Context Key SUPPRESS_TRACING");
function Us(t) {
  return t.getValue(lh) === !0;
}
var ph = "=", ui = ";", ci = ",", mn = "baggage", fh = 180, hh = 4096, dh = 8192, vh = function(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = n.next()).done; ) o.push(i.value);
  } catch (u) {
    a = { error: u };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
};
function mh(t) {
  return t.reduce(function(e, r) {
    var n = "" + e + (e !== "" ? ci : "") + r;
    return n.length > dh ? e : n;
  }, "");
}
function yh(t) {
  return t.getAllEntries().map(function(e) {
    var r = vh(e, 2), n = r[0], i = r[1], o = encodeURIComponent(n) + "=" + encodeURIComponent(i.value);
    return i.metadata !== void 0 && (o += ui + i.metadata.toString()), o;
  });
}
function _h(t) {
  var e = t.split(ui);
  if (!(e.length <= 0)) {
    var r = e.shift();
    if (r) {
      var n = r.indexOf(ph);
      if (!(n <= 0)) {
        var i = decodeURIComponent(r.substring(0, n).trim()), o = decodeURIComponent(r.substring(n + 1).trim()), a;
        return e.length > 0 && (a = Rs(e.join(ui))), { key: i, value: o, metadata: a };
      }
    }
  }
}
var gh = (
  /** @class */
  function() {
    function t() {
    }
    return t.prototype.inject = function(e, r, n) {
      var i = J.getBaggage(e);
      if (!(!i || Us(e))) {
        var o = yh(i).filter(function(u) {
          return u.length <= hh;
        }).slice(0, fh), a = mh(o);
        a.length > 0 && n.set(r, mn, a);
      }
    }, t.prototype.extract = function(e, r, n) {
      var i = n.get(r, mn), o = Array.isArray(i) ? i.join(ci) : i;
      if (!o)
        return e;
      var a = {};
      if (o.length === 0)
        return e;
      var u = o.split(ci);
      return u.forEach(function(c) {
        var s = _h(c);
        if (s) {
          var l = { value: s.value };
          s.metadata && (l.metadata = s.metadata), a[s.key] = l;
        }
      }), Object.entries(a).length === 0 ? e : J.setBaggage(e, J.createBaggage(a));
    }, t.prototype.fields = function() {
      return [mn];
    }, t;
  }()
), li;
(function(t) {
  t.AlwaysOff = "always_off", t.AlwaysOn = "always_on", t.ParentBasedAlwaysOff = "parentbased_always_off", t.ParentBasedAlwaysOn = "parentbased_always_on", t.ParentBasedTraceIdRatio = "parentbased_traceidratio", t.TraceIdRatio = "traceidratio";
})(li || (li = {}));
var Eh = ",", Th = ["OTEL_SDK_DISABLED"];
function bh(t) {
  return Th.indexOf(t) > -1;
}
var Oh = [
  "OTEL_BSP_EXPORT_TIMEOUT",
  "OTEL_BSP_MAX_EXPORT_BATCH_SIZE",
  "OTEL_BSP_MAX_QUEUE_SIZE",
  "OTEL_BSP_SCHEDULE_DELAY",
  "OTEL_BLRP_EXPORT_TIMEOUT",
  "OTEL_BLRP_MAX_EXPORT_BATCH_SIZE",
  "OTEL_BLRP_MAX_QUEUE_SIZE",
  "OTEL_BLRP_SCHEDULE_DELAY",
  "OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT",
  "OTEL_ATTRIBUTE_COUNT_LIMIT",
  "OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT",
  "OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT",
  "OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT",
  "OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT",
  "OTEL_SPAN_EVENT_COUNT_LIMIT",
  "OTEL_SPAN_LINK_COUNT_LIMIT",
  "OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT",
  "OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT",
  "OTEL_EXPORTER_OTLP_TIMEOUT",
  "OTEL_EXPORTER_OTLP_TRACES_TIMEOUT",
  "OTEL_EXPORTER_OTLP_METRICS_TIMEOUT",
  "OTEL_EXPORTER_OTLP_LOGS_TIMEOUT",
  "OTEL_EXPORTER_JAEGER_AGENT_PORT"
];
function Sh(t) {
  return Oh.indexOf(t) > -1;
}
var wh = [
  "OTEL_NO_PATCH_MODULES",
  "OTEL_PROPAGATORS",
  "OTEL_SEMCONV_STABILITY_OPT_IN"
];
function Ah(t) {
  return wh.indexOf(t) > -1;
}
var yn = 1 / 0, _n = 128, Lh = 128, Rh = 128, js = {
  OTEL_SDK_DISABLED: !1,
  CONTAINER_NAME: "",
  ECS_CONTAINER_METADATA_URI_V4: "",
  ECS_CONTAINER_METADATA_URI: "",
  HOSTNAME: "",
  KUBERNETES_SERVICE_HOST: "",
  NAMESPACE: "",
  OTEL_BSP_EXPORT_TIMEOUT: 3e4,
  OTEL_BSP_MAX_EXPORT_BATCH_SIZE: 512,
  OTEL_BSP_MAX_QUEUE_SIZE: 2048,
  OTEL_BSP_SCHEDULE_DELAY: 5e3,
  OTEL_BLRP_EXPORT_TIMEOUT: 3e4,
  OTEL_BLRP_MAX_EXPORT_BATCH_SIZE: 512,
  OTEL_BLRP_MAX_QUEUE_SIZE: 2048,
  OTEL_BLRP_SCHEDULE_DELAY: 5e3,
  OTEL_EXPORTER_JAEGER_AGENT_HOST: "",
  OTEL_EXPORTER_JAEGER_AGENT_PORT: 6832,
  OTEL_EXPORTER_JAEGER_ENDPOINT: "",
  OTEL_EXPORTER_JAEGER_PASSWORD: "",
  OTEL_EXPORTER_JAEGER_USER: "",
  OTEL_EXPORTER_OTLP_ENDPOINT: "",
  OTEL_EXPORTER_OTLP_TRACES_ENDPOINT: "",
  OTEL_EXPORTER_OTLP_METRICS_ENDPOINT: "",
  OTEL_EXPORTER_OTLP_LOGS_ENDPOINT: "",
  OTEL_EXPORTER_OTLP_HEADERS: "",
  OTEL_EXPORTER_OTLP_TRACES_HEADERS: "",
  OTEL_EXPORTER_OTLP_METRICS_HEADERS: "",
  OTEL_EXPORTER_OTLP_LOGS_HEADERS: "",
  OTEL_EXPORTER_OTLP_TIMEOUT: 1e4,
  OTEL_EXPORTER_OTLP_TRACES_TIMEOUT: 1e4,
  OTEL_EXPORTER_OTLP_METRICS_TIMEOUT: 1e4,
  OTEL_EXPORTER_OTLP_LOGS_TIMEOUT: 1e4,
  OTEL_EXPORTER_ZIPKIN_ENDPOINT: "http://localhost:9411/api/v2/spans",
  OTEL_LOG_LEVEL: I.INFO,
  OTEL_NO_PATCH_MODULES: [],
  OTEL_PROPAGATORS: ["tracecontext", "baggage"],
  OTEL_RESOURCE_ATTRIBUTES: "",
  OTEL_SERVICE_NAME: "",
  OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT: yn,
  OTEL_ATTRIBUTE_COUNT_LIMIT: _n,
  OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT: yn,
  OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT: _n,
  OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT: yn,
  OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT: _n,
  OTEL_SPAN_EVENT_COUNT_LIMIT: 128,
  OTEL_SPAN_LINK_COUNT_LIMIT: 128,
  OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT: Lh,
  OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT: Rh,
  OTEL_TRACES_EXPORTER: "",
  OTEL_TRACES_SAMPLER: li.ParentBasedAlwaysOn,
  OTEL_TRACES_SAMPLER_ARG: "",
  OTEL_LOGS_EXPORTER: "",
  OTEL_EXPORTER_OTLP_INSECURE: "",
  OTEL_EXPORTER_OTLP_TRACES_INSECURE: "",
  OTEL_EXPORTER_OTLP_METRICS_INSECURE: "",
  OTEL_EXPORTER_OTLP_LOGS_INSECURE: "",
  OTEL_EXPORTER_OTLP_CERTIFICATE: "",
  OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE: "",
  OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE: "",
  OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE: "",
  OTEL_EXPORTER_OTLP_COMPRESSION: "",
  OTEL_EXPORTER_OTLP_TRACES_COMPRESSION: "",
  OTEL_EXPORTER_OTLP_METRICS_COMPRESSION: "",
  OTEL_EXPORTER_OTLP_LOGS_COMPRESSION: "",
  OTEL_EXPORTER_OTLP_CLIENT_KEY: "",
  OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY: "",
  OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY: "",
  OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY: "",
  OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE: "",
  OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE: "",
  OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE: "",
  OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE: "",
  OTEL_EXPORTER_OTLP_PROTOCOL: "http/protobuf",
  OTEL_EXPORTER_OTLP_TRACES_PROTOCOL: "http/protobuf",
  OTEL_EXPORTER_OTLP_METRICS_PROTOCOL: "http/protobuf",
  OTEL_EXPORTER_OTLP_LOGS_PROTOCOL: "http/protobuf",
  OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE: "cumulative",
  OTEL_SEMCONV_STABILITY_OPT_IN: []
};
function Nh(t, e, r) {
  if (typeof r[t] < "u") {
    var n = String(r[t]);
    e[t] = n.toLowerCase() === "true";
  }
}
function Ch(t, e, r, n, i) {
  if (n === void 0 && (n = -1 / 0), i === void 0 && (i = 1 / 0), typeof r[t] < "u") {
    var o = Number(r[t]);
    isNaN(o) || (o < n ? e[t] = n : o > i ? e[t] = i : e[t] = o);
  }
}
function xh(t, e, r, n) {
  n === void 0 && (n = Eh);
  var i = r[t];
  typeof i == "string" && (e[t] = i.split(n).map(function(o) {
    return o.trim();
  }));
}
var Ph = {
  ALL: I.ALL,
  VERBOSE: I.VERBOSE,
  DEBUG: I.DEBUG,
  INFO: I.INFO,
  WARN: I.WARN,
  ERROR: I.ERROR,
  NONE: I.NONE
};
function Ih(t, e, r) {
  var n = r[t];
  if (typeof n == "string") {
    var i = Ph[n.toUpperCase()];
    i != null && (e[t] = i);
  }
}
function Mh(t) {
  var e = {};
  for (var r in js) {
    var n = r;
    switch (n) {
      case "OTEL_LOG_LEVEL":
        Ih(n, e, t);
        break;
      default:
        if (bh(n))
          Nh(n, e, t);
        else if (Sh(n))
          Ch(n, e, t);
        else if (Ah(n))
          xh(n, e, t);
        else {
          var i = t[n];
          typeof i < "u" && i !== null && (e[n] = String(i));
        }
    }
  }
  return e;
}
var kh = typeof globalThis == "object" ? globalThis : typeof self == "object" ? self : typeof window == "object" ? window : typeof global == "object" ? global : {};
function Dh() {
  var t = Mh(kh);
  return Object.assign({}, js, t);
}
var pi = performance, Uh = 9, jh = 6, Bh = Math.pow(10, jh), Ro = Math.pow(10, Uh);
function No(t) {
  var e = t / 1e3, r = Math.trunc(e), n = Math.round(t % 1e3 * Bh);
  return [r, n];
}
function $h() {
  var t = pi.timeOrigin;
  if (typeof t != "number") {
    var e = pi;
    t = e.timing && e.timing.fetchStart;
  }
  return t;
}
function Fh(t) {
  var e = No($h()), r = No(pi.now());
  return Vh(e, r);
}
function Vh(t, e) {
  var r = [t[0] + e[0], t[1] + e[1]];
  return r[1] >= Ro && (r[1] -= Ro, r[0] += 1), r;
}
var Y;
(function(t) {
  t[t.SUCCESS = 0] = "SUCCESS", t[t.FAILED = 1] = "FAILED";
})(Y || (Y = {}));
var Gh = function(t) {
  var e = typeof Symbol == "function" && Symbol.iterator, r = e && t[e], n = 0;
  if (r) return r.call(t);
  if (t && typeof t.length == "number") return {
    next: function() {
      return t && n >= t.length && (t = void 0), { value: t && t[n++], done: !t };
    }
  };
  throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.");
}, Hh = (
  /** @class */
  function() {
    function t(e) {
      e === void 0 && (e = {});
      var r;
      this._propagators = (r = e.propagators) !== null && r !== void 0 ? r : [], this._fields = Array.from(new Set(this._propagators.map(function(n) {
        return typeof n.fields == "function" ? n.fields() : [];
      }).reduce(function(n, i) {
        return n.concat(i);
      }, [])));
    }
    return t.prototype.inject = function(e, r, n) {
      var i, o;
      try {
        for (var a = Gh(this._propagators), u = a.next(); !u.done; u = a.next()) {
          var c = u.value;
          try {
            c.inject(e, r, n);
          } catch (s) {
            T.warn("Failed to inject with " + c.constructor.name + ". Err: " + s.message);
          }
        }
      } catch (s) {
        i = { error: s };
      } finally {
        try {
          u && !u.done && (o = a.return) && o.call(a);
        } finally {
          if (i) throw i.error;
        }
      }
    }, t.prototype.extract = function(e, r, n) {
      return this._propagators.reduce(function(i, o) {
        try {
          return o.extract(i, r, n);
        } catch (a) {
          T.warn("Failed to extract with " + o.constructor.name + ". Err: " + a.message);
        }
        return i;
      }, e);
    }, t.prototype.fields = function() {
      return this._fields.slice();
    }, t;
  }()
), fi = "[_0-9a-z-*/]", zh = "[a-z]" + fi + "{0,255}", Xh = "[a-z0-9]" + fi + "{0,240}@[a-z]" + fi + "{0,13}", qh = new RegExp("^(?:" + zh + "|" + Xh + ")$"), Kh = /^[ -~]{0,255}[!-~]$/, Wh = /,|=/;
function Yh(t) {
  return qh.test(t);
}
function Jh(t) {
  return Kh.test(t) && !Wh.test(t);
}
var Co = 32, Qh = 512, xo = ",", Po = "=", Zh = (
  /** @class */
  function() {
    function t(e) {
      this._internalState = /* @__PURE__ */ new Map(), e && this._parse(e);
    }
    return t.prototype.set = function(e, r) {
      var n = this._clone();
      return n._internalState.has(e) && n._internalState.delete(e), n._internalState.set(e, r), n;
    }, t.prototype.unset = function(e) {
      var r = this._clone();
      return r._internalState.delete(e), r;
    }, t.prototype.get = function(e) {
      return this._internalState.get(e);
    }, t.prototype.serialize = function() {
      var e = this;
      return this._keys().reduce(function(r, n) {
        return r.push(n + Po + e.get(n)), r;
      }, []).join(xo);
    }, t.prototype._parse = function(e) {
      e.length > Qh || (this._internalState = e.split(xo).reverse().reduce(function(r, n) {
        var i = n.trim(), o = i.indexOf(Po);
        if (o !== -1) {
          var a = i.slice(0, o), u = i.slice(o + 1, n.length);
          Yh(a) && Jh(u) && r.set(a, u);
        }
        return r;
      }, /* @__PURE__ */ new Map()), this._internalState.size > Co && (this._internalState = new Map(Array.from(this._internalState.entries()).reverse().slice(0, Co))));
    }, t.prototype._keys = function() {
      return Array.from(this._internalState.keys()).reverse();
    }, t.prototype._clone = function() {
      var e = new t();
      return e._internalState = new Map(this._internalState), e;
    }, t;
  }()
), gn = "traceparent", En = "tracestate", td = "00", ed = "(?!ff)[\\da-f]{2}", rd = "(?![0]{32})[\\da-f]{32}", nd = "(?![0]{16})[\\da-f]{16}", id = "[\\da-f]{2}", od = new RegExp("^\\s?(" + ed + ")-(" + rd + ")-(" + nd + ")-(" + id + ")(-.*)?\\s?$");
function ad(t) {
  var e = od.exec(t);
  return !e || e[1] === "00" && e[5] ? null : {
    traceId: e[2],
    spanId: e[3],
    traceFlags: parseInt(e[4], 16)
  };
}
var sd = (
  /** @class */
  function() {
    function t() {
    }
    return t.prototype.inject = function(e, r, n) {
      var i = x.getSpanContext(e);
      if (!(!i || Us(e) || !ze(i))) {
        var o = td + "-" + i.traceId + "-" + i.spanId + "-0" + Number(i.traceFlags || ht.NONE).toString(16);
        n.set(r, gn, o), i.traceState && n.set(r, En, i.traceState.serialize());
      }
    }, t.prototype.extract = function(e, r, n) {
      var i = n.get(r, gn);
      if (!i)
        return e;
      var o = Array.isArray(i) ? i[0] : i;
      if (typeof o != "string")
        return e;
      var a = ad(o);
      if (!a)
        return e;
      a.isRemote = !0;
      var u = n.get(r, En);
      if (u) {
        var c = Array.isArray(u) ? u.join(",") : u;
        a.traceState = new Zh(typeof c == "string" ? c : void 0);
      }
      return x.setSpanContext(e, a);
    }, t.prototype.fields = function() {
      return [gn, En];
    }, t;
  }()
), ud = "[object Object]", cd = "[object Null]", ld = "[object Undefined]", pd = Function.prototype, Bs = pd.toString, fd = Bs.call(Object), hd = dd(Object.getPrototypeOf, Object), $s = Object.prototype, Fs = $s.hasOwnProperty, Mt = Symbol ? Symbol.toStringTag : void 0, Vs = $s.toString;
function dd(t, e) {
  return function(r) {
    return t(e(r));
  };
}
function Io(t) {
  if (!vd(t) || md(t) !== ud)
    return !1;
  var e = hd(t);
  if (e === null)
    return !0;
  var r = Fs.call(e, "constructor") && e.constructor;
  return typeof r == "function" && r instanceof r && Bs.call(r) === fd;
}
function vd(t) {
  return t != null && typeof t == "object";
}
function md(t) {
  return t == null ? t === void 0 ? ld : cd : Mt && Mt in Object(t) ? yd(t) : _d(t);
}
function yd(t) {
  var e = Fs.call(t, Mt), r = t[Mt], n = !1;
  try {
    t[Mt] = void 0, n = !0;
  } catch {
  }
  var i = Vs.call(t);
  return n && (e ? t[Mt] = r : delete t[Mt]), i;
}
function _d(t) {
  return Vs.call(t);
}
var gd = 20;
function Ed() {
  for (var t = [], e = 0; e < arguments.length; e++)
    t[e] = arguments[e];
  for (var r = t.shift(), n = /* @__PURE__ */ new WeakMap(); t.length > 0; )
    r = Gs(r, t.shift(), 0, n);
  return r;
}
function Tn(t) {
  return Rr(t) ? t.slice() : t;
}
function Gs(t, e, r, n) {
  r === void 0 && (r = 0);
  var i;
  if (!(r > gd)) {
    if (r++, dr(t) || dr(e) || Hs(e))
      i = Tn(e);
    else if (Rr(t)) {
      if (i = t.slice(), Rr(e))
        for (var o = 0, a = e.length; o < a; o++)
          i.push(Tn(e[o]));
      else if (_e(e))
        for (var u = Object.keys(e), o = 0, a = u.length; o < a; o++) {
          var c = u[o];
          i[c] = Tn(e[c]);
        }
    } else if (_e(t))
      if (_e(e)) {
        if (!Td(t, e))
          return e;
        i = Object.assign({}, t);
        for (var u = Object.keys(e), o = 0, a = u.length; o < a; o++) {
          var c = u[o], s = e[c];
          if (dr(s))
            typeof s > "u" ? delete i[c] : i[c] = s;
          else {
            var l = i[c], p = s;
            if (Mo(t, c, n) || Mo(e, c, n))
              delete i[c];
            else {
              if (_e(l) && _e(p)) {
                var f = n.get(l) || [], m = n.get(p) || [];
                f.push({ obj: t, key: c }), m.push({ obj: e, key: c }), n.set(l, f), n.set(p, m);
              }
              i[c] = Gs(i[c], s, r, n);
            }
          }
        }
      } else
        i = e;
    return i;
  }
}
function Mo(t, e, r) {
  for (var n = r.get(t[e]) || [], i = 0, o = n.length; i < o; i++) {
    var a = n[i];
    if (a.key === e && a.obj === t)
      return !0;
  }
  return !1;
}
function Rr(t) {
  return Array.isArray(t);
}
function Hs(t) {
  return typeof t == "function";
}
function _e(t) {
  return !dr(t) && !Rr(t) && !Hs(t) && typeof t == "object";
}
function dr(t) {
  return typeof t == "string" || typeof t == "number" || typeof t == "boolean" || typeof t > "u" || t instanceof Date || t instanceof RegExp || t === null;
}
function Td(t, e) {
  return !(!Io(t) || !Io(e));
}
var zs = (
  /** @class */
  function() {
    function t() {
    }
    return t.prototype.emit = function(e) {
    }, t;
  }()
), bd = new zs(), Od = (
  /** @class */
  function() {
    function t() {
    }
    return t.prototype.getLogger = function(e, r, n) {
      return new zs();
    }, t;
  }()
), Xs = new Od(), Sd = (
  /** @class */
  function() {
    function t(e, r, n, i) {
      this._provider = e, this.name = r, this.version = n, this.options = i;
    }
    return t.prototype.emit = function(e) {
      this._getLogger().emit(e);
    }, t.prototype._getLogger = function() {
      if (this._delegate)
        return this._delegate;
      var e = this._provider.getDelegateLogger(this.name, this.version, this.options);
      return e ? (this._delegate = e, this._delegate) : bd;
    }, t;
  }()
), ko = (
  /** @class */
  function() {
    function t() {
    }
    return t.prototype.getLogger = function(e, r, n) {
      var i;
      return (i = this.getDelegateLogger(e, r, n)) !== null && i !== void 0 ? i : new Sd(this, e, r, n);
    }, t.prototype.getDelegate = function() {
      var e;
      return (e = this._delegate) !== null && e !== void 0 ? e : Xs;
    }, t.prototype.setDelegate = function(e) {
      this._delegate = e;
    }, t.prototype.getDelegateLogger = function(e, r, n) {
      var i;
      return (i = this._delegate) === null || i === void 0 ? void 0 : i.getLogger(e, r, n);
    }, t;
  }()
), wd = typeof globalThis == "object" ? globalThis : typeof self == "object" ? self : typeof window == "object" ? window : typeof global == "object" ? global : {}, Qe = Symbol.for("io.opentelemetry.js.api.logs"), ge = wd;
function Ad(t, e, r) {
  return function(n) {
    return n === t ? e : r;
  };
}
var Do = 1, Ld = (
  /** @class */
  function() {
    function t() {
      this._proxyLoggerProvider = new ko();
    }
    return t.getInstance = function() {
      return this._instance || (this._instance = new t()), this._instance;
    }, t.prototype.setGlobalLoggerProvider = function(e) {
      return ge[Qe] ? this.getLoggerProvider() : (ge[Qe] = Ad(Do, e, Xs), this._proxyLoggerProvider.setDelegate(e), e);
    }, t.prototype.getLoggerProvider = function() {
      var e, r;
      return (r = (e = ge[Qe]) === null || e === void 0 ? void 0 : e.call(ge, Do)) !== null && r !== void 0 ? r : this._proxyLoggerProvider;
    }, t.prototype.getLogger = function(e, r, n) {
      return this.getLoggerProvider().getLogger(e, r, n);
    }, t.prototype.disable = function() {
      delete ge[Qe], this._proxyLoggerProvider = new ko();
    }, t;
  }()
), Xe = Ld.getInstance();
function Rd(t, e, r, n) {
  for (var i = 0, o = t.length; i < o; i++) {
    var a = t[i];
    e && a.setTracerProvider(e), r && a.setMeterProvider(r), n && a.setLoggerProvider && a.setLoggerProvider(n), a.getConfig().enabled || a.enable();
  }
}
function Nd(t) {
  t.forEach(function(e) {
    return e.disable();
  });
}
function Cd(t) {
  var e, r, n = t.tracerProvider || x.getTracerProvider(), i = t.meterProvider || he.getMeterProvider(), o = t.loggerProvider || Xe.getLoggerProvider(), a = (r = (e = t.instrumentations) === null || e === void 0 ? void 0 : e.flat()) !== null && r !== void 0 ? r : [];
  return Rd(a, n, i, o), function() {
    Nd(a);
  };
}
function hi(t) {
  return typeof t == "function";
}
var Q = console.error.bind(console);
function Ee(t, e, r) {
  var n = !!t[e] && t.propertyIsEnumerable(e);
  Object.defineProperty(t, e, {
    configurable: !0,
    enumerable: n,
    writable: !0,
    value: r
  });
}
function qe(t) {
  t && t.logger && (hi(t.logger) ? Q = t.logger : Q("new logger isn't a function, not replacing"));
}
function qs(t, e, r) {
  if (!t || !t[e]) {
    Q("no original function " + e + " to wrap");
    return;
  }
  if (!r) {
    Q("no wrapper function"), Q(new Error().stack);
    return;
  }
  if (!hi(t[e]) || !hi(r)) {
    Q("original object and wrapper must be functions");
    return;
  }
  var n = t[e], i = r(n, e);
  return Ee(i, "__original", n), Ee(i, "__unwrap", function() {
    t[e] === i && Ee(t, e, n);
  }), Ee(i, "__wrapped", !0), Ee(t, e, i), i;
}
function xd(t, e, r) {
  if (t)
    Array.isArray(t) || (t = [t]);
  else {
    Q("must provide one or more modules to patch"), Q(new Error().stack);
    return;
  }
  if (!(e && Array.isArray(e))) {
    Q("must provide one or more functions to wrap on modules");
    return;
  }
  t.forEach(function(n) {
    e.forEach(function(i) {
      qs(n, i, r);
    });
  });
}
function Ks(t, e) {
  if (!t || !t[e]) {
    Q("no function to unwrap."), Q(new Error().stack);
    return;
  }
  if (!t[e].__unwrap)
    Q("no original to unwrap to -- has " + e + " already been unwrapped?");
  else
    return t[e].__unwrap();
}
function Pd(t, e) {
  if (t)
    Array.isArray(t) || (t = [t]);
  else {
    Q("must provide one or more modules to patch"), Q(new Error().stack);
    return;
  }
  if (!(e && Array.isArray(e))) {
    Q("must provide one or more functions to unwrap on modules");
    return;
  }
  t.forEach(function(r) {
    e.forEach(function(n) {
      Ks(r, n);
    });
  });
}
qe.wrap = qs;
qe.massWrap = xd;
qe.unwrap = Ks;
qe.massUnwrap = Pd;
var q = qe, di = function() {
  return di = Object.assign || function(t) {
    for (var e, r = 1, n = arguments.length; r < n; r++) {
      e = arguments[r];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, di.apply(this, arguments);
}, Id = (
  /** @class */
  function() {
    function t(e, r, n) {
      this.instrumentationName = e, this.instrumentationVersion = r, this._config = {}, this._wrap = q.wrap, this._unwrap = q.unwrap, this._massWrap = q.massWrap, this._massUnwrap = q.massUnwrap, this.setConfig(n), this._diag = T.createComponentLogger({
        namespace: e
      }), this._tracer = x.getTracer(e, r), this._meter = he.getMeter(e, r), this._logger = Xe.getLogger(e, r), this._updateMetricInstruments();
    }
    return Object.defineProperty(t.prototype, "meter", {
      /* Returns meter */
      get: function() {
        return this._meter;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.setMeterProvider = function(e) {
      this._meter = e.getMeter(this.instrumentationName, this.instrumentationVersion), this._updateMetricInstruments();
    }, Object.defineProperty(t.prototype, "logger", {
      /* Returns logger */
      get: function() {
        return this._logger;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.setLoggerProvider = function(e) {
      this._logger = e.getLogger(this.instrumentationName, this.instrumentationVersion);
    }, t.prototype.getModuleDefinitions = function() {
      var e, r = (e = this.init()) !== null && e !== void 0 ? e : [];
      return Array.isArray(r) ? r : [r];
    }, t.prototype._updateMetricInstruments = function() {
    }, t.prototype.getConfig = function() {
      return this._config;
    }, t.prototype.setConfig = function(e) {
      this._config = di({ enabled: !0 }, e);
    }, t.prototype.setTracerProvider = function(e) {
      this._tracer = e.getTracer(this.instrumentationName, this.instrumentationVersion);
    }, Object.defineProperty(t.prototype, "tracer", {
      /* Returns tracer */
      get: function() {
        return this._tracer;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype._runSpanCustomizationHook = function(e, r, n, i) {
      if (e)
        try {
          e(n, i);
        } catch (o) {
          this._diag.error("Error running span customization hook due to exception in handler", { triggerName: r }, o);
        }
    }, t;
  }()
), Md = /* @__PURE__ */ function() {
  var t = function(e, r) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (n[o] = i[o]);
    }, t(e, r);
  };
  return function(e, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    t(e, r);
    function n() {
      this.constructor = e;
    }
    e.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}(), kd = (
  /** @class */
  function(t) {
    Md(e, t);
    function e(r, n, i) {
      var o = t.call(this, r, n, i) || this;
      return o._config.enabled && o.enable(), o;
    }
    return e;
  }(Id)
);
function K(t) {
  return typeof t == "function" && typeof t.__original == "function" && typeof t.__unwrap == "function" && t.__wrapped === !0;
}
var Nr = performance, Dd = "traceparent", Ws = He("OpenTelemetry SDK Context Key SUPPRESS_TRACING");
function Ud(t) {
  return t.setValue(Ws, !0);
}
function Yi(t) {
  return t.getValue(Ws) === !0;
}
var jd = "=", vi = ";", mi = ",", bn = "baggage", Bd = 180, $d = 4096, Fd = 8192, Vd = function(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = n.next()).done; ) o.push(i.value);
  } catch (u) {
    a = { error: u };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
};
function Gd(t) {
  return t.reduce(function(e, r) {
    var n = "" + e + (e !== "" ? mi : "") + r;
    return n.length > Fd ? e : n;
  }, "");
}
function Hd(t) {
  return t.getAllEntries().map(function(e) {
    var r = Vd(e, 2), n = r[0], i = r[1], o = encodeURIComponent(n) + "=" + encodeURIComponent(i.value);
    return i.metadata !== void 0 && (o += vi + i.metadata.toString()), o;
  });
}
function zd(t) {
  var e = t.split(vi);
  if (!(e.length <= 0)) {
    var r = e.shift();
    if (r) {
      var n = r.indexOf(jd);
      if (!(n <= 0)) {
        var i = decodeURIComponent(r.substring(0, n).trim()), o = decodeURIComponent(r.substring(n + 1).trim()), a;
        return e.length > 0 && (a = Rs(e.join(vi))), { key: i, value: o, metadata: a };
      }
    }
  }
}
var Xd = (
  /** @class */
  function() {
    function t() {
    }
    return t.prototype.inject = function(e, r, n) {
      var i = J.getBaggage(e);
      if (!(!i || Yi(e))) {
        var o = Hd(i).filter(function(u) {
          return u.length <= $d;
        }).slice(0, Bd), a = Gd(o);
        a.length > 0 && n.set(r, bn, a);
      }
    }, t.prototype.extract = function(e, r, n) {
      var i = n.get(r, bn), o = Array.isArray(i) ? i.join(mi) : i;
      if (!o)
        return e;
      var a = {};
      if (o.length === 0)
        return e;
      var u = o.split(mi);
      return u.forEach(function(c) {
        var s = zd(c);
        if (s) {
          var l = { value: s.value };
          s.metadata && (l.metadata = s.metadata), a[s.key] = l;
        }
      }), Object.entries(a).length === 0 ? e : J.setBaggage(e, J.createBaggage(a));
    }, t.prototype.fields = function() {
      return [bn];
    }, t;
  }()
), Ys = function(t) {
  var e = typeof Symbol == "function" && Symbol.iterator, r = e && t[e], n = 0;
  if (r) return r.call(t);
  if (t && typeof t.length == "number") return {
    next: function() {
      return t && n >= t.length && (t = void 0), { value: t && t[n++], done: !t };
    }
  };
  throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.");
}, qd = function(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = n.next()).done; ) o.push(i.value);
  } catch (u) {
    a = { error: u };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
};
function vr(t) {
  var e, r, n = {};
  if (typeof t != "object" || t == null)
    return n;
  try {
    for (var i = Ys(Object.entries(t)), o = i.next(); !o.done; o = i.next()) {
      var a = qd(o.value, 2), u = a[0], c = a[1];
      if (!Kd(u)) {
        T.warn("Invalid attribute key: " + u);
        continue;
      }
      if (!Js(c)) {
        T.warn("Invalid attribute value set for key: " + u);
        continue;
      }
      Array.isArray(c) ? n[u] = c.slice() : n[u] = c;
    }
  } catch (s) {
    e = { error: s };
  } finally {
    try {
      o && !o.done && (r = i.return) && r.call(i);
    } finally {
      if (e) throw e.error;
    }
  }
  return n;
}
function Kd(t) {
  return typeof t == "string" && t.length > 0;
}
function Js(t) {
  return t == null ? !0 : Array.isArray(t) ? Wd(t) : Qs(t);
}
function Wd(t) {
  var e, r, n;
  try {
    for (var i = Ys(t), o = i.next(); !o.done; o = i.next()) {
      var a = o.value;
      if (a != null) {
        if (!n) {
          if (Qs(a)) {
            n = typeof a;
            continue;
          }
          return !1;
        }
        if (typeof a !== n)
          return !1;
      }
    }
  } catch (u) {
    e = { error: u };
  } finally {
    try {
      o && !o.done && (r = i.return) && r.call(i);
    } finally {
      if (e) throw e.error;
    }
  }
  return !0;
}
function Qs(t) {
  switch (typeof t) {
    case "number":
    case "boolean":
    case "string":
      return !0;
  }
  return !1;
}
function Yd() {
  return function(t) {
    T.error(Jd(t));
  };
}
function Jd(t) {
  return typeof t == "string" ? t : JSON.stringify(Qd(t));
}
function Qd(t) {
  for (var e = {}, r = t; r !== null; )
    Object.getOwnPropertyNames(r).forEach(function(n) {
      if (!e[n]) {
        var i = r[n];
        i && (e[n] = String(i));
      }
    }), r = Object.getPrototypeOf(r);
  return e;
}
var Zd = Yd();
function ue(t) {
  try {
    Zd(t);
  } catch {
  }
}
var ct;
(function(t) {
  t.AlwaysOff = "always_off", t.AlwaysOn = "always_on", t.ParentBasedAlwaysOff = "parentbased_always_off", t.ParentBasedAlwaysOn = "parentbased_always_on", t.ParentBasedTraceIdRatio = "parentbased_traceidratio", t.TraceIdRatio = "traceidratio";
})(ct || (ct = {}));
var tv = ",", ev = ["OTEL_SDK_DISABLED"];
function rv(t) {
  return ev.indexOf(t) > -1;
}
var nv = [
  "OTEL_BSP_EXPORT_TIMEOUT",
  "OTEL_BSP_MAX_EXPORT_BATCH_SIZE",
  "OTEL_BSP_MAX_QUEUE_SIZE",
  "OTEL_BSP_SCHEDULE_DELAY",
  "OTEL_BLRP_EXPORT_TIMEOUT",
  "OTEL_BLRP_MAX_EXPORT_BATCH_SIZE",
  "OTEL_BLRP_MAX_QUEUE_SIZE",
  "OTEL_BLRP_SCHEDULE_DELAY",
  "OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT",
  "OTEL_ATTRIBUTE_COUNT_LIMIT",
  "OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT",
  "OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT",
  "OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT",
  "OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT",
  "OTEL_SPAN_EVENT_COUNT_LIMIT",
  "OTEL_SPAN_LINK_COUNT_LIMIT",
  "OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT",
  "OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT",
  "OTEL_EXPORTER_OTLP_TIMEOUT",
  "OTEL_EXPORTER_OTLP_TRACES_TIMEOUT",
  "OTEL_EXPORTER_OTLP_METRICS_TIMEOUT",
  "OTEL_EXPORTER_OTLP_LOGS_TIMEOUT",
  "OTEL_EXPORTER_JAEGER_AGENT_PORT"
];
function iv(t) {
  return nv.indexOf(t) > -1;
}
var ov = [
  "OTEL_NO_PATCH_MODULES",
  "OTEL_PROPAGATORS",
  "OTEL_SEMCONV_STABILITY_OPT_IN"
];
function av(t) {
  return ov.indexOf(t) > -1;
}
var mr = 1 / 0, yr = 128, sv = 128, uv = 128, Zs = {
  OTEL_SDK_DISABLED: !1,
  CONTAINER_NAME: "",
  ECS_CONTAINER_METADATA_URI_V4: "",
  ECS_CONTAINER_METADATA_URI: "",
  HOSTNAME: "",
  KUBERNETES_SERVICE_HOST: "",
  NAMESPACE: "",
  OTEL_BSP_EXPORT_TIMEOUT: 3e4,
  OTEL_BSP_MAX_EXPORT_BATCH_SIZE: 512,
  OTEL_BSP_MAX_QUEUE_SIZE: 2048,
  OTEL_BSP_SCHEDULE_DELAY: 5e3,
  OTEL_BLRP_EXPORT_TIMEOUT: 3e4,
  OTEL_BLRP_MAX_EXPORT_BATCH_SIZE: 512,
  OTEL_BLRP_MAX_QUEUE_SIZE: 2048,
  OTEL_BLRP_SCHEDULE_DELAY: 5e3,
  OTEL_EXPORTER_JAEGER_AGENT_HOST: "",
  OTEL_EXPORTER_JAEGER_AGENT_PORT: 6832,
  OTEL_EXPORTER_JAEGER_ENDPOINT: "",
  OTEL_EXPORTER_JAEGER_PASSWORD: "",
  OTEL_EXPORTER_JAEGER_USER: "",
  OTEL_EXPORTER_OTLP_ENDPOINT: "",
  OTEL_EXPORTER_OTLP_TRACES_ENDPOINT: "",
  OTEL_EXPORTER_OTLP_METRICS_ENDPOINT: "",
  OTEL_EXPORTER_OTLP_LOGS_ENDPOINT: "",
  OTEL_EXPORTER_OTLP_HEADERS: "",
  OTEL_EXPORTER_OTLP_TRACES_HEADERS: "",
  OTEL_EXPORTER_OTLP_METRICS_HEADERS: "",
  OTEL_EXPORTER_OTLP_LOGS_HEADERS: "",
  OTEL_EXPORTER_OTLP_TIMEOUT: 1e4,
  OTEL_EXPORTER_OTLP_TRACES_TIMEOUT: 1e4,
  OTEL_EXPORTER_OTLP_METRICS_TIMEOUT: 1e4,
  OTEL_EXPORTER_OTLP_LOGS_TIMEOUT: 1e4,
  OTEL_EXPORTER_ZIPKIN_ENDPOINT: "http://localhost:9411/api/v2/spans",
  OTEL_LOG_LEVEL: I.INFO,
  OTEL_NO_PATCH_MODULES: [],
  OTEL_PROPAGATORS: ["tracecontext", "baggage"],
  OTEL_RESOURCE_ATTRIBUTES: "",
  OTEL_SERVICE_NAME: "",
  OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT: mr,
  OTEL_ATTRIBUTE_COUNT_LIMIT: yr,
  OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT: mr,
  OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT: yr,
  OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT: mr,
  OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT: yr,
  OTEL_SPAN_EVENT_COUNT_LIMIT: 128,
  OTEL_SPAN_LINK_COUNT_LIMIT: 128,
  OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT: sv,
  OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT: uv,
  OTEL_TRACES_EXPORTER: "",
  OTEL_TRACES_SAMPLER: ct.ParentBasedAlwaysOn,
  OTEL_TRACES_SAMPLER_ARG: "",
  OTEL_LOGS_EXPORTER: "",
  OTEL_EXPORTER_OTLP_INSECURE: "",
  OTEL_EXPORTER_OTLP_TRACES_INSECURE: "",
  OTEL_EXPORTER_OTLP_METRICS_INSECURE: "",
  OTEL_EXPORTER_OTLP_LOGS_INSECURE: "",
  OTEL_EXPORTER_OTLP_CERTIFICATE: "",
  OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE: "",
  OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE: "",
  OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE: "",
  OTEL_EXPORTER_OTLP_COMPRESSION: "",
  OTEL_EXPORTER_OTLP_TRACES_COMPRESSION: "",
  OTEL_EXPORTER_OTLP_METRICS_COMPRESSION: "",
  OTEL_EXPORTER_OTLP_LOGS_COMPRESSION: "",
  OTEL_EXPORTER_OTLP_CLIENT_KEY: "",
  OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY: "",
  OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY: "",
  OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY: "",
  OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE: "",
  OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE: "",
  OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE: "",
  OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE: "",
  OTEL_EXPORTER_OTLP_PROTOCOL: "http/protobuf",
  OTEL_EXPORTER_OTLP_TRACES_PROTOCOL: "http/protobuf",
  OTEL_EXPORTER_OTLP_METRICS_PROTOCOL: "http/protobuf",
  OTEL_EXPORTER_OTLP_LOGS_PROTOCOL: "http/protobuf",
  OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE: "cumulative",
  OTEL_SEMCONV_STABILITY_OPT_IN: []
};
function cv(t, e, r) {
  if (typeof r[t] < "u") {
    var n = String(r[t]);
    e[t] = n.toLowerCase() === "true";
  }
}
function lv(t, e, r, n, i) {
  if (n === void 0 && (n = -1 / 0), i === void 0 && (i = 1 / 0), typeof r[t] < "u") {
    var o = Number(r[t]);
    isNaN(o) || (o < n ? e[t] = n : o > i ? e[t] = i : e[t] = o);
  }
}
function pv(t, e, r, n) {
  n === void 0 && (n = tv);
  var i = r[t];
  typeof i == "string" && (e[t] = i.split(n).map(function(o) {
    return o.trim();
  }));
}
var fv = {
  ALL: I.ALL,
  VERBOSE: I.VERBOSE,
  DEBUG: I.DEBUG,
  INFO: I.INFO,
  WARN: I.WARN,
  ERROR: I.ERROR,
  NONE: I.NONE
};
function hv(t, e, r) {
  var n = r[t];
  if (typeof n == "string") {
    var i = fv[n.toUpperCase()];
    i != null && (e[t] = i);
  }
}
function tu(t) {
  var e = {};
  for (var r in Zs) {
    var n = r;
    switch (n) {
      case "OTEL_LOG_LEVEL":
        hv(n, e, t);
        break;
      default:
        if (rv(n))
          cv(n, e, t);
        else if (iv(n))
          lv(n, e, t);
        else if (av(n))
          pv(n, e, t);
        else {
          var i = t[n];
          typeof i < "u" && i !== null && (e[n] = String(i));
        }
    }
  }
  return e;
}
var eu = typeof globalThis == "object" ? globalThis : typeof self == "object" ? self : typeof window == "object" ? window : typeof global == "object" ? global : {};
function Ue() {
  var t = tu(eu);
  return Object.assign({}, Zs, t);
}
function dv() {
  return tu(eu);
}
var oe = performance, vv = "exception.type", mv = "exception.message", yv = "exception.stacktrace", _v = "http.response_content_length", gv = "http.response_content_length_uncompressed", On = vv, Sn = mv, Ev = yv, Tv = _v, bv = gv, Ov = 9, Sv = 6, wv = Math.pow(10, Sv), Cr = Math.pow(10, Ov);
function wt(t) {
  var e = t / 1e3, r = Math.trunc(e), n = Math.round(t % 1e3 * wv);
  return [r, n];
}
function Ji() {
  var t = oe.timeOrigin;
  if (typeof t != "number") {
    var e = oe;
    t = e.timing && e.timing.fetchStart;
  }
  return t;
}
function ru(t) {
  var e = wt(Ji()), r = wt(typeof t == "number" ? t : oe.now());
  return nu(e, r);
}
function Re(t) {
  if (Qi(t))
    return t;
  if (typeof t == "number")
    return t < Ji() ? ru(t) : wt(t);
  if (t instanceof Date)
    return wt(t.getTime());
  throw TypeError("Invalid input type");
}
function Av(t, e) {
  var r = e[0] - t[0], n = e[1] - t[1];
  return n < 0 && (r -= 1, n += Cr), [r, n];
}
function At(t) {
  return t[0] * Cr + t[1];
}
function Qi(t) {
  return Array.isArray(t) && t.length === 2 && typeof t[0] == "number" && typeof t[1] == "number";
}
function Uo(t) {
  return Qi(t) || typeof t == "number" || t instanceof Date;
}
function nu(t, e) {
  var r = [t[0] + e[0], t[1] + e[1]];
  return r[1] >= Cr && (r[1] -= Cr, r[0] += 1), r;
}
var yi;
(function(t) {
  t[t.SUCCESS = 0] = "SUCCESS", t[t.FAILED = 1] = "FAILED";
})(yi || (yi = {}));
var Lv = function(t) {
  var e = typeof Symbol == "function" && Symbol.iterator, r = e && t[e], n = 0;
  if (r) return r.call(t);
  if (t && typeof t.length == "number") return {
    next: function() {
      return t && n >= t.length && (t = void 0), { value: t && t[n++], done: !t };
    }
  };
  throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.");
}, Rv = (
  /** @class */
  function() {
    function t(e) {
      e === void 0 && (e = {});
      var r;
      this._propagators = (r = e.propagators) !== null && r !== void 0 ? r : [], this._fields = Array.from(new Set(this._propagators.map(function(n) {
        return typeof n.fields == "function" ? n.fields() : [];
      }).reduce(function(n, i) {
        return n.concat(i);
      }, [])));
    }
    return t.prototype.inject = function(e, r, n) {
      var i, o;
      try {
        for (var a = Lv(this._propagators), u = a.next(); !u.done; u = a.next()) {
          var c = u.value;
          try {
            c.inject(e, r, n);
          } catch (s) {
            T.warn("Failed to inject with " + c.constructor.name + ". Err: " + s.message);
          }
        }
      } catch (s) {
        i = { error: s };
      } finally {
        try {
          u && !u.done && (o = a.return) && o.call(a);
        } finally {
          if (i) throw i.error;
        }
      }
    }, t.prototype.extract = function(e, r, n) {
      return this._propagators.reduce(function(i, o) {
        try {
          return o.extract(i, r, n);
        } catch (a) {
          T.warn("Failed to extract with " + o.constructor.name + ". Err: " + a.message);
        }
        return i;
      }, e);
    }, t.prototype.fields = function() {
      return this._fields.slice();
    }, t;
  }()
), _i = "[_0-9a-z-*/]", Nv = "[a-z]" + _i + "{0,255}", Cv = "[a-z0-9]" + _i + "{0,240}@[a-z]" + _i + "{0,13}", xv = new RegExp("^(?:" + Nv + "|" + Cv + ")$"), Pv = /^[ -~]{0,255}[!-~]$/, Iv = /,|=/;
function Mv(t) {
  return xv.test(t);
}
function kv(t) {
  return Pv.test(t) && !Iv.test(t);
}
var jo = 32, Dv = 512, Bo = ",", $o = "=", Uv = (
  /** @class */
  function() {
    function t(e) {
      this._internalState = /* @__PURE__ */ new Map(), e && this._parse(e);
    }
    return t.prototype.set = function(e, r) {
      var n = this._clone();
      return n._internalState.has(e) && n._internalState.delete(e), n._internalState.set(e, r), n;
    }, t.prototype.unset = function(e) {
      var r = this._clone();
      return r._internalState.delete(e), r;
    }, t.prototype.get = function(e) {
      return this._internalState.get(e);
    }, t.prototype.serialize = function() {
      var e = this;
      return this._keys().reduce(function(r, n) {
        return r.push(n + $o + e.get(n)), r;
      }, []).join(Bo);
    }, t.prototype._parse = function(e) {
      e.length > Dv || (this._internalState = e.split(Bo).reverse().reduce(function(r, n) {
        var i = n.trim(), o = i.indexOf($o);
        if (o !== -1) {
          var a = i.slice(0, o), u = i.slice(o + 1, n.length);
          Mv(a) && kv(u) && r.set(a, u);
        }
        return r;
      }, /* @__PURE__ */ new Map()), this._internalState.size > jo && (this._internalState = new Map(Array.from(this._internalState.entries()).reverse().slice(0, jo))));
    }, t.prototype._keys = function() {
      return Array.from(this._internalState.keys()).reverse();
    }, t.prototype._clone = function() {
      var e = new t();
      return e._internalState = new Map(this._internalState), e;
    }, t;
  }()
), wn = "traceparent", An = "tracestate", jv = "00", Bv = "(?!ff)[\\da-f]{2}", $v = "(?![0]{32})[\\da-f]{32}", Fv = "(?![0]{16})[\\da-f]{16}", Vv = "[\\da-f]{2}", Gv = new RegExp("^\\s?(" + Bv + ")-(" + $v + ")-(" + Fv + ")-(" + Vv + ")(-.*)?\\s?$");
function Hv(t) {
  var e = Gv.exec(t);
  return !e || e[1] === "00" && e[5] ? null : {
    traceId: e[2],
    spanId: e[3],
    traceFlags: parseInt(e[4], 16)
  };
}
var zv = (
  /** @class */
  function() {
    function t() {
    }
    return t.prototype.inject = function(e, r, n) {
      var i = x.getSpanContext(e);
      if (!(!i || Yi(e) || !ze(i))) {
        var o = jv + "-" + i.traceId + "-" + i.spanId + "-0" + Number(i.traceFlags || ht.NONE).toString(16);
        n.set(r, wn, o), i.traceState && n.set(r, An, i.traceState.serialize());
      }
    }, t.prototype.extract = function(e, r, n) {
      var i = n.get(r, wn);
      if (!i)
        return e;
      var o = Array.isArray(i) ? i[0] : i;
      if (typeof o != "string")
        return e;
      var a = Hv(o);
      if (!a)
        return e;
      a.isRemote = !0;
      var u = n.get(r, An);
      if (u) {
        var c = Array.isArray(u) ? u.join(",") : u;
        a.traceState = new Uv(typeof c == "string" ? c : void 0);
      }
      return x.setSpanContext(e, a);
    }, t.prototype.fields = function() {
      return [wn, An];
    }, t;
  }()
), Xv = "[object Object]", qv = "[object Null]", Kv = "[object Undefined]", Wv = Function.prototype, iu = Wv.toString, Yv = iu.call(Object), Jv = Qv(Object.getPrototypeOf, Object), ou = Object.prototype, au = ou.hasOwnProperty, kt = Symbol ? Symbol.toStringTag : void 0, su = ou.toString;
function Qv(t, e) {
  return function(r) {
    return t(e(r));
  };
}
function Fo(t) {
  if (!Zv(t) || tm(t) !== Xv)
    return !1;
  var e = Jv(t);
  if (e === null)
    return !0;
  var r = au.call(e, "constructor") && e.constructor;
  return typeof r == "function" && r instanceof r && iu.call(r) === Yv;
}
function Zv(t) {
  return t != null && typeof t == "object";
}
function tm(t) {
  return t == null ? t === void 0 ? Kv : qv : kt && kt in Object(t) ? em(t) : rm(t);
}
function em(t) {
  var e = au.call(t, kt), r = t[kt], n = !1;
  try {
    t[kt] = void 0, n = !0;
  } catch {
  }
  var i = su.call(t);
  return n && (e ? t[kt] = r : delete t[kt]), i;
}
function rm(t) {
  return su.call(t);
}
var nm = 20;
function im() {
  for (var t = [], e = 0; e < arguments.length; e++)
    t[e] = arguments[e];
  for (var r = t.shift(), n = /* @__PURE__ */ new WeakMap(); t.length > 0; )
    r = uu(r, t.shift(), 0, n);
  return r;
}
function Ln(t) {
  return xr(t) ? t.slice() : t;
}
function uu(t, e, r, n) {
  r === void 0 && (r = 0);
  var i;
  if (!(r > nm)) {
    if (r++, _r(t) || _r(e) || cu(e))
      i = Ln(e);
    else if (xr(t)) {
      if (i = t.slice(), xr(e))
        for (var o = 0, a = e.length; o < a; o++)
          i.push(Ln(e[o]));
      else if (Te(e))
        for (var u = Object.keys(e), o = 0, a = u.length; o < a; o++) {
          var c = u[o];
          i[c] = Ln(e[c]);
        }
    } else if (Te(t))
      if (Te(e)) {
        if (!om(t, e))
          return e;
        i = Object.assign({}, t);
        for (var u = Object.keys(e), o = 0, a = u.length; o < a; o++) {
          var c = u[o], s = e[c];
          if (_r(s))
            typeof s > "u" ? delete i[c] : i[c] = s;
          else {
            var l = i[c], p = s;
            if (Vo(t, c, n) || Vo(e, c, n))
              delete i[c];
            else {
              if (Te(l) && Te(p)) {
                var f = n.get(l) || [], m = n.get(p) || [];
                f.push({ obj: t, key: c }), m.push({ obj: e, key: c }), n.set(l, f), n.set(p, m);
              }
              i[c] = uu(i[c], s, r, n);
            }
          }
        }
      } else
        i = e;
    return i;
  }
}
function Vo(t, e, r) {
  for (var n = r.get(t[e]) || [], i = 0, o = n.length; i < o; i++) {
    var a = n[i];
    if (a.key === e && a.obj === t)
      return !0;
  }
  return !1;
}
function xr(t) {
  return Array.isArray(t);
}
function cu(t) {
  return typeof t == "function";
}
function Te(t) {
  return !_r(t) && !xr(t) && !cu(t) && typeof t == "object";
}
function _r(t) {
  return typeof t == "string" || typeof t == "number" || typeof t == "boolean" || typeof t > "u" || t instanceof Date || t instanceof RegExp || t === null;
}
function om(t, e) {
  return !(!Fo(t) || !Fo(e));
}
function am(t, e) {
  return typeof e == "string" ? t === e : !!t.match(e);
}
var sm = (
  /** @class */
  function() {
    function t() {
      var e = this;
      this._promise = new Promise(function(r, n) {
        e._resolve = r, e._reject = n;
      });
    }
    return Object.defineProperty(t.prototype, "promise", {
      get: function() {
        return this._promise;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.resolve = function(e) {
      this._resolve(e);
    }, t.prototype.reject = function(e) {
      this._reject(e);
    }, t;
  }()
), um = function(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, o = [], a;
  try {
    for (; !(i = n.next()).done; ) o.push(i.value);
  } catch (u) {
    a = { error: u };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, cm = function(t, e, r) {
  if (arguments.length === 2) for (var n = 0, i = e.length, o; n < i; n++)
    (o || !(n in e)) && (o || (o = Array.prototype.slice.call(e, 0, n)), o[n] = e[n]);
  return t.concat(o || Array.prototype.slice.call(e));
}, lm = (
  /** @class */
  function() {
    function t(e, r) {
      this._callback = e, this._that = r, this._isCalled = !1, this._deferred = new sm();
    }
    return Object.defineProperty(t.prototype, "isCalled", {
      get: function() {
        return this._isCalled;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "promise", {
      get: function() {
        return this._deferred.promise;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.call = function() {
      for (var e, r = this, n = [], i = 0; i < arguments.length; i++)
        n[i] = arguments[i];
      if (!this._isCalled) {
        this._isCalled = !0;
        try {
          Promise.resolve((e = this._callback).call.apply(e, cm([this._that], um(n), !1))).then(function(o) {
            return r._deferred.resolve(o);
          }, function(o) {
            return r._deferred.reject(o);
          });
        } catch (o) {
          this._deferred.reject(o);
        }
      }
      return this._deferred.promise;
    }, t;
  }()
), pm = "exception", gi = function() {
  return gi = Object.assign || function(t) {
    for (var e, r = 1, n = arguments.length; r < n; r++) {
      e = arguments[r];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, gi.apply(this, arguments);
}, fm = function(t) {
  var e = typeof Symbol == "function" && Symbol.iterator, r = e && t[e], n = 0;
  if (r) return r.call(t);
  if (t && typeof t.length == "number") return {
    next: function() {
      return t && n >= t.length && (t = void 0), { value: t && t[n++], done: !t };
    }
  };
  throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.");
}, Go = function(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = n.next()).done; ) o.push(i.value);
  } catch (u) {
    a = { error: u };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, hm = function(t, e, r) {
  if (arguments.length === 2) for (var n = 0, i = e.length, o; n < i; n++)
    (o || !(n in e)) && (o || (o = Array.prototype.slice.call(e, 0, n)), o[n] = e[n]);
  return t.concat(o || Array.prototype.slice.call(e));
}, dm = (
  /** @class */
  function() {
    function t(e, r, n, i, o, a, u, c, s, l) {
      u === void 0 && (u = []), this.attributes = {}, this.links = [], this.events = [], this._droppedAttributesCount = 0, this._droppedEventsCount = 0, this._droppedLinksCount = 0, this.status = {
        code: Lr.UNSET
      }, this.endTime = [0, 0], this._ended = !1, this._duration = [-1, -1], this.name = n, this._spanContext = i, this.parentSpanId = a, this.kind = o, this.links = u;
      var p = Date.now();
      this._performanceStartTime = oe.now(), this._performanceOffset = p - (this._performanceStartTime + Ji()), this._startTimeProvided = c != null, this.startTime = this._getTime(c ?? p), this.resource = e.resource, this.instrumentationLibrary = e.instrumentationLibrary, this._spanLimits = e.getSpanLimits(), this._attributeValueLengthLimit = this._spanLimits.attributeValueLengthLimit || 0, l != null && this.setAttributes(l), this._spanProcessor = e.getActiveSpanProcessor(), this._spanProcessor.onStart(this, r);
    }
    return t.prototype.spanContext = function() {
      return this._spanContext;
    }, t.prototype.setAttribute = function(e, r) {
      return r == null || this._isSpanEnded() ? this : e.length === 0 ? (T.warn("Invalid attribute key: " + e), this) : Js(r) ? Object.keys(this.attributes).length >= this._spanLimits.attributeCountLimit && !Object.prototype.hasOwnProperty.call(this.attributes, e) ? (this._droppedAttributesCount++, this) : (this.attributes[e] = this._truncateToSize(r), this) : (T.warn("Invalid attribute value set for key: " + e), this);
    }, t.prototype.setAttributes = function(e) {
      var r, n;
      try {
        for (var i = fm(Object.entries(e)), o = i.next(); !o.done; o = i.next()) {
          var a = Go(o.value, 2), u = a[0], c = a[1];
          this.setAttribute(u, c);
        }
      } catch (s) {
        r = { error: s };
      } finally {
        try {
          o && !o.done && (n = i.return) && n.call(i);
        } finally {
          if (r) throw r.error;
        }
      }
      return this;
    }, t.prototype.addEvent = function(e, r, n) {
      if (this._isSpanEnded())
        return this;
      if (this._spanLimits.eventCountLimit === 0)
        return T.warn("No events allowed."), this._droppedEventsCount++, this;
      this.events.length >= this._spanLimits.eventCountLimit && (this._droppedEventsCount === 0 && T.debug("Dropping extra events."), this.events.shift(), this._droppedEventsCount++), Uo(r) && (Uo(n) || (n = r), r = void 0);
      var i = vr(r);
      return this.events.push({
        name: e,
        attributes: i,
        time: this._getTime(n),
        droppedAttributesCount: 0
      }), this;
    }, t.prototype.addLink = function(e) {
      return this.links.push(e), this;
    }, t.prototype.addLinks = function(e) {
      var r;
      return (r = this.links).push.apply(r, hm([], Go(e), !1)), this;
    }, t.prototype.setStatus = function(e) {
      return this._isSpanEnded() ? this : (this.status = gi({}, e), this.status.message != null && typeof e.message != "string" && (T.warn("Dropping invalid status.message of type '" + typeof e.message + "', expected 'string'"), delete this.status.message), this);
    }, t.prototype.updateName = function(e) {
      return this._isSpanEnded() ? this : (this.name = e, this);
    }, t.prototype.end = function(e) {
      if (this._isSpanEnded()) {
        T.error(this.name + " " + this._spanContext.traceId + "-" + this._spanContext.spanId + " - You can only call end() on a span once.");
        return;
      }
      this._ended = !0, this.endTime = this._getTime(e), this._duration = Av(this.startTime, this.endTime), this._duration[0] < 0 && (T.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.", this.startTime, this.endTime), this.endTime = this.startTime.slice(), this._duration = [0, 0]), this._droppedEventsCount > 0 && T.warn("Dropped " + this._droppedEventsCount + " events because eventCountLimit reached"), this._spanProcessor.onEnd(this);
    }, t.prototype._getTime = function(e) {
      if (typeof e == "number" && e <= oe.now())
        return ru(e + this._performanceOffset);
      if (typeof e == "number")
        return wt(e);
      if (e instanceof Date)
        return wt(e.getTime());
      if (Qi(e))
        return e;
      if (this._startTimeProvided)
        return wt(Date.now());
      var r = oe.now() - this._performanceStartTime;
      return nu(this.startTime, wt(r));
    }, t.prototype.isRecording = function() {
      return this._ended === !1;
    }, t.prototype.recordException = function(e, r) {
      var n = {};
      typeof e == "string" ? n[Sn] = e : e && (e.code ? n[On] = e.code.toString() : e.name && (n[On] = e.name), e.message && (n[Sn] = e.message), e.stack && (n[Ev] = e.stack)), n[On] || n[Sn] ? this.addEvent(pm, n, r) : T.warn("Failed to record an exception " + e);
    }, Object.defineProperty(t.prototype, "duration", {
      get: function() {
        return this._duration;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "ended", {
      get: function() {
        return this._ended;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "droppedAttributesCount", {
      get: function() {
        return this._droppedAttributesCount;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "droppedEventsCount", {
      get: function() {
        return this._droppedEventsCount;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "droppedLinksCount", {
      get: function() {
        return this._droppedLinksCount;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype._isSpanEnded = function() {
      return this._ended && T.warn("Can not execute the operation on ended Span {traceId: " + this._spanContext.traceId + ", spanId: " + this._spanContext.spanId + "}"), this._ended;
    }, t.prototype._truncateToLimitUtil = function(e, r) {
      return e.length <= r ? e : e.substring(0, r);
    }, t.prototype._truncateToSize = function(e) {
      var r = this, n = this._attributeValueLengthLimit;
      return n <= 0 ? (T.warn("Attribute value limit must be positive, got " + n), e) : typeof e == "string" ? this._truncateToLimitUtil(e, n) : Array.isArray(e) ? e.map(function(i) {
        return typeof i == "string" ? r._truncateToLimitUtil(i, n) : i;
      }) : e;
    }, t;
  }()
), ce;
(function(t) {
  t[t.NOT_RECORD = 0] = "NOT_RECORD", t[t.RECORD = 1] = "RECORD", t[t.RECORD_AND_SAMPLED = 2] = "RECORD_AND_SAMPLED";
})(ce || (ce = {}));
var Pr = (
  /** @class */
  function() {
    function t() {
    }
    return t.prototype.shouldSample = function() {
      return {
        decision: ce.NOT_RECORD
      };
    }, t.prototype.toString = function() {
      return "AlwaysOffSampler";
    }, t;
  }()
), ae = (
  /** @class */
  function() {
    function t() {
    }
    return t.prototype.shouldSample = function() {
      return {
        decision: ce.RECORD_AND_SAMPLED
      };
    }, t.prototype.toString = function() {
      return "AlwaysOnSampler";
    }, t;
  }()
), Rn = (
  /** @class */
  function() {
    function t(e) {
      var r, n, i, o;
      this._root = e.root, this._root || (ue(new Error("ParentBasedSampler must have a root sampler configured")), this._root = new ae()), this._remoteParentSampled = (r = e.remoteParentSampled) !== null && r !== void 0 ? r : new ae(), this._remoteParentNotSampled = (n = e.remoteParentNotSampled) !== null && n !== void 0 ? n : new Pr(), this._localParentSampled = (i = e.localParentSampled) !== null && i !== void 0 ? i : new ae(), this._localParentNotSampled = (o = e.localParentNotSampled) !== null && o !== void 0 ? o : new Pr();
    }
    return t.prototype.shouldSample = function(e, r, n, i, o, a) {
      var u = x.getSpanContext(e);
      return !u || !ze(u) ? this._root.shouldSample(e, r, n, i, o, a) : u.isRemote ? u.traceFlags & ht.SAMPLED ? this._remoteParentSampled.shouldSample(e, r, n, i, o, a) : this._remoteParentNotSampled.shouldSample(e, r, n, i, o, a) : u.traceFlags & ht.SAMPLED ? this._localParentSampled.shouldSample(e, r, n, i, o, a) : this._localParentNotSampled.shouldSample(e, r, n, i, o, a);
    }, t.prototype.toString = function() {
      return "ParentBased{root=" + this._root.toString() + ", remoteParentSampled=" + this._remoteParentSampled.toString() + ", remoteParentNotSampled=" + this._remoteParentNotSampled.toString() + ", localParentSampled=" + this._localParentSampled.toString() + ", localParentNotSampled=" + this._localParentNotSampled.toString() + "}";
    }, t;
  }()
), Ho = (
  /** @class */
  function() {
    function t(e) {
      e === void 0 && (e = 0), this._ratio = e, this._ratio = this._normalize(e), this._upperBound = Math.floor(this._ratio * 4294967295);
    }
    return t.prototype.shouldSample = function(e, r) {
      return {
        decision: Ms(r) && this._accumulate(r) < this._upperBound ? ce.RECORD_AND_SAMPLED : ce.NOT_RECORD
      };
    }, t.prototype.toString = function() {
      return "TraceIdRatioBased{" + this._ratio + "}";
    }, t.prototype._normalize = function(e) {
      return typeof e != "number" || isNaN(e) ? 0 : e >= 1 ? 1 : e <= 0 ? 0 : e;
    }, t.prototype._accumulate = function(e) {
      for (var r = 0, n = 0; n < e.length / 8; n++) {
        var i = n * 8, o = parseInt(e.slice(i, i + 8), 16);
        r = (r ^ o) >>> 0;
      }
      return r;
    }, t;
  }()
), vm = ct.AlwaysOn, Jt = 1;
function lu() {
  var t = Ue();
  return {
    sampler: pu(t),
    forceFlushTimeoutMillis: 3e4,
    generalLimits: {
      attributeValueLengthLimit: t.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,
      attributeCountLimit: t.OTEL_ATTRIBUTE_COUNT_LIMIT
    },
    spanLimits: {
      attributeValueLengthLimit: t.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,
      attributeCountLimit: t.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,
      linkCountLimit: t.OTEL_SPAN_LINK_COUNT_LIMIT,
      eventCountLimit: t.OTEL_SPAN_EVENT_COUNT_LIMIT,
      attributePerEventCountLimit: t.OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,
      attributePerLinkCountLimit: t.OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT
    },
    mergeResourceWithDefaults: !0
  };
}
function pu(t) {
  switch (t === void 0 && (t = Ue()), t.OTEL_TRACES_SAMPLER) {
    case ct.AlwaysOn:
      return new ae();
    case ct.AlwaysOff:
      return new Pr();
    case ct.ParentBasedAlwaysOn:
      return new Rn({
        root: new ae()
      });
    case ct.ParentBasedAlwaysOff:
      return new Rn({
        root: new Pr()
      });
    case ct.TraceIdRatio:
      return new Ho(zo(t));
    case ct.ParentBasedTraceIdRatio:
      return new Rn({
        root: new Ho(zo(t))
      });
    default:
      return T.error('OTEL_TRACES_SAMPLER value "' + t.OTEL_TRACES_SAMPLER + " invalid, defaulting to " + vm + '".'), new ae();
  }
}
function zo(t) {
  if (t.OTEL_TRACES_SAMPLER_ARG === void 0 || t.OTEL_TRACES_SAMPLER_ARG === "")
    return T.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to " + Jt + "."), Jt;
  var e = Number(t.OTEL_TRACES_SAMPLER_ARG);
  return isNaN(e) ? (T.error("OTEL_TRACES_SAMPLER_ARG=" + t.OTEL_TRACES_SAMPLER_ARG + " was given, but it is invalid, defaulting to " + Jt + "."), Jt) : e < 0 || e > 1 ? (T.error("OTEL_TRACES_SAMPLER_ARG=" + t.OTEL_TRACES_SAMPLER_ARG + " was given, but it is out of range ([0..1]), defaulting to " + Jt + "."), Jt) : e;
}
function mm(t) {
  var e = {
    sampler: pu()
  }, r = lu(), n = Object.assign({}, r, e, t);
  return n.generalLimits = Object.assign({}, r.generalLimits, t.generalLimits || {}), n.spanLimits = Object.assign({}, r.spanLimits, t.spanLimits || {}), n;
}
function ym(t) {
  var e, r, n, i, o, a, u, c, s, l, p, f, m = Object.assign({}, t.spanLimits), v = dv();
  return m.attributeCountLimit = (a = (o = (i = (r = (e = t.spanLimits) === null || e === void 0 ? void 0 : e.attributeCountLimit) !== null && r !== void 0 ? r : (n = t.generalLimits) === null || n === void 0 ? void 0 : n.attributeCountLimit) !== null && i !== void 0 ? i : v.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT) !== null && o !== void 0 ? o : v.OTEL_ATTRIBUTE_COUNT_LIMIT) !== null && a !== void 0 ? a : yr, m.attributeValueLengthLimit = (f = (p = (l = (c = (u = t.spanLimits) === null || u === void 0 ? void 0 : u.attributeValueLengthLimit) !== null && c !== void 0 ? c : (s = t.generalLimits) === null || s === void 0 ? void 0 : s.attributeValueLengthLimit) !== null && l !== void 0 ? l : v.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT) !== null && p !== void 0 ? p : v.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT) !== null && f !== void 0 ? f : mr, Object.assign({}, t, { spanLimits: m });
}
var _m = (
  /** @class */
  function() {
    function t(e, r) {
      this._exporter = e, this._isExporting = !1, this._finishedSpans = [], this._droppedSpansCount = 0;
      var n = Ue();
      this._maxExportBatchSize = typeof r?.maxExportBatchSize == "number" ? r.maxExportBatchSize : n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE, this._maxQueueSize = typeof r?.maxQueueSize == "number" ? r.maxQueueSize : n.OTEL_BSP_MAX_QUEUE_SIZE, this._scheduledDelayMillis = typeof r?.scheduledDelayMillis == "number" ? r.scheduledDelayMillis : n.OTEL_BSP_SCHEDULE_DELAY, this._exportTimeoutMillis = typeof r?.exportTimeoutMillis == "number" ? r.exportTimeoutMillis : n.OTEL_BSP_EXPORT_TIMEOUT, this._shutdownOnce = new lm(this._shutdown, this), this._maxExportBatchSize > this._maxQueueSize && (T.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"), this._maxExportBatchSize = this._maxQueueSize);
    }
    return t.prototype.forceFlush = function() {
      return this._shutdownOnce.isCalled ? this._shutdownOnce.promise : this._flushAll();
    }, t.prototype.onStart = function(e, r) {
    }, t.prototype.onEnd = function(e) {
      this._shutdownOnce.isCalled || e.spanContext().traceFlags & ht.SAMPLED && this._addToBuffer(e);
    }, t.prototype.shutdown = function() {
      return this._shutdownOnce.call();
    }, t.prototype._shutdown = function() {
      var e = this;
      return Promise.resolve().then(function() {
        return e.onShutdown();
      }).then(function() {
        return e._flushAll();
      }).then(function() {
        return e._exporter.shutdown();
      });
    }, t.prototype._addToBuffer = function(e) {
      if (this._finishedSpans.length >= this._maxQueueSize) {
        this._droppedSpansCount === 0 && T.debug("maxQueueSize reached, dropping spans"), this._droppedSpansCount++;
        return;
      }
      this._droppedSpansCount > 0 && (T.warn("Dropped " + this._droppedSpansCount + " spans because maxQueueSize reached"), this._droppedSpansCount = 0), this._finishedSpans.push(e), this._maybeStartTimer();
    }, t.prototype._flushAll = function() {
      var e = this;
      return new Promise(function(r, n) {
        for (var i = [], o = Math.ceil(e._finishedSpans.length / e._maxExportBatchSize), a = 0, u = o; a < u; a++)
          i.push(e._flushOneBatch());
        Promise.all(i).then(function() {
          r();
        }).catch(n);
      });
    }, t.prototype._flushOneBatch = function() {
      var e = this;
      return this._clearTimer(), this._finishedSpans.length === 0 ? Promise.resolve() : new Promise(function(r, n) {
        var i = setTimeout(function() {
          n(new Error("Timeout"));
        }, e._exportTimeoutMillis);
        N.with(Ud(N.active()), function() {
          var o;
          e._finishedSpans.length <= e._maxExportBatchSize ? (o = e._finishedSpans, e._finishedSpans = []) : o = e._finishedSpans.splice(0, e._maxExportBatchSize);
          for (var a = function() {
            return e._exporter.export(o, function(p) {
              var f;
              clearTimeout(i), p.code === yi.SUCCESS ? r() : n((f = p.error) !== null && f !== void 0 ? f : new Error("BatchSpanProcessor: span export failed"));
            });
          }, u = null, c = 0, s = o.length; c < s; c++) {
            var l = o[c];
            l.resource.asyncAttributesPending && l.resource.waitForAsyncAttributes && (u != null || (u = []), u.push(l.resource.waitForAsyncAttributes()));
          }
          u === null ? a() : Promise.all(u).then(a, function(p) {
            ue(p), n(p);
          });
        });
      });
    }, t.prototype._maybeStartTimer = function() {
      var e = this;
      if (!this._isExporting) {
        var r = function() {
          e._isExporting = !0, e._flushOneBatch().finally(function() {
            e._isExporting = !1, e._finishedSpans.length > 0 && (e._clearTimer(), e._maybeStartTimer());
          }).catch(function(n) {
            e._isExporting = !1, ue(n);
          });
        };
        if (this._finishedSpans.length >= this._maxExportBatchSize)
          return r();
        this._timer === void 0 && (this._timer = setTimeout(function() {
          return r();
        }, this._scheduledDelayMillis));
      }
    }, t.prototype._clearTimer = function() {
      this._timer !== void 0 && (clearTimeout(this._timer), this._timer = void 0);
    }, t;
  }()
), gm = /* @__PURE__ */ function() {
  var t = function(e, r) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (n[o] = i[o]);
    }, t(e, r);
  };
  return function(e, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    t(e, r);
    function n() {
      this.constructor = e;
    }
    e.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}(), fu = (
  /** @class */
  function(t) {
    gm(e, t);
    function e(r, n) {
      var i = t.call(this, r, n) || this;
      return i.onInit(n), i;
    }
    return e.prototype.onInit = function(r) {
      var n = this;
      r?.disableAutoFlushOnDocumentHide !== !0 && typeof document < "u" && (this._visibilityChangeListener = function() {
        document.visibilityState === "hidden" && n.forceFlush().catch(function(i) {
          ue(i);
        });
      }, this._pageHideListener = function() {
        n.forceFlush().catch(function(i) {
          ue(i);
        });
      }, document.addEventListener("visibilitychange", this._visibilityChangeListener), document.addEventListener("pagehide", this._pageHideListener));
    }, e.prototype.onShutdown = function() {
      typeof document < "u" && (this._visibilityChangeListener && document.removeEventListener("visibilitychange", this._visibilityChangeListener), this._pageHideListener && document.removeEventListener("pagehide", this._pageHideListener));
    }, e;
  }(_m)
), Em = 8, Tm = 16, bm = (
  /** @class */
  /* @__PURE__ */ function() {
    function t() {
      this.generateTraceId = Xo(Tm), this.generateSpanId = Xo(Em);
    }
    return t;
  }()
), Ze = Array(32);
function Xo(t) {
  return function() {
    for (var e = 0; e < t * 2; e++)
      Ze[e] = Math.floor(Math.random() * 16) + 48, Ze[e] >= 58 && (Ze[e] += 39);
    return String.fromCharCode.apply(null, Ze.slice(0, t * 2));
  };
}
var Om = (
  /** @class */
  function() {
    function t(e, r, n) {
      this._tracerProvider = n;
      var i = mm(r);
      this._sampler = i.sampler, this._generalLimits = i.generalLimits, this._spanLimits = i.spanLimits, this._idGenerator = r.idGenerator || new bm(), this.resource = n.resource, this.instrumentationLibrary = e;
    }
    return t.prototype.startSpan = function(e, r, n) {
      var i, o, a;
      r === void 0 && (r = {}), n === void 0 && (n = N.active()), r.root && (n = x.deleteSpan(n));
      var u = x.getSpan(n);
      if (Yi(n)) {
        T.debug("Instrumentation suppressed, returning Noop Span");
        var c = x.wrapSpanContext(Ps);
        return c;
      }
      var s = u?.spanContext(), l = this._idGenerator.generateSpanId(), p, f, m;
      !s || !x.isSpanContextValid(s) ? p = this._idGenerator.generateTraceId() : (p = s.traceId, f = s.traceState, m = s.spanId);
      var v = (i = r.kind) !== null && i !== void 0 ? i : De.INTERNAL, y = ((o = r.links) !== null && o !== void 0 ? o : []).map(function(j) {
        return {
          context: j.context,
          attributes: vr(j.attributes)
        };
      }), _ = vr(r.attributes), E = this._sampler.shouldSample(n, p, e, v, _, y);
      f = (a = E.traceState) !== null && a !== void 0 ? a : f;
      var L = E.decision === Ar.RECORD_AND_SAMPLED ? ht.SAMPLED : ht.NONE, U = { traceId: p, spanId: l, traceFlags: L, traceState: f };
      if (E.decision === Ar.NOT_RECORD) {
        T.debug("Recording is off, propagating context in a non-recording span");
        var c = x.wrapSpanContext(U);
        return c;
      }
      var D = vr(Object.assign(_, E.attributes)), F = new dm(this, n, e, U, v, m, y, r.startTime, void 0, D);
      return F;
    }, t.prototype.startActiveSpan = function(e, r, n, i) {
      var o, a, u;
      if (!(arguments.length < 2)) {
        arguments.length === 2 ? u = r : arguments.length === 3 ? (o = r, u = n) : (o = r, a = n, u = i);
        var c = a ?? N.active(), s = this.startSpan(e, o, c), l = x.setSpan(c, s);
        return N.with(l, u, void 0, s);
      }
    }, t.prototype.getGeneralLimits = function() {
      return this._generalLimits;
    }, t.prototype.getSpanLimits = function() {
      return this._spanLimits;
    }, t.prototype.getActiveSpanProcessor = function() {
      return this._tracerProvider.getActiveSpanProcessor();
    }, t;
  }()
), Sm = "process.runtime.name", wm = "service.name", Am = "telemetry.sdk.name", Lm = "telemetry.sdk.language", Rm = "telemetry.sdk.version", Nm = Sm, Cm = wm, Ei = Am, Ti = Lm, bi = Rm, xm = "webjs", Pm = xm, Im = "1.30.1", Qt, Nn = (Qt = {}, Qt[Ei] = "opentelemetry", Qt[Nm] = "browser", Qt[Ti] = Pm, Qt[bi] = Im, Qt);
function Mm() {
  return "unknown_service";
}
var Ot = function() {
  return Ot = Object.assign || function(t) {
    for (var e, r = 1, n = arguments.length; r < n; r++) {
      e = arguments[r];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Ot.apply(this, arguments);
}, km = function(t, e, r, n) {
  function i(o) {
    return o instanceof r ? o : new r(function(a) {
      a(o);
    });
  }
  return new (r || (r = Promise))(function(o, a) {
    function u(l) {
      try {
        s(n.next(l));
      } catch (p) {
        a(p);
      }
    }
    function c(l) {
      try {
        s(n.throw(l));
      } catch (p) {
        a(p);
      }
    }
    function s(l) {
      l.done ? o(l.value) : i(l.value).then(u, c);
    }
    s((n = n.apply(t, [])).next());
  });
}, Dm = function(t, e) {
  var r = { label: 0, sent: function() {
    if (o[0] & 1) throw o[1];
    return o[1];
  }, trys: [], ops: [] }, n, i, o, a;
  return a = { next: u(0), throw: u(1), return: u(2) }, typeof Symbol == "function" && (a[Symbol.iterator] = function() {
    return this;
  }), a;
  function u(s) {
    return function(l) {
      return c([s, l]);
    };
  }
  function c(s) {
    if (n) throw new TypeError("Generator is already executing.");
    for (; r; ) try {
      if (n = 1, i && (o = s[0] & 2 ? i.return : s[0] ? i.throw || ((o = i.return) && o.call(i), 0) : i.next) && !(o = o.call(i, s[1])).done) return o;
      switch (i = 0, o && (s = [s[0] & 2, o.value]), s[0]) {
        case 0:
        case 1:
          o = s;
          break;
        case 4:
          return r.label++, { value: s[1], done: !1 };
        case 5:
          r.label++, i = s[1], s = [0];
          continue;
        case 7:
          s = r.ops.pop(), r.trys.pop();
          continue;
        default:
          if (o = r.trys, !(o = o.length > 0 && o[o.length - 1]) && (s[0] === 6 || s[0] === 2)) {
            r = 0;
            continue;
          }
          if (s[0] === 3 && (!o || s[1] > o[0] && s[1] < o[3])) {
            r.label = s[1];
            break;
          }
          if (s[0] === 6 && r.label < o[1]) {
            r.label = o[1], o = s;
            break;
          }
          if (o && r.label < o[2]) {
            r.label = o[2], r.ops.push(s);
            break;
          }
          o[2] && r.ops.pop(), r.trys.pop();
          continue;
      }
      s = e.call(t, r);
    } catch (l) {
      s = [6, l], i = 0;
    } finally {
      n = o = 0;
    }
    if (s[0] & 5) throw s[1];
    return { value: s[0] ? s[1] : void 0, done: !0 };
  }
}, Um = function(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = n.next()).done; ) o.push(i.value);
  } catch (u) {
    a = { error: u };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, je = (
  /** @class */
  function() {
    function t(e, r) {
      var n = this, i;
      this._attributes = e, this.asyncAttributesPending = r != null, this._syncAttributes = (i = this._attributes) !== null && i !== void 0 ? i : {}, this._asyncAttributesPromise = r?.then(function(o) {
        return n._attributes = Object.assign({}, n._attributes, o), n.asyncAttributesPending = !1, o;
      }, function(o) {
        return T.debug("a resource's async attributes promise rejected: %s", o), n.asyncAttributesPending = !1, {};
      });
    }
    return t.empty = function() {
      return t.EMPTY;
    }, t.default = function() {
      var e;
      return new t((e = {}, e[Cm] = Mm(), e[Ti] = Nn[Ti], e[Ei] = Nn[Ei], e[bi] = Nn[bi], e));
    }, Object.defineProperty(t.prototype, "attributes", {
      get: function() {
        var e;
        return this.asyncAttributesPending && T.error("Accessing resource attributes before async attributes settled"), (e = this._attributes) !== null && e !== void 0 ? e : {};
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.waitForAsyncAttributes = function() {
      return km(this, void 0, void 0, function() {
        return Dm(this, function(e) {
          switch (e.label) {
            case 0:
              return this.asyncAttributesPending ? [4, this._asyncAttributesPromise] : [3, 2];
            case 1:
              e.sent(), e.label = 2;
            case 2:
              return [
                2
                /*return*/
              ];
          }
        });
      });
    }, t.prototype.merge = function(e) {
      var r = this, n;
      if (!e)
        return this;
      var i = Ot(Ot({}, this._syncAttributes), (n = e._syncAttributes) !== null && n !== void 0 ? n : e.attributes);
      if (!this._asyncAttributesPromise && !e._asyncAttributesPromise)
        return new t(i);
      var o = Promise.all([
        this._asyncAttributesPromise,
        e._asyncAttributesPromise
      ]).then(function(a) {
        var u, c = Um(a, 2), s = c[0], l = c[1];
        return Ot(Ot(Ot(Ot({}, r._syncAttributes), s), (u = e._syncAttributes) !== null && u !== void 0 ? u : e.attributes), l);
      });
      return new t(i, o);
    }, t.EMPTY = new t({}), t;
  }()
), tr = function(t) {
  var e = typeof Symbol == "function" && Symbol.iterator, r = e && t[e], n = 0;
  if (r) return r.call(t);
  if (t && typeof t.length == "number") return {
    next: function() {
      return t && n >= t.length && (t = void 0), { value: t && t[n++], done: !t };
    }
  };
  throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.");
}, qo = (
  /** @class */
  function() {
    function t(e) {
      this._spanProcessors = e;
    }
    return t.prototype.forceFlush = function() {
      var e, r, n = [];
      try {
        for (var i = tr(this._spanProcessors), o = i.next(); !o.done; o = i.next()) {
          var a = o.value;
          n.push(a.forceFlush());
        }
      } catch (u) {
        e = { error: u };
      } finally {
        try {
          o && !o.done && (r = i.return) && r.call(i);
        } finally {
          if (e) throw e.error;
        }
      }
      return new Promise(function(u) {
        Promise.all(n).then(function() {
          u();
        }).catch(function(c) {
          ue(c || new Error("MultiSpanProcessor: forceFlush failed")), u();
        });
      });
    }, t.prototype.onStart = function(e, r) {
      var n, i;
      try {
        for (var o = tr(this._spanProcessors), a = o.next(); !a.done; a = o.next()) {
          var u = a.value;
          u.onStart(e, r);
        }
      } catch (c) {
        n = { error: c };
      } finally {
        try {
          a && !a.done && (i = o.return) && i.call(o);
        } finally {
          if (n) throw n.error;
        }
      }
    }, t.prototype.onEnd = function(e) {
      var r, n;
      try {
        for (var i = tr(this._spanProcessors), o = i.next(); !o.done; o = i.next()) {
          var a = o.value;
          a.onEnd(e);
        }
      } catch (u) {
        r = { error: u };
      } finally {
        try {
          o && !o.done && (n = i.return) && n.call(i);
        } finally {
          if (r) throw r.error;
        }
      }
    }, t.prototype.shutdown = function() {
      var e, r, n = [];
      try {
        for (var i = tr(this._spanProcessors), o = i.next(); !o.done; o = i.next()) {
          var a = o.value;
          n.push(a.shutdown());
        }
      } catch (u) {
        e = { error: u };
      } finally {
        try {
          o && !o.done && (r = i.return) && r.call(i);
        } finally {
          if (e) throw e.error;
        }
      }
      return new Promise(function(u, c) {
        Promise.all(n).then(function() {
          u();
        }, c);
      });
    }, t;
  }()
), jm = (
  /** @class */
  function() {
    function t() {
    }
    return t.prototype.onStart = function(e, r) {
    }, t.prototype.onEnd = function(e) {
    }, t.prototype.shutdown = function() {
      return Promise.resolve();
    }, t.prototype.forceFlush = function() {
      return Promise.resolve();
    }, t;
  }()
), Bm = function(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, o = [], a;
  try {
    for (; !(i = n.next()).done; ) o.push(i.value);
  } catch (u) {
    a = { error: u };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, $m = function(t, e, r) {
  if (arguments.length === 2) for (var n = 0, i = e.length, o; n < i; n++)
    (o || !(n in e)) && (o || (o = Array.prototype.slice.call(e, 0, n)), o[n] = e[n]);
  return t.concat(o || Array.prototype.slice.call(e));
}, Dt;
(function(t) {
  t[t.resolved = 0] = "resolved", t[t.timeout = 1] = "timeout", t[t.error = 2] = "error", t[t.unresolved = 3] = "unresolved";
})(Dt || (Dt = {}));
var Fm = (
  /** @class */
  function() {
    function t(e) {
      e === void 0 && (e = {});
      var r, n;
      this._registeredSpanProcessors = [], this._tracers = /* @__PURE__ */ new Map();
      var i = im({}, lu(), ym(e));
      if (this.resource = (r = i.resource) !== null && r !== void 0 ? r : je.empty(), i.mergeResourceWithDefaults && (this.resource = je.default().merge(this.resource)), this._config = Object.assign({}, i, {
        resource: this.resource
      }), !((n = e.spanProcessors) === null || n === void 0) && n.length)
        this._registeredSpanProcessors = $m([], Bm(e.spanProcessors), !1), this.activeSpanProcessor = new qo(this._registeredSpanProcessors);
      else {
        var o = this._buildExporterFromEnv();
        if (o !== void 0) {
          var a = new fu(o);
          this.activeSpanProcessor = a;
        } else
          this.activeSpanProcessor = new jm();
      }
    }
    return t.prototype.getTracer = function(e, r, n) {
      var i = e + "@" + (r || "") + ":" + (n?.schemaUrl || "");
      return this._tracers.has(i) || this._tracers.set(i, new Om({ name: e, version: r, schemaUrl: n?.schemaUrl }, this._config, this)), this._tracers.get(i);
    }, t.prototype.addSpanProcessor = function(e) {
      this._registeredSpanProcessors.length === 0 && this.activeSpanProcessor.shutdown().catch(function(r) {
        return T.error("Error while trying to shutdown current span processor", r);
      }), this._registeredSpanProcessors.push(e), this.activeSpanProcessor = new qo(this._registeredSpanProcessors);
    }, t.prototype.getActiveSpanProcessor = function() {
      return this.activeSpanProcessor;
    }, t.prototype.register = function(e) {
      e === void 0 && (e = {}), x.setGlobalTracerProvider(this), e.propagator === void 0 && (e.propagator = this._buildPropagatorFromEnv()), e.contextManager && N.setGlobalContextManager(e.contextManager), e.propagator && J.setGlobalPropagator(e.propagator);
    }, t.prototype.forceFlush = function() {
      var e = this._config.forceFlushTimeoutMillis, r = this._registeredSpanProcessors.map(function(n) {
        return new Promise(function(i) {
          var o, a = setTimeout(function() {
            i(new Error("Span processor did not completed within timeout period of " + e + " ms")), o = Dt.timeout;
          }, e);
          n.forceFlush().then(function() {
            clearTimeout(a), o !== Dt.timeout && (o = Dt.resolved, i(o));
          }).catch(function(u) {
            clearTimeout(a), o = Dt.error, i(u);
          });
        });
      });
      return new Promise(function(n, i) {
        Promise.all(r).then(function(o) {
          var a = o.filter(function(u) {
            return u !== Dt.resolved;
          });
          a.length > 0 ? i(a) : n();
        }).catch(function(o) {
          return i([o]);
        });
      });
    }, t.prototype.shutdown = function() {
      return this.activeSpanProcessor.shutdown();
    }, t.prototype._getPropagator = function(e) {
      var r;
      return (r = this.constructor._registeredPropagators.get(e)) === null || r === void 0 ? void 0 : r();
    }, t.prototype._getSpanExporter = function(e) {
      var r;
      return (r = this.constructor._registeredExporters.get(e)) === null || r === void 0 ? void 0 : r();
    }, t.prototype._buildPropagatorFromEnv = function() {
      var e = this, r = Array.from(new Set(Ue().OTEL_PROPAGATORS)), n = r.map(function(o) {
        var a = e._getPropagator(o);
        return a || T.warn('Propagator "' + o + '" requested through environment variable is unavailable.'), a;
      }), i = n.reduce(function(o, a) {
        return a && o.push(a), o;
      }, []);
      if (i.length !== 0)
        return r.length === 1 ? i[0] : new Rv({
          propagators: i
        });
    }, t.prototype._buildExporterFromEnv = function() {
      var e = Ue().OTEL_TRACES_EXPORTER;
      if (!(e === "none" || e === "")) {
        var r = this._getSpanExporter(e);
        return r || T.error('Exporter "' + e + '" requested through environment variable is unavailable.'), r;
      }
    }, t._registeredPropagators = /* @__PURE__ */ new Map([
      ["tracecontext", function() {
        return new zv();
      }],
      ["baggage", function() {
        return new Xd();
      }]
    ]), t._registeredExporters = /* @__PURE__ */ new Map(), t;
  }()
), Vm = function(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, o = [], a;
  try {
    for (; !(i = n.next()).done; ) o.push(i.value);
  } catch (u) {
    a = { error: u };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Gm = function(t, e, r) {
  if (arguments.length === 2) for (var n = 0, i = e.length, o; n < i; n++)
    (o || !(n in e)) && (o || (o = Array.prototype.slice.call(e, 0, n)), o[n] = e[n]);
  return t.concat(o || Array.prototype.slice.call(e));
}, hu = (
  /** @class */
  function() {
    function t() {
      this._enabled = !1, this._currentContext = It;
    }
    return t.prototype._bindFunction = function(e, r) {
      e === void 0 && (e = It);
      var n = this, i = function() {
        for (var o = this, a = [], u = 0; u < arguments.length; u++)
          a[u] = arguments[u];
        return n.with(e, function() {
          return r.apply(o, a);
        });
      };
      return Object.defineProperty(i, "length", {
        enumerable: !1,
        configurable: !0,
        writable: !1,
        value: r.length
      }), i;
    }, t.prototype.active = function() {
      return this._currentContext;
    }, t.prototype.bind = function(e, r) {
      return e === void 0 && (e = this.active()), typeof r == "function" ? this._bindFunction(e, r) : r;
    }, t.prototype.disable = function() {
      return this._currentContext = It, this._enabled = !1, this;
    }, t.prototype.enable = function() {
      return this._enabled ? this : (this._enabled = !0, this._currentContext = It, this);
    }, t.prototype.with = function(e, r, n) {
      for (var i = [], o = 3; o < arguments.length; o++)
        i[o - 3] = arguments[o];
      var a = this._currentContext;
      this._currentContext = e || It;
      try {
        return r.call.apply(r, Gm([n], Vm(i), !1));
      } finally {
        this._currentContext = a;
      }
    }, t;
  }()
), Hm = /* @__PURE__ */ function() {
  var t = function(e, r) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (n[o] = i[o]);
    }, t(e, r);
  };
  return function(e, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    t(e, r);
    function n() {
      this.constructor = e;
    }
    e.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}(), zm = (
  /** @class */
  function(t) {
    Hm(e, t);
    function e(r) {
      r === void 0 && (r = {});
      var n = t.call(this, r) || this;
      if (r.contextManager)
        throw "contextManager should be defined in register method not in constructor";
      if (r.propagator)
        throw "propagator should be defined in register method not in constructor";
      return n;
    }
    return e.prototype.register = function(r) {
      r === void 0 && (r = {}), r.contextManager === void 0 && (r.contextManager = new hu()), r.contextManager && r.contextManager.enable(), t.prototype.register.call(this, r);
    }, e;
  }(Fm)
), S;
(function(t) {
  t.CONNECT_END = "connectEnd", t.CONNECT_START = "connectStart", t.DECODED_BODY_SIZE = "decodedBodySize", t.DOM_COMPLETE = "domComplete", t.DOM_CONTENT_LOADED_EVENT_END = "domContentLoadedEventEnd", t.DOM_CONTENT_LOADED_EVENT_START = "domContentLoadedEventStart", t.DOM_INTERACTIVE = "domInteractive", t.DOMAIN_LOOKUP_END = "domainLookupEnd", t.DOMAIN_LOOKUP_START = "domainLookupStart", t.ENCODED_BODY_SIZE = "encodedBodySize", t.FETCH_START = "fetchStart", t.LOAD_EVENT_END = "loadEventEnd", t.LOAD_EVENT_START = "loadEventStart", t.NAVIGATION_START = "navigationStart", t.REDIRECT_END = "redirectEnd", t.REDIRECT_START = "redirectStart", t.REQUEST_START = "requestStart", t.RESPONSE_END = "responseEnd", t.RESPONSE_START = "responseStart", t.SECURE_CONNECTION_START = "secureConnectionStart", t.UNLOAD_EVENT_END = "unloadEventEnd", t.UNLOAD_EVENT_START = "unloadEventStart";
})(S || (S = {}));
var Cn;
function Xm() {
  return Cn || (Cn = document.createElement("a")), Cn;
}
function Ct(t, e) {
  return e in t;
}
function V(t, e, r, n) {
  var i = void 0, o = void 0;
  Ct(r, e) && typeof r[e] == "number" && (i = r[e]);
  var a = S.FETCH_START;
  if (Ct(r, a) && typeof r[a] == "number" && (o = r[a]), i !== void 0 && o !== void 0 && i >= o)
    return t.addEvent(e, i), t;
}
function le(t, e, r) {
  r === void 0 && (r = !1), r || (V(t, S.FETCH_START, e), V(t, S.DOMAIN_LOOKUP_START, e), V(t, S.DOMAIN_LOOKUP_END, e), V(t, S.CONNECT_START, e), Ct(e, "name") && e.name.startsWith("https:") && V(t, S.SECURE_CONNECTION_START, e), V(t, S.CONNECT_END, e), V(t, S.REQUEST_START, e), V(t, S.RESPONSE_START, e), V(t, S.RESPONSE_END, e));
  var n = e[S.ENCODED_BODY_SIZE];
  n !== void 0 && t.setAttribute(Tv, n);
  var i = e[S.DECODED_BODY_SIZE];
  i !== void 0 && n !== i && t.setAttribute(bv, i);
}
function qm(t) {
  return t.slice().sort(function(e, r) {
    var n = e[S.FETCH_START], i = r[S.FETCH_START];
    return n > i ? 1 : n < i ? -1 : 0;
  });
}
function du() {
  return typeof location < "u" ? location.origin : void 0;
}
function vu(t, e, r, n, i, o) {
  i === void 0 && (i = /* @__PURE__ */ new WeakSet());
  var a = _t(t);
  t = a.toString();
  var u = Wm(t, e, r, n, i, o);
  if (u.length === 0)
    return {
      mainRequest: void 0
    };
  if (u.length === 1)
    return {
      mainRequest: u[0]
    };
  var c = qm(u);
  if (a.origin !== du() && c.length > 1) {
    var s = c[0], l = Km(c, s[S.RESPONSE_END], r), p = s[S.RESPONSE_END], f = l[S.FETCH_START];
    return f < p && (l = s, s = void 0), {
      corsPreFlightRequest: s,
      mainRequest: l
    };
  } else
    return {
      mainRequest: u[0]
    };
}
function Km(t, e, r) {
  for (var n = At(r), i = At(Re(e)), o = t[1], a, u = t.length, c = 1; c < u; c++) {
    var s = t[c], l = At(Re(s[S.FETCH_START])), p = At(Re(s[S.RESPONSE_END])), f = n - p;
    l >= i && (!a || f < a) && (a = f, o = s);
  }
  return o;
}
function Wm(t, e, r, n, i, o) {
  var a = At(e), u = At(r), c = n.filter(function(s) {
    var l = At(Re(s[S.FETCH_START])), p = At(Re(s[S.RESPONSE_END]));
    return s.initiatorType.toLowerCase() === (o || "xmlhttprequest") && s.name === t && l >= a && p <= u;
  });
  return c.length > 0 && (c = c.filter(function(s) {
    return !i.has(s);
  })), c;
}
function _t(t) {
  if (typeof URL == "function")
    return new URL(t, typeof document < "u" ? document.baseURI : typeof location < "u" ? location.href : void 0);
  var e = Xm();
  return e.href = t, e;
}
function mu(t, e) {
  if (t.nodeType === Node.DOCUMENT_NODE)
    return "/";
  var r = Jm(t, e);
  if (e && r.indexOf("@id") > 0)
    return r;
  var n = "";
  return t.parentNode && (n += mu(t.parentNode, !1)), n += r, n;
}
function Ym(t) {
  if (!t.parentNode)
    return 0;
  var e = [t.nodeType];
  t.nodeType === Node.CDATA_SECTION_NODE && e.push(Node.TEXT_NODE);
  var r = Array.from(t.parentNode.childNodes);
  return r = r.filter(function(n) {
    var i = n.localName;
    return e.indexOf(n.nodeType) >= 0 && i === t.localName;
  }), r.length >= 1 ? r.indexOf(t) + 1 : 0;
}
function Jm(t, e) {
  var r = t.nodeType, n = Ym(t), i = "";
  if (r === Node.ELEMENT_NODE) {
    var o = t.getAttribute("id");
    if (e && o)
      return '//*[@id="' + o + '"]';
    i = t.localName;
  } else if (r === Node.TEXT_NODE || r === Node.CDATA_SECTION_NODE)
    i = "text()";
  else if (r === Node.COMMENT_NODE)
    i = "comment()";
  else
    return "";
  return i && n > 1 ? "/" + i + "[" + n + "]" : "/" + i;
}
function yu(t, e) {
  var r = e || [];
  (typeof r == "string" || r instanceof RegExp) && (r = [r]);
  var n = _t(t);
  return n.origin === du() ? !0 : r.some(function(i) {
    return am(t, i);
  });
}
var Oi = function() {
  return Oi = Object.assign || function(t) {
    for (var e, r = 1, n = arguments.length; r < n; r++) {
      e = arguments[r];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Oi.apply(this, arguments);
}, Qm = (
  /** @class */
  function() {
    function t(e, r, n) {
      this.instrumentationName = e, this.instrumentationVersion = r, this._config = {}, this._wrap = q.wrap, this._unwrap = q.unwrap, this._massWrap = q.massWrap, this._massUnwrap = q.massUnwrap, this.setConfig(n), this._diag = T.createComponentLogger({
        namespace: e
      }), this._tracer = x.getTracer(e, r), this._meter = he.getMeter(e, r), this._logger = Xe.getLogger(e, r), this._updateMetricInstruments();
    }
    return Object.defineProperty(t.prototype, "meter", {
      /* Returns meter */
      get: function() {
        return this._meter;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.setMeterProvider = function(e) {
      this._meter = e.getMeter(this.instrumentationName, this.instrumentationVersion), this._updateMetricInstruments();
    }, Object.defineProperty(t.prototype, "logger", {
      /* Returns logger */
      get: function() {
        return this._logger;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.setLoggerProvider = function(e) {
      this._logger = e.getLogger(this.instrumentationName, this.instrumentationVersion);
    }, t.prototype.getModuleDefinitions = function() {
      var e, r = (e = this.init()) !== null && e !== void 0 ? e : [];
      return Array.isArray(r) ? r : [r];
    }, t.prototype._updateMetricInstruments = function() {
    }, t.prototype.getConfig = function() {
      return this._config;
    }, t.prototype.setConfig = function(e) {
      this._config = Oi({ enabled: !0 }, e);
    }, t.prototype.setTracerProvider = function(e) {
      this._tracer = e.getTracer(this.instrumentationName, this.instrumentationVersion);
    }, Object.defineProperty(t.prototype, "tracer", {
      /* Returns tracer */
      get: function() {
        return this._tracer;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype._runSpanCustomizationHook = function(e, r, n, i) {
      if (e)
        try {
          e(n, i);
        } catch (o) {
          this._diag.error("Error running span customization hook due to exception in handler", { triggerName: r }, o);
        }
    }, t;
  }()
), Zm = /* @__PURE__ */ function() {
  var t = function(e, r) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (n[o] = i[o]);
    }, t(e, r);
  };
  return function(e, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    t(e, r);
    function n() {
      this.constructor = e;
    }
    e.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}(), ty = (
  /** @class */
  function(t) {
    Zm(e, t);
    function e(r, n, i) {
      var o = t.call(this, r, n, i) || this;
      return o._config.enabled && o.enable(), o;
    }
    return e;
  }(Qm)
);
function Ko(t, e, r) {
  var n, i;
  try {
    i = t();
  } catch (o) {
    n = o;
  } finally {
    return e(n, i), i;
  }
}
var Ne;
(function(t) {
  t.DOCUMENT_LOAD = "documentLoad", t.DOCUMENT_FETCH = "documentFetch", t.RESOURCE_FETCH = "resourceFetch";
})(Ne || (Ne = {}));
var ey = "0.44.0", ry = "@opentelemetry/instrumentation-document-load";
const ny = "http.url", iy = "http.user_agent", xn = ny, oy = iy;
var Ir;
(function(t) {
  t.FIRST_PAINT = "firstPaint", t.FIRST_CONTENTFUL_PAINT = "firstContentfulPaint";
})(Ir || (Ir = {}));
var ay = function() {
  var t, e, r = {}, n = (e = (t = Nr).getEntriesByType) === null || e === void 0 ? void 0 : e.call(t, "navigation")[0];
  if (n) {
    var i = Object.values(S);
    i.forEach(function(u) {
      if (Ct(n, u)) {
        var c = n[u];
        typeof c == "number" && (r[u] = c);
      }
    });
  } else {
    var o = Nr, a = o.timing;
    if (a) {
      var i = Object.values(S);
      i.forEach(function(c) {
        if (Ct(a, c)) {
          var s = a[c];
          typeof s == "number" && (r[c] = s);
        }
      });
    }
  }
  return r;
}, Wo = {
  "first-paint": Ir.FIRST_PAINT,
  "first-contentful-paint": Ir.FIRST_CONTENTFUL_PAINT
}, sy = function(t) {
  var e, r, n = (r = (e = Nr).getEntriesByType) === null || r === void 0 ? void 0 : r.call(e, "paint");
  n && n.forEach(function(i) {
    var o = i.name, a = i.startTime;
    Ct(Wo, o) && t.addEvent(Wo[o], a);
  });
}, uy = /* @__PURE__ */ function() {
  var t = function(e, r) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (n[o] = i[o]);
    }, t(e, r);
  };
  return function(e, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    t(e, r);
    function n() {
      this.constructor = e;
    }
    e.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}(), cy = (
  /** @class */
  function(t) {
    uy(e, t);
    function e(r) {
      r === void 0 && (r = {});
      var n = t.call(this, ry, ey, r) || this;
      return n.component = "document-load", n.version = "1", n.moduleName = n.component, n;
    }
    return e.prototype.init = function() {
    }, e.prototype._onDocumentLoaded = function() {
      var r = this;
      window.setTimeout(function() {
        r._collectPerformance();
      });
    }, e.prototype._addResourcesSpans = function(r) {
      var n = this, i, o, a = (o = (i = Nr).getEntriesByType) === null || o === void 0 ? void 0 : o.call(i, "resource");
      a && a.forEach(function(u) {
        n._initResourceSpan(u, r);
      });
    }, e.prototype._collectPerformance = function() {
      var r = this, n = Array.from(document.getElementsByTagName("meta")).find(function(a) {
        return a.getAttribute("name") === Dd;
      }), i = ay(), o = n && n.content || "";
      N.with(J.extract(It, { traceparent: o }), function() {
        var a, u = r._startSpan(Ne.DOCUMENT_LOAD, S.FETCH_START, i);
        u && (N.with(x.setSpan(N.active(), u), function() {
          var c = r._startSpan(Ne.DOCUMENT_FETCH, S.FETCH_START, i);
          c && (c.setAttribute(xn, location.href), N.with(x.setSpan(N.active(), c), function() {
            var s;
            r.getConfig().ignoreNetworkEvents || le(c, i), r._addCustomAttributesOnSpan(c, (s = r.getConfig().applyCustomAttributesOnSpan) === null || s === void 0 ? void 0 : s.documentFetch), r._endSpan(c, S.RESPONSE_END, i);
          }));
        }), u.setAttribute(xn, location.href), u.setAttribute(oy, navigator.userAgent), r._addResourcesSpans(u), r.getConfig().ignoreNetworkEvents || (V(u, S.FETCH_START, i), V(u, S.UNLOAD_EVENT_START, i), V(u, S.UNLOAD_EVENT_END, i), V(u, S.DOM_INTERACTIVE, i), V(u, S.DOM_CONTENT_LOADED_EVENT_START, i), V(u, S.DOM_CONTENT_LOADED_EVENT_END, i), V(u, S.DOM_COMPLETE, i), V(u, S.LOAD_EVENT_START, i), V(u, S.LOAD_EVENT_END, i)), r.getConfig().ignorePerformancePaintEvents || sy(u), r._addCustomAttributesOnSpan(u, (a = r.getConfig().applyCustomAttributesOnSpan) === null || a === void 0 ? void 0 : a.documentLoad), r._endSpan(u, S.LOAD_EVENT_END, i));
      });
    }, e.prototype._endSpan = function(r, n, i) {
      r && (Ct(i, n) ? r.end(i[n]) : r.end());
    }, e.prototype._initResourceSpan = function(r, n) {
      var i, o = this._startSpan(Ne.RESOURCE_FETCH, S.FETCH_START, r, n);
      o && (o.setAttribute(xn, r.name), this.getConfig().ignoreNetworkEvents || le(o, r), this._addCustomAttributesOnResourceSpan(o, r, (i = this.getConfig().applyCustomAttributesOnSpan) === null || i === void 0 ? void 0 : i.resourceFetch), this._endSpan(o, S.RESPONSE_END, r));
    }, e.prototype._startSpan = function(r, n, i, o) {
      if (Ct(i, n) && typeof i[n] == "number") {
        var a = this.tracer.startSpan(r, {
          startTime: i[n]
        }, o ? x.setSpan(N.active(), o) : void 0);
        return a;
      }
    }, e.prototype._waitForPageLoad = function() {
      window.document.readyState === "complete" ? this._onDocumentLoaded() : (this._onDocumentLoaded = this._onDocumentLoaded.bind(this), window.addEventListener("load", this._onDocumentLoaded));
    }, e.prototype._addCustomAttributesOnSpan = function(r, n) {
      var i = this;
      n && Ko(function() {
        return n(r);
      }, function(o) {
        o && i._diag.error("addCustomAttributesOnSpan", o);
      });
    }, e.prototype._addCustomAttributesOnResourceSpan = function(r, n, i) {
      var o = this;
      i && Ko(function() {
        return i(r, n);
      }, function(a) {
        a && o._diag.error("addCustomAttributesOnResourceSpan", a);
      });
    }, e.prototype.enable = function() {
      window.removeEventListener("load", this._onDocumentLoaded), this._waitForPageLoad();
    }, e.prototype.disable = function() {
      window.removeEventListener("load", this._onDocumentLoaded);
    }, e;
  }(ty)
), Si = function() {
  return Si = Object.assign || function(t) {
    for (var e, r = 1, n = arguments.length; r < n; r++) {
      e = arguments[r];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Si.apply(this, arguments);
}, ly = (
  /** @class */
  function() {
    function t(e, r, n) {
      this.instrumentationName = e, this.instrumentationVersion = r, this._config = {}, this._wrap = q.wrap, this._unwrap = q.unwrap, this._massWrap = q.massWrap, this._massUnwrap = q.massUnwrap, this.setConfig(n), this._diag = T.createComponentLogger({
        namespace: e
      }), this._tracer = x.getTracer(e, r), this._meter = he.getMeter(e, r), this._logger = Xe.getLogger(e, r), this._updateMetricInstruments();
    }
    return Object.defineProperty(t.prototype, "meter", {
      /* Returns meter */
      get: function() {
        return this._meter;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.setMeterProvider = function(e) {
      this._meter = e.getMeter(this.instrumentationName, this.instrumentationVersion), this._updateMetricInstruments();
    }, Object.defineProperty(t.prototype, "logger", {
      /* Returns logger */
      get: function() {
        return this._logger;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.setLoggerProvider = function(e) {
      this._logger = e.getLogger(this.instrumentationName, this.instrumentationVersion);
    }, t.prototype.getModuleDefinitions = function() {
      var e, r = (e = this.init()) !== null && e !== void 0 ? e : [];
      return Array.isArray(r) ? r : [r];
    }, t.prototype._updateMetricInstruments = function() {
    }, t.prototype.getConfig = function() {
      return this._config;
    }, t.prototype.setConfig = function(e) {
      this._config = Si({ enabled: !0 }, e);
    }, t.prototype.setTracerProvider = function(e) {
      this._tracer = e.getTracer(this.instrumentationName, this.instrumentationVersion);
    }, Object.defineProperty(t.prototype, "tracer", {
      /* Returns tracer */
      get: function() {
        return this._tracer;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype._runSpanCustomizationHook = function(e, r, n, i) {
      if (e)
        try {
          e(n, i);
        } catch (o) {
          this._diag.error("Error running span customization hook due to exception in handler", { triggerName: r }, o);
        }
    }, t;
  }()
), py = /* @__PURE__ */ function() {
  var t = function(e, r) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (n[o] = i[o]);
    }, t(e, r);
  };
  return function(e, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    t(e, r);
    function n() {
      this.constructor = e;
    }
    e.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}(), fy = (
  /** @class */
  function(t) {
    py(e, t);
    function e(r, n, i) {
      var o = t.call(this, r, n, i) || this;
      return o._config.enabled && o.enable(), o;
    }
    return e;
  }(ly)
);
function hy(t, e, r) {
  var n, i;
  try {
    i = t();
  } catch (o) {
    n = o;
  } finally {
    return e(n, i), i;
  }
}
function dy(t) {
  return typeof t == "function" && typeof t.__original == "function" && typeof t.__unwrap == "function" && t.__wrapped === !0;
}
var Pn = typeof globalThis == "object" ? globalThis : typeof self == "object" ? self : typeof window == "object" ? window : typeof global == "object" ? global : {}, wi = performance, vy = "http.method", my = "http.url", yy = "http.host", _y = "http.scheme", gy = "http.status_code", Ey = "http.user_agent", Ty = "http.request_content_length_uncompressed", by = vy, Oy = my, Sy = yy, wy = _y, Ay = gy, Ly = Ey, Ry = Ty, Ny = 9, Cy = 6, xy = Math.pow(10, Cy), Yo = Math.pow(10, Ny);
function Ai(t) {
  var e = t / 1e3, r = Math.trunc(e), n = Math.round(t % 1e3 * xy);
  return [r, n];
}
function Py() {
  var t = wi.timeOrigin;
  if (typeof t != "number") {
    var e = wi;
    t = e.timing && e.timing.fetchStart;
  }
  return t;
}
function Jo(t) {
  var e = Ai(Py()), r = Ai(wi.now());
  return Iy(e, r);
}
function Iy(t, e) {
  var r = [t[0] + e[0], t[1] + e[1]];
  return r[1] >= Yo && (r[1] -= Yo, r[0] += 1), r;
}
var My = function(t) {
  var e = typeof Symbol == "function" && Symbol.iterator, r = e && t[e], n = 0;
  if (r) return r.call(t);
  if (t && typeof t.length == "number") return {
    next: function() {
      return t && n >= t.length && (t = void 0), { value: t && t[n++], done: !t };
    }
  };
  throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
function ky(t, e) {
  return typeof e == "string" ? t === e : !!t.match(e);
}
function Dy(t, e) {
  var r, n;
  if (!e)
    return !1;
  try {
    for (var i = My(e), o = i.next(); !o.done; o = i.next()) {
      var a = o.value;
      if (ky(t, a))
        return !0;
    }
  } catch (u) {
    r = { error: u };
  } finally {
    try {
      o && !o.done && (n = i.return) && n.call(i);
    } finally {
      if (r) throw r.error;
    }
  }
  return !1;
}
var Mr;
(function(t) {
  t.COMPONENT = "component", t.HTTP_ERROR_NAME = "http.error_name", t.HTTP_STATUS_TEXT = "http.status_text";
})(Mr || (Mr = {}));
var Uy = function(t, e, r, n) {
  function i(o) {
    return o instanceof r ? o : new r(function(a) {
      a(o);
    });
  }
  return new (r || (r = Promise))(function(o, a) {
    function u(l) {
      try {
        s(n.next(l));
      } catch (p) {
        a(p);
      }
    }
    function c(l) {
      try {
        s(n.throw(l));
      } catch (p) {
        a(p);
      }
    }
    function s(l) {
      l.done ? o(l.value) : i(l.value).then(u, c);
    }
    s((n = n.apply(t, [])).next());
  });
}, jy = function(t, e) {
  var r = { label: 0, sent: function() {
    if (o[0] & 1) throw o[1];
    return o[1];
  }, trys: [], ops: [] }, n, i, o, a;
  return a = { next: u(0), throw: u(1), return: u(2) }, typeof Symbol == "function" && (a[Symbol.iterator] = function() {
    return this;
  }), a;
  function u(s) {
    return function(l) {
      return c([s, l]);
    };
  }
  function c(s) {
    if (n) throw new TypeError("Generator is already executing.");
    for (; r; ) try {
      if (n = 1, i && (o = s[0] & 2 ? i.return : s[0] ? i.throw || ((o = i.return) && o.call(i), 0) : i.next) && !(o = o.call(i, s[1])).done) return o;
      switch (i = 0, o && (s = [s[0] & 2, o.value]), s[0]) {
        case 0:
        case 1:
          o = s;
          break;
        case 4:
          return r.label++, { value: s[1], done: !1 };
        case 5:
          r.label++, i = s[1], s = [0];
          continue;
        case 7:
          s = r.ops.pop(), r.trys.pop();
          continue;
        default:
          if (o = r.trys, !(o = o.length > 0 && o[o.length - 1]) && (s[0] === 6 || s[0] === 2)) {
            r = 0;
            continue;
          }
          if (s[0] === 3 && (!o || s[1] > o[0] && s[1] < o[3])) {
            r.label = s[1];
            break;
          }
          if (s[0] === 6 && r.label < o[1]) {
            r.label = o[1], o = s;
            break;
          }
          if (o && r.label < o[2]) {
            r.label = o[2], r.ops.push(s);
            break;
          }
          o[2] && r.ops.pop(), r.trys.pop();
          continue;
      }
      s = e.call(t, r);
    } catch (l) {
      s = [6, l], i = 0;
    } finally {
      n = o = 0;
    }
    if (s[0] & 5) throw s[1];
    return { value: s[0] ? s[1] : void 0, done: !0 };
  }
}, By = function(t) {
  var e = typeof Symbol == "function" && Symbol.iterator, r = e && t[e], n = 0;
  if (r) return r.call(t);
  if (t && typeof t.length == "number") return {
    next: function() {
      return t && n >= t.length && (t = void 0), { value: t && t[n++], done: !t };
    }
  };
  throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.");
}, $y = function(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = n.next()).done; ) o.push(i.value);
  } catch (u) {
    a = { error: u };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, _u = T.createComponentLogger({
  namespace: "@opentelemetry/opentelemetry-instrumentation-fetch/utils"
});
function Fy() {
  for (var t = [], e = 0; e < arguments.length; e++)
    t[e] = arguments[e];
  if (t[0] instanceof URL || typeof t[0] == "string") {
    var r = t[1];
    if (!(r != null && r.body))
      return Promise.resolve();
    if (r.body instanceof ReadableStream) {
      var n = Vy(r.body), i = n.body, o = n.length;
      return r.body = i, o;
    } else
      return Promise.resolve(Gy(r.body));
  } else {
    var a = t[0];
    return a != null && a.body ? a.clone().text().then(function(u) {
      return Li(u);
    }) : Promise.resolve();
  }
}
function Vy(t) {
  if (!t.pipeThrough)
    return _u.warn("Platform has ReadableStream but not pipeThrough!"), {
      body: t,
      length: Promise.resolve(void 0)
    };
  var e = 0, r, n = new Promise(function(o) {
    r = o;
  }), i = new TransformStream({
    start: function() {
    },
    transform: function(o, a) {
      return Uy(this, void 0, void 0, function() {
        var u;
        return jy(this, function(c) {
          switch (c.label) {
            case 0:
              return [4, o];
            case 1:
              return u = c.sent(), e += u.byteLength, a.enqueue(o), [
                2
                /*return*/
              ];
          }
        });
      });
    },
    flush: function() {
      r(e);
    }
  });
  return {
    body: t.pipeThrough(i),
    length: n
  };
}
function Gy(t) {
  if (typeof Document < "u" && t instanceof Document)
    return new XMLSerializer().serializeToString(document).length;
  if (t instanceof Blob)
    return t.size;
  if (t.byteLength !== void 0)
    return t.byteLength;
  if (t instanceof FormData)
    return zy(t);
  if (t instanceof URLSearchParams)
    return Li(t.toString());
  if (typeof t == "string")
    return Li(t);
  _u.warn("unknown body type");
}
var Hy = new TextEncoder();
function Li(t) {
  return Hy.encode(t).byteLength;
}
function zy(t) {
  var e, r, n = 0;
  try {
    for (var i = By(t.entries()), o = i.next(); !o.done; o = i.next()) {
      var a = $y(o.value, 2), u = a[0], c = a[1];
      n += u.length, c instanceof Blob ? n += c.size : n += c.length;
    }
  } catch (s) {
    e = { error: s };
  } finally {
    try {
      o && !o.done && (r = i.return) && r.call(i);
    } finally {
      if (e) throw e.error;
    }
  }
  return n;
}
var Qo = "0.57.2", Xy = /* @__PURE__ */ function() {
  var t = function(e, r) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (n[o] = i[o]);
    }, t(e, r);
  };
  return function(e, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    t(e, r);
    function n() {
      this.constructor = e;
    }
    e.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}(), qy = function(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, o = [], a;
  try {
    for (; !(i = n.next()).done; ) o.push(i.value);
  } catch (u) {
    a = { error: u };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Ky = function(t, e, r) {
  if (arguments.length === 2) for (var n = 0, i = e.length, o; n < i; n++)
    (o || !(n in e)) && (o || (o = Array.prototype.slice.call(e, 0, n)), o[n] = e[n]);
  return t.concat(o || Array.prototype.slice.call(e));
}, In, Wy = 300, Zo = typeof process == "object" && ((In = process.release) === null || In === void 0 ? void 0 : In.name) === "node", Yy = (
  /** @class */
  function(t) {
    Xy(e, t);
    function e(r) {
      r === void 0 && (r = {});
      var n = t.call(this, "@opentelemetry/instrumentation-fetch", Qo, r) || this;
      return n.component = "fetch", n.version = Qo, n.moduleName = n.component, n._usedResources = /* @__PURE__ */ new WeakSet(), n._tasksCount = 0, n;
    }
    return e.prototype.init = function() {
    }, e.prototype._addChildSpan = function(r, n) {
      var i = this.tracer.startSpan("CORS Preflight", {
        startTime: n[S.FETCH_START]
      }, x.setSpan(N.active(), r));
      le(i, n, this.getConfig().ignoreNetworkEvents), i.end(n[S.RESPONSE_END]);
    }, e.prototype._addFinalSpanAttributes = function(r, n) {
      var i = _t(n.url);
      r.setAttribute(Ay, n.status), n.statusText != null && r.setAttribute(Mr.HTTP_STATUS_TEXT, n.statusText), r.setAttribute(Sy, i.host), r.setAttribute(wy, i.protocol.replace(":", "")), typeof navigator < "u" && r.setAttribute(Ly, navigator.userAgent);
    }, e.prototype._addHeaders = function(r, n) {
      if (!yu(n, this.getConfig().propagateTraceHeaderCorsUrls)) {
        var i = {};
        J.inject(N.active(), i), Object.keys(i).length > 0 && this._diag.debug("headers inject skipped due to CORS policy");
        return;
      }
      if (r instanceof Request)
        J.inject(N.active(), r.headers, {
          set: function(o, a, u) {
            return o.set(a, typeof u == "string" ? u : String(u));
          }
        });
      else if (r.headers instanceof Headers)
        J.inject(N.active(), r.headers, {
          set: function(o, a, u) {
            return o.set(a, typeof u == "string" ? u : String(u));
          }
        });
      else if (r.headers instanceof Map)
        J.inject(N.active(), r.headers, {
          set: function(o, a, u) {
            return o.set(a, typeof u == "string" ? u : String(u));
          }
        });
      else {
        var i = {};
        J.inject(N.active(), i), r.headers = Object.assign({}, i, r.headers || {});
      }
    }, e.prototype._clearResources = function() {
      this._tasksCount === 0 && this.getConfig().clearTimingResources && (performance.clearResourceTimings(), this._usedResources = /* @__PURE__ */ new WeakSet());
    }, e.prototype._createSpan = function(r, n) {
      var i;
      if (n === void 0 && (n = {}), Dy(r, this.getConfig().ignoreUrls)) {
        this._diag.debug("ignoring span as url matches ignored url");
        return;
      }
      var o = (n.method || "GET").toUpperCase(), a = "HTTP " + o;
      return this.tracer.startSpan(a, {
        kind: De.CLIENT,
        attributes: (i = {}, i[Mr.COMPONENT] = this.moduleName, i[by] = o, i[Oy] = r, i)
      });
    }, e.prototype._findResourceAndAddNetworkEvents = function(r, n, i) {
      var o = n.entries;
      if (!o.length) {
        if (!performance.getEntriesByType)
          return;
        o = performance.getEntriesByType("resource");
      }
      var a = vu(n.spanUrl, n.startTime, i, o, this._usedResources, "fetch");
      if (a.mainRequest) {
        var u = a.mainRequest;
        this._markResourceAsUsed(u);
        var c = a.corsPreFlightRequest;
        c && (this._addChildSpan(r, c), this._markResourceAsUsed(c)), le(r, u, this.getConfig().ignoreNetworkEvents);
      }
    }, e.prototype._markResourceAsUsed = function(r) {
      this._usedResources.add(r);
    }, e.prototype._endSpan = function(r, n, i) {
      var o = this, a = Ai(Date.now()), u = Jo();
      this._addFinalSpanAttributes(r, i), setTimeout(function() {
        var c;
        (c = n.observer) === null || c === void 0 || c.disconnect(), o._findResourceAndAddNetworkEvents(r, n, u), o._tasksCount--, o._clearResources(), r.end(a);
      }, Wy);
    }, e.prototype._patchConstructor = function() {
      var r = this;
      return function(n) {
        var i = r;
        return function() {
          for (var o = [], a = 0; a < arguments.length; a++)
            o[a] = arguments[a];
          var u = this, c = _t(o[0] instanceof Request ? o[0].url : String(o[0])).href, s = o[0] instanceof Request ? o[0] : o[1] || {}, l = i._createSpan(c, s);
          if (!l)
            return n.apply(this, o);
          var p = i._prepareSpanData(c);
          i.getConfig().measureRequestSize && Fy.apply(void 0, Ky([], qy(o), !1)).then(function(_) {
            _ && l.setAttribute(Ry, _);
          }).catch(function(_) {
            i._diag.warn("getFetchBodyLength", _);
          });
          function f(_, E) {
            i._applyAttributesAfterFetch(_, s, E), i._endSpan(_, p, {
              status: E.status || 0,
              statusText: E.message,
              url: c
            });
          }
          function m(_, E) {
            i._applyAttributesAfterFetch(_, s, E), E.status >= 200 && E.status < 400 ? i._endSpan(_, p, E) : i._endSpan(_, p, {
              status: E.status,
              statusText: E.statusText,
              url: c
            });
          }
          function v(_, E, L) {
            try {
              var U = L.clone(), D = L.clone(), F = U.body;
              if (F) {
                var j = F.getReader(), tt = function() {
                  j.read().then(function(B) {
                    var dt = B.done;
                    dt ? m(_, D) : tt();
                  }, function(B) {
                    f(_, B);
                  });
                };
                tt();
              } else
                m(_, L);
            } finally {
              E(L);
            }
          }
          function y(_, E, L) {
            try {
              f(_, L);
            } finally {
              E(L);
            }
          }
          return new Promise(function(_, E) {
            return N.with(x.setSpan(N.active(), l), function() {
              return i._addHeaders(s, c), i._tasksCount++, n.apply(u, s instanceof Request ? [s] : [c, s]).then(v.bind(u, l, _), y.bind(u, l, E));
            });
          });
        };
      };
    }, e.prototype._applyAttributesAfterFetch = function(r, n, i) {
      var o = this, a = this.getConfig().applyCustomAttributesOnSpan;
      a && hy(function() {
        return a(r, n, i);
      }, function(u) {
        u && o._diag.error("applyCustomAttributesOnSpan", u);
      });
    }, e.prototype._prepareSpanData = function(r) {
      var n = Jo(), i = [];
      if (typeof PerformanceObserver != "function")
        return { entries: i, startTime: n, spanUrl: r };
      var o = new PerformanceObserver(function(a) {
        var u = a.getEntries();
        u.forEach(function(c) {
          c.initiatorType === "fetch" && c.name === r && i.push(c);
        });
      });
      return o.observe({
        entryTypes: ["resource"]
      }), { entries: i, observer: o, startTime: n, spanUrl: r };
    }, e.prototype.enable = function() {
      if (Zo) {
        this._diag.warn("this instrumentation is intended for web usage only, it does not instrument Node.js's fetch()");
        return;
      }
      dy(fetch) && (this._unwrap(Pn, "fetch"), this._diag.debug("removing previous patch for constructor")), this._wrap(Pn, "fetch", this._patchConstructor());
    }, e.prototype.disable = function() {
      Zo || (this._unwrap(Pn, "fetch"), this._usedResources = /* @__PURE__ */ new WeakSet());
    }, e;
  }(fy)
), Ri = function() {
  return Ri = Object.assign || function(t) {
    for (var e, r = 1, n = arguments.length; r < n; r++) {
      e = arguments[r];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Ri.apply(this, arguments);
}, Jy = (
  /** @class */
  function() {
    function t(e, r, n) {
      this.instrumentationName = e, this.instrumentationVersion = r, this._config = {}, this._wrap = q.wrap, this._unwrap = q.unwrap, this._massWrap = q.massWrap, this._massUnwrap = q.massUnwrap, this.setConfig(n), this._diag = T.createComponentLogger({
        namespace: e
      }), this._tracer = x.getTracer(e, r), this._meter = he.getMeter(e, r), this._logger = Xe.getLogger(e, r), this._updateMetricInstruments();
    }
    return Object.defineProperty(t.prototype, "meter", {
      /* Returns meter */
      get: function() {
        return this._meter;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.setMeterProvider = function(e) {
      this._meter = e.getMeter(this.instrumentationName, this.instrumentationVersion), this._updateMetricInstruments();
    }, Object.defineProperty(t.prototype, "logger", {
      /* Returns logger */
      get: function() {
        return this._logger;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.setLoggerProvider = function(e) {
      this._logger = e.getLogger(this.instrumentationName, this.instrumentationVersion);
    }, t.prototype.getModuleDefinitions = function() {
      var e, r = (e = this.init()) !== null && e !== void 0 ? e : [];
      return Array.isArray(r) ? r : [r];
    }, t.prototype._updateMetricInstruments = function() {
    }, t.prototype.getConfig = function() {
      return this._config;
    }, t.prototype.setConfig = function(e) {
      this._config = Ri({ enabled: !0 }, e);
    }, t.prototype.setTracerProvider = function(e) {
      this._tracer = e.getTracer(this.instrumentationName, this.instrumentationVersion);
    }, Object.defineProperty(t.prototype, "tracer", {
      /* Returns tracer */
      get: function() {
        return this._tracer;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype._runSpanCustomizationHook = function(e, r, n, i) {
      if (e)
        try {
          e(n, i);
        } catch (o) {
          this._diag.error("Error running span customization hook due to exception in handler", { triggerName: r }, o);
        }
    }, t;
  }()
), Qy = /* @__PURE__ */ function() {
  var t = function(e, r) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (n[o] = i[o]);
    }, t(e, r);
  };
  return function(e, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    t(e, r);
    function n() {
      this.constructor = e;
    }
    e.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}(), Zy = (
  /** @class */
  function(t) {
    Qy(e, t);
    function e(r, n, i) {
      var o = t.call(this, r, n, i) || this;
      return o._config.enabled && o.enable(), o;
    }
    return e;
  }(Jy)
);
function t_(t, e, r) {
  var n, i;
  try {
    i = t();
  } catch (o) {
    n = o;
  } finally {
    return e(n, i), i;
  }
}
function ta(t) {
  return typeof t == "function" && typeof t.__original == "function" && typeof t.__unwrap == "function" && t.__wrapped === !0;
}
var Be = performance, e_ = "http.method", r_ = "http.url", n_ = "http.host", i_ = "http.scheme", o_ = "http.status_code", a_ = "http.user_agent", s_ = "http.request_content_length_uncompressed", u_ = e_, c_ = r_, l_ = n_, p_ = i_, f_ = o_, h_ = a_, d_ = s_, v_ = 9, m_ = 6, y_ = Math.pow(10, m_), ea = Math.pow(10, v_);
function ra(t) {
  var e = t / 1e3, r = Math.trunc(e), n = Math.round(t % 1e3 * y_);
  return [r, n];
}
function __() {
  var t = Be.timeOrigin;
  if (typeof t != "number") {
    var e = Be;
    t = e.timing && e.timing.fetchStart;
  }
  return t;
}
function na(t) {
  var e = ra(__()), r = ra(Be.now());
  return g_(e, r);
}
function g_(t, e) {
  var r = [t[0] + e[0], t[1] + e[1]];
  return r[1] >= ea && (r[1] -= ea, r[0] += 1), r;
}
var E_ = function(t) {
  var e = typeof Symbol == "function" && Symbol.iterator, r = e && t[e], n = 0;
  if (r) return r.call(t);
  if (t && typeof t.length == "number") return {
    next: function() {
      return t && n >= t.length && (t = void 0), { value: t && t[n++], done: !t };
    }
  };
  throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
function T_(t, e) {
  return typeof e == "string" ? t === e : !!t.match(e);
}
function b_(t, e) {
  var r, n;
  if (!e)
    return !1;
  try {
    for (var i = E_(e), o = i.next(); !o.done; o = i.next()) {
      var a = o.value;
      if (T_(t, a))
        return !0;
    }
  } catch (u) {
    r = { error: u };
  } finally {
    try {
      o && !o.done && (n = i.return) && n.call(i);
    } finally {
      if (r) throw r.error;
    }
  }
  return !1;
}
var yt;
(function(t) {
  t.METHOD_OPEN = "open", t.METHOD_SEND = "send", t.EVENT_ABORT = "abort", t.EVENT_ERROR = "error", t.EVENT_LOAD = "loaded", t.EVENT_TIMEOUT = "timeout";
})(yt || (yt = {}));
var O_ = function(t) {
  var e = typeof Symbol == "function" && Symbol.iterator, r = e && t[e], n = 0;
  if (r) return r.call(t);
  if (t && typeof t.length == "number") return {
    next: function() {
      return t && n >= t.length && (t = void 0), { value: t && t[n++], done: !t };
    }
  };
  throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.");
}, S_ = function(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = n.next()).done; ) o.push(i.value);
  } catch (u) {
    a = { error: u };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, w_ = T.createComponentLogger({
  namespace: "@opentelemetry/opentelemetry-instrumentation-xml-http-request/utils"
});
function A_(t) {
  if (typeof Document < "u" && t instanceof Document)
    return new XMLSerializer().serializeToString(document).length;
  if (t instanceof Blob)
    return t.size;
  if (t.byteLength !== void 0)
    return t.byteLength;
  if (t instanceof FormData)
    return R_(t);
  if (t instanceof URLSearchParams)
    return ia(t.toString());
  if (typeof t == "string")
    return ia(t);
  w_.warn("unknown body type");
}
var L_ = new TextEncoder();
function ia(t) {
  return L_.encode(t).byteLength;
}
function R_(t) {
  var e, r, n = 0;
  try {
    for (var i = O_(t.entries()), o = i.next(); !o.done; o = i.next()) {
      var a = S_(o.value, 2), u = a[0], c = a[1];
      n += u.length, c instanceof Blob ? n += c.size : n += c.length;
    }
  } catch (s) {
    e = { error: s };
  } finally {
    try {
      o && !o.done && (r = i.return) && r.call(i);
    } finally {
      if (e) throw e.error;
    }
  }
  return n;
}
var oa = "0.57.2", Ni;
(function(t) {
  t.HTTP_STATUS_TEXT = "http.status_text";
})(Ni || (Ni = {}));
var N_ = /* @__PURE__ */ function() {
  var t = function(e, r) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (n[o] = i[o]);
    }, t(e, r);
  };
  return function(e, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    t(e, r);
    function n() {
      this.constructor = e;
    }
    e.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}(), C_ = 300, x_ = (
  /** @class */
  function(t) {
    N_(e, t);
    function e(r) {
      r === void 0 && (r = {});
      var n = t.call(this, "@opentelemetry/instrumentation-xml-http-request", oa, r) || this;
      return n.component = "xml-http-request", n.version = oa, n.moduleName = n.component, n._tasksCount = 0, n._xhrMem = /* @__PURE__ */ new WeakMap(), n._usedResources = /* @__PURE__ */ new WeakSet(), n;
    }
    return e.prototype.init = function() {
    }, e.prototype._addHeaders = function(r, n) {
      var i = _t(n).href;
      if (!yu(i, this.getConfig().propagateTraceHeaderCorsUrls)) {
        var o = {};
        J.inject(N.active(), o), Object.keys(o).length > 0 && this._diag.debug("headers inject skipped due to CORS policy");
        return;
      }
      var a = {};
      J.inject(N.active(), a), Object.keys(a).forEach(function(u) {
        r.setRequestHeader(u, String(a[u]));
      });
    }, e.prototype._addChildSpan = function(r, n) {
      var i = this;
      N.with(x.setSpan(N.active(), r), function() {
        var o = i.tracer.startSpan("CORS Preflight", {
          startTime: n[S.FETCH_START]
        });
        le(o, n, i.getConfig().ignoreNetworkEvents), o.end(n[S.RESPONSE_END]);
      });
    }, e.prototype._addFinalSpanAttributes = function(r, n, i) {
      if (typeof i == "string") {
        var o = _t(i);
        n.status !== void 0 && r.setAttribute(f_, n.status), n.statusText !== void 0 && r.setAttribute(Ni.HTTP_STATUS_TEXT, n.statusText), r.setAttribute(l_, o.host), r.setAttribute(p_, o.protocol.replace(":", "")), r.setAttribute(h_, navigator.userAgent);
      }
    }, e.prototype._applyAttributesAfterXHR = function(r, n) {
      var i = this, o = this.getConfig().applyCustomAttributesOnSpan;
      typeof o == "function" && t_(function() {
        return o(r, n);
      }, function(a) {
        a && i._diag.error("applyCustomAttributesOnSpan", a);
      });
    }, e.prototype._addResourceObserver = function(r, n) {
      var i = this._xhrMem.get(r);
      !i || typeof PerformanceObserver != "function" || typeof PerformanceResourceTiming != "function" || (i.createdResources = {
        observer: new PerformanceObserver(function(o) {
          var a = o.getEntries(), u = _t(n);
          a.forEach(function(c) {
            c.initiatorType === "xmlhttprequest" && c.name === u.href && i.createdResources && i.createdResources.entries.push(c);
          });
        }),
        entries: []
      }, i.createdResources.observer.observe({
        entryTypes: ["resource"]
      }));
    }, e.prototype._clearResources = function() {
      this._tasksCount === 0 && this.getConfig().clearTimingResources && (Be.clearResourceTimings(), this._xhrMem = /* @__PURE__ */ new WeakMap(), this._usedResources = /* @__PURE__ */ new WeakSet());
    }, e.prototype._findResourceAndAddNetworkEvents = function(r, n, i, o, a) {
      if (!(!i || !o || !a || !r.createdResources)) {
        var u = r.createdResources.entries;
        (!u || !u.length) && (u = Be.getEntriesByType("resource"));
        var c = vu(_t(i).href, o, a, u, this._usedResources);
        if (c.mainRequest) {
          var s = c.mainRequest;
          this._markResourceAsUsed(s);
          var l = c.corsPreFlightRequest;
          l && (this._addChildSpan(n, l), this._markResourceAsUsed(l)), le(n, s, this.getConfig().ignoreNetworkEvents);
        }
      }
    }, e.prototype._cleanPreviousSpanInformation = function(r) {
      var n = this._xhrMem.get(r);
      if (n) {
        var i = n.callbackToRemoveEvents;
        i && i(), this._xhrMem.delete(r);
      }
    }, e.prototype._createSpan = function(r, n, i) {
      var o;
      if (b_(n, this.getConfig().ignoreUrls)) {
        this._diag.debug("ignoring span as url matches ignored url");
        return;
      }
      var a = i.toUpperCase(), u = this.tracer.startSpan(a, {
        kind: De.CLIENT,
        attributes: (o = {}, o[u_] = i, o[c_] = _t(n).toString(), o)
      });
      return u.addEvent(yt.METHOD_OPEN), this._cleanPreviousSpanInformation(r), this._xhrMem.set(r, {
        span: u,
        spanUrl: n
      }), u;
    }, e.prototype._markResourceAsUsed = function(r) {
      this._usedResources.add(r);
    }, e.prototype._patchOpen = function() {
      var r = this;
      return function(n) {
        var i = r;
        return function() {
          for (var o = [], a = 0; a < arguments.length; a++)
            o[a] = arguments[a];
          var u = o[0], c = o[1];
          return i._createSpan(this, c, u), n.apply(this, o);
        };
      };
    }, e.prototype._patchSend = function() {
      var r = this;
      function n(l, p, f, m) {
        var v = p.callbackToRemoveEvents;
        typeof v == "function" && v();
        var y = p.span, _ = p.spanUrl, E = p.sendStartTime;
        y && (r._findResourceAndAddNetworkEvents(p, y, _, E, f), y.addEvent(l, m), r._addFinalSpanAttributes(y, p, _), y.end(m), r._tasksCount--), r._clearResources();
      }
      function i(l, p) {
        var f = r._xhrMem.get(p);
        if (f) {
          f.status = p.status, f.statusText = p.statusText, r._xhrMem.delete(p), f.span && r._applyAttributesAfterXHR(f.span, p);
          var m = na(), v = Date.now();
          setTimeout(function() {
            n(l, f, m, v);
          }, C_);
        }
      }
      function o() {
        i(yt.EVENT_ERROR, this);
      }
      function a() {
        i(yt.EVENT_ABORT, this);
      }
      function u() {
        i(yt.EVENT_TIMEOUT, this);
      }
      function c() {
        this.status < 299 ? i(yt.EVENT_LOAD, this) : i(yt.EVENT_ERROR, this);
      }
      function s(l) {
        l.removeEventListener("abort", a), l.removeEventListener("error", o), l.removeEventListener("load", c), l.removeEventListener("timeout", u);
        var p = r._xhrMem.get(l);
        p && (p.callbackToRemoveEvents = void 0);
      }
      return function(l) {
        return function() {
          for (var p = this, f = [], m = 0; m < arguments.length; m++)
            f[m] = arguments[m];
          var v = r._xhrMem.get(this);
          if (!v)
            return l.apply(this, f);
          var y = v.span, _ = v.spanUrl;
          if (y && _) {
            if (r.getConfig().measureRequestSize && f != null && f[0]) {
              var E = f[0], L = A_(E);
              L !== void 0 && y.setAttribute(d_, L);
            }
            N.with(x.setSpan(N.active(), y), function() {
              r._tasksCount++, v.sendStartTime = na(), y.addEvent(yt.METHOD_SEND), p.addEventListener("abort", a), p.addEventListener("error", o), p.addEventListener("load", c), p.addEventListener("timeout", u), v.callbackToRemoveEvents = function() {
                s(p), v.createdResources && v.createdResources.observer.disconnect();
              }, r._addHeaders(p, _), r._addResourceObserver(p, _);
            });
          }
          return l.apply(this, f);
        };
      };
    }, e.prototype.enable = function() {
      this._diag.debug("applying patch to", this.moduleName, this.version), ta(XMLHttpRequest.prototype.open) && (this._unwrap(XMLHttpRequest.prototype, "open"), this._diag.debug("removing previous patch from method open")), ta(XMLHttpRequest.prototype.send) && (this._unwrap(XMLHttpRequest.prototype, "send"), this._diag.debug("removing previous patch from method send")), this._wrap(XMLHttpRequest.prototype, "open", this._patchOpen()), this._wrap(XMLHttpRequest.prototype, "send", this._patchSend());
    }, e.prototype.disable = function() {
      this._diag.debug("removing patch from", this.moduleName, this.version), this._unwrap(XMLHttpRequest.prototype, "open"), this._unwrap(XMLHttpRequest.prototype, "send"), this._tasksCount = 0, this._xhrMem = /* @__PURE__ */ new WeakMap(), this._usedResources = /* @__PURE__ */ new WeakSet();
    }, e;
  }(Zy)
);
const P_ = (t, e, r) => {
  var n, i;
  const o = P({}, e);
  return r ? ((n = Object.keys(o)) == null || n.forEach((a) => {
    [...r].includes(a?.toLowerCase()) || (o[a] = "[REDACTED]");
  }), o) : ((i = Object.keys(o)) == null || i.forEach((a) => {
    [...I_, ...t].includes(
      a?.toLowerCase()
    ) && (o[a] = "[REDACTED]");
  }), o);
}, I_ = [
  "authorization",
  "cookie",
  "proxy-authorization",
  "token"
], M_ = [
  "https://www.googleapis.com/identitytoolkit",
  "https://securetoken.googleapis.com"
], k_ = new RegExp("sdk\\/evalx\\/[^/]+\\/contexts\\/(?<context>[^/?]*)\\??.*?"), D_ = new RegExp("\\/eval\\/[^/]+\\/(?<context>[^/?]*)\\??.*?");
function U_(t) {
  return !!(t.includes("/sdk/evalx") && t.match(k_) || t.includes("/eval/") && t.match(D_));
}
const j_ = (t) => ["events.ld.catamorphic.com", "events.launchdarkly.com"].some(
  (e) => t.toLocaleLowerCase().includes(e)
), B_ = (t) => U_(t), $_ = (t, e) => e.some(
  (r) => t.toLocaleLowerCase().includes(r)
), F_ = (t, e, r) => !$_(t, e) && !B_(t) && !j_(t), V_ = (t, e, r) => {
  var n;
  if (r.some(
    (a) => t.toLowerCase().includes(a)
  ))
    return !1;
  let i = [];
  e === !0 ? (i = ["localhost", /^\//], (n = window?.location) != null && n.host && i.push(window.location.host)) : e instanceof Array && (i = e);
  let o = !1;
  return i.forEach((a) => {
    t.match(a) && (o = !0);
  }), o;
}, aa = 64 * 1024, G_ = {
  "application/json": 64 * 1024 * 1024,
  // MB
  "text/plain": 64 * 1024 * 1024
  // MB
}, gu = (t, e, r, n) => {
  var i, o, a;
  let u = aa;
  if (n) {
    let c = "";
    typeof n.get == "function" ? c = (i = n.get("content-type")) != null ? i : "" : c = (o = n["content-type"]) != null ? o : "";
    try {
      c = c.split(";")[0];
    } catch {
    }
    u = (a = G_[c]) != null ? a : aa;
  }
  if (t) {
    if (e)
      try {
        const c = JSON.parse(t);
        Array.isArray(c) ? c.forEach((s) => {
          Object.keys(s).forEach((l) => {
            e.includes(
              l.toLocaleLowerCase()
            ) && (s[l] = "[REDACTED]");
          });
        }) : Object.keys(c).forEach((s) => {
          e.includes(s.toLocaleLowerCase()) && (c[s] = "[REDACTED]");
        }), t = JSON.stringify(c);
      } catch {
      }
    if (r)
      try {
        const c = JSON.parse(t);
        Object.keys(c).forEach((s) => {
          r.includes(s.toLocaleLowerCase()) || (c[s] = "[REDACTED]");
        }), t = JSON.stringify(c);
      } catch {
      }
  }
  try {
    t = t.slice(0, u);
  } catch {
  }
  return t;
}, H_ = (t, e, r) => gt(void 0, null, function* () {
  let n;
  try {
    const i = t.clone().body;
    if (i) {
      let o = i.getReader(), a = new TextDecoder(), u, c = "";
      for (; !(u = yield o.read()).done; ) {
        let s = u.value;
        c += a.decode(s);
      }
      n = c, n = gu(
        n,
        r,
        e,
        t.headers
      );
    } else
      n = "";
  } catch (i) {
    n = `Unable to clone response: ${i}`;
  }
  return n;
});
var Eu = (
  /** @class */
  function() {
    function t(e) {
      this._delegate = e;
    }
    return t.prototype.export = function(e, r) {
      this._delegate.export(e, r);
    }, t.prototype.forceFlush = function() {
      return this._delegate.forceFlush();
    }, t.prototype.shutdown = function() {
      return this._delegate.shutdown();
    }, t;
  }()
), z_ = /* @__PURE__ */ function() {
  var t = function(e, r) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (n[o] = i[o]);
    }, t(e, r);
  };
  return function(e, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    t(e, r);
    function n() {
      this.constructor = e;
    }
    e.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}(), sa = (
  /** @class */
  function(t) {
    z_(e, t);
    function e(r, n, i) {
      var o = t.call(this, r) || this;
      return o.name = "OTLPExporterError", o.data = i, o.code = n, o;
    }
    return e;
  }(Error)
);
function X_(t) {
  if (!Number.isNaN(t) && Number.isFinite(t) && t > 0)
    return t;
  throw new Error("Configuration: timeoutMillis is invalid, expected number greater than 0 (actual: '" + t + "')");
}
function q_(t) {
  if (t != null)
    return function() {
      return t;
    };
}
function K_(t, e, r) {
  var n, i, o, a, u, c;
  return {
    timeoutMillis: X_((i = (n = t.timeoutMillis) !== null && n !== void 0 ? n : e.timeoutMillis) !== null && i !== void 0 ? i : r.timeoutMillis),
    concurrencyLimit: (a = (o = t.concurrencyLimit) !== null && o !== void 0 ? o : e.concurrencyLimit) !== null && a !== void 0 ? a : r.concurrencyLimit,
    compression: (c = (u = t.compression) !== null && u !== void 0 ? u : e.compression) !== null && c !== void 0 ? c : r.compression
  };
}
function W_() {
  return {
    timeoutMillis: 1e4,
    concurrencyLimit: 30,
    compression: "none"
  };
}
var Y_ = function(t, e, r, n) {
  function i(o) {
    return o instanceof r ? o : new r(function(a) {
      a(o);
    });
  }
  return new (r || (r = Promise))(function(o, a) {
    function u(l) {
      try {
        s(n.next(l));
      } catch (p) {
        a(p);
      }
    }
    function c(l) {
      try {
        s(n.throw(l));
      } catch (p) {
        a(p);
      }
    }
    function s(l) {
      l.done ? o(l.value) : i(l.value).then(u, c);
    }
    s((n = n.apply(t, [])).next());
  });
}, J_ = function(t, e) {
  var r = { label: 0, sent: function() {
    if (o[0] & 1) throw o[1];
    return o[1];
  }, trys: [], ops: [] }, n, i, o, a;
  return a = { next: u(0), throw: u(1), return: u(2) }, typeof Symbol == "function" && (a[Symbol.iterator] = function() {
    return this;
  }), a;
  function u(s) {
    return function(l) {
      return c([s, l]);
    };
  }
  function c(s) {
    if (n) throw new TypeError("Generator is already executing.");
    for (; r; ) try {
      if (n = 1, i && (o = s[0] & 2 ? i.return : s[0] ? i.throw || ((o = i.return) && o.call(i), 0) : i.next) && !(o = o.call(i, s[1])).done) return o;
      switch (i = 0, o && (s = [s[0] & 2, o.value]), s[0]) {
        case 0:
        case 1:
          o = s;
          break;
        case 4:
          return r.label++, { value: s[1], done: !1 };
        case 5:
          r.label++, i = s[1], s = [0];
          continue;
        case 7:
          s = r.ops.pop(), r.trys.pop();
          continue;
        default:
          if (o = r.trys, !(o = o.length > 0 && o[o.length - 1]) && (s[0] === 6 || s[0] === 2)) {
            r = 0;
            continue;
          }
          if (s[0] === 3 && (!o || s[1] > o[0] && s[1] < o[3])) {
            r.label = s[1];
            break;
          }
          if (s[0] === 6 && r.label < o[1]) {
            r.label = o[1], o = s;
            break;
          }
          if (o && r.label < o[2]) {
            r.label = o[2], r.ops.push(s);
            break;
          }
          o[2] && r.ops.pop(), r.trys.pop();
          continue;
      }
      s = e.call(t, r);
    } catch (l) {
      s = [6, l], i = 0;
    } finally {
      n = o = 0;
    }
    if (s[0] & 5) throw s[1];
    return { value: s[0] ? s[1] : void 0, done: !0 };
  }
}, Q_ = (
  /** @class */
  function() {
    function t(e) {
      this._sendingPromises = [], this._concurrencyLimit = e;
    }
    return t.prototype.pushPromise = function(e) {
      var r = this;
      if (this.hasReachedLimit())
        throw new Error("Concurrency Limit reached");
      this._sendingPromises.push(e);
      var n = function() {
        var i = r._sendingPromises.indexOf(e);
        r._sendingPromises.splice(i, 1);
      };
      e.then(n, n);
    }, t.prototype.hasReachedLimit = function() {
      return this._sendingPromises.length >= this._concurrencyLimit;
    }, t.prototype.awaitAll = function() {
      return Y_(this, void 0, void 0, function() {
        return J_(this, function(e) {
          switch (e.label) {
            case 0:
              return [4, Promise.all(this._sendingPromises)];
            case 1:
              return e.sent(), [
                2
                /*return*/
              ];
          }
        });
      });
    }, t;
  }()
);
function Z_(t) {
  return new Q_(t.concurrencyLimit);
}
function tg(t) {
  return Object.prototype.hasOwnProperty.call(t, "partialSuccess");
}
function eg() {
  return {
    handleResponse: function(t) {
      t == null || !tg(t) || t.partialSuccess == null || Object.keys(t.partialSuccess).length === 0 || T.warn("Received Partial Success response:", JSON.stringify(t.partialSuccess));
    }
  };
}
var rg = function(t, e, r, n) {
  function i(o) {
    return o instanceof r ? o : new r(function(a) {
      a(o);
    });
  }
  return new (r || (r = Promise))(function(o, a) {
    function u(l) {
      try {
        s(n.next(l));
      } catch (p) {
        a(p);
      }
    }
    function c(l) {
      try {
        s(n.throw(l));
      } catch (p) {
        a(p);
      }
    }
    function s(l) {
      l.done ? o(l.value) : i(l.value).then(u, c);
    }
    s((n = n.apply(t, [])).next());
  });
}, ng = function(t, e) {
  var r = { label: 0, sent: function() {
    if (o[0] & 1) throw o[1];
    return o[1];
  }, trys: [], ops: [] }, n, i, o, a;
  return a = { next: u(0), throw: u(1), return: u(2) }, typeof Symbol == "function" && (a[Symbol.iterator] = function() {
    return this;
  }), a;
  function u(s) {
    return function(l) {
      return c([s, l]);
    };
  }
  function c(s) {
    if (n) throw new TypeError("Generator is already executing.");
    for (; r; ) try {
      if (n = 1, i && (o = s[0] & 2 ? i.return : s[0] ? i.throw || ((o = i.return) && o.call(i), 0) : i.next) && !(o = o.call(i, s[1])).done) return o;
      switch (i = 0, o && (s = [s[0] & 2, o.value]), s[0]) {
        case 0:
        case 1:
          o = s;
          break;
        case 4:
          return r.label++, { value: s[1], done: !1 };
        case 5:
          r.label++, i = s[1], s = [0];
          continue;
        case 7:
          s = r.ops.pop(), r.trys.pop();
          continue;
        default:
          if (o = r.trys, !(o = o.length > 0 && o[o.length - 1]) && (s[0] === 6 || s[0] === 2)) {
            r = 0;
            continue;
          }
          if (s[0] === 3 && (!o || s[1] > o[0] && s[1] < o[3])) {
            r.label = s[1];
            break;
          }
          if (s[0] === 6 && r.label < o[1]) {
            r.label = o[1], o = s;
            break;
          }
          if (o && r.label < o[2]) {
            r.label = o[2], r.ops.push(s);
            break;
          }
          o[2] && r.ops.pop(), r.trys.pop();
          continue;
      }
      s = e.call(t, r);
    } catch (l) {
      s = [6, l], i = 0;
    } finally {
      n = o = 0;
    }
    if (s[0] & 5) throw s[1];
    return { value: s[0] ? s[1] : void 0, done: !0 };
  }
}, ig = (
  /** @class */
  function() {
    function t(e, r, n, i, o) {
      this._transport = e, this._serializer = r, this._responseHandler = n, this._promiseQueue = i, this._timeout = o, this._diagLogger = T.createComponentLogger({
        namespace: "OTLPExportDelegate"
      });
    }
    return t.prototype.export = function(e, r) {
      var n = this;
      if (this._diagLogger.debug("items to be sent", e), this._promiseQueue.hasReachedLimit()) {
        r({
          code: Y.FAILED,
          error: new Error("Concurrent export limit reached")
        });
        return;
      }
      var i = this._serializer.serializeRequest(e);
      if (i == null) {
        r({
          code: Y.FAILED,
          error: new Error("Nothing to send")
        });
        return;
      }
      this._promiseQueue.pushPromise(this._transport.send(i, this._timeout).then(function(o) {
        if (o.status === "success") {
          if (o.data != null)
            try {
              n._responseHandler.handleResponse(n._serializer.deserializeResponse(o.data));
            } catch (a) {
              n._diagLogger.warn("Export succeeded but could not deserialize response - is the response specification compliant?", a, o.data);
            }
          r({
            code: Y.SUCCESS
          });
          return;
        } else if (o.status === "failure" && o.error) {
          r({
            code: Y.FAILED,
            error: o.error
          });
          return;
        } else o.status === "retryable" ? r({
          code: Y.FAILED,
          error: new sa("Export failed with retryable status")
        }) : r({
          code: Y.FAILED,
          error: new sa("Export failed with unknown error")
        });
      }, function(o) {
        return r({
          code: Y.FAILED,
          error: o
        });
      }));
    }, t.prototype.forceFlush = function() {
      return this._promiseQueue.awaitAll();
    }, t.prototype.shutdown = function() {
      return rg(this, void 0, void 0, function() {
        return ng(this, function(e) {
          switch (e.label) {
            case 0:
              return this._diagLogger.debug("shutdown started"), [4, this.forceFlush()];
            case 1:
              return e.sent(), this._transport.shutdown(), [
                2
                /*return*/
              ];
          }
        });
      });
    }, t;
  }()
);
function og(t, e) {
  return new ig(t.transport, t.serializer, eg(), t.promiseHandler, e.timeout);
}
function Tu(t, e, r) {
  return og({
    transport: r,
    serializer: e,
    promiseHandler: Z_(t)
  }, { timeout: t.timeoutMillis });
}
function ua(t) {
  return t >= 48 && t <= 57 ? t - 48 : t >= 97 && t <= 102 ? t - 87 : t - 55;
}
function Zi(t) {
  for (var e = new Uint8Array(t.length / 2), r = 0, n = 0; n < t.length; n += 2) {
    var i = ua(t.charCodeAt(n)), o = ua(t.charCodeAt(n + 1));
    e[r++] = i << 4 | o;
  }
  return e;
}
var ag = 9, sg = Math.pow(10, ag);
function ug(t) {
  return t[0] * sg + t[1];
}
function bu(t) {
  var e = BigInt(1e9);
  return BigInt(t[0]) * e + BigInt(t[1]);
}
function cg(t) {
  var e = Number(BigInt.asUintN(32, t)), r = Number(BigInt.asUintN(32, t >> BigInt(32)));
  return { low: e, high: r };
}
function Ou(t) {
  var e = bu(t);
  return cg(e);
}
function lg(t) {
  var e = bu(t);
  return e.toString();
}
var pg = typeof BigInt < "u" ? lg : ug;
function ca(t) {
  return t;
}
function Su(t) {
  if (t !== void 0)
    return Zi(t);
}
var fg = {
  encodeHrTime: Ou,
  encodeSpanContext: Zi,
  encodeOptionalSpanContext: Su
};
function wu(t) {
  var e, r;
  if (t === void 0)
    return fg;
  var n = (e = t.useLongBits) !== null && e !== void 0 ? e : !0, i = (r = t.useHex) !== null && r !== void 0 ? r : !1;
  return {
    encodeHrTime: n ? Ou : pg,
    encodeSpanContext: i ? ca : Zi,
    encodeOptionalSpanContext: i ? ca : Su
  };
}
var hg = function(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = n.next()).done; ) o.push(i.value);
  } catch (u) {
    a = { error: u };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
};
function Au(t) {
  return {
    attributes: Ht(t.attributes),
    droppedAttributesCount: 0
  };
}
function Lu(t) {
  return {
    name: t.name,
    version: t.version
  };
}
function Ht(t) {
  return Object.keys(t).map(function(e) {
    return Ru(e, t[e]);
  });
}
function Ru(t, e) {
  return {
    key: t,
    value: Nu(e)
  };
}
function Nu(t) {
  var e = typeof t;
  return e === "string" ? { stringValue: t } : e === "number" ? Number.isInteger(t) ? { intValue: t } : { doubleValue: t } : e === "boolean" ? { boolValue: t } : t instanceof Uint8Array ? { bytesValue: t } : Array.isArray(t) ? { arrayValue: { values: t.map(Nu) } } : e === "object" && t != null ? {
    kvlistValue: {
      values: Object.entries(t).map(function(r) {
        var n = hg(r, 2), i = n[0], o = n[1];
        return Ru(i, o);
      })
    }
  } : {};
}
var ut;
(function(t) {
  t[t.DELTA = 0] = "DELTA", t[t.CUMULATIVE = 1] = "CUMULATIVE";
})(ut || (ut = {}));
var pt;
(function(t) {
  t[t.HISTOGRAM = 0] = "HISTOGRAM", t[t.EXPONENTIAL_HISTOGRAM = 1] = "EXPONENTIAL_HISTOGRAM", t[t.GAUGE = 2] = "GAUGE", t[t.SUM = 3] = "SUM";
})(pt || (pt = {}));
var dg = /* @__PURE__ */ function() {
  var t = function(e, r) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (n[o] = i[o]);
    }, t(e, r);
  };
  return function(e, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    t(e, r);
    function n() {
      this.constructor = e;
    }
    e.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}(), la = function(t, e, r, n) {
  function i(o) {
    return o instanceof r ? o : new r(function(a) {
      a(o);
    });
  }
  return new (r || (r = Promise))(function(o, a) {
    function u(l) {
      try {
        s(n.next(l));
      } catch (p) {
        a(p);
      }
    }
    function c(l) {
      try {
        s(n.throw(l));
      } catch (p) {
        a(p);
      }
    }
    function s(l) {
      l.done ? o(l.value) : i(l.value).then(u, c);
    }
    s((n = n.apply(t, [])).next());
  });
}, pa = function(t, e) {
  var r = { label: 0, sent: function() {
    if (o[0] & 1) throw o[1];
    return o[1];
  }, trys: [], ops: [] }, n, i, o, a;
  return a = { next: u(0), throw: u(1), return: u(2) }, typeof Symbol == "function" && (a[Symbol.iterator] = function() {
    return this;
  }), a;
  function u(s) {
    return function(l) {
      return c([s, l]);
    };
  }
  function c(s) {
    if (n) throw new TypeError("Generator is already executing.");
    for (; r; ) try {
      if (n = 1, i && (o = s[0] & 2 ? i.return : s[0] ? i.throw || ((o = i.return) && o.call(i), 0) : i.next) && !(o = o.call(i, s[1])).done) return o;
      switch (i = 0, o && (s = [s[0] & 2, o.value]), s[0]) {
        case 0:
        case 1:
          o = s;
          break;
        case 4:
          return r.label++, { value: s[1], done: !1 };
        case 5:
          r.label++, i = s[1], s = [0];
          continue;
        case 7:
          s = r.ops.pop(), r.trys.pop();
          continue;
        default:
          if (o = r.trys, !(o = o.length > 0 && o[o.length - 1]) && (s[0] === 6 || s[0] === 2)) {
            r = 0;
            continue;
          }
          if (s[0] === 3 && (!o || s[1] > o[0] && s[1] < o[3])) {
            r.label = s[1];
            break;
          }
          if (s[0] === 6 && r.label < o[1]) {
            r.label = o[1], o = s;
            break;
          }
          if (o && r.label < o[2]) {
            r.label = o[2], r.ops.push(s);
            break;
          }
          o[2] && r.ops.pop(), r.trys.pop();
          continue;
      }
      s = e.call(t, r);
    } catch (l) {
      s = [6, l], i = 0;
    } finally {
      n = o = 0;
    }
    if (s[0] & 5) throw s[1];
    return { value: s[0] ? s[1] : void 0, done: !0 };
  }
}, vg = function(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, o = [], a;
  try {
    for (; !(i = n.next()).done; ) o.push(i.value);
  } catch (u) {
    a = { error: u };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, mg = function(t, e, r) {
  if (arguments.length === 2) for (var n = 0, i = e.length, o; n < i; n++)
    (o || !(n in e)) && (o || (o = Array.prototype.slice.call(e, 0, n)), o[n] = e[n]);
  return t.concat(o || Array.prototype.slice.call(e));
}, yg = function(t) {
  var e = typeof Symbol == "function" && Symbol.iterator, r = e && t[e], n = 0;
  if (r) return r.call(t);
  if (t && typeof t.length == "number") return {
    next: function() {
      return t && n >= t.length && (t = void 0), { value: t && t[n++], done: !t };
    }
  };
  throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
function _g(t) {
  return t != null;
}
function Cu(t) {
  var e = Object.keys(t);
  return e.length === 0 ? "" : (e = e.sort(), JSON.stringify(e.map(function(r) {
    return [r, t[r]];
  })));
}
function gg(t) {
  var e, r;
  return t.name + ":" + ((e = t.version) !== null && e !== void 0 ? e : "") + ":" + ((r = t.schemaUrl) !== null && r !== void 0 ? r : "");
}
var xu = (
  /** @class */
  function(t) {
    dg(e, t);
    function e(r) {
      var n = t.call(this, r) || this;
      return Object.setPrototypeOf(n, e.prototype), n;
    }
    return e;
  }(Error)
);
function $e(t, e) {
  var r, n = new Promise(function(i, o) {
    r = setTimeout(function() {
      o(new xu("Operation timed out."));
    }, e);
  });
  return Promise.race([t, n]).then(function(i) {
    return clearTimeout(r), i;
  }, function(i) {
    throw clearTimeout(r), i;
  });
}
function Eg(t) {
  return la(this, void 0, void 0, function() {
    var e = this;
    return pa(this, function(r) {
      return [2, Promise.all(t.map(function(n) {
        return la(e, void 0, void 0, function() {
          var i, o;
          return pa(this, function(a) {
            switch (a.label) {
              case 0:
                return a.trys.push([0, 2, , 3]), [4, n];
              case 1:
                return i = a.sent(), [2, {
                  status: "fulfilled",
                  value: i
                }];
              case 2:
                return o = a.sent(), [2, {
                  status: "rejected",
                  reason: o
                }];
              case 3:
                return [
                  2
                  /*return*/
                ];
            }
          });
        });
      }))];
    });
  });
}
function Tg(t) {
  return t.status === "rejected";
}
function fa(t, e) {
  var r = [];
  return t.forEach(function(n) {
    r.push.apply(r, mg([], vg(e(n)), !1));
  }), r;
}
function bg(t, e) {
  var r, n;
  if (t.size !== e.size)
    return !1;
  try {
    for (var i = yg(t), o = i.next(); !o.done; o = i.next()) {
      var a = o.value;
      if (!e.has(a))
        return !1;
    }
  } catch (u) {
    r = { error: u };
  } finally {
    try {
      o && !o.done && (n = i.return) && n.call(i);
    } finally {
      if (r) throw r.error;
    }
  }
  return !0;
}
function Og(t, e) {
  for (var r = 0, n = t.length - 1, i = t.length; n >= r; ) {
    var o = r + Math.trunc((n - r) / 2);
    t[o] < e ? r = o + 1 : (i = o, n = o - 1);
  }
  return i;
}
function Sg(t, e) {
  return t.toLowerCase() === e.toLowerCase();
}
var Ft;
(function(t) {
  t[t.DROP = 0] = "DROP", t[t.SUM = 1] = "SUM", t[t.LAST_VALUE = 2] = "LAST_VALUE", t[t.HISTOGRAM = 3] = "HISTOGRAM", t[t.EXPONENTIAL_HISTOGRAM = 4] = "EXPONENTIAL_HISTOGRAM";
})(Ft || (Ft = {}));
var wg = (
  /** @class */
  function() {
    function t() {
      this.kind = Ft.DROP;
    }
    return t.prototype.createAccumulation = function() {
    }, t.prototype.merge = function(e, r) {
    }, t.prototype.diff = function(e, r) {
    }, t.prototype.toMetricData = function(e, r, n, i) {
    }, t;
  }()
), w;
(function(t) {
  t.COUNTER = "COUNTER", t.GAUGE = "GAUGE", t.HISTOGRAM = "HISTOGRAM", t.UP_DOWN_COUNTER = "UP_DOWN_COUNTER", t.OBSERVABLE_COUNTER = "OBSERVABLE_COUNTER", t.OBSERVABLE_GAUGE = "OBSERVABLE_GAUGE", t.OBSERVABLE_UP_DOWN_COUNTER = "OBSERVABLE_UP_DOWN_COUNTER";
})(w || (w = {}));
function Tt(t, e, r) {
  var n, i, o, a;
  return Ng(t) || T.warn('Invalid metric name: "' + t + '". The metric name should be a ASCII string with a length no greater than 255 characters.'), {
    name: t,
    type: e,
    description: (n = r?.description) !== null && n !== void 0 ? n : "",
    unit: (i = r?.unit) !== null && i !== void 0 ? i : "",
    valueType: (o = r?.valueType) !== null && o !== void 0 ? o : Nt.DOUBLE,
    advice: (a = r?.advice) !== null && a !== void 0 ? a : {}
  };
}
function Ag(t, e) {
  var r, n;
  return {
    name: (r = t.name) !== null && r !== void 0 ? r : e.name,
    description: (n = t.description) !== null && n !== void 0 ? n : e.description,
    type: e.type,
    unit: e.unit,
    valueType: e.valueType,
    advice: e.advice
  };
}
function Lg(t, e) {
  return Sg(t.name, e.name) && t.unit === e.unit && t.type === e.type && t.valueType === e.valueType;
}
var Rg = /^[a-z][a-z0-9_.\-/]{0,254}$/i;
function Ng(t) {
  return t.match(Rg) != null;
}
var Cg = function(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = n.next()).done; ) o.push(i.value);
  } catch (u) {
    a = { error: u };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
};
function xg(t) {
  var e = t.map(function() {
    return 0;
  });
  return e.push(0), {
    buckets: {
      boundaries: t,
      counts: e
    },
    sum: 0,
    count: 0,
    hasMinMax: !1,
    min: 1 / 0,
    max: -1 / 0
  };
}
var Mn = (
  /** @class */
  function() {
    function t(e, r, n, i) {
      n === void 0 && (n = !0), i === void 0 && (i = xg(r)), this.startTime = e, this._boundaries = r, this._recordMinMax = n, this._current = i;
    }
    return t.prototype.record = function(e) {
      if (!Number.isNaN(e)) {
        this._current.count += 1, this._current.sum += e, this._recordMinMax && (this._current.min = Math.min(e, this._current.min), this._current.max = Math.max(e, this._current.max), this._current.hasMinMax = !0);
        var r = Og(this._boundaries, e);
        this._current.buckets.counts[r] += 1;
      }
    }, t.prototype.setStartTime = function(e) {
      this.startTime = e;
    }, t.prototype.toPointValue = function() {
      return this._current;
    }, t;
  }()
), Pu = (
  /** @class */
  function() {
    function t(e, r) {
      this._boundaries = e, this._recordMinMax = r, this.kind = Ft.HISTOGRAM;
    }
    return t.prototype.createAccumulation = function(e) {
      return new Mn(e, this._boundaries, this._recordMinMax);
    }, t.prototype.merge = function(e, r) {
      for (var n = e.toPointValue(), i = r.toPointValue(), o = n.buckets.counts, a = i.buckets.counts, u = new Array(o.length), c = 0; c < o.length; c++)
        u[c] = o[c] + a[c];
      var s = 1 / 0, l = -1 / 0;
      return this._recordMinMax && (n.hasMinMax && i.hasMinMax ? (s = Math.min(n.min, i.min), l = Math.max(n.max, i.max)) : n.hasMinMax ? (s = n.min, l = n.max) : i.hasMinMax && (s = i.min, l = i.max)), new Mn(e.startTime, n.buckets.boundaries, this._recordMinMax, {
        buckets: {
          boundaries: n.buckets.boundaries,
          counts: u
        },
        count: n.count + i.count,
        sum: n.sum + i.sum,
        hasMinMax: this._recordMinMax && (n.hasMinMax || i.hasMinMax),
        min: s,
        max: l
      });
    }, t.prototype.diff = function(e, r) {
      for (var n = e.toPointValue(), i = r.toPointValue(), o = n.buckets.counts, a = i.buckets.counts, u = new Array(o.length), c = 0; c < o.length; c++)
        u[c] = a[c] - o[c];
      return new Mn(r.startTime, n.buckets.boundaries, this._recordMinMax, {
        buckets: {
          boundaries: n.buckets.boundaries,
          counts: u
        },
        count: i.count - n.count,
        sum: i.sum - n.sum,
        hasMinMax: !1,
        min: 1 / 0,
        max: -1 / 0
      });
    }, t.prototype.toMetricData = function(e, r, n, i) {
      return {
        descriptor: e,
        aggregationTemporality: r,
        dataPointType: pt.HISTOGRAM,
        dataPoints: n.map(function(o) {
          var a = Cg(o, 2), u = a[0], c = a[1], s = c.toPointValue(), l = e.type === w.GAUGE || e.type === w.UP_DOWN_COUNTER || e.type === w.OBSERVABLE_GAUGE || e.type === w.OBSERVABLE_UP_DOWN_COUNTER;
          return {
            attributes: u,
            startTime: c.startTime,
            endTime: i,
            value: {
              min: s.hasMinMax ? s.min : void 0,
              max: s.hasMinMax ? s.max : void 0,
              sum: l ? void 0 : s.sum,
              buckets: s.buckets,
              count: s.count
            }
          };
        })
      };
    }, t;
  }()
), kn = function(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, o = [], a;
  try {
    for (; !(i = n.next()).done; ) o.push(i.value);
  } catch (u) {
    a = { error: u };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Dn = function(t, e, r) {
  if (arguments.length === 2) for (var n = 0, i = e.length, o; n < i; n++)
    (o || !(n in e)) && (o || (o = Array.prototype.slice.call(e, 0, n)), o[n] = e[n]);
  return t.concat(o || Array.prototype.slice.call(e));
}, ha = (
  /** @class */
  function() {
    function t(e, r, n, i) {
      e === void 0 && (e = new Pg()), r === void 0 && (r = 0), n === void 0 && (n = 0), i === void 0 && (i = 0), this.backing = e, this.indexBase = r, this.indexStart = n, this.indexEnd = i;
    }
    return Object.defineProperty(t.prototype, "offset", {
      /**
       * Offset is the bucket index of the smallest entry in the counts array
       * @returns {number}
       */
      get: function() {
        return this.indexStart;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "length", {
      /**
       * Buckets is a view into the backing array.
       * @returns {number}
       */
      get: function() {
        return this.backing.length === 0 || this.indexEnd === this.indexStart && this.at(0) === 0 ? 0 : this.indexEnd - this.indexStart + 1;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.counts = function() {
      var e = this;
      return Array.from({ length: this.length }, function(r, n) {
        return e.at(n);
      });
    }, t.prototype.at = function(e) {
      var r = this.indexBase - this.indexStart;
      return e < r && (e += this.backing.length), e -= r, this.backing.countAt(e);
    }, t.prototype.incrementBucket = function(e, r) {
      this.backing.increment(e, r);
    }, t.prototype.decrementBucket = function(e, r) {
      this.backing.decrement(e, r);
    }, t.prototype.trim = function() {
      for (var e = 0; e < this.length; e++)
        if (this.at(e) !== 0) {
          this.indexStart += e;
          break;
        } else if (e === this.length - 1) {
          this.indexStart = this.indexEnd = this.indexBase = 0;
          return;
        }
      for (var e = this.length - 1; e >= 0; e--)
        if (this.at(e) !== 0) {
          this.indexEnd -= this.length - e - 1;
          break;
        }
      this._rotate();
    }, t.prototype.downscale = function(e) {
      this._rotate();
      for (var r = 1 + this.indexEnd - this.indexStart, n = 1 << e, i = 0, o = 0, a = this.indexStart; a <= this.indexEnd; ) {
        var u = a % n;
        u < 0 && (u += n);
        for (var c = u; c < n && i < r; c++)
          this._relocateBucket(o, i), i++, a++;
        o++;
      }
      this.indexStart >>= e, this.indexEnd >>= e, this.indexBase = this.indexStart;
    }, t.prototype.clone = function() {
      return new t(this.backing.clone(), this.indexBase, this.indexStart, this.indexEnd);
    }, t.prototype._rotate = function() {
      var e = this.indexBase - this.indexStart;
      e !== 0 && (e > 0 ? (this.backing.reverse(0, this.backing.length), this.backing.reverse(0, e), this.backing.reverse(e, this.backing.length)) : (this.backing.reverse(0, this.backing.length), this.backing.reverse(0, this.backing.length + e)), this.indexBase = this.indexStart);
    }, t.prototype._relocateBucket = function(e, r) {
      e !== r && this.incrementBucket(e, this.backing.emptyBucket(r));
    }, t;
  }()
), Pg = (
  /** @class */
  function() {
    function t(e) {
      e === void 0 && (e = [0]), this._counts = e;
    }
    return Object.defineProperty(t.prototype, "length", {
      /**
       * length returns the physical size of the backing array, which
       * is >= buckets.length()
       */
      get: function() {
        return this._counts.length;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.countAt = function(e) {
      return this._counts[e];
    }, t.prototype.growTo = function(e, r, n) {
      var i = new Array(e).fill(0);
      i.splice.apply(i, Dn([
        n,
        this._counts.length - r
      ], kn(this._counts.slice(r)), !1)), i.splice.apply(i, Dn([0, r], kn(this._counts.slice(0, r)), !1)), this._counts = i;
    }, t.prototype.reverse = function(e, r) {
      for (var n = Math.floor((e + r) / 2) - e, i = 0; i < n; i++) {
        var o = this._counts[e + i];
        this._counts[e + i] = this._counts[r - i - 1], this._counts[r - i - 1] = o;
      }
    }, t.prototype.emptyBucket = function(e) {
      var r = this._counts[e];
      return this._counts[e] = 0, r;
    }, t.prototype.increment = function(e, r) {
      this._counts[e] += r;
    }, t.prototype.decrement = function(e, r) {
      this._counts[e] >= r ? this._counts[e] -= r : this._counts[e] = 0;
    }, t.prototype.clone = function() {
      return new t(Dn([], kn(this._counts), !1));
    }, t;
  }()
), Ig = 52, Mg = 2146435072, kg = 1048575, to = 1023, Iu = -to + 1, Mu = to, Ci = Math.pow(2, -1022);
function ku(t) {
  var e = new DataView(new ArrayBuffer(8));
  e.setFloat64(0, t);
  var r = e.getUint32(0), n = (r & Mg) >> 20;
  return n - to;
}
function Du(t) {
  var e = new DataView(new ArrayBuffer(8));
  e.setFloat64(0, t);
  var r = e.getUint32(0), n = e.getUint32(4), i = (r & kg) * Math.pow(2, 32);
  return i + n;
}
function xi(t, e) {
  return t === 0 || t === Number.POSITIVE_INFINITY || t === Number.NEGATIVE_INFINITY || Number.isNaN(t) ? t : t * Math.pow(2, e);
}
function Dg(t) {
  return t--, t |= t >> 1, t |= t >> 2, t |= t >> 4, t |= t >> 8, t |= t >> 16, t++, t;
}
var Ug = /* @__PURE__ */ function() {
  var t = function(e, r) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (n[o] = i[o]);
    }, t(e, r);
  };
  return function(e, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    t(e, r);
    function n() {
      this.constructor = e;
    }
    e.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}(), Fe = (
  /** @class */
  function(t) {
    Ug(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e;
  }(Error)
), jg = (
  /** @class */
  function() {
    function t(e) {
      this._shift = -e;
    }
    return t.prototype.mapToIndex = function(e) {
      if (e < Ci)
        return this._minNormalLowerBoundaryIndex();
      var r = ku(e), n = this._rightShift(Du(e) - 1, Ig);
      return r + n >> this._shift;
    }, t.prototype.lowerBoundary = function(e) {
      var r = this._minNormalLowerBoundaryIndex();
      if (e < r)
        throw new Fe("underflow: " + e + " is < minimum lower boundary: " + r);
      var n = this._maxNormalLowerBoundaryIndex();
      if (e > n)
        throw new Fe("overflow: " + e + " is > maximum lower boundary: " + n);
      return xi(1, e << this._shift);
    }, Object.defineProperty(t.prototype, "scale", {
      /**
       * The scale used by this mapping
       * @returns {number}
       */
      get: function() {
        return this._shift === 0 ? 0 : -this._shift;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype._minNormalLowerBoundaryIndex = function() {
      var e = Iu >> this._shift;
      return this._shift < 2 && e--, e;
    }, t.prototype._maxNormalLowerBoundaryIndex = function() {
      return Mu >> this._shift;
    }, t.prototype._rightShift = function(e, r) {
      return Math.floor(e * Math.pow(2, -r));
    }, t;
  }()
), Bg = (
  /** @class */
  function() {
    function t(e) {
      this._scale = e, this._scaleFactor = xi(Math.LOG2E, e), this._inverseFactor = xi(Math.LN2, -e);
    }
    return t.prototype.mapToIndex = function(e) {
      if (e <= Ci)
        return this._minNormalLowerBoundaryIndex() - 1;
      if (Du(e) === 0) {
        var r = ku(e);
        return (r << this._scale) - 1;
      }
      var n = Math.floor(Math.log(e) * this._scaleFactor), i = this._maxNormalLowerBoundaryIndex();
      return n >= i ? i : n;
    }, t.prototype.lowerBoundary = function(e) {
      var r = this._maxNormalLowerBoundaryIndex();
      if (e >= r) {
        if (e === r)
          return 2 * Math.exp((e - (1 << this._scale)) / this._scaleFactor);
        throw new Fe("overflow: " + e + " is > maximum lower boundary: " + r);
      }
      var n = this._minNormalLowerBoundaryIndex();
      if (e <= n) {
        if (e === n)
          return Ci;
        if (e === n - 1)
          return Math.exp((e + (1 << this._scale)) / this._scaleFactor) / 2;
        throw new Fe("overflow: " + e + " is < minimum lower boundary: " + n);
      }
      return Math.exp(e * this._inverseFactor);
    }, Object.defineProperty(t.prototype, "scale", {
      /**
       * The scale used by this mapping
       * @returns {number}
       */
      get: function() {
        return this._scale;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype._minNormalLowerBoundaryIndex = function() {
      return Iu << this._scale;
    }, t.prototype._maxNormalLowerBoundaryIndex = function() {
      return (Mu + 1 << this._scale) - 1;
    }, t;
  }()
), da = -10, va = 20, $g = Array.from({ length: 31 }, function(t, e) {
  return e > 10 ? new Bg(e - 10) : new jg(e - 10);
});
function ma(t) {
  if (t > va || t < da)
    throw new Fe("expected scale >= " + da + " && <= " + va + ", got: " + t);
  return $g[t + 10];
}
var Fg = function(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = n.next()).done; ) o.push(i.value);
  } catch (u) {
    a = { error: u };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, er = (
  /** @class */
  function() {
    function t(e, r) {
      this.low = e, this.high = r;
    }
    return t.combine = function(e, r) {
      return new t(Math.min(e.low, r.low), Math.max(e.high, r.high));
    }, t;
  }()
), Vg = 20, Gg = 160, Un = 2, Hg = (
  /** @class */
  function() {
    function t(e, r, n, i, o, a, u, c, s, l, p) {
      e === void 0 && (e = e), r === void 0 && (r = Gg), n === void 0 && (n = !0), i === void 0 && (i = 0), o === void 0 && (o = 0), a === void 0 && (a = 0), u === void 0 && (u = Number.POSITIVE_INFINITY), c === void 0 && (c = Number.NEGATIVE_INFINITY), s === void 0 && (s = new ha()), l === void 0 && (l = new ha()), p === void 0 && (p = ma(Vg)), this.startTime = e, this._maxSize = r, this._recordMinMax = n, this._sum = i, this._count = o, this._zeroCount = a, this._min = u, this._max = c, this._positive = s, this._negative = l, this._mapping = p, this._maxSize < Un && (T.warn("Exponential Histogram Max Size set to " + this._maxSize + ",                 changing to the minimum size of: " + Un), this._maxSize = Un);
    }
    return t.prototype.record = function(e) {
      this.updateByIncrement(e, 1);
    }, t.prototype.setStartTime = function(e) {
      this.startTime = e;
    }, t.prototype.toPointValue = function() {
      return {
        hasMinMax: this._recordMinMax,
        min: this.min,
        max: this.max,
        sum: this.sum,
        positive: {
          offset: this.positive.offset,
          bucketCounts: this.positive.counts()
        },
        negative: {
          offset: this.negative.offset,
          bucketCounts: this.negative.counts()
        },
        count: this.count,
        scale: this.scale,
        zeroCount: this.zeroCount
      };
    }, Object.defineProperty(t.prototype, "sum", {
      /**
       * @returns {Number} The sum of values recorded by this accumulation
       */
      get: function() {
        return this._sum;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "min", {
      /**
       * @returns {Number} The minimum value recorded by this accumulation
       */
      get: function() {
        return this._min;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "max", {
      /**
       * @returns {Number} The maximum value recorded by this accumulation
       */
      get: function() {
        return this._max;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "count", {
      /**
       * @returns {Number} The count of values recorded by this accumulation
       */
      get: function() {
        return this._count;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "zeroCount", {
      /**
       * @returns {Number} The number of 0 values recorded by this accumulation
       */
      get: function() {
        return this._zeroCount;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "scale", {
      /**
       * @returns {Number} The scale used by this accumulation
       */
      get: function() {
        return this._count === this._zeroCount ? 0 : this._mapping.scale;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "positive", {
      /**
       * positive holds the positive values
       * @returns {Buckets}
       */
      get: function() {
        return this._positive;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "negative", {
      /**
       * negative holds the negative values by their absolute value
       * @returns {Buckets}
       */
      get: function() {
        return this._negative;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.updateByIncrement = function(e, r) {
      if (!Number.isNaN(e)) {
        if (e > this._max && (this._max = e), e < this._min && (this._min = e), this._count += r, e === 0) {
          this._zeroCount += r;
          return;
        }
        this._sum += e * r, e > 0 ? this._updateBuckets(this._positive, e, r) : this._updateBuckets(this._negative, -e, r);
      }
    }, t.prototype.merge = function(e) {
      this._count === 0 ? (this._min = e.min, this._max = e.max) : e.count !== 0 && (e.min < this.min && (this._min = e.min), e.max > this.max && (this._max = e.max)), this.startTime = e.startTime, this._sum += e.sum, this._count += e.count, this._zeroCount += e.zeroCount;
      var r = this._minScale(e);
      this._downscale(this.scale - r), this._mergeBuckets(this.positive, e, e.positive, r), this._mergeBuckets(this.negative, e, e.negative, r);
    }, t.prototype.diff = function(e) {
      this._min = 1 / 0, this._max = -1 / 0, this._sum -= e.sum, this._count -= e.count, this._zeroCount -= e.zeroCount;
      var r = this._minScale(e);
      this._downscale(this.scale - r), this._diffBuckets(this.positive, e, e.positive, r), this._diffBuckets(this.negative, e, e.negative, r);
    }, t.prototype.clone = function() {
      return new t(this.startTime, this._maxSize, this._recordMinMax, this._sum, this._count, this._zeroCount, this._min, this._max, this.positive.clone(), this.negative.clone(), this._mapping);
    }, t.prototype._updateBuckets = function(e, r, n) {
      var i = this._mapping.mapToIndex(r), o = !1, a = 0, u = 0;
      if (e.length === 0 ? (e.indexStart = i, e.indexEnd = e.indexStart, e.indexBase = e.indexStart) : i < e.indexStart && e.indexEnd - i >= this._maxSize ? (o = !0, u = i, a = e.indexEnd) : i > e.indexEnd && i - e.indexStart >= this._maxSize && (o = !0, u = e.indexStart, a = i), o) {
        var c = this._changeScale(a, u);
        this._downscale(c), i = this._mapping.mapToIndex(r);
      }
      this._incrementIndexBy(e, i, n);
    }, t.prototype._incrementIndexBy = function(e, r, n) {
      if (n !== 0) {
        if (e.length === 0 && (e.indexStart = e.indexEnd = e.indexBase = r), r < e.indexStart) {
          var i = e.indexEnd - r;
          i >= e.backing.length && this._grow(e, i + 1), e.indexStart = r;
        } else if (r > e.indexEnd) {
          var i = r - e.indexStart;
          i >= e.backing.length && this._grow(e, i + 1), e.indexEnd = r;
        }
        var o = r - e.indexBase;
        o < 0 && (o += e.backing.length), e.incrementBucket(o, n);
      }
    }, t.prototype._grow = function(e, r) {
      var n = e.backing.length, i = e.indexBase - e.indexStart, o = n - i, a = Dg(r);
      a > this._maxSize && (a = this._maxSize);
      var u = a - i;
      e.backing.growTo(a, o, u);
    }, t.prototype._changeScale = function(e, r) {
      for (var n = 0; e - r >= this._maxSize; )
        e >>= 1, r >>= 1, n++;
      return n;
    }, t.prototype._downscale = function(e) {
      if (e !== 0) {
        if (e < 0)
          throw new Error("impossible change of scale: " + this.scale);
        var r = this._mapping.scale - e;
        this._positive.downscale(e), this._negative.downscale(e), this._mapping = ma(r);
      }
    }, t.prototype._minScale = function(e) {
      var r = Math.min(this.scale, e.scale), n = er.combine(this._highLowAtScale(this.positive, this.scale, r), this._highLowAtScale(e.positive, e.scale, r)), i = er.combine(this._highLowAtScale(this.negative, this.scale, r), this._highLowAtScale(e.negative, e.scale, r));
      return Math.min(r - this._changeScale(n.high, n.low), r - this._changeScale(i.high, i.low));
    }, t.prototype._highLowAtScale = function(e, r, n) {
      if (e.length === 0)
        return new er(0, -1);
      var i = r - n;
      return new er(e.indexStart >> i, e.indexEnd >> i);
    }, t.prototype._mergeBuckets = function(e, r, n, i) {
      for (var o = n.offset, a = r.scale - i, u = 0; u < n.length; u++)
        this._incrementIndexBy(e, o + u >> a, n.at(u));
    }, t.prototype._diffBuckets = function(e, r, n, i) {
      for (var o = n.offset, a = r.scale - i, u = 0; u < n.length; u++) {
        var c = o + u >> a, s = c - e.indexBase;
        s < 0 && (s += e.backing.length), e.decrementBucket(s, n.at(u));
      }
      e.trim();
    }, t;
  }()
), zg = (
  /** @class */
  function() {
    function t(e, r) {
      this._maxSize = e, this._recordMinMax = r, this.kind = Ft.EXPONENTIAL_HISTOGRAM;
    }
    return t.prototype.createAccumulation = function(e) {
      return new Hg(e, this._maxSize, this._recordMinMax);
    }, t.prototype.merge = function(e, r) {
      var n = r.clone();
      return n.merge(e), n;
    }, t.prototype.diff = function(e, r) {
      var n = r.clone();
      return n.diff(e), n;
    }, t.prototype.toMetricData = function(e, r, n, i) {
      return {
        descriptor: e,
        aggregationTemporality: r,
        dataPointType: pt.EXPONENTIAL_HISTOGRAM,
        dataPoints: n.map(function(o) {
          var a = Fg(o, 2), u = a[0], c = a[1], s = c.toPointValue(), l = e.type === w.GAUGE || e.type === w.UP_DOWN_COUNTER || e.type === w.OBSERVABLE_GAUGE || e.type === w.OBSERVABLE_UP_DOWN_COUNTER;
          return {
            attributes: u,
            startTime: c.startTime,
            endTime: i,
            value: {
              min: s.hasMinMax ? s.min : void 0,
              max: s.hasMinMax ? s.max : void 0,
              sum: l ? void 0 : s.sum,
              positive: {
                offset: s.positive.offset,
                bucketCounts: s.positive.bucketCounts
              },
              negative: {
                offset: s.negative.offset,
                bucketCounts: s.negative.bucketCounts
              },
              count: s.count,
              scale: s.scale,
              zeroCount: s.zeroCount
            }
          };
        })
      };
    }, t;
  }()
), Xg = He("OpenTelemetry SDK Context Key SUPPRESS_TRACING");
function qg(t) {
  return t.setValue(Xg, !0);
}
function Kg() {
  return function(t) {
    T.error(Wg(t));
  };
}
function Wg(t) {
  return typeof t == "string" ? t : JSON.stringify(Yg(t));
}
function Yg(t) {
  for (var e = {}, r = t; r !== null; )
    Object.getOwnPropertyNames(r).forEach(function(n) {
      if (!e[n]) {
        var i = r[n];
        i && (e[n] = String(i));
      }
    }), r = Object.getPrototypeOf(r);
  return e;
}
var Jg = Kg();
function ya(t) {
  try {
    Jg(t);
  } catch {
  }
}
var Qg = 6, Zg = Math.pow(10, Qg);
function eo(t) {
  var e = t / 1e3, r = Math.trunc(e), n = Math.round(t % 1e3 * Zg);
  return [r, n];
}
function rr(t) {
  return t[0] * 1e6 + t[1] / 1e3;
}
var Pi;
(function(t) {
  t[t.SUCCESS = 0] = "SUCCESS", t[t.FAILED = 1] = "FAILED";
})(Pi || (Pi = {}));
function tE(t, e) {
  return new Promise(function(r) {
    N.with(qg(N.active()), function() {
      t.export(e, function(n) {
        r(n);
      });
    });
  });
}
var eE = {
  _export: tE
}, rE = function(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = n.next()).done; ) o.push(i.value);
  } catch (u) {
    a = { error: u };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, jn = (
  /** @class */
  function() {
    function t(e, r, n) {
      r === void 0 && (r = 0), n === void 0 && (n = [0, 0]), this.startTime = e, this._current = r, this.sampleTime = n;
    }
    return t.prototype.record = function(e) {
      this._current = e, this.sampleTime = eo(Date.now());
    }, t.prototype.setStartTime = function(e) {
      this.startTime = e;
    }, t.prototype.toPointValue = function() {
      return this._current;
    }, t;
  }()
), nE = (
  /** @class */
  function() {
    function t() {
      this.kind = Ft.LAST_VALUE;
    }
    return t.prototype.createAccumulation = function(e) {
      return new jn(e);
    }, t.prototype.merge = function(e, r) {
      var n = rr(r.sampleTime) >= rr(e.sampleTime) ? r : e;
      return new jn(e.startTime, n.toPointValue(), n.sampleTime);
    }, t.prototype.diff = function(e, r) {
      var n = rr(r.sampleTime) >= rr(e.sampleTime) ? r : e;
      return new jn(r.startTime, n.toPointValue(), n.sampleTime);
    }, t.prototype.toMetricData = function(e, r, n, i) {
      return {
        descriptor: e,
        aggregationTemporality: r,
        dataPointType: pt.GAUGE,
        dataPoints: n.map(function(o) {
          var a = rE(o, 2), u = a[0], c = a[1];
          return {
            attributes: u,
            startTime: c.startTime,
            endTime: i,
            value: c.toPointValue()
          };
        })
      };
    }, t;
  }()
), iE = function(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = n.next()).done; ) o.push(i.value);
  } catch (u) {
    a = { error: u };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, be = (
  /** @class */
  function() {
    function t(e, r, n, i) {
      n === void 0 && (n = 0), i === void 0 && (i = !1), this.startTime = e, this.monotonic = r, this._current = n, this.reset = i;
    }
    return t.prototype.record = function(e) {
      this.monotonic && e < 0 || (this._current += e);
    }, t.prototype.setStartTime = function(e) {
      this.startTime = e;
    }, t.prototype.toPointValue = function() {
      return this._current;
    }, t;
  }()
), _a = (
  /** @class */
  function() {
    function t(e) {
      this.monotonic = e, this.kind = Ft.SUM;
    }
    return t.prototype.createAccumulation = function(e) {
      return new be(e, this.monotonic);
    }, t.prototype.merge = function(e, r) {
      var n = e.toPointValue(), i = r.toPointValue();
      return r.reset ? new be(r.startTime, this.monotonic, i, r.reset) : new be(e.startTime, this.monotonic, n + i);
    }, t.prototype.diff = function(e, r) {
      var n = e.toPointValue(), i = r.toPointValue();
      return this.monotonic && n > i ? new be(r.startTime, this.monotonic, i, !0) : new be(r.startTime, this.monotonic, i - n);
    }, t.prototype.toMetricData = function(e, r, n, i) {
      return {
        descriptor: e,
        aggregationTemporality: r,
        dataPointType: pt.SUM,
        dataPoints: n.map(function(o) {
          var a = iE(o, 2), u = a[0], c = a[1];
          return {
            attributes: u,
            startTime: c.startTime,
            endTime: i,
            value: c.toPointValue()
          };
        }),
        isMonotonic: this.monotonic
      };
    }, t;
  }()
), zt = /* @__PURE__ */ function() {
  var t = function(e, r) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (n[o] = i[o]);
    }, t(e, r);
  };
  return function(e, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    t(e, r);
    function n() {
      this.constructor = e;
    }
    e.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}(), Et = (
  /** @class */
  function() {
    function t() {
    }
    return t.Drop = function() {
      return Uu;
    }, t.Sum = function() {
      return ju;
    }, t.LastValue = function() {
      return Bu;
    }, t.Histogram = function() {
      return $u;
    }, t.ExponentialHistogram = function() {
      return fE;
    }, t.Default = function() {
      return hE;
    }, t;
  }()
), oE = (
  /** @class */
  function(t) {
    zt(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.createAggregator = function(r) {
      return e.DEFAULT_INSTANCE;
    }, e.DEFAULT_INSTANCE = new wg(), e;
  }(Et)
), aE = (
  /** @class */
  function(t) {
    zt(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.createAggregator = function(r) {
      switch (r.type) {
        case w.COUNTER:
        case w.OBSERVABLE_COUNTER:
        case w.HISTOGRAM:
          return e.MONOTONIC_INSTANCE;
        default:
          return e.NON_MONOTONIC_INSTANCE;
      }
    }, e.MONOTONIC_INSTANCE = new _a(!0), e.NON_MONOTONIC_INSTANCE = new _a(!1), e;
  }(Et)
), sE = (
  /** @class */
  function(t) {
    zt(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.createAggregator = function(r) {
      return e.DEFAULT_INSTANCE;
    }, e.DEFAULT_INSTANCE = new nE(), e;
  }(Et)
), uE = (
  /** @class */
  function(t) {
    zt(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.createAggregator = function(r) {
      return e.DEFAULT_INSTANCE;
    }, e.DEFAULT_INSTANCE = new Pu([0, 5, 10, 25, 50, 75, 100, 250, 500, 750, 1e3, 2500, 5e3, 7500, 1e4], !0), e;
  }(Et)
), cE = (
  /** @class */
  function(t) {
    zt(e, t);
    function e(r, n) {
      n === void 0 && (n = !0);
      var i = t.call(this) || this;
      if (i._recordMinMax = n, r == null)
        throw new Error("ExplicitBucketHistogramAggregation should be created with explicit boundaries, if a single bucket histogram is required, please pass an empty array");
      r = r.concat(), r = r.sort(function(u, c) {
        return u - c;
      });
      var o = r.lastIndexOf(-1 / 0), a = r.indexOf(1 / 0);
      return a === -1 && (a = void 0), i._boundaries = r.slice(o + 1, a), i;
    }
    return e.prototype.createAggregator = function(r) {
      return new Pu(this._boundaries, this._recordMinMax);
    }, e;
  }(Et)
), lE = (
  /** @class */
  function(t) {
    zt(e, t);
    function e(r, n) {
      r === void 0 && (r = 160), n === void 0 && (n = !0);
      var i = t.call(this) || this;
      return i._maxSize = r, i._recordMinMax = n, i;
    }
    return e.prototype.createAggregator = function(r) {
      return new zg(this._maxSize, this._recordMinMax);
    }, e;
  }(Et)
), pE = (
  /** @class */
  function(t) {
    zt(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype._resolve = function(r) {
      switch (r.type) {
        case w.COUNTER:
        case w.UP_DOWN_COUNTER:
        case w.OBSERVABLE_COUNTER:
        case w.OBSERVABLE_UP_DOWN_COUNTER:
          return ju;
        case w.GAUGE:
        case w.OBSERVABLE_GAUGE:
          return Bu;
        case w.HISTOGRAM:
          return r.advice.explicitBucketBoundaries ? new cE(r.advice.explicitBucketBoundaries) : $u;
      }
      return T.warn("Unable to recognize instrument type: " + r.type), Uu;
    }, e.prototype.createAggregator = function(r) {
      return this._resolve(r).createAggregator(r);
    }, e;
  }(Et)
), Uu = new oE(), ju = new aE(), Bu = new sE(), $u = new uE(), fE = new lE(), hE = new pE(), dE = function(t) {
  return Et.Default();
}, vE = function(t) {
  return ut.CUMULATIVE;
}, Bn = function(t, e, r, n) {
  function i(o) {
    return o instanceof r ? o : new r(function(a) {
      a(o);
    });
  }
  return new (r || (r = Promise))(function(o, a) {
    function u(l) {
      try {
        s(n.next(l));
      } catch (p) {
        a(p);
      }
    }
    function c(l) {
      try {
        s(n.throw(l));
      } catch (p) {
        a(p);
      }
    }
    function s(l) {
      l.done ? o(l.value) : i(l.value).then(u, c);
    }
    s((n = n.apply(t, [])).next());
  });
}, $n = function(t, e) {
  var r = { label: 0, sent: function() {
    if (o[0] & 1) throw o[1];
    return o[1];
  }, trys: [], ops: [] }, n, i, o, a;
  return a = { next: u(0), throw: u(1), return: u(2) }, typeof Symbol == "function" && (a[Symbol.iterator] = function() {
    return this;
  }), a;
  function u(s) {
    return function(l) {
      return c([s, l]);
    };
  }
  function c(s) {
    if (n) throw new TypeError("Generator is already executing.");
    for (; r; ) try {
      if (n = 1, i && (o = s[0] & 2 ? i.return : s[0] ? i.throw || ((o = i.return) && o.call(i), 0) : i.next) && !(o = o.call(i, s[1])).done) return o;
      switch (i = 0, o && (s = [s[0] & 2, o.value]), s[0]) {
        case 0:
        case 1:
          o = s;
          break;
        case 4:
          return r.label++, { value: s[1], done: !1 };
        case 5:
          r.label++, i = s[1], s = [0];
          continue;
        case 7:
          s = r.ops.pop(), r.trys.pop();
          continue;
        default:
          if (o = r.trys, !(o = o.length > 0 && o[o.length - 1]) && (s[0] === 6 || s[0] === 2)) {
            r = 0;
            continue;
          }
          if (s[0] === 3 && (!o || s[1] > o[0] && s[1] < o[3])) {
            r.label = s[1];
            break;
          }
          if (s[0] === 6 && r.label < o[1]) {
            r.label = o[1], o = s;
            break;
          }
          if (o && r.label < o[2]) {
            r.label = o[2], r.ops.push(s);
            break;
          }
          o[2] && r.ops.pop(), r.trys.pop();
          continue;
      }
      s = e.call(t, r);
    } catch (l) {
      s = [6, l], i = 0;
    } finally {
      n = o = 0;
    }
    if (s[0] & 5) throw s[1];
    return { value: s[0] ? s[1] : void 0, done: !0 };
  }
}, ga = function(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = n.next()).done; ) o.push(i.value);
  } catch (u) {
    a = { error: u };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, mE = function(t, e, r) {
  if (arguments.length === 2) for (var n = 0, i = e.length, o; n < i; n++)
    (o || !(n in e)) && (o || (o = Array.prototype.slice.call(e, 0, n)), o[n] = e[n]);
  return t.concat(o || Array.prototype.slice.call(e));
}, yE = (
  /** @class */
  function() {
    function t(e) {
      var r, n, i;
      this._shutdown = !1, this._aggregationSelector = (r = e?.aggregationSelector) !== null && r !== void 0 ? r : dE, this._aggregationTemporalitySelector = (n = e?.aggregationTemporalitySelector) !== null && n !== void 0 ? n : vE, this._metricProducers = (i = e?.metricProducers) !== null && i !== void 0 ? i : [], this._cardinalitySelector = e?.cardinalitySelector;
    }
    return t.prototype.setMetricProducer = function(e) {
      if (this._sdkMetricProducer)
        throw new Error("MetricReader can not be bound to a MeterProvider again.");
      this._sdkMetricProducer = e, this.onInitialized();
    }, t.prototype.selectAggregation = function(e) {
      return this._aggregationSelector(e);
    }, t.prototype.selectAggregationTemporality = function(e) {
      return this._aggregationTemporalitySelector(e);
    }, t.prototype.selectCardinalityLimit = function(e) {
      return this._cardinalitySelector ? this._cardinalitySelector(e) : 2e3;
    }, t.prototype.onInitialized = function() {
    }, t.prototype.collect = function(e) {
      return Bn(this, void 0, void 0, function() {
        var r, n, i, o, a, u;
        return $n(this, function(c) {
          switch (c.label) {
            case 0:
              if (this._sdkMetricProducer === void 0)
                throw new Error("MetricReader is not bound to a MetricProducer");
              if (this._shutdown)
                throw new Error("MetricReader is shutdown");
              return [4, Promise.all(mE([
                this._sdkMetricProducer.collect({
                  timeoutMillis: e?.timeoutMillis
                })
              ], ga(this._metricProducers.map(function(s) {
                return s.collect({
                  timeoutMillis: e?.timeoutMillis
                });
              })), !1))];
            case 1:
              return r = ga.apply(void 0, [c.sent()]), n = r[0], i = r.slice(1), o = n.errors.concat(fa(i, function(s) {
                return s.errors;
              })), a = n.resourceMetrics.resource, u = n.resourceMetrics.scopeMetrics.concat(fa(i, function(s) {
                return s.resourceMetrics.scopeMetrics;
              })), [2, {
                resourceMetrics: {
                  resource: a,
                  scopeMetrics: u
                },
                errors: o
              }];
          }
        });
      });
    }, t.prototype.shutdown = function(e) {
      return Bn(this, void 0, void 0, function() {
        return $n(this, function(r) {
          switch (r.label) {
            case 0:
              return this._shutdown ? (T.error("Cannot call shutdown twice."), [
                2
                /*return*/
              ]) : e?.timeoutMillis != null ? [3, 2] : [4, this.onShutdown()];
            case 1:
              return r.sent(), [3, 4];
            case 2:
              return [4, $e(this.onShutdown(), e.timeoutMillis)];
            case 3:
              r.sent(), r.label = 4;
            case 4:
              return this._shutdown = !0, [
                2
                /*return*/
              ];
          }
        });
      });
    }, t.prototype.forceFlush = function(e) {
      return Bn(this, void 0, void 0, function() {
        return $n(this, function(r) {
          switch (r.label) {
            case 0:
              return this._shutdown ? (T.warn("Cannot forceFlush on already shutdown MetricReader."), [
                2
                /*return*/
              ]) : e?.timeoutMillis != null ? [3, 2] : [4, this.onForceFlush()];
            case 1:
              return r.sent(), [
                2
                /*return*/
              ];
            case 2:
              return [4, $e(this.onForceFlush(), e.timeoutMillis)];
            case 3:
              return r.sent(), [
                2
                /*return*/
              ];
          }
        });
      });
    }, t;
  }()
), _E = /* @__PURE__ */ function() {
  var t = function(e, r) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (n[o] = i[o]);
    }, t(e, r);
  };
  return function(e, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    t(e, r);
    function n() {
      this.constructor = e;
    }
    e.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}(), nr = function(t, e, r, n) {
  function i(o) {
    return o instanceof r ? o : new r(function(a) {
      a(o);
    });
  }
  return new (r || (r = Promise))(function(o, a) {
    function u(l) {
      try {
        s(n.next(l));
      } catch (p) {
        a(p);
      }
    }
    function c(l) {
      try {
        s(n.throw(l));
      } catch (p) {
        a(p);
      }
    }
    function s(l) {
      l.done ? o(l.value) : i(l.value).then(u, c);
    }
    s((n = n.apply(t, [])).next());
  });
}, ir = function(t, e) {
  var r = { label: 0, sent: function() {
    if (o[0] & 1) throw o[1];
    return o[1];
  }, trys: [], ops: [] }, n, i, o, a;
  return a = { next: u(0), throw: u(1), return: u(2) }, typeof Symbol == "function" && (a[Symbol.iterator] = function() {
    return this;
  }), a;
  function u(s) {
    return function(l) {
      return c([s, l]);
    };
  }
  function c(s) {
    if (n) throw new TypeError("Generator is already executing.");
    for (; r; ) try {
      if (n = 1, i && (o = s[0] & 2 ? i.return : s[0] ? i.throw || ((o = i.return) && o.call(i), 0) : i.next) && !(o = o.call(i, s[1])).done) return o;
      switch (i = 0, o && (s = [s[0] & 2, o.value]), s[0]) {
        case 0:
        case 1:
          o = s;
          break;
        case 4:
          return r.label++, { value: s[1], done: !1 };
        case 5:
          r.label++, i = s[1], s = [0];
          continue;
        case 7:
          s = r.ops.pop(), r.trys.pop();
          continue;
        default:
          if (o = r.trys, !(o = o.length > 0 && o[o.length - 1]) && (s[0] === 6 || s[0] === 2)) {
            r = 0;
            continue;
          }
          if (s[0] === 3 && (!o || s[1] > o[0] && s[1] < o[3])) {
            r.label = s[1];
            break;
          }
          if (s[0] === 6 && r.label < o[1]) {
            r.label = o[1], o = s;
            break;
          }
          if (o && r.label < o[2]) {
            r.label = o[2], r.ops.push(s);
            break;
          }
          o[2] && r.ops.pop(), r.trys.pop();
          continue;
      }
      s = e.call(t, r);
    } catch (l) {
      s = [6, l], i = 0;
    } finally {
      n = o = 0;
    }
    if (s[0] & 5) throw s[1];
    return { value: s[0] ? s[1] : void 0, done: !0 };
  }
}, gE = function(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, o = [], a;
  try {
    for (; !(i = n.next()).done; ) o.push(i.value);
  } catch (u) {
    a = { error: u };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, EE = function(t, e, r) {
  if (arguments.length === 2) for (var n = 0, i = e.length, o; n < i; n++)
    (o || !(n in e)) && (o || (o = Array.prototype.slice.call(e, 0, n)), o[n] = e[n]);
  return t.concat(o || Array.prototype.slice.call(e));
}, TE = (
  /** @class */
  function(t) {
    _E(e, t);
    function e(r) {
      var n, i, o, a, u = t.call(this, {
        aggregationSelector: (n = r.exporter.selectAggregation) === null || n === void 0 ? void 0 : n.bind(r.exporter),
        aggregationTemporalitySelector: (i = r.exporter.selectAggregationTemporality) === null || i === void 0 ? void 0 : i.bind(r.exporter),
        metricProducers: r.metricProducers
      }) || this;
      if (r.exportIntervalMillis !== void 0 && r.exportIntervalMillis <= 0)
        throw Error("exportIntervalMillis must be greater than 0");
      if (r.exportTimeoutMillis !== void 0 && r.exportTimeoutMillis <= 0)
        throw Error("exportTimeoutMillis must be greater than 0");
      if (r.exportTimeoutMillis !== void 0 && r.exportIntervalMillis !== void 0 && r.exportIntervalMillis < r.exportTimeoutMillis)
        throw Error("exportIntervalMillis must be greater than or equal to exportTimeoutMillis");
      return u._exportInterval = (o = r.exportIntervalMillis) !== null && o !== void 0 ? o : 6e4, u._exportTimeout = (a = r.exportTimeoutMillis) !== null && a !== void 0 ? a : 3e4, u._exporter = r.exporter, u;
    }
    return e.prototype._runOnce = function() {
      return nr(this, void 0, void 0, function() {
        var r;
        return ir(this, function(n) {
          switch (n.label) {
            case 0:
              return n.trys.push([0, 2, , 3]), [4, $e(this._doRun(), this._exportTimeout)];
            case 1:
              return n.sent(), [3, 3];
            case 2:
              return r = n.sent(), r instanceof xu ? (T.error("Export took longer than %s milliseconds and timed out.", this._exportTimeout), [
                2
                /*return*/
              ]) : (ya(r), [3, 3]);
            case 3:
              return [
                2
                /*return*/
              ];
          }
        });
      });
    }, e.prototype._doRun = function() {
      var r, n;
      return nr(this, void 0, void 0, function() {
        var i, o, a, u, c, s;
        return ir(this, function(l) {
          switch (l.label) {
            case 0:
              return [4, this.collect({
                timeoutMillis: this._exportTimeout
              })];
            case 1:
              if (i = l.sent(), o = i.resourceMetrics, a = i.errors, a.length > 0 && (s = T).error.apply(s, EE(["PeriodicExportingMetricReader: metrics collection errors"], gE(a), !1)), !o.resource.asyncAttributesPending) return [3, 5];
              l.label = 2;
            case 2:
              return l.trys.push([2, 4, , 5]), [4, (n = (r = o.resource).waitForAsyncAttributes) === null || n === void 0 ? void 0 : n.call(r)];
            case 3:
              return l.sent(), [3, 5];
            case 4:
              return u = l.sent(), T.debug("Error while resolving async portion of resource: ", u), ya(u), [3, 5];
            case 5:
              return o.scopeMetrics.length === 0 ? [
                2
                /*return*/
              ] : [4, eE._export(this._exporter, o)];
            case 6:
              if (c = l.sent(), c.code !== Pi.SUCCESS)
                throw new Error("PeriodicExportingMetricReader: metrics export failed (error " + c.error + ")");
              return [
                2
                /*return*/
              ];
          }
        });
      });
    }, e.prototype.onInitialized = function() {
      var r = this;
      this._interval = setInterval(function() {
        r._runOnce();
      }, this._exportInterval);
    }, e.prototype.onForceFlush = function() {
      return nr(this, void 0, void 0, function() {
        return ir(this, function(r) {
          switch (r.label) {
            case 0:
              return [4, this._runOnce()];
            case 1:
              return r.sent(), [4, this._exporter.forceFlush()];
            case 2:
              return r.sent(), [
                2
                /*return*/
              ];
          }
        });
      });
    }, e.prototype.onShutdown = function() {
      return nr(this, void 0, void 0, function() {
        return ir(this, function(r) {
          switch (r.label) {
            case 0:
              return this._interval && clearInterval(this._interval), [4, this.onForceFlush()];
            case 1:
              return r.sent(), [4, this._exporter.shutdown()];
            case 2:
              return r.sent(), [
                2
                /*return*/
              ];
          }
        });
      });
    }, e;
  }(yE)
), bE = (
  /** @class */
  function() {
    function t() {
      this._registeredViews = [];
    }
    return t.prototype.addView = function(e) {
      this._registeredViews.push(e);
    }, t.prototype.findViews = function(e, r) {
      var n = this, i = this._registeredViews.filter(function(o) {
        return n._matchInstrument(o.instrumentSelector, e) && n._matchMeter(o.meterSelector, r);
      });
      return i;
    }, t.prototype._matchInstrument = function(e, r) {
      return (e.getType() === void 0 || r.type === e.getType()) && e.getNameFilter().match(r.name) && e.getUnitFilter().match(r.unit);
    }, t.prototype._matchMeter = function(e, r) {
      return e.getNameFilter().match(r.name) && (r.version === void 0 || e.getVersionFilter().match(r.version)) && (r.schemaUrl === void 0 || e.getSchemaUrlFilter().match(r.schemaUrl));
    }, t;
  }()
), Xt = /* @__PURE__ */ function() {
  var t = function(e, r) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (n[o] = i[o]);
    }, t(e, r);
  };
  return function(e, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    t(e, r);
    function n() {
      this.constructor = e;
    }
    e.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}(), Xr = (
  /** @class */
  function() {
    function t(e, r) {
      this._writableMetricStorage = e, this._descriptor = r;
    }
    return t.prototype._record = function(e, r, n) {
      if (r === void 0 && (r = {}), n === void 0 && (n = N.active()), typeof e != "number") {
        T.warn("non-number value provided to metric " + this._descriptor.name + ": " + e);
        return;
      }
      this._descriptor.valueType === Nt.INT && !Number.isInteger(e) && (T.warn("INT value type cannot accept a floating-point value for " + this._descriptor.name + ", ignoring the fractional digits."), e = Math.trunc(e), !Number.isInteger(e)) || this._writableMetricStorage.record(e, r, n, eo(Date.now()));
    }, t;
  }()
), OE = (
  /** @class */
  function(t) {
    Xt(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.add = function(r, n, i) {
      this._record(r, n, i);
    }, e;
  }(Xr)
), SE = (
  /** @class */
  function(t) {
    Xt(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.add = function(r, n, i) {
      if (r < 0) {
        T.warn("negative value provided to counter " + this._descriptor.name + ": " + r);
        return;
      }
      this._record(r, n, i);
    }, e;
  }(Xr)
), wE = (
  /** @class */
  function(t) {
    Xt(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.record = function(r, n, i) {
      this._record(r, n, i);
    }, e;
  }(Xr)
), AE = (
  /** @class */
  function(t) {
    Xt(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.record = function(r, n, i) {
      if (r < 0) {
        T.warn("negative value provided to histogram " + this._descriptor.name + ": " + r);
        return;
      }
      this._record(r, n, i);
    }, e;
  }(Xr)
), qr = (
  /** @class */
  function() {
    function t(e, r, n) {
      this._observableRegistry = n, this._descriptor = e, this._metricStorages = r;
    }
    return t.prototype.addCallback = function(e) {
      this._observableRegistry.addCallback(e, this);
    }, t.prototype.removeCallback = function(e) {
      this._observableRegistry.removeCallback(e, this);
    }, t;
  }()
), LE = (
  /** @class */
  function(t) {
    Xt(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e;
  }(qr)
), RE = (
  /** @class */
  function(t) {
    Xt(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e;
  }(qr)
), NE = (
  /** @class */
  function(t) {
    Xt(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e;
  }(qr)
);
function Ii(t) {
  return t instanceof qr;
}
var CE = (
  /** @class */
  function() {
    function t(e) {
      this._meterSharedState = e;
    }
    return t.prototype.createGauge = function(e, r) {
      var n = Tt(e, w.GAUGE, r), i = this._meterSharedState.registerMetricStorage(n);
      return new wE(i, n);
    }, t.prototype.createHistogram = function(e, r) {
      var n = Tt(e, w.HISTOGRAM, r), i = this._meterSharedState.registerMetricStorage(n);
      return new AE(i, n);
    }, t.prototype.createCounter = function(e, r) {
      var n = Tt(e, w.COUNTER, r), i = this._meterSharedState.registerMetricStorage(n);
      return new SE(i, n);
    }, t.prototype.createUpDownCounter = function(e, r) {
      var n = Tt(e, w.UP_DOWN_COUNTER, r), i = this._meterSharedState.registerMetricStorage(n);
      return new OE(i, n);
    }, t.prototype.createObservableGauge = function(e, r) {
      var n = Tt(e, w.OBSERVABLE_GAUGE, r), i = this._meterSharedState.registerAsyncMetricStorage(n);
      return new RE(n, i, this._meterSharedState.observableRegistry);
    }, t.prototype.createObservableCounter = function(e, r) {
      var n = Tt(e, w.OBSERVABLE_COUNTER, r), i = this._meterSharedState.registerAsyncMetricStorage(n);
      return new LE(n, i, this._meterSharedState.observableRegistry);
    }, t.prototype.createObservableUpDownCounter = function(e, r) {
      var n = Tt(e, w.OBSERVABLE_UP_DOWN_COUNTER, r), i = this._meterSharedState.registerAsyncMetricStorage(n);
      return new NE(n, i, this._meterSharedState.observableRegistry);
    }, t.prototype.addBatchObservableCallback = function(e, r) {
      this._meterSharedState.observableRegistry.addBatchCallback(e, r);
    }, t.prototype.removeBatchObservableCallback = function(e, r) {
      this._meterSharedState.observableRegistry.removeBatchCallback(e, r);
    }, t;
  }()
), Fu = (
  /** @class */
  function() {
    function t(e) {
      this._instrumentDescriptor = e;
    }
    return t.prototype.getInstrumentDescriptor = function() {
      return this._instrumentDescriptor;
    }, t.prototype.updateDescription = function(e) {
      this._instrumentDescriptor = Tt(this._instrumentDescriptor.name, this._instrumentDescriptor.type, {
        description: e,
        valueType: this._instrumentDescriptor.valueType,
        unit: this._instrumentDescriptor.unit,
        advice: this._instrumentDescriptor.advice
      });
    }, t;
  }()
), xE = /* @__PURE__ */ function() {
  var t = function(e, r) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (n[o] = i[o]);
    }, t(e, r);
  };
  return function(e, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    t(e, r);
    function n() {
      this.constructor = e;
    }
    e.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}(), Ea = function(t, e) {
  var r = { label: 0, sent: function() {
    if (o[0] & 1) throw o[1];
    return o[1];
  }, trys: [], ops: [] }, n, i, o, a;
  return a = { next: u(0), throw: u(1), return: u(2) }, typeof Symbol == "function" && (a[Symbol.iterator] = function() {
    return this;
  }), a;
  function u(s) {
    return function(l) {
      return c([s, l]);
    };
  }
  function c(s) {
    if (n) throw new TypeError("Generator is already executing.");
    for (; r; ) try {
      if (n = 1, i && (o = s[0] & 2 ? i.return : s[0] ? i.throw || ((o = i.return) && o.call(i), 0) : i.next) && !(o = o.call(i, s[1])).done) return o;
      switch (i = 0, o && (s = [s[0] & 2, o.value]), s[0]) {
        case 0:
        case 1:
          o = s;
          break;
        case 4:
          return r.label++, { value: s[1], done: !1 };
        case 5:
          r.label++, i = s[1], s = [0];
          continue;
        case 7:
          s = r.ops.pop(), r.trys.pop();
          continue;
        default:
          if (o = r.trys, !(o = o.length > 0 && o[o.length - 1]) && (s[0] === 6 || s[0] === 2)) {
            r = 0;
            continue;
          }
          if (s[0] === 3 && (!o || s[1] > o[0] && s[1] < o[3])) {
            r.label = s[1];
            break;
          }
          if (s[0] === 6 && r.label < o[1]) {
            r.label = o[1], o = s;
            break;
          }
          if (o && r.label < o[2]) {
            r.label = o[2], r.ops.push(s);
            break;
          }
          o[2] && r.ops.pop(), r.trys.pop();
          continue;
      }
      s = e.call(t, r);
    } catch (l) {
      s = [6, l], i = 0;
    } finally {
      n = o = 0;
    }
    if (s[0] & 5) throw s[1];
    return { value: s[0] ? s[1] : void 0, done: !0 };
  }
}, PE = (
  /** @class */
  function() {
    function t(e) {
      this._hash = e, this._valueMap = /* @__PURE__ */ new Map(), this._keyMap = /* @__PURE__ */ new Map();
    }
    return t.prototype.get = function(e, r) {
      return r != null || (r = this._hash(e)), this._valueMap.get(r);
    }, t.prototype.getOrDefault = function(e, r) {
      var n = this._hash(e);
      if (this._valueMap.has(n))
        return this._valueMap.get(n);
      var i = r();
      return this._keyMap.has(n) || this._keyMap.set(n, e), this._valueMap.set(n, i), i;
    }, t.prototype.set = function(e, r, n) {
      n != null || (n = this._hash(e)), this._keyMap.has(n) || this._keyMap.set(n, e), this._valueMap.set(n, r);
    }, t.prototype.has = function(e, r) {
      return r != null || (r = this._hash(e)), this._valueMap.has(r);
    }, t.prototype.keys = function() {
      var e, r;
      return Ea(this, function(n) {
        switch (n.label) {
          case 0:
            e = this._keyMap.entries(), r = e.next(), n.label = 1;
          case 1:
            return r.done === !0 ? [3, 3] : [4, [r.value[1], r.value[0]]];
          case 2:
            return n.sent(), r = e.next(), [3, 1];
          case 3:
            return [
              2
              /*return*/
            ];
        }
      });
    }, t.prototype.entries = function() {
      var e, r;
      return Ea(this, function(n) {
        switch (n.label) {
          case 0:
            e = this._valueMap.entries(), r = e.next(), n.label = 1;
          case 1:
            return r.done === !0 ? [3, 3] : [4, [this._keyMap.get(r.value[0]), r.value[1], r.value[0]]];
          case 2:
            return n.sent(), r = e.next(), [3, 1];
          case 3:
            return [
              2
              /*return*/
            ];
        }
      });
    }, Object.defineProperty(t.prototype, "size", {
      get: function() {
        return this._valueMap.size;
      },
      enumerable: !1,
      configurable: !0
    }), t;
  }()
), jt = (
  /** @class */
  function(t) {
    xE(e, t);
    function e() {
      return t.call(this, Cu) || this;
    }
    return e;
  }(PE)
), IE = function(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = n.next()).done; ) o.push(i.value);
  } catch (u) {
    a = { error: u };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Vu = (
  /** @class */
  function() {
    function t(e, r) {
      this._aggregator = e, this._activeCollectionStorage = new jt(), this._cumulativeMemoStorage = new jt(), this._overflowAttributes = { "otel.metric.overflow": !0 }, this._cardinalityLimit = (r ?? 2e3) - 1, this._overflowHashCode = Cu(this._overflowAttributes);
    }
    return t.prototype.record = function(e, r, n, i) {
      var o = this, a = this._activeCollectionStorage.get(r);
      if (!a) {
        if (this._activeCollectionStorage.size >= this._cardinalityLimit) {
          var u = this._activeCollectionStorage.getOrDefault(this._overflowAttributes, function() {
            return o._aggregator.createAccumulation(i);
          });
          u?.record(e);
          return;
        }
        a = this._aggregator.createAccumulation(i), this._activeCollectionStorage.set(r, a);
      }
      a?.record(e);
    }, t.prototype.batchCumulate = function(e, r) {
      var n = this;
      Array.from(e.entries()).forEach(function(i) {
        var o = IE(i, 3), a = o[0], u = o[1], c = o[2], s = n._aggregator.createAccumulation(r);
        s?.record(u);
        var l = s;
        if (n._cumulativeMemoStorage.has(a, c)) {
          var p = n._cumulativeMemoStorage.get(a, c);
          l = n._aggregator.diff(p, s);
        } else if (n._cumulativeMemoStorage.size >= n._cardinalityLimit && (a = n._overflowAttributes, c = n._overflowHashCode, n._cumulativeMemoStorage.has(a, c))) {
          var p = n._cumulativeMemoStorage.get(a, c);
          l = n._aggregator.diff(p, s);
        }
        if (n._activeCollectionStorage.has(a, c)) {
          var f = n._activeCollectionStorage.get(a, c);
          l = n._aggregator.merge(f, l);
        }
        n._cumulativeMemoStorage.set(a, s, c), n._activeCollectionStorage.set(a, l, c);
      });
    }, t.prototype.collect = function() {
      var e = this._activeCollectionStorage;
      return this._activeCollectionStorage = new jt(), e;
    }, t;
  }()
), Fn = function(t) {
  var e = typeof Symbol == "function" && Symbol.iterator, r = e && t[e], n = 0;
  if (r) return r.call(t);
  if (t && typeof t.length == "number") return {
    next: function() {
      return t && n >= t.length && (t = void 0), { value: t && t[n++], done: !t };
    }
  };
  throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.");
}, Ta = function(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = n.next()).done; ) o.push(i.value);
  } catch (u) {
    a = { error: u };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Gu = (
  /** @class */
  function() {
    function t(e, r) {
      var n = this;
      this._aggregator = e, this._unreportedAccumulations = /* @__PURE__ */ new Map(), this._reportHistory = /* @__PURE__ */ new Map(), r.forEach(function(i) {
        n._unreportedAccumulations.set(i, []);
      });
    }
    return t.prototype.buildMetrics = function(e, r, n, i) {
      this._stashAccumulations(n);
      var o = this._getMergedUnreportedAccumulations(e), a = o, u;
      if (this._reportHistory.has(e)) {
        var c = this._reportHistory.get(e), s = c.collectionTime;
        u = c.aggregationTemporality, u === ut.CUMULATIVE ? a = t.merge(c.accumulations, o, this._aggregator) : a = t.calibrateStartTime(c.accumulations, o, s);
      } else
        u = e.selectAggregationTemporality(r.type);
      this._reportHistory.set(e, {
        accumulations: a,
        collectionTime: i,
        aggregationTemporality: u
      });
      var l = ME(a);
      if (l.length !== 0)
        return this._aggregator.toMetricData(
          r,
          u,
          l,
          /* endTime */
          i
        );
    }, t.prototype._stashAccumulations = function(e) {
      var r, n, i = this._unreportedAccumulations.keys();
      try {
        for (var o = Fn(i), a = o.next(); !a.done; a = o.next()) {
          var u = a.value, c = this._unreportedAccumulations.get(u);
          c === void 0 && (c = [], this._unreportedAccumulations.set(u, c)), c.push(e);
        }
      } catch (s) {
        r = { error: s };
      } finally {
        try {
          a && !a.done && (n = o.return) && n.call(o);
        } finally {
          if (r) throw r.error;
        }
      }
    }, t.prototype._getMergedUnreportedAccumulations = function(e) {
      var r, n, i = new jt(), o = this._unreportedAccumulations.get(e);
      if (this._unreportedAccumulations.set(e, []), o === void 0)
        return i;
      try {
        for (var a = Fn(o), u = a.next(); !u.done; u = a.next()) {
          var c = u.value;
          i = t.merge(i, c, this._aggregator);
        }
      } catch (s) {
        r = { error: s };
      } finally {
        try {
          u && !u.done && (n = a.return) && n.call(a);
        } finally {
          if (r) throw r.error;
        }
      }
      return i;
    }, t.merge = function(e, r, n) {
      for (var i = e, o = r.entries(), a = o.next(); a.done !== !0; ) {
        var u = Ta(a.value, 3), c = u[0], s = u[1], l = u[2];
        if (e.has(c, l)) {
          var p = e.get(c, l), f = n.merge(p, s);
          i.set(c, f, l);
        } else
          i.set(c, s, l);
        a = o.next();
      }
      return i;
    }, t.calibrateStartTime = function(e, r, n) {
      var i, o;
      try {
        for (var a = Fn(e.keys()), u = a.next(); !u.done; u = a.next()) {
          var c = Ta(u.value, 2), s = c[0], l = c[1], p = r.get(s, l);
          p?.setStartTime(n);
        }
      } catch (f) {
        i = { error: f };
      } finally {
        try {
          u && !u.done && (o = a.return) && o.call(a);
        } finally {
          if (i) throw i.error;
        }
      }
      return r;
    }, t;
  }()
);
function ME(t) {
  return Array.from(t.entries());
}
var kE = /* @__PURE__ */ function() {
  var t = function(e, r) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (n[o] = i[o]);
    }, t(e, r);
  };
  return function(e, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    t(e, r);
    function n() {
      this.constructor = e;
    }
    e.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}(), DE = function(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = n.next()).done; ) o.push(i.value);
  } catch (u) {
    a = { error: u };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, UE = (
  /** @class */
  function(t) {
    kE(e, t);
    function e(r, n, i, o, a) {
      var u = t.call(this, r) || this;
      return u._attributesProcessor = i, u._aggregationCardinalityLimit = a, u._deltaMetricStorage = new Vu(n, u._aggregationCardinalityLimit), u._temporalMetricStorage = new Gu(n, o), u;
    }
    return e.prototype.record = function(r, n) {
      var i = this, o = new jt();
      Array.from(r.entries()).forEach(function(a) {
        var u = DE(a, 2), c = u[0], s = u[1];
        o.set(i._attributesProcessor.process(c), s);
      }), this._deltaMetricStorage.batchCumulate(o, n);
    }, e.prototype.collect = function(r, n) {
      var i = this._deltaMetricStorage.collect();
      return this._temporalMetricStorage.buildMetrics(r, this._instrumentDescriptor, i, n);
    }, e;
  }(Fu)
);
function ba(t, e) {
  var r = "";
  return t.unit !== e.unit && (r += "	- Unit '" + t.unit + "' does not match '" + e.unit + `'
`), t.type !== e.type && (r += "	- Type '" + t.type + "' does not match '" + e.type + `'
`), t.valueType !== e.valueType && (r += "	- Value Type '" + t.valueType + "' does not match '" + e.valueType + `'
`), t.description !== e.description && (r += "	- Description '" + t.description + "' does not match '" + e.description + `'
`), r;
}
function jE(t, e) {
  return "	- use valueType '" + t.valueType + "' on instrument creation or use an instrument name other than '" + e.name + "'";
}
function BE(t, e) {
  return "	- use unit '" + t.unit + "' on instrument creation or use an instrument name other than '" + e.name + "'";
}
function $E(t, e) {
  var r = {
    name: e.name,
    type: e.type,
    unit: e.unit
  }, n = JSON.stringify(r);
  return "	- create a new view with a name other than '" + t.name + "' and InstrumentSelector '" + n + "'";
}
function FE(t, e) {
  var r = {
    name: e.name,
    type: e.type,
    unit: e.unit
  }, n = JSON.stringify(r);
  return "	- create a new view with a name other than '" + t.name + "' and InstrumentSelector '" + n + `'
    	- OR - create a new view with the name ` + t.name + " and description '" + t.description + "' and InstrumentSelector " + n + `
    	- OR - create a new view with the name ` + e.name + " and description '" + t.description + "' and InstrumentSelector " + n;
}
function Oa(t, e) {
  return t.valueType !== e.valueType ? jE(t, e) : t.unit !== e.unit ? BE(t, e) : t.type !== e.type ? $E(t, e) : t.description !== e.description ? FE(t, e) : "";
}
var Vn = function(t) {
  var e = typeof Symbol == "function" && Symbol.iterator, r = e && t[e], n = 0;
  if (r) return r.call(t);
  if (t && typeof t.length == "number") return {
    next: function() {
      return t && n >= t.length && (t = void 0), { value: t && t[n++], done: !t };
    }
  };
  throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.");
}, VE = (
  /** @class */
  function() {
    function t() {
      this._sharedRegistry = /* @__PURE__ */ new Map(), this._perCollectorRegistry = /* @__PURE__ */ new Map();
    }
    return t.create = function() {
      return new t();
    }, t.prototype.getStorages = function(e) {
      var r, n, i, o, a = [];
      try {
        for (var u = Vn(this._sharedRegistry.values()), c = u.next(); !c.done; c = u.next()) {
          var s = c.value;
          a = a.concat(s);
        }
      } catch (m) {
        r = { error: m };
      } finally {
        try {
          c && !c.done && (n = u.return) && n.call(u);
        } finally {
          if (r) throw r.error;
        }
      }
      var l = this._perCollectorRegistry.get(e);
      if (l != null)
        try {
          for (var p = Vn(l.values()), f = p.next(); !f.done; f = p.next()) {
            var s = f.value;
            a = a.concat(s);
          }
        } catch (m) {
          i = { error: m };
        } finally {
          try {
            f && !f.done && (o = p.return) && o.call(p);
          } finally {
            if (i) throw i.error;
          }
        }
      return a;
    }, t.prototype.register = function(e) {
      this._registerStorage(e, this._sharedRegistry);
    }, t.prototype.registerForCollector = function(e, r) {
      var n = this._perCollectorRegistry.get(e);
      n == null && (n = /* @__PURE__ */ new Map(), this._perCollectorRegistry.set(e, n)), this._registerStorage(r, n);
    }, t.prototype.findOrUpdateCompatibleStorage = function(e) {
      var r = this._sharedRegistry.get(e.name);
      return r === void 0 ? null : this._findOrUpdateCompatibleStorage(e, r);
    }, t.prototype.findOrUpdateCompatibleCollectorStorage = function(e, r) {
      var n = this._perCollectorRegistry.get(e);
      if (n === void 0)
        return null;
      var i = n.get(r.name);
      return i === void 0 ? null : this._findOrUpdateCompatibleStorage(r, i);
    }, t.prototype._registerStorage = function(e, r) {
      var n = e.getInstrumentDescriptor(), i = r.get(n.name);
      if (i === void 0) {
        r.set(n.name, [e]);
        return;
      }
      i.push(e);
    }, t.prototype._findOrUpdateCompatibleStorage = function(e, r) {
      var n, i, o = null;
      try {
        for (var a = Vn(r), u = a.next(); !u.done; u = a.next()) {
          var c = u.value, s = c.getInstrumentDescriptor();
          Lg(s, e) ? (s.description !== e.description && (e.description.length > s.description.length && c.updateDescription(e.description), T.warn("A view or instrument with the name ", e.name, ` has already been registered, but has a different description and is incompatible with another registered view.
`, `Details:
`, ba(s, e), `The longer description will be used.
To resolve the conflict:`, Oa(s, e))), o = c) : T.warn("A view or instrument with the name ", e.name, ` has already been registered and is incompatible with another registered view.
`, `Details:
`, ba(s, e), `To resolve the conflict:
`, Oa(s, e));
        }
      } catch (l) {
        n = { error: l };
      } finally {
        try {
          u && !u.done && (i = a.return) && i.call(a);
        } finally {
          if (n) throw n.error;
        }
      }
      return o;
    }, t;
  }()
), GE = (
  /** @class */
  function() {
    function t(e) {
      this._backingStorages = e;
    }
    return t.prototype.record = function(e, r, n, i) {
      this._backingStorages.forEach(function(o) {
        o.record(e, r, n, i);
      });
    }, t;
  }()
), HE = (
  /** @class */
  function() {
    function t(e, r) {
      this._instrumentName = e, this._valueType = r, this._buffer = new jt();
    }
    return t.prototype.observe = function(e, r) {
      if (r === void 0 && (r = {}), typeof e != "number") {
        T.warn("non-number value provided to metric " + this._instrumentName + ": " + e);
        return;
      }
      this._valueType === Nt.INT && !Number.isInteger(e) && (T.warn("INT value type cannot accept a floating-point value for " + this._instrumentName + ", ignoring the fractional digits."), e = Math.trunc(e), !Number.isInteger(e)) || this._buffer.set(r, e);
    }, t;
  }()
), zE = (
  /** @class */
  function() {
    function t() {
      this._buffer = /* @__PURE__ */ new Map();
    }
    return t.prototype.observe = function(e, r, n) {
      if (n === void 0 && (n = {}), !!Ii(e)) {
        var i = this._buffer.get(e);
        if (i == null && (i = new jt(), this._buffer.set(e, i)), typeof r != "number") {
          T.warn("non-number value provided to metric " + e._descriptor.name + ": " + r);
          return;
        }
        e._descriptor.valueType === Nt.INT && !Number.isInteger(r) && (T.warn("INT value type cannot accept a floating-point value for " + e._descriptor.name + ", ignoring the fractional digits."), r = Math.trunc(r), !Number.isInteger(r)) || i.set(n, r);
      }
    }, t;
  }()
), Gn = function(t, e, r, n) {
  function i(o) {
    return o instanceof r ? o : new r(function(a) {
      a(o);
    });
  }
  return new (r || (r = Promise))(function(o, a) {
    function u(l) {
      try {
        s(n.next(l));
      } catch (p) {
        a(p);
      }
    }
    function c(l) {
      try {
        s(n.throw(l));
      } catch (p) {
        a(p);
      }
    }
    function s(l) {
      l.done ? o(l.value) : i(l.value).then(u, c);
    }
    s((n = n.apply(t, [])).next());
  });
}, Hn = function(t, e) {
  var r = { label: 0, sent: function() {
    if (o[0] & 1) throw o[1];
    return o[1];
  }, trys: [], ops: [] }, n, i, o, a;
  return a = { next: u(0), throw: u(1), return: u(2) }, typeof Symbol == "function" && (a[Symbol.iterator] = function() {
    return this;
  }), a;
  function u(s) {
    return function(l) {
      return c([s, l]);
    };
  }
  function c(s) {
    if (n) throw new TypeError("Generator is already executing.");
    for (; r; ) try {
      if (n = 1, i && (o = s[0] & 2 ? i.return : s[0] ? i.throw || ((o = i.return) && o.call(i), 0) : i.next) && !(o = o.call(i, s[1])).done) return o;
      switch (i = 0, o && (s = [s[0] & 2, o.value]), s[0]) {
        case 0:
        case 1:
          o = s;
          break;
        case 4:
          return r.label++, { value: s[1], done: !1 };
        case 5:
          r.label++, i = s[1], s = [0];
          continue;
        case 7:
          s = r.ops.pop(), r.trys.pop();
          continue;
        default:
          if (o = r.trys, !(o = o.length > 0 && o[o.length - 1]) && (s[0] === 6 || s[0] === 2)) {
            r = 0;
            continue;
          }
          if (s[0] === 3 && (!o || s[1] > o[0] && s[1] < o[3])) {
            r.label = s[1];
            break;
          }
          if (s[0] === 6 && r.label < o[1]) {
            r.label = o[1], o = s;
            break;
          }
          if (o && r.label < o[2]) {
            r.label = o[2], r.ops.push(s);
            break;
          }
          o[2] && r.ops.pop(), r.trys.pop();
          continue;
      }
      s = e.call(t, r);
    } catch (l) {
      s = [6, l], i = 0;
    } finally {
      n = o = 0;
    }
    if (s[0] & 5) throw s[1];
    return { value: s[0] ? s[1] : void 0, done: !0 };
  }
}, Sa = function(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, o = [], a;
  try {
    for (; !(i = n.next()).done; ) o.push(i.value);
  } catch (u) {
    a = { error: u };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, wa = function(t, e, r) {
  if (arguments.length === 2) for (var n = 0, i = e.length, o; n < i; n++)
    (o || !(n in e)) && (o || (o = Array.prototype.slice.call(e, 0, n)), o[n] = e[n]);
  return t.concat(o || Array.prototype.slice.call(e));
}, XE = (
  /** @class */
  function() {
    function t() {
      this._callbacks = [], this._batchCallbacks = [];
    }
    return t.prototype.addCallback = function(e, r) {
      var n = this._findCallback(e, r);
      n >= 0 || this._callbacks.push({ callback: e, instrument: r });
    }, t.prototype.removeCallback = function(e, r) {
      var n = this._findCallback(e, r);
      n < 0 || this._callbacks.splice(n, 1);
    }, t.prototype.addBatchCallback = function(e, r) {
      var n = new Set(r.filter(Ii));
      if (n.size === 0) {
        T.error("BatchObservableCallback is not associated with valid instruments", r);
        return;
      }
      var i = this._findBatchCallback(e, n);
      i >= 0 || this._batchCallbacks.push({ callback: e, instruments: n });
    }, t.prototype.removeBatchCallback = function(e, r) {
      var n = new Set(r.filter(Ii)), i = this._findBatchCallback(e, n);
      i < 0 || this._batchCallbacks.splice(i, 1);
    }, t.prototype.observe = function(e, r) {
      return Gn(this, void 0, void 0, function() {
        var n, i, o, a;
        return Hn(this, function(u) {
          switch (u.label) {
            case 0:
              return n = this._observeCallbacks(e, r), i = this._observeBatchCallbacks(e, r), [4, Eg(wa(wa([], Sa(n), !1), Sa(i), !1))];
            case 1:
              return o = u.sent(), a = o.filter(Tg).map(function(c) {
                return c.reason;
              }), [2, a];
          }
        });
      });
    }, t.prototype._observeCallbacks = function(e, r) {
      var n = this;
      return this._callbacks.map(function(i) {
        var o = i.callback, a = i.instrument;
        return Gn(n, void 0, void 0, function() {
          var u, c;
          return Hn(this, function(s) {
            switch (s.label) {
              case 0:
                return u = new HE(a._descriptor.name, a._descriptor.valueType), c = Promise.resolve(o(u)), r != null && (c = $e(c, r)), [4, c];
              case 1:
                return s.sent(), a._metricStorages.forEach(function(l) {
                  l.record(u._buffer, e);
                }), [
                  2
                  /*return*/
                ];
            }
          });
        });
      });
    }, t.prototype._observeBatchCallbacks = function(e, r) {
      var n = this;
      return this._batchCallbacks.map(function(i) {
        var o = i.callback, a = i.instruments;
        return Gn(n, void 0, void 0, function() {
          var u, c;
          return Hn(this, function(s) {
            switch (s.label) {
              case 0:
                return u = new zE(), c = Promise.resolve(o(u)), r != null && (c = $e(c, r)), [4, c];
              case 1:
                return s.sent(), a.forEach(function(l) {
                  var p = u._buffer.get(l);
                  p != null && l._metricStorages.forEach(function(f) {
                    f.record(p, e);
                  });
                }), [
                  2
                  /*return*/
                ];
            }
          });
        });
      });
    }, t.prototype._findCallback = function(e, r) {
      return this._callbacks.findIndex(function(n) {
        return n.callback === e && n.instrument === r;
      });
    }, t.prototype._findBatchCallback = function(e, r) {
      return this._batchCallbacks.findIndex(function(n) {
        return n.callback === e && bg(n.instruments, r);
      });
    }, t;
  }()
), qE = /* @__PURE__ */ function() {
  var t = function(e, r) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (n[o] = i[o]);
    }, t(e, r);
  };
  return function(e, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    t(e, r);
    function n() {
      this.constructor = e;
    }
    e.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}(), KE = (
  /** @class */
  function(t) {
    qE(e, t);
    function e(r, n, i, o, a) {
      var u = t.call(this, r) || this;
      return u._attributesProcessor = i, u._aggregationCardinalityLimit = a, u._deltaMetricStorage = new Vu(n, u._aggregationCardinalityLimit), u._temporalMetricStorage = new Gu(n, o), u;
    }
    return e.prototype.record = function(r, n, i, o) {
      n = this._attributesProcessor.process(n, i), this._deltaMetricStorage.record(r, n, i, o);
    }, e.prototype.collect = function(r, n) {
      var i = this._deltaMetricStorage.collect();
      return this._temporalMetricStorage.buildMetrics(r, this._instrumentDescriptor, i, n);
    }, e;
  }(Fu)
), Hu = /* @__PURE__ */ function() {
  var t = function(e, r) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (n[o] = i[o]);
    }, t(e, r);
  };
  return function(e, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    t(e, r);
    function n() {
      this.constructor = e;
    }
    e.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}(), ro = (
  /** @class */
  function() {
    function t() {
    }
    return t.Noop = function() {
      return YE;
    }, t;
  }()
), WE = (
  /** @class */
  function(t) {
    Hu(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.process = function(r, n) {
      return r;
    }, e;
  }(ro)
);
(function(t) {
  Hu(e, t);
  function e(r) {
    var n = t.call(this) || this;
    return n._allowedAttributeNames = r, n;
  }
  return e.prototype.process = function(r, n) {
    var i = this, o = {};
    return Object.keys(r).filter(function(a) {
      return i._allowedAttributeNames.includes(a);
    }).forEach(function(a) {
      return o[a] = r[a];
    }), o;
  }, e;
})(ro);
var YE = new WE(), JE = function(t, e, r, n) {
  function i(o) {
    return o instanceof r ? o : new r(function(a) {
      a(o);
    });
  }
  return new (r || (r = Promise))(function(o, a) {
    function u(l) {
      try {
        s(n.next(l));
      } catch (p) {
        a(p);
      }
    }
    function c(l) {
      try {
        s(n.throw(l));
      } catch (p) {
        a(p);
      }
    }
    function s(l) {
      l.done ? o(l.value) : i(l.value).then(u, c);
    }
    s((n = n.apply(t, [])).next());
  });
}, QE = function(t, e) {
  var r = { label: 0, sent: function() {
    if (o[0] & 1) throw o[1];
    return o[1];
  }, trys: [], ops: [] }, n, i, o, a;
  return a = { next: u(0), throw: u(1), return: u(2) }, typeof Symbol == "function" && (a[Symbol.iterator] = function() {
    return this;
  }), a;
  function u(s) {
    return function(l) {
      return c([s, l]);
    };
  }
  function c(s) {
    if (n) throw new TypeError("Generator is already executing.");
    for (; r; ) try {
      if (n = 1, i && (o = s[0] & 2 ? i.return : s[0] ? i.throw || ((o = i.return) && o.call(i), 0) : i.next) && !(o = o.call(i, s[1])).done) return o;
      switch (i = 0, o && (s = [s[0] & 2, o.value]), s[0]) {
        case 0:
        case 1:
          o = s;
          break;
        case 4:
          return r.label++, { value: s[1], done: !1 };
        case 5:
          r.label++, i = s[1], s = [0];
          continue;
        case 7:
          s = r.ops.pop(), r.trys.pop();
          continue;
        default:
          if (o = r.trys, !(o = o.length > 0 && o[o.length - 1]) && (s[0] === 6 || s[0] === 2)) {
            r = 0;
            continue;
          }
          if (s[0] === 3 && (!o || s[1] > o[0] && s[1] < o[3])) {
            r.label = s[1];
            break;
          }
          if (s[0] === 6 && r.label < o[1]) {
            r.label = o[1], o = s;
            break;
          }
          if (o && r.label < o[2]) {
            r.label = o[2], r.ops.push(s);
            break;
          }
          o[2] && r.ops.pop(), r.trys.pop();
          continue;
      }
      s = e.call(t, r);
    } catch (l) {
      s = [6, l], i = 0;
    } finally {
      n = o = 0;
    }
    if (s[0] & 5) throw s[1];
    return { value: s[0] ? s[1] : void 0, done: !0 };
  }
}, ZE = function(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = n.next()).done; ) o.push(i.value);
  } catch (u) {
    a = { error: u };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, tT = (
  /** @class */
  function() {
    function t(e, r) {
      this._meterProviderSharedState = e, this._instrumentationScope = r, this.metricStorageRegistry = new VE(), this.observableRegistry = new XE(), this.meter = new CE(this);
    }
    return t.prototype.registerMetricStorage = function(e) {
      var r = this._registerMetricStorage(e, KE);
      return r.length === 1 ? r[0] : new GE(r);
    }, t.prototype.registerAsyncMetricStorage = function(e) {
      var r = this._registerMetricStorage(e, UE);
      return r;
    }, t.prototype.collect = function(e, r, n) {
      return JE(this, void 0, void 0, function() {
        var i, o, a;
        return QE(this, function(u) {
          switch (u.label) {
            case 0:
              return [4, this.observableRegistry.observe(r, n?.timeoutMillis)];
            case 1:
              return i = u.sent(), o = this.metricStorageRegistry.getStorages(e), o.length === 0 ? [2, null] : (a = o.map(function(c) {
                return c.collect(e, r);
              }).filter(_g), a.length === 0 ? [2, { errors: i }] : [2, {
                scopeMetrics: {
                  scope: this._instrumentationScope,
                  metrics: a
                },
                errors: i
              }]);
          }
        });
      });
    }, t.prototype._registerMetricStorage = function(e, r) {
      var n = this, i = this._meterProviderSharedState.viewRegistry.findViews(e, this._instrumentationScope), o = i.map(function(c) {
        var s = Ag(c, e), l = n.metricStorageRegistry.findOrUpdateCompatibleStorage(s);
        if (l != null)
          return l;
        var p = c.aggregation.createAggregator(s), f = new r(s, p, c.attributesProcessor, n._meterProviderSharedState.metricCollectors, c.aggregationCardinalityLimit);
        return n.metricStorageRegistry.register(f), f;
      });
      if (o.length === 0) {
        var a = this._meterProviderSharedState.selectAggregations(e.type), u = a.map(function(c) {
          var s = ZE(c, 2), l = s[0], p = s[1], f = n.metricStorageRegistry.findOrUpdateCompatibleCollectorStorage(l, e);
          if (f != null)
            return f;
          var m = p.createAggregator(e), v = l.selectCardinalityLimit(e.type), y = new r(e, m, ro.Noop(), [l], v);
          return n.metricStorageRegistry.registerForCollector(l, y), y;
        });
        o = o.concat(u);
      }
      return o;
    }, t;
  }()
), eT = function(t) {
  var e = typeof Symbol == "function" && Symbol.iterator, r = e && t[e], n = 0;
  if (r) return r.call(t);
  if (t && typeof t.length == "number") return {
    next: function() {
      return t && n >= t.length && (t = void 0), { value: t && t[n++], done: !t };
    }
  };
  throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.");
}, rT = (
  /** @class */
  function() {
    function t(e) {
      this.resource = e, this.viewRegistry = new bE(), this.metricCollectors = [], this.meterSharedStates = /* @__PURE__ */ new Map();
    }
    return t.prototype.getMeterSharedState = function(e) {
      var r = gg(e), n = this.meterSharedStates.get(r);
      return n == null && (n = new tT(this, e), this.meterSharedStates.set(r, n)), n;
    }, t.prototype.selectAggregations = function(e) {
      var r, n, i = [];
      try {
        for (var o = eT(this.metricCollectors), a = o.next(); !a.done; a = o.next()) {
          var u = a.value;
          i.push([u, u.selectAggregation(e)]);
        }
      } catch (c) {
        r = { error: c };
      } finally {
        try {
          a && !a.done && (n = o.return) && n.call(o);
        } finally {
          if (r) throw r.error;
        }
      }
      return i;
    }, t;
  }()
), or = function(t, e, r, n) {
  function i(o) {
    return o instanceof r ? o : new r(function(a) {
      a(o);
    });
  }
  return new (r || (r = Promise))(function(o, a) {
    function u(l) {
      try {
        s(n.next(l));
      } catch (p) {
        a(p);
      }
    }
    function c(l) {
      try {
        s(n.throw(l));
      } catch (p) {
        a(p);
      }
    }
    function s(l) {
      l.done ? o(l.value) : i(l.value).then(u, c);
    }
    s((n = n.apply(t, [])).next());
  });
}, ar = function(t, e) {
  var r = { label: 0, sent: function() {
    if (o[0] & 1) throw o[1];
    return o[1];
  }, trys: [], ops: [] }, n, i, o, a;
  return a = { next: u(0), throw: u(1), return: u(2) }, typeof Symbol == "function" && (a[Symbol.iterator] = function() {
    return this;
  }), a;
  function u(s) {
    return function(l) {
      return c([s, l]);
    };
  }
  function c(s) {
    if (n) throw new TypeError("Generator is already executing.");
    for (; r; ) try {
      if (n = 1, i && (o = s[0] & 2 ? i.return : s[0] ? i.throw || ((o = i.return) && o.call(i), 0) : i.next) && !(o = o.call(i, s[1])).done) return o;
      switch (i = 0, o && (s = [s[0] & 2, o.value]), s[0]) {
        case 0:
        case 1:
          o = s;
          break;
        case 4:
          return r.label++, { value: s[1], done: !1 };
        case 5:
          r.label++, i = s[1], s = [0];
          continue;
        case 7:
          s = r.ops.pop(), r.trys.pop();
          continue;
        default:
          if (o = r.trys, !(o = o.length > 0 && o[o.length - 1]) && (s[0] === 6 || s[0] === 2)) {
            r = 0;
            continue;
          }
          if (s[0] === 3 && (!o || s[1] > o[0] && s[1] < o[3])) {
            r.label = s[1];
            break;
          }
          if (s[0] === 6 && r.label < o[1]) {
            r.label = o[1], o = s;
            break;
          }
          if (o && r.label < o[2]) {
            r.label = o[2], r.ops.push(s);
            break;
          }
          o[2] && r.ops.pop(), r.trys.pop();
          continue;
      }
      s = e.call(t, r);
    } catch (l) {
      s = [6, l], i = 0;
    } finally {
      n = o = 0;
    }
    if (s[0] & 5) throw s[1];
    return { value: s[0] ? s[1] : void 0, done: !0 };
  }
}, nT = function(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, o = [], a;
  try {
    for (; !(i = n.next()).done; ) o.push(i.value);
  } catch (u) {
    a = { error: u };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, iT = function(t, e, r) {
  if (arguments.length === 2) for (var n = 0, i = e.length, o; n < i; n++)
    (o || !(n in e)) && (o || (o = Array.prototype.slice.call(e, 0, n)), o[n] = e[n]);
  return t.concat(o || Array.prototype.slice.call(e));
}, oT = (
  /** @class */
  function() {
    function t(e, r) {
      this._sharedState = e, this._metricReader = r;
    }
    return t.prototype.collect = function(e) {
      return or(this, void 0, void 0, function() {
        var r, n, i, o, a = this;
        return ar(this, function(u) {
          switch (u.label) {
            case 0:
              return r = eo(Date.now()), n = [], i = [], o = Array.from(this._sharedState.meterSharedStates.values()).map(function(c) {
                return or(a, void 0, void 0, function() {
                  var s;
                  return ar(this, function(l) {
                    switch (l.label) {
                      case 0:
                        return [4, c.collect(this, r, e)];
                      case 1:
                        return s = l.sent(), s?.scopeMetrics != null && n.push(s.scopeMetrics), s?.errors != null && i.push.apply(i, iT([], nT(s.errors), !1)), [
                          2
                          /*return*/
                        ];
                    }
                  });
                });
              }), [4, Promise.all(o)];
            case 1:
              return u.sent(), [2, {
                resourceMetrics: {
                  resource: this._sharedState.resource,
                  scopeMetrics: n
                },
                errors: i
              }];
          }
        });
      });
    }, t.prototype.forceFlush = function(e) {
      return or(this, void 0, void 0, function() {
        return ar(this, function(r) {
          switch (r.label) {
            case 0:
              return [4, this._metricReader.forceFlush(e)];
            case 1:
              return r.sent(), [
                2
                /*return*/
              ];
          }
        });
      });
    }, t.prototype.shutdown = function(e) {
      return or(this, void 0, void 0, function() {
        return ar(this, function(r) {
          switch (r.label) {
            case 0:
              return [4, this._metricReader.shutdown(e)];
            case 1:
              return r.sent(), [
                2
                /*return*/
              ];
          }
        });
      });
    }, t.prototype.selectAggregationTemporality = function(e) {
      return this._metricReader.selectAggregationTemporality(e);
    }, t.prototype.selectAggregation = function(e) {
      return this._metricReader.selectAggregation(e);
    }, t.prototype.selectCardinalityLimit = function(e) {
      var r, n, i;
      return (i = (n = (r = this._metricReader).selectCardinalityLimit) === null || n === void 0 ? void 0 : n.call(r, e)) !== null && i !== void 0 ? i : 2e3;
    }, t;
  }()
), Aa = function(t, e, r, n) {
  function i(o) {
    return o instanceof r ? o : new r(function(a) {
      a(o);
    });
  }
  return new (r || (r = Promise))(function(o, a) {
    function u(l) {
      try {
        s(n.next(l));
      } catch (p) {
        a(p);
      }
    }
    function c(l) {
      try {
        s(n.throw(l));
      } catch (p) {
        a(p);
      }
    }
    function s(l) {
      l.done ? o(l.value) : i(l.value).then(u, c);
    }
    s((n = n.apply(t, [])).next());
  });
}, La = function(t, e) {
  var r = { label: 0, sent: function() {
    if (o[0] & 1) throw o[1];
    return o[1];
  }, trys: [], ops: [] }, n, i, o, a;
  return a = { next: u(0), throw: u(1), return: u(2) }, typeof Symbol == "function" && (a[Symbol.iterator] = function() {
    return this;
  }), a;
  function u(s) {
    return function(l) {
      return c([s, l]);
    };
  }
  function c(s) {
    if (n) throw new TypeError("Generator is already executing.");
    for (; r; ) try {
      if (n = 1, i && (o = s[0] & 2 ? i.return : s[0] ? i.throw || ((o = i.return) && o.call(i), 0) : i.next) && !(o = o.call(i, s[1])).done) return o;
      switch (i = 0, o && (s = [s[0] & 2, o.value]), s[0]) {
        case 0:
        case 1:
          o = s;
          break;
        case 4:
          return r.label++, { value: s[1], done: !1 };
        case 5:
          r.label++, i = s[1], s = [0];
          continue;
        case 7:
          s = r.ops.pop(), r.trys.pop();
          continue;
        default:
          if (o = r.trys, !(o = o.length > 0 && o[o.length - 1]) && (s[0] === 6 || s[0] === 2)) {
            r = 0;
            continue;
          }
          if (s[0] === 3 && (!o || s[1] > o[0] && s[1] < o[3])) {
            r.label = s[1];
            break;
          }
          if (s[0] === 6 && r.label < o[1]) {
            r.label = o[1], o = s;
            break;
          }
          if (o && r.label < o[2]) {
            r.label = o[2], r.ops.push(s);
            break;
          }
          o[2] && r.ops.pop(), r.trys.pop();
          continue;
      }
      s = e.call(t, r);
    } catch (l) {
      s = [6, l], i = 0;
    } finally {
      n = o = 0;
    }
    if (s[0] & 5) throw s[1];
    return { value: s[0] ? s[1] : void 0, done: !0 };
  }
}, Ra = function(t) {
  var e = typeof Symbol == "function" && Symbol.iterator, r = e && t[e], n = 0;
  if (r) return r.call(t);
  if (t && typeof t.length == "number") return {
    next: function() {
      return t && n >= t.length && (t = void 0), { value: t && t[n++], done: !t };
    }
  };
  throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
function aT(t, e) {
  var r = e ?? je.empty();
  return t ? je.default().merge(r) : r;
}
var sT = (
  /** @class */
  function() {
    function t(e) {
      var r, n, i, o, a;
      if (this._shutdown = !1, this._sharedState = new rT(aT((a = e?.mergeResourceWithDefaults) !== null && a !== void 0 ? a : !0, e?.resource)), e?.views != null && e.views.length > 0)
        try {
          for (var u = Ra(e.views), c = u.next(); !c.done; c = u.next()) {
            var s = c.value;
            this._sharedState.viewRegistry.addView(s);
          }
        } catch (m) {
          r = { error: m };
        } finally {
          try {
            c && !c.done && (n = u.return) && n.call(u);
          } finally {
            if (r) throw r.error;
          }
        }
      if (e?.readers != null && e.readers.length > 0)
        try {
          for (var l = Ra(e.readers), p = l.next(); !p.done; p = l.next()) {
            var f = p.value;
            this.addMetricReader(f);
          }
        } catch (m) {
          i = { error: m };
        } finally {
          try {
            p && !p.done && (o = l.return) && o.call(l);
          } finally {
            if (i) throw i.error;
          }
        }
    }
    return t.prototype.getMeter = function(e, r, n) {
      return r === void 0 && (r = ""), n === void 0 && (n = {}), this._shutdown ? (T.warn("A shutdown MeterProvider cannot provide a Meter"), If()) : this._sharedState.getMeterSharedState({
        name: e,
        version: r,
        schemaUrl: n.schemaUrl
      }).meter;
    }, t.prototype.addMetricReader = function(e) {
      var r = new oT(this._sharedState, e);
      e.setMetricProducer(r), this._sharedState.metricCollectors.push(r);
    }, t.prototype.shutdown = function(e) {
      return Aa(this, void 0, void 0, function() {
        return La(this, function(r) {
          switch (r.label) {
            case 0:
              return this._shutdown ? (T.warn("shutdown may only be called once per MeterProvider"), [
                2
                /*return*/
              ]) : (this._shutdown = !0, [4, Promise.all(this._sharedState.metricCollectors.map(function(n) {
                return n.shutdown(e);
              }))]);
            case 1:
              return r.sent(), [
                2
                /*return*/
              ];
          }
        });
      });
    }, t.prototype.forceFlush = function(e) {
      return Aa(this, void 0, void 0, function() {
        return La(this, function(r) {
          switch (r.label) {
            case 0:
              return this._shutdown ? (T.warn("invalid attempt to force flush after MeterProvider shutdown"), [
                2
                /*return*/
              ]) : [4, Promise.all(this._sharedState.metricCollectors.map(function(n) {
                return n.forceFlush(e);
              }))];
            case 1:
              return r.sent(), [
                2
                /*return*/
              ];
          }
        });
      });
    }, t;
  }()
);
function uT(t, e) {
  var r = wu(e);
  return {
    resource: Au(t.resource),
    schemaUrl: void 0,
    scopeMetrics: cT(t.scopeMetrics, r)
  };
}
function cT(t, e) {
  return Array.from(t.map(function(r) {
    return {
      scope: Lu(r.scope),
      metrics: r.metrics.map(function(n) {
        return lT(n, e);
      }),
      schemaUrl: r.scope.schemaUrl
    };
  }));
}
function lT(t, e) {
  var r = {
    name: t.descriptor.name,
    description: t.descriptor.description,
    unit: t.descriptor.unit
  }, n = dT(t.aggregationTemporality);
  switch (t.dataPointType) {
    case pt.SUM:
      r.sum = {
        aggregationTemporality: n,
        isMonotonic: t.isMonotonic,
        dataPoints: Na(t, e)
      };
      break;
    case pt.GAUGE:
      r.gauge = {
        dataPoints: Na(t, e)
      };
      break;
    case pt.HISTOGRAM:
      r.histogram = {
        aggregationTemporality: n,
        dataPoints: fT(t, e)
      };
      break;
    case pt.EXPONENTIAL_HISTOGRAM:
      r.exponentialHistogram = {
        aggregationTemporality: n,
        dataPoints: hT(t, e)
      };
      break;
  }
  return r;
}
function pT(t, e, r) {
  var n = {
    attributes: Ht(t.attributes),
    startTimeUnixNano: r.encodeHrTime(t.startTime),
    timeUnixNano: r.encodeHrTime(t.endTime)
  };
  switch (e) {
    case Nt.INT:
      n.asInt = t.value;
      break;
    case Nt.DOUBLE:
      n.asDouble = t.value;
      break;
  }
  return n;
}
function Na(t, e) {
  return t.dataPoints.map(function(r) {
    return pT(r, t.descriptor.valueType, e);
  });
}
function fT(t, e) {
  return t.dataPoints.map(function(r) {
    var n = r.value;
    return {
      attributes: Ht(r.attributes),
      bucketCounts: n.buckets.counts,
      explicitBounds: n.buckets.boundaries,
      count: n.count,
      sum: n.sum,
      min: n.min,
      max: n.max,
      startTimeUnixNano: e.encodeHrTime(r.startTime),
      timeUnixNano: e.encodeHrTime(r.endTime)
    };
  });
}
function hT(t, e) {
  return t.dataPoints.map(function(r) {
    var n = r.value;
    return {
      attributes: Ht(r.attributes),
      count: n.count,
      min: n.min,
      max: n.max,
      sum: n.sum,
      positive: {
        offset: n.positive.offset,
        bucketCounts: n.positive.bucketCounts
      },
      negative: {
        offset: n.negative.offset,
        bucketCounts: n.negative.bucketCounts
      },
      scale: n.scale,
      zeroCount: n.zeroCount,
      startTimeUnixNano: e.encodeHrTime(r.startTime),
      timeUnixNano: e.encodeHrTime(r.endTime)
    };
  });
}
function dT(t) {
  switch (t) {
    case ut.DELTA:
      return 1;
    case ut.CUMULATIVE:
      return 2;
  }
}
function vT(t, e) {
  return {
    resourceMetrics: t.map(function(r) {
      return uT(r, e);
    })
  };
}
var mT = function(t) {
  var e = typeof Symbol == "function" && Symbol.iterator, r = e && t[e], n = 0;
  if (r) return r.call(t);
  if (t && typeof t.length == "number") return {
    next: function() {
      return t && n >= t.length && (t = void 0), { value: t && t[n++], done: !t };
    }
  };
  throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.");
}, yT = function(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = n.next()).done; ) o.push(i.value);
  } catch (u) {
    a = { error: u };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
};
function _T(t, e) {
  var r, n = t.spanContext(), i = t.status;
  return {
    traceId: e.encodeSpanContext(n.traceId),
    spanId: e.encodeSpanContext(n.spanId),
    parentSpanId: e.encodeOptionalSpanContext(t.parentSpanId),
    traceState: (r = n.traceState) === null || r === void 0 ? void 0 : r.serialize(),
    name: t.name,
    // Span kind is offset by 1 because the API does not define a value for unset
    kind: t.kind == null ? 0 : t.kind + 1,
    startTimeUnixNano: e.encodeHrTime(t.startTime),
    endTimeUnixNano: e.encodeHrTime(t.endTime),
    attributes: Ht(t.attributes),
    droppedAttributesCount: t.droppedAttributesCount,
    events: t.events.map(function(o) {
      return ET(o, e);
    }),
    droppedEventsCount: t.droppedEventsCount,
    status: {
      // API and proto enums share the same values
      code: i.code,
      message: i.message
    },
    links: t.links.map(function(o) {
      return gT(o, e);
    }),
    droppedLinksCount: t.droppedLinksCount
  };
}
function gT(t, e) {
  var r;
  return {
    attributes: t.attributes ? Ht(t.attributes) : [],
    spanId: e.encodeSpanContext(t.context.spanId),
    traceId: e.encodeSpanContext(t.context.traceId),
    traceState: (r = t.context.traceState) === null || r === void 0 ? void 0 : r.serialize(),
    droppedAttributesCount: t.droppedAttributesCount || 0
  };
}
function ET(t, e) {
  return {
    attributes: t.attributes ? Ht(t.attributes) : [],
    name: t.name,
    timeUnixNano: e.encodeHrTime(t.time),
    droppedAttributesCount: t.droppedAttributesCount || 0
  };
}
function TT(t, e) {
  var r = wu(e);
  return {
    resourceSpans: OT(t, r)
  };
}
function bT(t) {
  var e, r, n = /* @__PURE__ */ new Map();
  try {
    for (var i = mT(t), o = i.next(); !o.done; o = i.next()) {
      var a = o.value, u = n.get(a.resource);
      u || (u = /* @__PURE__ */ new Map(), n.set(a.resource, u));
      var c = a.instrumentationLibrary.name + "@" + (a.instrumentationLibrary.version || "") + ":" + (a.instrumentationLibrary.schemaUrl || ""), s = u.get(c);
      s || (s = [], u.set(c, s)), s.push(a);
    }
  } catch (l) {
    e = { error: l };
  } finally {
    try {
      o && !o.done && (r = i.return) && r.call(i);
    } finally {
      if (e) throw e.error;
    }
  }
  return n;
}
function OT(t, e) {
  for (var r = bT(t), n = [], i = r.entries(), o = i.next(); !o.done; ) {
    for (var a = yT(o.value, 2), u = a[0], c = a[1], s = [], l = c.values(), p = l.next(); !p.done; ) {
      var f = p.value;
      if (f.length > 0) {
        var m = f.map(function(y) {
          return _T(y, e);
        });
        s.push({
          scope: Lu(f[0].instrumentationLibrary),
          spans: m,
          schemaUrl: f[0].instrumentationLibrary.schemaUrl
        });
      }
      p = l.next();
    }
    var v = {
      resource: Au(u),
      scopeSpans: s,
      schemaUrl: void 0
    };
    n.push(v), o = i.next();
  }
  return n;
}
var ST = {
  serializeRequest: function(t) {
    var e = vT([t], {
      useLongBits: !1
    }), r = new TextEncoder();
    return r.encode(JSON.stringify(e));
  },
  deserializeResponse: function(t) {
    var e = new TextDecoder();
    return JSON.parse(e.decode(t));
  }
}, wT = {
  serializeRequest: function(t) {
    var e = TT(t, {
      useHex: !0,
      useLongBits: !1
    }), r = new TextEncoder();
    return r.encode(JSON.stringify(e));
  },
  deserializeResponse: function(t) {
    var e = new TextDecoder();
    return JSON.parse(e.decode(t));
  }
}, AT = function(t, e, r, n) {
  function i(o) {
    return o instanceof r ? o : new r(function(a) {
      a(o);
    });
  }
  return new (r || (r = Promise))(function(o, a) {
    function u(l) {
      try {
        s(n.next(l));
      } catch (p) {
        a(p);
      }
    }
    function c(l) {
      try {
        s(n.throw(l));
      } catch (p) {
        a(p);
      }
    }
    function s(l) {
      l.done ? o(l.value) : i(l.value).then(u, c);
    }
    s((n = n.apply(t, [])).next());
  });
}, LT = function(t, e) {
  var r = { label: 0, sent: function() {
    if (o[0] & 1) throw o[1];
    return o[1];
  }, trys: [], ops: [] }, n, i, o, a;
  return a = { next: u(0), throw: u(1), return: u(2) }, typeof Symbol == "function" && (a[Symbol.iterator] = function() {
    return this;
  }), a;
  function u(s) {
    return function(l) {
      return c([s, l]);
    };
  }
  function c(s) {
    if (n) throw new TypeError("Generator is already executing.");
    for (; r; ) try {
      if (n = 1, i && (o = s[0] & 2 ? i.return : s[0] ? i.throw || ((o = i.return) && o.call(i), 0) : i.next) && !(o = o.call(i, s[1])).done) return o;
      switch (i = 0, o && (s = [s[0] & 2, o.value]), s[0]) {
        case 0:
        case 1:
          o = s;
          break;
        case 4:
          return r.label++, { value: s[1], done: !1 };
        case 5:
          r.label++, i = s[1], s = [0];
          continue;
        case 7:
          s = r.ops.pop(), r.trys.pop();
          continue;
        default:
          if (o = r.trys, !(o = o.length > 0 && o[o.length - 1]) && (s[0] === 6 || s[0] === 2)) {
            r = 0;
            continue;
          }
          if (s[0] === 3 && (!o || s[1] > o[0] && s[1] < o[3])) {
            r.label = s[1];
            break;
          }
          if (s[0] === 6 && r.label < o[1]) {
            r.label = o[1], o = s;
            break;
          }
          if (o && r.label < o[2]) {
            r.label = o[2], r.ops.push(s);
            break;
          }
          o[2] && r.ops.pop(), r.trys.pop();
          continue;
      }
      s = e.call(t, r);
    } catch (l) {
      s = [6, l], i = 0;
    } finally {
      n = o = 0;
    }
    if (s[0] & 5) throw s[1];
    return { value: s[0] ? s[1] : void 0, done: !0 };
  }
}, RT = 5, NT = 1e3, CT = 5e3, xT = 1.5, Ca = 0.2;
function PT() {
  return Math.random() * (2 * Ca) - Ca;
}
var IT = (
  /** @class */
  function() {
    function t(e) {
      this._transport = e;
    }
    return t.prototype.retry = function(e, r, n) {
      var i = this;
      return new Promise(function(o, a) {
        setTimeout(function() {
          i._transport.send(e, r).then(o, a);
        }, n);
      });
    }, t.prototype.send = function(e, r) {
      var n;
      return AT(this, void 0, void 0, function() {
        var i, o, a, u, c, s, l;
        return LT(this, function(p) {
          switch (p.label) {
            case 0:
              return i = Date.now() + r, [4, this._transport.send(e, r)];
            case 1:
              o = p.sent(), a = RT, u = NT, p.label = 2;
            case 2:
              return o.status === "retryable" && a > 0 ? (a--, c = Math.max(Math.min(u, CT) + PT(), 0), u = u * xT, s = (n = o.retryInMillis) !== null && n !== void 0 ? n : c, l = i - Date.now(), s > l ? [2, o] : [4, this.retry(e, l, s)]) : [3, 4];
            case 3:
              return o = p.sent(), [3, 2];
            case 4:
              return [2, o];
          }
        });
      });
    }, t.prototype.shutdown = function() {
      return this._transport.shutdown();
    }, t;
  }()
);
function zu(t) {
  return new IT(t.transport);
}
function MT(t) {
  var e = [429, 502, 503, 504];
  return e.includes(t);
}
function kT(t) {
  if (t != null) {
    var e = Number.parseInt(t, 10);
    if (Number.isInteger(e))
      return e > 0 ? e * 1e3 : -1;
    var r = new Date(t).getTime() - Date.now();
    return r >= 0 ? r : 0;
  }
}
var DT = function(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = n.next()).done; ) o.push(i.value);
  } catch (u) {
    a = { error: u };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, UT = (
  /** @class */
  function() {
    function t(e) {
      this._parameters = e;
    }
    return t.prototype.send = function(e, r) {
      var n = this;
      return new Promise(function(i) {
        var o = new XMLHttpRequest();
        o.timeout = r, o.open("POST", n._parameters.url);
        var a = n._parameters.headers();
        Object.entries(a).forEach(function(u) {
          var c = DT(u, 2), s = c[0], l = c[1];
          o.setRequestHeader(s, l);
        }), o.ontimeout = function(u) {
          i({
            status: "failure",
            error: new Error("XHR request timed out")
          });
        }, o.onreadystatechange = function() {
          o.status >= 200 && o.status <= 299 ? (T.debug("XHR success"), i({
            status: "success"
          })) : o.status && MT(o.status) ? i({
            status: "retryable",
            retryInMillis: kT(o.getResponseHeader("Retry-After"))
          }) : o.status !== 0 && i({
            status: "failure",
            error: new Error("XHR request failed with non-retryable status")
          });
        }, o.onabort = function() {
          i({
            status: "failure",
            error: new Error("XHR request aborted")
          });
        }, o.onerror = function() {
          i({
            status: "failure",
            error: new Error("XHR request errored")
          });
        }, o.send(e);
      });
    }, t.prototype.shutdown = function() {
    }, t;
  }()
);
function jT(t) {
  return new UT(t);
}
var BT = (
  /** @class */
  function() {
    function t(e) {
      this._params = e;
    }
    return t.prototype.send = function(e) {
      var r = this;
      return new Promise(function(n) {
        navigator.sendBeacon(r._params.url, new Blob([e], { type: r._params.blobType })) ? (T.debug("SendBeacon success"), n({
          status: "success"
        })) : n({
          status: "failure",
          error: new Error("SendBeacon failed")
        });
      });
    }, t.prototype.shutdown = function() {
    }, t;
  }()
);
function $T(t) {
  return new BT(t);
}
function FT(t, e) {
  return Tu(t, e, zu({
    transport: jT(t)
  }));
}
function VT(t, e) {
  return Tu(t, e, zu({
    transport: $T({
      url: t.url,
      blobType: t.headers()["Content-Type"]
    })
  }));
}
var GT = function(t, e) {
  var r = typeof Symbol == "function" && t[Symbol.iterator];
  if (!r) return t;
  var n = r.call(t), i, o = [], a;
  try {
    for (; (e === void 0 || e-- > 0) && !(i = n.next()).done; ) o.push(i.value);
  } catch (u) {
    a = { error: u };
  } finally {
    try {
      i && !i.done && (r = n.return) && r.call(n);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
};
function HT(t) {
  return function() {
    var e, r = {};
    return Object.entries((e = t?.()) !== null && e !== void 0 ? e : {}).forEach(function(n) {
      var i = GT(n, 2), o = i[0], a = i[1];
      typeof a < "u" ? r[o] = String(a) : T.warn('Header "' + o + '" has invalid value (' + a + ") and will be ignored");
    }), r;
  };
}
var Vt = function() {
  return Vt = Object.assign || function(t) {
    for (var e, r = 1, n = arguments.length; r < n; r++) {
      e = arguments[r];
      for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
    }
    return t;
  }, Vt.apply(this, arguments);
};
function zT(t, e, r) {
  var n = Vt({}, r()), i = {};
  return function() {
    return e != null && Object.assign(i, e()), t != null && Object.assign(i, t()), Object.assign(i, n);
  };
}
function XT(t) {
  if (t != null)
    try {
      return new URL(t), t;
    } catch {
      throw new Error("Configuration: Could not parse user-provided export URL: '" + t + "'");
    }
}
function qT(t, e, r) {
  var n, i, o, a;
  return Vt(Vt({}, K_(t, e, r)), { headers: zT(HT(t.headers), e.headers, r.headers), url: (i = (n = XT(t.url)) !== null && n !== void 0 ? n : e.url) !== null && i !== void 0 ? i : r.url, agentOptions: (a = (o = t.agentOptions) !== null && o !== void 0 ? o : e.agentOptions) !== null && a !== void 0 ? a : r.agentOptions });
}
function KT(t, e) {
  return Vt(Vt({}, W_()), { headers: function() {
    return t;
  }, url: "http://localhost:4318/" + e, agentOptions: { keepAlive: !0 } });
}
function WT(t, e, r) {
  return qT(
    {
      url: t.url,
      timeoutMillis: t.timeoutMillis,
      headers: q_(t.headers),
      concurrencyLimit: t.concurrencyLimit
    },
    {},
    // no fallback for browser case
    KT(r, e)
  );
}
function Xu(t, e, r, n) {
  var i = !!t.headers || typeof navigator.sendBeacon != "function", o = WT(t, r, n);
  return i ? FT(o, e) : VT(o, e);
}
var YT = /* @__PURE__ */ function() {
  var t = function(e, r) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (n[o] = i[o]);
    }, t(e, r);
  };
  return function(e, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    t(e, r);
    function n() {
      this.constructor = e;
    }
    e.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}(), JT = (
  /** @class */
  function(t) {
    YT(e, t);
    function e(r) {
      return r === void 0 && (r = {}), t.call(this, Xu(r, wT, "v1/traces", { "Content-Type": "application/json" })) || this;
    }
    return e;
  }(Eu)
), kr;
(function(t) {
  t[t.DELTA = 0] = "DELTA", t[t.CUMULATIVE = 1] = "CUMULATIVE", t[t.LOWMEMORY = 2] = "LOWMEMORY";
})(kr || (kr = {}));
var QT = /* @__PURE__ */ function() {
  var t = function(e, r) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (n[o] = i[o]);
    }, t(e, r);
  };
  return function(e, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    t(e, r);
    function n() {
      this.constructor = e;
    }
    e.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}(), Mi = function() {
  return ut.CUMULATIVE;
}, qu = function(t) {
  switch (t) {
    case w.COUNTER:
    case w.OBSERVABLE_COUNTER:
    case w.GAUGE:
    case w.HISTOGRAM:
    case w.OBSERVABLE_GAUGE:
      return ut.DELTA;
    case w.UP_DOWN_COUNTER:
    case w.OBSERVABLE_UP_DOWN_COUNTER:
      return ut.CUMULATIVE;
  }
}, Ku = function(t) {
  switch (t) {
    case w.COUNTER:
    case w.HISTOGRAM:
      return ut.DELTA;
    case w.GAUGE:
    case w.UP_DOWN_COUNTER:
    case w.OBSERVABLE_UP_DOWN_COUNTER:
    case w.OBSERVABLE_COUNTER:
    case w.OBSERVABLE_GAUGE:
      return ut.CUMULATIVE;
  }
};
function ZT() {
  var t = Dh(), e = t.OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE.trim().toLowerCase();
  return e === "cumulative" ? Mi : e === "delta" ? qu : e === "lowmemory" ? Ku : (T.warn("OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE is set to '" + t.OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE + "', but only 'cumulative' and 'delta' are allowed. Using default ('cumulative') instead."), Mi);
}
function tb(t) {
  return t != null ? t === kr.DELTA ? qu : t === kr.LOWMEMORY ? Ku : Mi : ZT();
}
function eb(t) {
  return t != null && t.aggregationPreference ? t.aggregationPreference : function(e) {
    return Et.Default();
  };
}
var rb = (
  /** @class */
  function(t) {
    QT(e, t);
    function e(r, n) {
      var i = t.call(this, r) || this;
      return i._aggregationSelector = eb(n), i._aggregationTemporalitySelector = tb(n?.temporalityPreference), i;
    }
    return e.prototype.selectAggregation = function(r) {
      return this._aggregationSelector(r);
    }, e.prototype.selectAggregationTemporality = function(r) {
      return this._aggregationTemporalitySelector(r);
    }, e;
  }(Eu)
), nb = /* @__PURE__ */ function() {
  var t = function(e, r) {
    return t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, i) {
      n.__proto__ = i;
    } || function(n, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (n[o] = i[o]);
    }, t(e, r);
  };
  return function(e, r) {
    if (typeof r != "function" && r !== null)
      throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
    t(e, r);
    function n() {
      this.constructor = e;
    }
    e.prototype = r === null ? Object.create(r) : (n.prototype = r.prototype, new n());
  };
}(), ib = (
  /** @class */
  function(t) {
    nb(e, t);
    function e(r) {
      return t.call(this, Xu(r ?? {}, ST, "v1/metrics", { "Content-Type": "application/json" }), r) || this;
    }
    return e;
  }(rb)
);
function ob(t, e) {
  const r = t.spanContext();
  return {
    name: t.name,
    kind: t.kind,
    spanContext: () => r,
    parentSpanId: t.parentSpanId,
    startTime: t.startTime,
    endTime: t.endTime,
    status: t.status,
    attributes: Ed(t.attributes, e),
    links: t.links,
    events: t.events,
    duration: t.duration,
    ended: t.ended,
    resource: t.resource,
    instrumentationLibrary: t.instrumentationLibrary,
    droppedAttributesCount: t.droppedAttributesCount,
    droppedEventsCount: t.droppedEventsCount,
    droppedLinksCount: t.droppedLinksCount
  };
}
function ab(t, e) {
  if (!e.isSamplingEnabled())
    return t;
  const r = [], n = {}, i = {};
  for (const o of t) {
    o.parentSpanId && (i[o.parentSpanId] = i[o.parentSpanId] || [], i[o.parentSpanId].push(
      o.spanContext().spanId
    ));
    const a = e.shouldSample(o);
    a.sample ? a.attributes ? n[o.spanContext().spanId] = ob(
      o,
      a.attributes
    ) : n[o.spanContext().spanId] = o : r.push(o.spanContext().spanId);
  }
  for (; r.length > 0; ) {
    const o = r.shift(), a = i[o];
    if (a)
      for (const u of a)
        delete n[u], r.push(u);
  }
  return Object.values(n);
}
class sb extends JT {
  constructor(e, r) {
    super(rt(P({}, e), {
      headers: {}
      // a truthy value enables sending with XHR instead of beacon
    })), this.sampler = r;
  }
  export(e, r) {
    const n = ab(e, this.sampler);
    if (n.length === 0)
      return;
    let i = 0;
    const o = (a) => {
      if (a.code === Y.SUCCESS)
        return r({
          code: Y.SUCCESS
        });
      if (i++, i > Vi)
        return r({
          code: Y.FAILED,
          error: a.error
        });
      new Promise(
        (u) => setTimeout(
          u,
          Gi + Hi * Math.pow(2, i)
        )
      ).then(() => {
        super.export(n, o);
      });
    };
    super.export(n, o);
  }
}
class ub extends ib {
  constructor(e) {
    super(rt(P({}, e), {
      headers: {}
    }));
  }
  export(e, r) {
    let n = 0;
    const i = (o) => {
      var a;
      if (o.code === Y.SUCCESS)
        return r({
          code: Y.SUCCESS
        });
      if (n++, n > Vi)
        return console.error(
          `[@launchdarkly/observability] failed to export OTeL metrics: ${(a = o.error) == null ? void 0 : a.message}`,
          o.error
        ), r({
          code: Y.FAILED,
          error: o.error
        });
      new Promise(
        (u) => setTimeout(
          u,
          Gi + Hi * Math.pow(2, n)
        )
      ).then(() => {
        var u;
        console.warn(
          `[@launchdarkly/observability] retry ${n}, failed to export OTeL metrics: ${(u = o.error) == null ? void 0 : u.message}`,
          o.error
        ), super.export(e, i);
      });
    };
    super.export(e, i);
  }
}
const cb = "OT_ZONE_CONTEXT", lb = "Navigation:", pb = ["click", "input", "submit"];
function fb() {
  return !1;
}
const ki = class Pt extends kd {
  constructor(e = {}) {
    var r;
    super(
      Pt.moduleName,
      Pt.version,
      e
    ), k(this, "_spansData", /* @__PURE__ */ new WeakMap()), k(this, "_zonePatched"), k(this, "_wrappedListeners", /* @__PURE__ */ new WeakMap()), k(this, "_eventsSpanMap", /* @__PURE__ */ new WeakMap()), k(this, "_eventNames"), k(this, "_shouldPreventSpanCreation"), this._eventNames = new Set(
      (r = e?.eventNames) != null ? r : pb
    ), this._shouldPreventSpanCreation = typeof e?.shouldPreventSpanCreation == "function" ? e.shouldPreventSpanCreation : fb;
  }
  init() {
  }
  /**
   * This will check if last task was timeout and will save the time to
   * fix the user interaction when nothing happens
   * This timeout comes from xhr plugin which is needed to collect information
   * about last xhr main request from observer
   * @param task
   * @param span
   */
  _checkForTimeout(e, r) {
    const n = this._spansData.get(r);
    n && (e.source === "setTimeout" ? n.hrTimeLastTimeout = Fh() : e.source !== "Promise.then" && e.source !== "setTimeout" && (n.hrTimeLastTimeout = void 0));
  }
  /**
   * Controls whether or not to create a span, based on the event type.
   */
  _allowEventName(e) {
    return this._eventNames.has(e);
  }
  /**
   * Creates a new span
   * @param event
   * @param parentSpan
   */
  _createSpan(e, r) {
    var n;
    const i = e?.target, o = e?.type;
    if (!(i instanceof HTMLElement) || !i.getAttribute || i.hasAttribute("disabled") || !this._allowEventName(o))
      return;
    const a = mu(i, !0);
    try {
      const u = this.tracer.startSpan(
        o,
        {
          attributes: {
            "event.type": o,
            "event.tag": i.tagName,
            "event.xpath": a,
            "event.id": i.id,
            "event.classname": i.className,
            "event.text": (n = i.textContent) != null ? n : "",
            "event.url": window.location.href,
            "viewport.width": window.innerWidth,
            "viewport.height": window.innerHeight
          }
        },
        r ? x.setSpan(N.active(), r) : void 0
      );
      return e instanceof MouseEvent && (u.setAttribute("event.x", e.clientX), u.setAttribute("event.y", e.clientY), u.setAttribute(
        "event.relativeX",
        e.clientX / window.innerWidth
      ), u.setAttribute(
        "event.relativeY",
        e.clientY / window.innerHeight
      ), o === "scroll" && (u.setAttribute("event.scrollX", window.scrollX), u.setAttribute("event.scrollY", window.scrollY))), this._shouldPreventSpanCreation(o, i, u) === !0 ? void 0 : (this._spansData.set(u, {
        taskCount: 0
      }), u);
    } catch (u) {
      this._diag.error(
        "failed to start create new user interaction span",
        u
      );
    }
  }
  /**
   * Decrement number of tasks that left in zone,
   * This is needed to be able to end span when no more tasks left
   * @param span
   */
  _decrementTask(e) {
    const r = this._spansData.get(e);
    r && (r.taskCount--, r.taskCount === 0 && this._tryToEndSpan(e, r.hrTimeLastTimeout));
  }
  /**
   * Return the current span
   * @param zone
   * @private
   */
  _getCurrentSpan(e) {
    const r = e.get(cb);
    return r && x.getSpan(r);
  }
  /**
   * Increment number of tasks that are run within the same zone.
   *     This is needed to be able to end span when no more tasks left
   * @param span
   */
  _incrementTask(e) {
    const r = this._spansData.get(e);
    r && r.taskCount++;
  }
  /**
   * Returns true iff we should use the patched callback; false if it's already been patched
   */
  addPatchedListener(e, r, n, i) {
    let o = this._wrappedListeners.get(n);
    o || (o = /* @__PURE__ */ new Map(), this._wrappedListeners.set(n, o));
    let a = o.get(r);
    return a || (a = /* @__PURE__ */ new Map(), o.set(r, a)), a.has(e) ? !1 : (a.set(e, i), !0);
  }
  /**
   * Returns the patched version of the callback (or undefined)
   */
  removePatchedListener(e, r, n) {
    const i = this._wrappedListeners.get(n);
    if (!i)
      return;
    const o = i.get(r);
    if (!o)
      return;
    const a = o.get(e);
    return a && (o.delete(e), o.size === 0 && (i.delete(r), i.size === 0 && this._wrappedListeners.delete(n))), a;
  }
  // utility method to deal with the Function|EventListener nature of addEventListener
  _invokeListener(e, r, n) {
    return typeof e == "function" ? e.apply(r, n) : e.handleEvent(n[0]);
  }
  /**
   * This patches the addEventListener of HTMLElement to be able to
   * auto instrument the click events
   * This is done when zone is not available
   */
  _patchAddEventListener() {
    const e = this;
    let r = /* @__PURE__ */ new Map();
    return (n) => function(i, o, a) {
      if (!o)
        return n.call(this, i, o, a);
      const u = a && typeof a == "object" && a.once, c = function(...s) {
        var l;
        let p;
        const f = s[0];
        if (!(f != null && f.type))
          return e._invokeListener(o, this, s);
        if (Date.now() - ((l = r.get(f.type)) != null ? l : 0) < 1e3 / 60)
          return e._invokeListener(o, this, s);
        r.set(f.type, Date.now()), f && (p = e._eventsSpanMap.get(f)), u && e.removePatchedListener(this, i, o);
        const m = e._createSpan(f, p);
        return m ? (f && e._eventsSpanMap.set(f, m), N.with(
          x.setSpan(N.active(), m),
          () => {
            const v = e._invokeListener(
              o,
              this,
              s
            );
            return m.end(), v;
          }
        )) : e._invokeListener(o, this, s);
      };
      if (e.addPatchedListener(
        this,
        i,
        o,
        c
      ))
        return n.call(
          this,
          i,
          c,
          a
        );
    };
  }
  /**
   * This patches the removeEventListener of HTMLElement to handle the fact that
   * we patched the original callbacks
   * This is done when zone is not available
   */
  _patchRemoveEventListener() {
    const e = this;
    return (r) => function(n, i, o) {
      const a = e.removePatchedListener(
        this,
        n,
        i
      );
      return a ? r.call(
        this,
        n,
        a,
        o
      ) : r.call(this, n, i, o);
    };
  }
  /**
   * Most browser provide event listener api via EventTarget in prototype chain.
   * Exception to this is IE 11 which has it on the prototypes closest to EventTarget:
   *
   * * - has addEventListener in IE
   * ** - has addEventListener in all other browsers
   * ! - missing in IE
   *
   * HTMLElement -> Element -> Node * -> EventTarget **! -> Object
   * Document -> Node * -> EventTarget **! -> Object
   * Window * -> WindowProperties ! -> EventTarget **! -> Object
   */
  _getPatchableEventTargets() {
    return window.EventTarget ? [EventTarget.prototype] : [Node.prototype, Window.prototype];
  }
  /**
   * Patches the history api
   */
  _patchHistoryApi() {
    this._unpatchHistoryApi(), this._wrap(history, "replaceState", this._patchHistoryMethod()), this._wrap(history, "pushState", this._patchHistoryMethod()), this._wrap(history, "back", this._patchHistoryMethod()), this._wrap(history, "forward", this._patchHistoryMethod()), this._wrap(history, "go", this._patchHistoryMethod());
  }
  /**
   * Patches the certain history api method
   */
  _patchHistoryMethod() {
    const e = this;
    return (r) => function(...n) {
      const i = `${location.pathname}${location.hash}${location.search}`, o = r.apply(this, n), a = `${location.pathname}${location.hash}${location.search}`;
      return i !== a && e._updateInteractionName(a), o;
    };
  }
  /**
   * unpatch the history api methods
   */
  _unpatchHistoryApi() {
    K(history.replaceState) && this._unwrap(history, "replaceState"), K(history.pushState) && this._unwrap(history, "pushState"), K(history.back) && this._unwrap(history, "back"), K(history.forward) && this._unwrap(history, "forward"), K(history.go) && this._unwrap(history, "go");
  }
  /**
   * Updates interaction span name
   * @param url
   */
  _updateInteractionName(e) {
    const r = x.getSpan(
      N.active()
    );
    r && typeof r.updateName == "function" && r.updateName(`${lb} ${e}`);
  }
  /**
   * Patches zone cancel task - this is done to be able to correctly
   * decrement the number of remaining tasks
   */
  _patchZoneCancelTask() {
    const e = this;
    return (r) => function(n) {
      const i = Zone.current, o = e._getCurrentSpan(i);
      return o && e._shouldCountTask(n, i) && e._decrementTask(o), r.call(this, n);
    };
  }
  /**
   * Patches zone schedule task - this is done to be able to correctly
   * increment the number of tasks running within current zone but also to
   * save time in case of timeout running from xhr plugin when waiting for
   * main request from PerformanceResourceTiming
   */
  _patchZoneScheduleTask() {
    const e = this;
    return (r) => function(n) {
      const i = Zone.current, o = e._getCurrentSpan(i);
      return o && e._shouldCountTask(n, i) && (e._incrementTask(o), e._checkForTimeout(n, o)), r.call(this, n);
    };
  }
  /**
   * Patches zone run task - this is done to be able to create a span when
   * user interaction starts
   * @private
   */
  _patchZoneRunTask() {
    const e = this;
    return (r) => function(n, i, o) {
      const a = Array.isArray(o) && o[0] instanceof Event ? o[0] : void 0, u = a?.target;
      let c;
      const s = this;
      if (u) {
        if (c = e._createSpan(a), c)
          return e._incrementTask(c), s.run(() => {
            try {
              return N.with(
                x.setSpan(
                  N.active(),
                  c
                ),
                () => {
                  const l = Zone.current;
                  return n._zone = l, r.call(
                    l,
                    n,
                    i,
                    o
                  );
                }
              );
            } finally {
              e._decrementTask(c);
            }
          });
      } else
        c = e._getCurrentSpan(s);
      try {
        return r.call(s, n, i, o);
      } finally {
        c && e._shouldCountTask(n, s) && e._decrementTask(c);
      }
    };
  }
  /**
   * Decides if task should be counted.
   * @param task
   * @param currentZone
   * @private
   */
  _shouldCountTask(e, r) {
    if (e._zone && (r = e._zone), !r || !e.data || e.data.isPeriodic)
      return !1;
    const n = this._getCurrentSpan(r);
    return !n || !this._spansData.get(n) ? !1 : e.type === "macroTask" || e.type === "microTask";
  }
  /**
   * Will try to end span when such span still exists.
   * @param span
   * @param endTime
   * @private
   */
  _tryToEndSpan(e, r) {
    e && this._spansData.get(e) && (e.end(r), this._spansData.delete(e));
  }
  /**
   * implements enable function
   */
  enable() {
    const e = this._getZoneWithPrototype();
    this._diag.debug(
      "applying patch to",
      Pt.moduleName,
      Pt.version,
      "zone:",
      !!e
    ), e ? (K(e.prototype.runTask) && (this._unwrap(e.prototype, "runTask"), this._diag.debug("removing previous patch from method runTask")), K(e.prototype.scheduleTask) && (this._unwrap(e.prototype, "scheduleTask"), this._diag.debug(
      "removing previous patch from method scheduleTask"
    )), K(e.prototype.cancelTask) && (this._unwrap(e.prototype, "cancelTask"), this._diag.debug(
      "removing previous patch from method cancelTask"
    )), this._zonePatched = !0, this._wrap(
      e.prototype,
      "runTask",
      this._patchZoneRunTask()
    ), this._wrap(
      e.prototype,
      "scheduleTask",
      this._patchZoneScheduleTask()
    ), this._wrap(
      e.prototype,
      "cancelTask",
      this._patchZoneCancelTask()
    )) : (this._zonePatched = !1, this._getPatchableEventTargets().forEach((r) => {
      K(r.addEventListener) && (this._unwrap(r, "addEventListener"), this._diag.debug(
        "removing previous patch from method addEventListener"
      )), K(r.removeEventListener) && (this._unwrap(r, "removeEventListener"), this._diag.debug(
        "removing previous patch from method removeEventListener"
      )), this._wrap(
        r,
        "addEventListener",
        this._patchAddEventListener()
      ), this._wrap(
        r,
        "removeEventListener",
        this._patchRemoveEventListener()
      );
    })), this._patchHistoryApi();
  }
  /**
   * implements unpatch function
   */
  disable() {
    const e = this._getZoneWithPrototype();
    this._diag.debug(
      "removing patch from",
      Pt.moduleName,
      Pt.version,
      "zone:",
      !!e
    ), e && this._zonePatched ? (K(e.prototype.runTask) && this._unwrap(e.prototype, "runTask"), K(e.prototype.scheduleTask) && this._unwrap(e.prototype, "scheduleTask"), K(e.prototype.cancelTask) && this._unwrap(e.prototype, "cancelTask")) : this._getPatchableEventTargets().forEach((r) => {
      K(r.addEventListener) && this._unwrap(r, "addEventListener"), K(r.removeEventListener) && this._unwrap(r, "removeEventListener");
    }), this._unpatchHistoryApi();
  }
  /**
   * returns Zone
   */
  _getZoneWithPrototype() {
    return window.Zone;
  }
};
k(ki, "version", "0.1.1"), k(ki, "moduleName", "user-interaction");
let hb = ki, X = {}, te;
const Dr = "highlight.record", db = "highlight.session_id", Wu = "launchdarkly.js.log", vb = "launchdarkly.exception.id", xa = "launchdarkly.sampling.ratio", Yu = "log.severity", Ju = "log.message", mb = (t, e) => {
  var r, n, i, o, a, u, c, s, l;
  if (X.tracerProvider || X.meterProvider) {
    console.warn("OTEL already initialized. Skipping...");
    return;
  }
  te = t;
  const p = t.backendUrl || void 0 || "https://pub.highlight.io", f = [
    ...(n = (r = t.networkRecordingOptions) == null ? void 0 : r.urlBlocklist) != null ? n : [],
    ...M_
  ], m = (i = t.environment) != null ? i : "production", v = {
    url: t.otlpEndpoint + "/v1/traces",
    concurrencyLimit: 10,
    timeoutMillis: 3e4,
    // Using any because we were getting an error importing CompressionAlgorithm
    // from @opentelemetry/otlp-exporter-base.
    compression: "gzip",
    keepAlive: !0,
    httpAgentOptions: {
      timeout: 6e4,
      keepAlive: !0
    }
  }, y = new sb(
    v,
    e
  ), _ = new yb(y, {
    maxExportBatchSize: 1024,
    // Default value from SDK is 512
    maxQueueSize: 2048,
    // Default value from SDK is 2048
    exportTimeoutMillis: v.timeoutMillis,
    // Default value from SDK is 30_000
    scheduledDelayMillis: v.timeoutMillis
    // Default value from SDK is 1000
  }), E = new je({
    [Vl]: (o = t.serviceName) != null ? o : "highlight-browser",
    [Gl]: t.serviceVersion,
    "deployment.environment.name": m,
    "highlight.project_id": t.projectId,
    [Wl]: navigator.userAgent,
    "browser.language": navigator.language,
    "telemetry.distro.name": "@highlight-run/observability",
    "telemetry.distro.version": wp
  });
  X.tracerProvider = new zm({
    resource: E,
    mergeResourceWithDefaults: !0,
    spanProcessors: [_]
  }), x.setGlobalTracerProvider(X.tracerProvider);
  const L = new ub(rt(P({}, v), {
    url: t.otlpEndpoint + "/v1/metrics"
  })), U = new TE({
    exporter: L,
    exportIntervalMillis: v.timeoutMillis,
    exportTimeoutMillis: v.timeoutMillis
  });
  X.meterProvider = new sT({ resource: E, readers: [U] }), he.setGlobalMeterProvider(X.meterProvider);
  let D = [];
  ((a = t.instrumentations) == null ? void 0 : a["@opentelemetry/instrumentation-document-load"]) !== !1 && D.push(
    new cy({
      applyCustomAttributesOnSpan: {
        documentLoad: Ma,
        documentFetch: Ma,
        resourceFetch: bb
      }
    })
  ), ((u = t.instrumentations) == null ? void 0 : u["@opentelemetry/instrumentation-user-interaction"]) !== !1 && D.push(
    new hb({
      eventNames: t.eventNames
    })
  ), (c = t.networkRecordingOptions) != null && c.enabled && (((s = t.instrumentations) == null ? void 0 : s["@opentelemetry/instrumentation-fetch"]) !== !1 && D.push(
    new Yy({
      propagateTraceHeaderCorsUrls: ka(
        t.tracingOrigins
      ),
      applyCustomAttributesOnSpan: (j, tt, B) => gt(void 0, null, function* () {
        var dt, vt;
        if (!j.attributes || j.attributes[Dr] === !1)
          return;
        if (!(B instanceof Response)) {
          j.setAttributes({
            "http.response.error": B.message,
            "http.response.status": B.status
          });
          return;
        }
        Ia(
          j,
          tt.body,
          tt.headers,
          t.networkRecordingOptions
        );
        const et = yield H_(
          B,
          (dt = t.networkRecordingOptions) == null ? void 0 : dt.bodyKeysToRecord,
          (vt = t.networkRecordingOptions) == null ? void 0 : vt.networkBodyKeysToRedact
        );
        j.setAttribute("http.response.body", et);
      })
    })
  ), ((l = t.instrumentations) == null ? void 0 : l["@opentelemetry/instrumentation-xml-http-request"]) !== !1 && D.push(
    new x_({
      propagateTraceHeaderCorsUrls: ka(
        t.tracingOrigins
      ),
      applyCustomAttributesOnSpan: (j, tt) => {
        var B, dt;
        const vt = tt;
        if (!j.attributes || j.attributes[Dr] === !1)
          return;
        Ia(
          j,
          vt._body,
          vt._requestHeaders,
          t.networkRecordingOptions
        );
        const et = gu(
          vt._body,
          (B = t.networkRecordingOptions) == null ? void 0 : B.networkBodyKeysToRedact,
          (dt = t.networkRecordingOptions) == null ? void 0 : dt.bodyKeysToRecord,
          vt._requestHeaders
        );
        j.setAttribute("http.request.body", et);
      }
    })
  )), Cd({ instrumentations: D });
  const F = new hu();
  return F.enable(), X.tracerProvider.register({
    contextManager: F,
    propagator: new Hh({
      propagators: [
        new gh(),
        new _b({
          backendUrl: p,
          otlpEndpoint: t.otlpEndpoint,
          tracingOrigins: t.tracingOrigins,
          urlBlocklist: f
        })
      ]
    })
  }), X;
};
class yb extends fu {
  onStart(e, r) {
    e.setAttribute(db, bt()), super.onStart(e, r);
  }
  onEnd(e) {
    e.attributes[Dr] !== !1 && super.onEnd(e);
  }
}
class _b extends sd {
  constructor(e) {
    super(), k(this, "highlightEndpoints"), k(this, "tracingOrigins"), k(this, "urlBlocklist"), this.highlightEndpoints = [
      e.backendUrl,
      `${e.otlpEndpoint}/v1/traces`,
      `${e.otlpEndpoint}/v1/logs`,
      `${e.otlpEndpoint}/v1/metrics`
    ], this.tracingOrigins = e.tracingOrigins, this.urlBlocklist = e.urlBlocklist;
  }
  inject(e, r, n) {
    var i;
    const o = x.getSpan(e);
    if (!o || !o.attributes)
      return;
    const a = o.attributes["http.url"];
    typeof a == "string" && (Tb(
      a,
      this.highlightEndpoints,
      this.tracingOrigins,
      this.urlBlocklist
    ) || o.setAttribute(Dr, !1), !V_(
      a,
      (i = this.tracingOrigins) != null ? i : [],
      this.urlBlocklist
    )) || super.inject(e, r, n);
  }
}
const Qu = "highlight-browser", gb = Qu, Pa = () => {
  var t;
  return (t = X.tracerProvider) == null ? void 0 : t.getTracer(Qu);
}, sr = () => {
  var t;
  return (t = X.meterProvider) == null ? void 0 : t.getMeter(gb);
}, Eb = () => gt(void 0, null, function* () {
  yield Promise.allSettled([
    gt(void 0, null, function* () {
      X.tracerProvider ? (yield X.tracerProvider.shutdown(), X.tracerProvider = void 0) : console.warn(
        "OTEL shutdown called without initialized tracerProvider."
      );
    }),
    gt(void 0, null, function* () {
      X.meterProvider ? (yield X.meterProvider.shutdown(), X.meterProvider = void 0) : console.warn(
        "OTEL shutdown called without initialized meterProvider."
      );
    })
  ]);
}), Ia = (t, e, r, n) => {
  var i;
  const o = typeof e == "string" ? e : String(e);
  if (!t.attributes)
    return;
  const a = t.attributes["http.url"], u = new URL(a);
  let c;
  try {
    c = e ? JSON.parse(o) : void 0, c.operationName && t.setAttribute(
      "graphql.operation.name",
      c.operationName
    );
  } catch {
  }
  const s = P_(
    (i = n?.networkHeadersToRedact) != null ? i : [],
    r,
    n?.headerKeysToRecord
  );
  t.setAttributes({
    "highlight.type": "http.request",
    "http.request.headers": JSON.stringify(s),
    "http.request.body": o,
    [Xl]: a,
    [ql]: u.pathname,
    [Kl]: u.search
  }), u.searchParams.size > 0 && t.setAttributes({
    // Custom attribute that displays query string params as an object.
    "url.query_params": JSON.stringify(
      Object.fromEntries(u.searchParams)
    )
  });
}, Tb = (t, e, r, n) => n != null && n.some(
  (i) => t.toLowerCase().includes(i)
) ? !1 : F_(
  t,
  e
), Ma = (t) => {
  var e, r, n;
  if (!t.events)
    return;
  const i = t.events, o = {
    unload: nt("unloadEventStart", "unloadEventEnd", i),
    dom_interactive: nt(
      "fetchStart",
      "domInteractive",
      i
    ),
    dom_content_loaded: nt(
      "domContentLoadedEventStart",
      "domContentLoadedEventEnd",
      i
    ),
    dom_complete: nt("fetchStart", "domComplete", i),
    load_event: nt("loadEventStart", "loadEventEnd", i),
    document_load: nt("fetchStart", "loadEventEnd", i),
    first_paint: nt("fetchStart", "firstPaint", i),
    first_contentful_paint: nt(
      "fetchStart",
      "firstContentfulPaint",
      i
    ),
    domain_lookup: nt(
      "domainLookupStart",
      "domainLookupEnd",
      i
    ),
    connect: nt("connectStart", "connectEnd", i),
    request: nt("requestStart", "requestEnd", i),
    response: nt("responseStart", "responseEnd", i)
  }, a = (r = (e = te?.getIntegrations) == null ? void 0 : e.call(te)) != null ? r : [];
  if (o.document_load !== void 0)
    for (const u of a)
      u.recordGauge((n = te?.sessionSecureId) != null ? n : "", {
        name: gp,
        value: o.document_load / 1e6
      });
  Object.entries(o).forEach(([u, c]) => {
    c !== void 0 && (t.setAttribute(`timings.${u}.ns`, c), t.setAttribute(
      `timings.${u}.readable`,
      Zu(c)
    ));
  });
};
function nt(t, e, r) {
  const n = r.find((a) => a.name === t), i = r.find((a) => a.name === e);
  if (!n || !i)
    return;
  const o = n.time[0] * 1e9 + n.time[1];
  return i.time[0] * 1e9 + i.time[1] - o;
}
const bb = (t, e) => {
  const r = {
    domain_lookup: (e.domainLookupEnd - e.domainLookupStart) * 1e9,
    connect: (e.connectEnd - e.connectStart) * 1e9,
    request: (e.responseEnd - e.requestStart) * 1e9,
    response: (e.responseEnd - e.responseStart) * 1e9
  };
  Object.entries(r).forEach(([n, i]) => {
    t.setAttribute(`timings.${n}.ns`, i), t.setAttribute(`timings.${n}.readable`, Zu(i));
  });
}, Zu = (t) => {
  if (t >= 36e11) {
    const e = t / 36e11;
    return `${Number(e.toFixed(1))}h`;
  } else if (t >= 6e10) {
    const e = t / 6e10;
    return `${Number(e.toFixed(1))}m`;
  } else if (t >= 1e9) {
    const e = t / 1e9;
    return `${Number(e.toFixed(1))}s`;
  } else if (t >= 1e6) {
    const e = t / 1e6;
    return `${Number(e.toFixed(1))}ms`;
  } else if (t >= 1e3) {
    const e = t / 1e3;
    return `${Number(e.toFixed(1))}s`;
  } else
    return `${Number(t.toFixed(1))}ns`;
}, ka = (t) => t === !0 ? [/localhost/, /^\//, new RegExp(window.location.host)] : Array.isArray(t) ? t.map(
  (e) => typeof e == "string" ? new RegExp(e) : e
) : /^$/, Ob = 30, Sb = () => new Promise(
  (t) => requestAnimationFrame(
    (e) => requestAnimationFrame((r) => t(r - e))
  )
), wb = () => gt(void 0, null, function* () {
  const t = [];
  for (let e = 0; e < Ob; e++)
    t.push(yield Sb());
  return t.reduce((e, r) => e + r, 0) / t.length;
}), Ab = (t, e) => {
  let r = {}, n = 16.666666666666668;
  wb().then((c) => n = c);
  const i = (c) => {
    var s;
    r != null && r.event || (r = {
      event: c,
      location: window.location.href,
      timerStart: (s = window.performance) == null ? void 0 : s.now()
    }, window.requestAnimationFrame(o));
  }, o = () => {
    if (!(r != null && r.timerStart)) return;
    const c = window.performance.now() - r.timerStart - n;
    a(c), r = {};
  }, a = (c) => {
    const s = ((/* @__PURE__ */ new Date()).getTime() - e) / 1e3;
    t({
      relativeTimestamp: s,
      jankAmount: c,
      querySelector: u(),
      newLocation: window.location.href != r.location ? window.location.href : void 0
    });
  }, u = () => {
    var c;
    return (c = r?.event) != null && c.target ? Ap(r.event.target) : "";
  };
  return window.addEventListener("click", i, !0), window.addEventListener("keydown", i, !0), () => {
    window.removeEventListener("keydown", i, !0), window.removeEventListener("click", i, !0);
  };
}, Lb = typeof window < "u", Da = Lb && "performance" in window && "memory" in performance ? performance : { memory: {} }, Rb = (t, e) => {
  let r = 0, n = 0;
  const i = () => {
    const s = ((/* @__PURE__ */ new Date()).getTime() - e) / 1e3, l = Da.memory.jsHeapSizeLimit || 0, p = Da.memory.usedJSHeapSize || 0;
    t({
      jsHeapSizeLimit: l,
      usedJSHeapSize: p,
      relativeTimestamp: s,
      fps: r
    });
  };
  i();
  let o;
  o = setInterval(() => {
    i();
  }, 1e3);
  let a = 0, u = Date.now();
  const c = function() {
    var s = Date.now();
    a++, s > 1e3 + u && (r = Math.round(a * 1e3 / (s - u)), a = 0, u = s), n = requestAnimationFrame(c);
  };
  return c(), () => {
    clearInterval(o), cancelAnimationFrame(n);
  };
};
var St, Ce, tc, Ur, Di, ec = -1, qt = function(t) {
  addEventListener("pageshow", function(e) {
    e.persisted && (ec = e.timeStamp, t(e));
  }, !0);
}, no = function() {
  return window.performance && performance.getEntriesByType && performance.getEntriesByType("navigation")[0];
}, Kr = function() {
  var t = no();
  return t && t.activationStart || 0;
}, it = function(t, e) {
  var r = no(), n = "navigate";
  return ec >= 0 ? n = "back-forward-cache" : r && (document.prerendering || Kr() > 0 ? n = "prerender" : document.wasDiscarded ? n = "restore" : r.type && (n = r.type.replace(/_/g, "-"))), { name: t, value: e === void 0 ? -1 : e, rating: "good", delta: 0, entries: [], id: "v3-".concat(Date.now(), "-").concat(Math.floor(8999999999999 * Math.random()) + 1e12), navigationType: n };
}, de = function(t, e, r) {
  try {
    if (PerformanceObserver.supportedEntryTypes.includes(t)) {
      var n = new PerformanceObserver(function(i) {
        Promise.resolve().then(function() {
          e(i.getEntries());
        });
      });
      return n.observe(Object.assign({ type: t, buffered: !0 }, r || {})), n;
    }
  } catch {
  }
}, ot = function(t, e, r, n) {
  var i, o;
  return function(a) {
    e.value >= 0 && (a || n) && ((o = e.value - (i || 0)) || i === void 0) && (i = e.value, e.delta = o, e.rating = function(u, c) {
      return u > c[1] ? "poor" : u > c[0] ? "needs-improvement" : "good";
    }(e.value, r), t(e));
  };
}, io = function(t) {
  requestAnimationFrame(function() {
    return requestAnimationFrame(function() {
      return t();
    });
  });
}, Wr = function(t) {
  var e = function(r) {
    r.type !== "pagehide" && document.visibilityState !== "hidden" || t(r);
  };
  addEventListener("visibilitychange", e, !0), addEventListener("pagehide", e, !0);
}, oo = function(t) {
  var e = !1;
  return function(r) {
    e || (t(r), e = !0);
  };
}, ne = -1, Ua = function() {
  return document.visibilityState !== "hidden" || document.prerendering ? 1 / 0 : 0;
}, jr = function(t) {
  document.visibilityState === "hidden" && ne > -1 && (ne = t.type === "visibilitychange" ? t.timeStamp : 0, Nb());
}, ja = function() {
  addEventListener("visibilitychange", jr, !0), addEventListener("prerenderingchange", jr, !0);
}, Nb = function() {
  removeEventListener("visibilitychange", jr, !0), removeEventListener("prerenderingchange", jr, !0);
}, ao = function() {
  return ne < 0 && (ne = Ua(), ja(), qt(function() {
    setTimeout(function() {
      ne = Ua(), ja();
    }, 0);
  })), { get firstHiddenTime() {
    return ne;
  } };
}, Ke = function(t) {
  document.prerendering ? addEventListener("prerenderingchange", function() {
    return t();
  }, !0) : t();
}, Ba = [1800, 3e3], rc = function(t, e) {
  e = e || {}, Ke(function() {
    var r, n = ao(), i = it("FCP"), o = de("paint", function(a) {
      a.forEach(function(u) {
        u.name === "first-contentful-paint" && (o.disconnect(), u.startTime < n.firstHiddenTime && (i.value = Math.max(u.startTime - Kr(), 0), i.entries.push(u), r(!0)));
      });
    });
    o && (r = ot(t, i, Ba, e.reportAllChanges), qt(function(a) {
      i = it("FCP"), r = ot(t, i, Ba, e.reportAllChanges), io(function() {
        i.value = performance.now() - a.timeStamp, r(!0);
      });
    }));
  });
}, $a = [0.1, 0.25], Cb = function(t, e) {
  e = e || {}, rc(oo(function() {
    var r, n = it("CLS", 0), i = 0, o = [], a = function(c) {
      c.forEach(function(s) {
        if (!s.hadRecentInput) {
          var l = o[0], p = o[o.length - 1];
          i && s.startTime - p.startTime < 1e3 && s.startTime - l.startTime < 5e3 ? (i += s.value, o.push(s)) : (i = s.value, o = [s]);
        }
      }), i > n.value && (n.value = i, n.entries = o, r());
    }, u = de("layout-shift", a);
    u && (r = ot(t, n, $a, e.reportAllChanges), Wr(function() {
      a(u.takeRecords()), r(!0);
    }), qt(function() {
      i = 0, n = it("CLS", 0), r = ot(t, n, $a, e.reportAllChanges), io(function() {
        return r();
      });
    }), setTimeout(r, 0));
  }));
}, Se = { passive: !0, capture: !0 }, xb = /* @__PURE__ */ new Date(), Fa = function(t, e) {
  St || (St = e, Ce = t, tc = /* @__PURE__ */ new Date(), ic(removeEventListener), nc());
}, nc = function() {
  if (Ce >= 0 && Ce < tc - xb) {
    var t = { entryType: "first-input", name: St.type, target: St.target, cancelable: St.cancelable, startTime: St.timeStamp, processingStart: St.timeStamp + Ce };
    Ur.forEach(function(e) {
      e(t);
    }), Ur = [];
  }
}, Pb = function(t) {
  if (t.cancelable) {
    var e = (t.timeStamp > 1e12 ? /* @__PURE__ */ new Date() : performance.now()) - t.timeStamp;
    t.type == "pointerdown" ? function(r, n) {
      var i = function() {
        Fa(r, n), a();
      }, o = function() {
        a();
      }, a = function() {
        removeEventListener("pointerup", i, Se), removeEventListener("pointercancel", o, Se);
      };
      addEventListener("pointerup", i, Se), addEventListener("pointercancel", o, Se);
    }(e, t) : Fa(e, t);
  }
}, ic = function(t) {
  ["mousedown", "keydown", "touchstart", "pointerdown"].forEach(function(e) {
    return t(e, Pb, Se);
  });
}, Va = [100, 300], Ib = function(t, e) {
  e = e || {}, Ke(function() {
    var r, n = ao(), i = it("FID"), o = function(c) {
      c.startTime < n.firstHiddenTime && (i.value = c.processingStart - c.startTime, i.entries.push(c), r(!0));
    }, a = function(c) {
      c.forEach(o);
    }, u = de("first-input", a);
    r = ot(t, i, Va, e.reportAllChanges), u && Wr(oo(function() {
      a(u.takeRecords()), u.disconnect();
    })), u && qt(function() {
      var c;
      i = it("FID"), r = ot(t, i, Va, e.reportAllChanges), Ur = [], Ce = -1, St = null, ic(addEventListener), c = o, Ur.push(c), nc();
    });
  });
}, oc = 0, zn = 1 / 0, ur = 0, Mb = function(t) {
  t.forEach(function(e) {
    e.interactionId && (zn = Math.min(zn, e.interactionId), ur = Math.max(ur, e.interactionId), oc = ur ? (ur - zn) / 7 + 1 : 0);
  });
}, ac = function() {
  return Di ? oc : performance.interactionCount || 0;
}, kb = function() {
  "interactionCount" in performance || Di || (Di = de("event", Mb, { type: "event", buffered: !0, durationThreshold: 0 }));
}, Ga = [200, 500], sc = 0, Ha = function() {
  return ac() - sc;
}, lt = [], Xn = {}, za = function(t) {
  var e = lt[lt.length - 1], r = Xn[t.interactionId];
  if (r || lt.length < 10 || t.duration > e.latency) {
    if (r) r.entries.push(t), r.latency = Math.max(r.latency, t.duration);
    else {
      var n = { id: t.interactionId, latency: t.duration, entries: [t] };
      Xn[n.id] = n, lt.push(n);
    }
    lt.sort(function(i, o) {
      return o.latency - i.latency;
    }), lt.splice(10).forEach(function(i) {
      delete Xn[i.id];
    });
  }
}, Db = function(t, e) {
  e = e || {}, Ke(function() {
    var r;
    kb();
    var n, i = it("INP"), o = function(u) {
      u.forEach(function(l) {
        l.interactionId && za(l), l.entryType === "first-input" && !lt.some(function(p) {
          return p.entries.some(function(f) {
            return l.duration === f.duration && l.startTime === f.startTime;
          });
        }) && za(l);
      });
      var c, s = (c = Math.min(lt.length - 1, Math.floor(Ha() / 50)), lt[c]);
      s && s.latency !== i.value && (i.value = s.latency, i.entries = s.entries, n());
    }, a = de("event", o, { durationThreshold: (r = e.durationThreshold) !== null && r !== void 0 ? r : 40 });
    n = ot(t, i, Ga, e.reportAllChanges), a && ("interactionId" in PerformanceEventTiming.prototype && a.observe({ type: "first-input", buffered: !0 }), Wr(function() {
      o(a.takeRecords()), i.value < 0 && Ha() > 0 && (i.value = 0, i.entries = []), n(!0);
    }), qt(function() {
      lt = [], sc = ac(), i = it("INP"), n = ot(t, i, Ga, e.reportAllChanges);
    }));
  });
}, Xa = [2500, 4e3], qn = {}, Ub = function(t, e) {
  e = e || {}, Ke(function() {
    var r, n = ao(), i = it("LCP"), o = function(c) {
      var s = c[c.length - 1];
      s && s.startTime < n.firstHiddenTime && (i.value = Math.max(s.startTime - Kr(), 0), i.entries = [s], r());
    }, a = de("largest-contentful-paint", o);
    if (a) {
      r = ot(t, i, Xa, e.reportAllChanges);
      var u = oo(function() {
        qn[i.id] || (o(a.takeRecords()), a.disconnect(), qn[i.id] = !0, r(!0));
      });
      ["keydown", "click"].forEach(function(c) {
        addEventListener(c, function() {
          return setTimeout(u, 0);
        }, !0);
      }), Wr(u), qt(function(c) {
        i = it("LCP"), r = ot(t, i, Xa, e.reportAllChanges), io(function() {
          i.value = performance.now() - c.timeStamp, qn[i.id] = !0, r(!0);
        });
      });
    }
  });
}, qa = [800, 1800], jb = function t(e) {
  document.prerendering ? Ke(function() {
    return t(e);
  }) : document.readyState !== "complete" ? addEventListener("load", function() {
    return t(e);
  }, !0) : setTimeout(e, 0);
}, Bb = function(t, e) {
  e = e || {};
  var r = it("TTFB"), n = ot(t, r, qa, e.reportAllChanges);
  jb(function() {
    var i = no();
    if (i) {
      var o = i.responseStart;
      if (o <= 0 || o > performance.now()) return;
      r.value = Math.max(o - Kr(), 0), r.entries = [i], n(!0), qt(function() {
        r = it("TTFB", 0), (n = ot(t, r, qa, e.reportAllChanges))(!0);
      });
    }
  });
};
const $b = (t) => (Cb(t), rc(t), Ib(t), Ub(t), Bb(t), Db(t), () => {
}), Zt = typeof navigator < "u" && "connection" in navigator ? navigator.connection : {}, Fb = (t, e) => {
  const r = () => {
    const i = ((/* @__PURE__ */ new Date()).getTime() - e) / 1e3;
    t({
      relativeTimestamp: i,
      downlink: Zt.downlink,
      downlinkMax: Zt.downlinkMax,
      effectiveType: Zt.effectiveType,
      rtt: Zt.rtt,
      saveData: Zt.saveData,
      type: Zt.type
    });
  };
  r();
  let n;
  return n = setInterval(() => {
    r();
  }, 1e3), () => {
    clearInterval(n);
  };
}, Vb = () => {
  if (!("performance" in window && "memory" in performance))
    return {
      getDeviceDetails: void 0,
      getCurrentDeviceDetails: void 0
    };
  const t = window.performance;
  return {
    getDeviceDetails: () => ({
      deviceMemory: Gb(
        navigator.deviceMemory || 0
      )
    }),
    getCurrentDeviceDetails: () => {
      const e = Kn(
        t.memory.jsHeapSizeLimit
      ), r = Kn(
        t.memory.totalJSHeapSize
      ), n = Kn(
        t.memory.usedJSHeapSize
      );
      return {
        jsHeapSizeLimit: e,
        totalJSHeapSize: r,
        usedJSHeapSize: n
      };
    }
  };
}, Kn = (t) => t / Math.pow(1e3, 2), Gb = (t) => 1024 * t;
function Hb(t) {
  return "regexValue" in t;
}
function zb(t) {
  return "matchValue" in t;
}
function Xb(t) {
  const e = Math.trunc(t);
  return e === 1 ? !0 : e === 0 ? !1 : Math.floor(Math.random() * e) === 0;
}
class qb {
  /**
   * @param config The sampling configuration.
   * @param sampler The sampler to use. This is intended to be used for testing purposes.
   */
  constructor(e = Xb) {
    k(this, "regexCache", /* @__PURE__ */ new Map()), k(this, "config"), this.sampler = e;
  }
  setConfig(e) {
    this.config = e;
  }
  isSamplingEnabled() {
    var e, r, n, i;
    return !!((r = (e = this.config) == null ? void 0 : e.logs) != null && r.length || (i = (n = this.config) == null ? void 0 : n.spans) != null && i.length);
  }
  shouldSample(e) {
    var r, n;
    return e.name === Wu ? this.sampleLog((r = this.config) == null ? void 0 : r.logs, e) : this.sampleSpan((n = this.config) == null ? void 0 : n.spans, e);
  }
  /**
   * Check if a value matches a match config.
   */
  matchesValue(e, r) {
    if (!e)
      return !1;
    if (zb(e))
      return e.matchValue === r;
    if (Hb(e)) {
      const n = e.regexValue;
      if (n === null)
        return !1;
      this.regexCache.has(n) || this.regexCache.set(n, new RegExp(n));
      const i = this.regexCache.get(n);
      if (typeof r == "string")
        return i.test(r);
    }
    return !1;
  }
  /**
   * Check if the attributes match the attribute configs.
   */
  matchesAttributes(e, r) {
    if (e)
      for (const n of e) {
        let i = !1;
        for (const o of Object.keys(r))
          if (this.matchesValue(n.key, o)) {
            const a = r[o];
            if (this.matchesValue(
              n.attribute,
              a
            )) {
              i = !0;
              break;
            }
          }
        if (!i)
          return !1;
      }
    return !0;
  }
  matchEvent(e, r) {
    return !(e.name && !this.matchesValue(e.name, r.name) || e.attributes && (!r.attributes || !this.matchesAttributes(
      e.attributes,
      r.attributes
    )));
  }
  matchesEvents(e, r) {
    if (e)
      for (const n of e) {
        let i = !1;
        for (const o of r)
          if (this.matchEvent(n, o)) {
            i = !0;
            break;
          }
        if (!i)
          return !1;
      }
    return !0;
  }
  /**
   * Attempts to match the span to the config. The span will match only if all defined conditions are met.
   *
   * @param config The config to match against.
   * @param name The name of the span to match.
   * @param attributes The attributes of the span to match.
   * @returns True if the span matches the config, false otherwise.
   */
  matchesSpanConfig(e, r) {
    return !(e.name && !this.matchesValue(e.name, r.name) || !this.matchesAttributes(e.attributes, r.attributes) || !this.matchesEvents(e.events, r.events));
  }
  matchesLogConfig(e, r) {
    if (e.severityText) {
      const n = r[Yu];
      if (!this.matchesValue(e.severityText, n))
        return !1;
    }
    if (e.message) {
      const n = r[Ju];
      if (!this.matchesValue(e.message, n))
        return !1;
    }
    return !!this.matchesAttributes(e.attributes, r);
  }
  /**
   * Sample a span based on the sampling configuration.
   *
   * @param configs The sampling configuration.
   * @param name The name of the span to sample.
   * @param attributes The attributes of the span to sample.
   * @returns The sampling result.
   */
  sampleSpan(e, r) {
    if (e) {
      for (const n of e)
        if (this.matchesSpanConfig(n, r))
          return {
            sample: this.sampler(n.samplingRatio),
            attributes: {
              [xa]: n.samplingRatio
            }
          };
    }
    return {
      sample: !0
    };
  }
  /**
   * Sample a log based on the sampling configuration.
   *
   * @param configs The sampling configuration.
   * @param attributes The attributes of the log to sample.
   * @returns The sampling result.
   */
  sampleLog(e, r) {
    if (e) {
      for (const n of e)
        if (this.matchesLogConfig(n, r.attributes))
          return {
            sample: this.sampler(n.samplingRatio),
            attributes: {
              [xa]: n.samplingRatio
            }
          };
    }
    return {
      sample: !0
    };
  }
}
const Ka = () => {
  const t = {
    end: () => {
    },
    spanContext: () => ({
      traceId: "",
      spanId: "",
      traceFlags: 0
    }),
    setAttribute: (e, r) => t,
    setAttributes: (e) => t,
    addEvent: (e, r, n) => t,
    addLinks: (e) => t,
    setStatus: (e) => t,
    recordException: () => {
    },
    addLink: () => t,
    updateName: () => t,
    isRecording: () => !1
  };
  return t;
}, Kb = "exception", Wb = function(t, e, r) {
  if (!t)
    return;
  const n = P({}, r);
  typeof e == "string" ? n[rn] = e : e && (e.code ? n[nn] = e.code.toString() : e.name && (n[nn] = e.name), e.message && (n[rn] = e.message), e.stack && (n[Fl] = e.stack)), n[nn] || n[rn] ? t.addEvent(Kb, n) : Rt(
    "otel",
    "recordException",
    "warn",
    `Failed to record an exception ${e}`
  );
};
class Yb {
  constructor(e) {
    k(this, "organizationID"), k(this, "_options"), k(this, "_integrations", []), k(this, "_gauges", /* @__PURE__ */ new Map()), k(this, "_counters", /* @__PURE__ */ new Map()), k(this, "_histograms", /* @__PURE__ */ new Map()), k(this, "_up_down_counters", /* @__PURE__ */ new Map()), k(this, "sampler", new qb()), k(this, "_started", !1), k(this, "graphqlSDK"), this._options = e, this.organizationID = e.projectId;
  }
  start() {
    return gt(this, null, function* () {
      var e, r, n, i, o, a, u, c, s, l, p, f, m, v, y, _, E;
      if (this._started)
        return;
      this._started = !0, mb(
        {
          backendUrl: (r = (e = this._options) == null ? void 0 : e.backendUrl) != null ? r : "https://pub.observability.app.launchdarkly.com",
          otlpEndpoint: (o = (i = (n = this._options) == null ? void 0 : n.otel) == null ? void 0 : i.otlpEndpoint) != null ? o : "https://otel.observability.app.launchdarkly.com",
          projectId: this._options.projectId,
          sessionSecureId: this._options.sessionSecureId,
          environment: (u = (a = this._options) == null ? void 0 : a.environment) != null ? u : "production",
          networkRecordingOptions: typeof ((c = this._options) == null ? void 0 : c.networkRecording) == "object" ? this._options.networkRecording : void 0,
          tracingOrigins: (s = this._options) == null ? void 0 : s.tracingOrigins,
          serviceName: (p = (l = this._options) == null ? void 0 : l.serviceName) != null ? p : "browser",
          serviceVersion: (f = this._options) == null ? void 0 : f.version,
          instrumentations: (v = (m = this._options) == null ? void 0 : m.otel) == null ? void 0 : v.instrumentations,
          eventNames: (_ = (y = this._options) == null ? void 0 : y.otel) == null ? void 0 : _.eventNames,
          getIntegrations: () => this._integrations
        },
        this.sampler
      ), this._gauges.clear(), this._counters.clear(), this._histograms.clear(), this._up_down_counters.clear();
      const L = new vl(
        (E = this._options.backendUrl) != null ? E : "https://pub.observability.app.launchdarkly.com",
        {
          headers: {}
        }
      );
      this.graphqlSDK = Ul(L, sp()), yield this.configureSampling(), this.setupListeners();
    });
  }
  stop() {
    return gt(this, null, function* () {
      this._started && (this._started = !1, yield Eb());
    });
  }
  configureSampling() {
    return gt(this, null, function* () {
      try {
        const e = yield this.graphqlSDK.GetSamplingConfig({
          organization_verbose_id: `${this.organizationID}`
        });
        this.sampler.setConfig(e.sampling);
      } catch (e) {
        Lt(
          "sampling",
          "warn",
          `LaunchDarkly Observability: Failed to configure sampling: ${e}`
        );
      }
    });
  }
  _recordLog(e, r, n, i) {
    this.startSpan(Wu, (o) => {
      const a = typeof e == "string" ? e : Ae(e), u = i ? Ae(i.map((c) => c.toString())) : void 0;
      if (o?.addEvent("log", P({
        [Yu]: r,
        [Ju]: a,
        "code.stacktrace": u
      }, n)), this._options.reportConsoleErrors && r === "error") {
        o?.recordException(new Error(a)), o?.setStatus({
          code: Lr.ERROR,
          message: a
        });
        const c = new Error(a);
        i && (c.stack = u), this.recordError(c);
      }
    });
  }
  _recordErrorMessage(e, r) {
    try {
      e.payload && (r = P(P({}, JSON.parse(e.payload)), r || {}));
    } catch {
    }
    this.startSpan("highlight.exception", (o) => {
      var a;
      Wb(o, (a = e.error) != null ? a : new Error(e.event), {
        [vb]: e.id
      }), o?.setAttributes(P({
        event: e.event,
        type: e.type,
        url: e.url,
        source: e.source,
        lineNumber: e.lineNumber,
        columnNumber: e.columnNumber
      }, r));
    });
    const n = e, i = Dp(n, ["payload"]);
    for (const o of this._integrations)
      o.error(bt(), rt(P({}, i), {
        payload: JSON.stringify(r)
      }));
  }
  recordError(e, r, n, i, o) {
    var a, u, c, s;
    e = e || new Error("Unknown error"), e instanceof Error && e.cause && (n = rt(P({}, n), {
      "exception.cause": JSON.stringify(e.cause)
    }));
    let l = r ? r + ":" + e.message : e.message;
    o === "React.ErrorBoundary" && (l = "ErrorBoundary: " + l);
    const p = Gr(e), f = {
      error: e,
      event: l,
      type: o ?? "custom",
      url: window.location.href,
      source: i ?? "frontend",
      lineNumber: (a = p[0]) != null && a.lineNumber ? (u = p[0]) == null ? void 0 : u.lineNumber : 0,
      columnNumber: (c = p[0]) != null && c.columnNumber ? (s = p[0]) == null ? void 0 : s.columnNumber : 0,
      stackTrace: p,
      timestamp: (/* @__PURE__ */ new Date()).toISOString(),
      id: Ls()
    };
    this._recordErrorMessage(f, n);
  }
  recordCount(e) {
    var r;
    let n = this._counters.get(e.name);
    if (!n) {
      if (n = (r = sr()) == null ? void 0 : r.createCounter(e.name), !n) return;
      this._counters.set(e.name, n);
    }
    n.add(e.value, rt(P({}, e.attributes), {
      "highlight.session_id": bt()
    }));
  }
  recordGauge(e) {
    var r, n, i, o;
    let a = this._gauges.get(e.name);
    if (!a) {
      if (a = (r = sr()) == null ? void 0 : r.createGauge(e.name), !a) return;
      this._gauges.set(e.name, a);
    }
    a.record(e.value, rt(P({}, e.attributes), {
      "highlight.session_id": bt()
    }));
    const u = {
      name: e.name,
      value: e.value,
      category: (n = e.attributes) == null ? void 0 : n.category,
      group: (o = (i = e.attributes) == null ? void 0 : i.group) == null ? void 0 : o.toString(),
      tags: e.attributes ? Object.entries(e.attributes).map(([c, s]) => {
        var l;
        return {
          name: c ?? "",
          value: (l = s?.toString()) != null ? l : ""
        };
      }) : []
    };
    for (const c of this._integrations)
      c.recordGauge(
        bt(),
        u
      );
  }
  recordIncr(e) {
    this.recordCount(rt(P({}, e), { value: 1 }));
  }
  recordHistogram(e) {
    var r;
    let n = this._histograms.get(e.name);
    if (!n) {
      if (n = (r = sr()) == null ? void 0 : r.createHistogram(e.name), !n) return;
      this._histograms.set(e.name, n);
    }
    n.record(e.value, rt(P({}, e.attributes), {
      "highlight.session_id": bt()
    }));
  }
  recordUpDownCounter(e) {
    var r;
    let n = this._up_down_counters.get(e.name);
    if (!n) {
      if (n = (r = sr()) == null ? void 0 : r.createUpDownCounter(e.name), !n) return;
      this._up_down_counters.set(e.name, n);
    }
    n.add(e.value, rt(P({}, e.attributes), {
      "highlight.session_id": bt()
    }));
  }
  startSpan(e, r, n, i) {
    const o = Pa();
    if (!o) {
      const u = Ka();
      return i === void 0 && n === void 0 ? r(u) : i === void 0 ? n(u) : i(u);
    }
    const a = (u, c) => {
      const s = c(u);
      return s instanceof Promise ? s.finally(() => u.end()) : (u.end(), s);
    };
    return i === void 0 && n === void 0 ? o.startActiveSpan(
      e,
      (u) => a(u, r)
    ) : i === void 0 ? o.startActiveSpan(
      e,
      r,
      (u) => a(u, n)
    ) : o.startActiveSpan(
      e,
      r,
      n,
      (u) => a(u, i)
    );
  }
  startManualSpan(e, r, n, i) {
    const o = Pa();
    if (!o) {
      const a = Ka();
      return i === void 0 && n === void 0 ? r(a) : i === void 0 ? n(a) : i(a);
    }
    return i === void 0 && n === void 0 ? o.startActiveSpan(e, r) : i === void 0 ? o.startActiveSpan(
      e,
      r,
      n
    ) : o.startActiveSpan(
      e,
      r,
      n,
      i
    );
  }
  register(e, r) {
    this._integrations.push(new bp(e, r));
  }
  getHooks(e) {
    return this._integrations.flatMap((r) => {
      var n, i;
      return (i = (n = r.getHooks) == null ? void 0 : n.call(r, e)) != null ? i : [];
    });
  }
  submitViewportMetrics({
    height: e,
    width: r,
    availHeight: n,
    availWidth: i
  }) {
    this.recordGauge({
      name: xt.ViewportHeight,
      value: e,
      attributes: {
        category: st.Device,
        group: window.location.href
      }
    }), this.recordGauge({
      name: xt.ViewportWidth,
      value: r,
      attributes: {
        category: st.Device,
        group: window.location.href
      }
    }), this.recordGauge({
      name: xt.ScreenHeight,
      value: n,
      attributes: {
        category: st.Device,
        group: window.location.href
      }
    }), this.recordGauge({
      name: xt.ScreenWidth,
      value: i,
      attributes: {
        category: st.Device,
        group: window.location.href
      }
    }), this.recordGauge({
      name: xt.ViewportArea,
      value: e * r,
      attributes: {
        category: st.Device,
        group: window.location.href
      }
    });
  }
  setupListeners() {
    var e;
    this._options.disableConsoleRecording || $p(
      (n) => {
        var i;
        this._recordLog(
          (i = n.value) == null ? void 0 : i.join(" "),
          n.type,
          n.attributes ? JSON.parse(n.attributes) : {},
          n.trace
        );
      },
      {
        level: (e = this._options.consoleMethodsToRecord) != null ? e : [
          ...Up
        ],
        logger: "console",
        stringifyOptions: {
          depthOfLimit: 10,
          numOfKeysLimit: 100,
          stringLengthLimit: 1e3
        }
      }
    ), this._options.enablePerformanceRecording !== !1 && (Rb((n) => {
      Object.entries(n).filter(([i]) => i !== "relativeTimestamp").forEach(
        ([i, o]) => o && this.recordGauge({
          name: i,
          value: o,
          attributes: {
            category: st.Performance,
            group: window.location.href
          }
        })
      );
    }, 0), Ab((n) => {
      this.recordGauge({
        name: "Jank",
        value: n.jankAmount,
        attributes: {
          category: st.WebVital,
          group: n.querySelector
        }
      });
    }, 0)), Wp(
      (n) => {
        var i;
        if (Jp.includes(n.event) || Qp.some(
          (u) => n.event.includes(u)
        ))
          return;
        const o = new Error(n.event);
        o.stack = Ae(n.stackTrace.map((u) => u.toString()));
        let a = {};
        try {
          n.payload && (a = JSON.parse(n.payload));
        } catch {
        }
        this._recordErrorMessage(
          rt(P({}, n), { error: (i = n.error) != null ? i : o }),
          a
        );
      },
      { enablePromisePatch: !!this._options.enablePromisePatch }
    ), $b((n) => {
      const { name: i, value: o } = n;
      this.recordGauge({
        name: i,
        value: o,
        attributes: {
          group: window.location.href,
          category: st.WebVital
        }
      });
    }), Lp((n) => {
      this.submitViewportMetrics(n);
    }), Fb((n) => {
      const i = {
        category: st.Performance,
        group: window.location.href
      };
      n.saveData !== void 0 && (i.saveData = n.saveData.toString()), n.effectiveType !== void 0 && (i.effectiveType = n.effectiveType.toString()), n.type !== void 0 && (i.type = n.type.toString()), Object.entries(n).filter(([o]) => o !== "relativeTimestamp").forEach(([o, a]) => {
        $l(a) && this.recordGauge({
          name: o,
          value: a,
          attributes: i
        });
      });
    }, (/* @__PURE__ */ new Date()).getTime());
    const { getDeviceDetails: r } = Vb();
    r && this.recordGauge({
      name: xt.DeviceMemory,
      value: r().deviceMemory,
      attributes: {
        category: st.Device,
        group: window.location.href
      }
    });
  }
  recordLog(e, r, n) {
    return this._recordLog(e, r, n);
  }
}
class c0 extends xp {
  constructor(e) {
    super(e), k(this, "observe"), k(this, "options"), this.options = e;
  }
  initialize(e, r) {
    try {
      if (typeof window > "u" || typeof document > "u") {
        console.warn(
          "@launchdarkly/observability is not initializing because it is not supported in this environment."
        );
        return;
      }
      if (!e) {
        console.warn(
          "@launchdarkly/observability is not initializing because the SDK credential is undefined."
        );
        return;
      }
      this.configureSession(e, r), this.observe = new Yb(rt(P({}, r), {
        projectId: e,
        sessionSecureId: this.sessionSecureID
      })), r != null && r.manualStart || this.observe.start(), re.load(this.observe);
    } catch (n) {
      Lt(
        "Error initializing @launchdarkly/observability SDK",
        "error",
        n
      );
    }
  }
  getMetadata() {
    return {
      name: "@launchdarkly/observability"
    };
  }
  register(e, r) {
    var n;
    (n = this.observe) == null || n.register(e, r);
  }
  getHooks(e) {
    var r, n, i, o;
    const a = P(P({
      [Hl]: e.sdk.name,
      [zl]: e.sdk.version,
      [cp]: e.clientSideId,
      [dp]: "LaunchDarkly"
    }, (r = e.application) != null && r.id ? { [mp]: e.application.id } : {}), (n = e.application) != null && n.version ? {
      [yp]: e.application.version
    } : {});
    return this.initialize(
      (o = (i = e.sdkKey) != null ? i : e.mobileKey) != null ? o : e.clientSideId,
      this.options
    ), [
      {
        getMetadata: () => ({
          name: "@launchdarkly/observability/hooks"
        }),
        afterIdentify: (u, c, s) => {
          var l, p, f, m, v, y, _, E;
          for (const L of (f = (p = (l = this.observe) == null ? void 0 : l.getHooks) == null ? void 0 : p.call(l, e)) != null ? f : [])
            (m = L.afterIdentify) == null || m.call(L, u, c, s);
          if (s.status === "completed") {
            const L = rt(P({}, Eo(u.context)), {
              key: (_ = (y = (v = this.options) == null ? void 0 : v.contextFriendlyName) == null ? void 0 : y.call(
                v,
                u.context
              )) != null ? _ : an(u.context),
              timeout: u.timeout,
              canonicalKey: an(u.context),
              [Ep]: s.status
            });
            (E = this.observe) == null || E.recordLog("LD.identify", "info", P(P({}, a), L));
          }
          return c;
        },
        afterEvaluation: (u, c, s) => {
          var l, p, f, m, v;
          for (const E of (f = (p = (l = this.observe) == null ? void 0 : l.getHooks) == null ? void 0 : p.call(l, e)) != null ? f : [])
            (m = E.afterEvaluation) == null || m.call(E, u, c, s);
          const y = P({
            [lp]: u.flagKey,
            [hp]: JSON.stringify(s.value)
          }, s.variationIndex ? {
            [vp]: s.variationIndex
          } : {});
          if (s.reason)
            for (const E in yo) {
              const L = E, U = s.reason[L];
              U && (y[yo[L]] = U);
            }
          u.context && (y[pp] = JSON.stringify(Eo(u.context)), y[fp] = an(u.context));
          const _ = P(P({}, a), y);
          return (v = this.observe) == null || v.startSpan(up, (E) => {
            E && E.addEvent(W, _);
          }), c;
        },
        afterTrack: (u) => {
          var c, s, l, p, f;
          for (const m of (l = (s = (c = this.observe) == null ? void 0 : c.getHooks) == null ? void 0 : s.call(c, e)) != null ? l : [])
            (p = m.afterTrack) == null || p.call(m, u);
          (f = this.observe) == null || f.recordLog("LD.track", "info", P(rt(P({}, a), {
            key: u.key,
            value: u.metricValue
          }), typeof u.data == "object" ? u.data : {}));
        }
      }
    ];
  }
}
export {
  re as LDObserve,
  c0 as default
};
//# sourceMappingURL=observability.js.map
